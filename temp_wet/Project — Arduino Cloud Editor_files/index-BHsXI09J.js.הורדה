function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MainPage-CKMBo09N.js","assets/b-split-L8YSHBaL.js","assets/b-split-Luue7qqd.css","assets/c-split-tEjWOw3m.js","assets/a-split-D-MSsf_c.js","assets/c-split-nV9jRXZK.css","assets/hotjar-CL9GZ_Rf.js","assets/MainPage-DlqhmRbR.css","assets/SerialMonitorPage-7OziDrzl.js","assets/index-CIyCl6CS.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var ap=Object.defineProperty;var cp=(e,t,r)=>t in e?ap(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var sl=(e,t,r)=>(cp(e,typeof t!="symbol"?t+"":t,r),r);import{i as vs,au as up,r as Oe,av as lp,aw as fp,ax as hp,ay as dp,az as pp,aA as mp,k as X,aB as gp,aC as vp,aD as yp,aE as bp,aF as wp,aG as wf,aH as xf,aI as _f,aJ as Ef,aK as Sf,aL as al,aM as xp,aN as bc,aO as Cf,aP as kf,aQ as Af,aR as If,aS as _p,aT as Ep,aU as Sp,aV as cl,aW as Cp,aX as qn,aY as va,aZ as kp,a8 as Ap,a_ as Ip,a$ as Rp,b0 as Tp,b1 as Op,b2 as Np,b3 as Lp,b4 as Pp,b5 as Bp,b6 as Fp,b7 as Dp,j as Hr,y as un,b8 as jp,l as ys,b9 as ir,ba as Mp,bb as Up,bc as $p,t as zp,bd as Rf,be as Tf,bf as wc,H as Gp,bg as Vp,bh as qp,bi as Hp,bj as Wp,bk as tr,bl as Kp,bm as Of,bn as Nf,bo as Zp,bp as Xi,bq as Yp,E as Xp,ac as Qp,ah as Lf,br as Pf}from"./b-split-L8YSHBaL.js";import{d as Qo,C as at,a as Jp,g as em,c as tm,s as rm,b as nm,A as ul,l as im,e as om,B as In,U as Pi,f as sm,h as xc,i as ll,u as Bf,j as am,k as Mr,m as cm,n as um,o as lm,p as fm,q as Ff,t as _c,r as hm,v as dm,w as pm,x as ki,y as mm,z as gm,D as vm,E as ym,F as bm,G as wm,H as xm,I as _m,J as Em,K as Cr,N as qa,L as Sm,M as Cm,O as km,P as Ec,Q as Am,R as Im,S as Rm,T as Tm,V as kn,W as Qi,X as Jo,Y as Sc,Z as Om,_ as Nm,$ as ln,a0 as ei,a1 as Lm,a2 as bs,a3 as Pm,a4 as Bm,a5 as Fm,a6 as Dm,a7 as jm,a8 as Mm,a9 as Df,aa as Um,ab as $m,ac as jf,ad as zm,ae as Mf,af as Uf,ag as Gm,ah as Vm,ai as qm,aj as Hm,ak as Wm,al as _r,am as $f,an as Km,ao as Zm,ap as Ym,aq as ws,ar as es,as as Br,at as Xm,au as Qm,av as fl,aw as Jm,ax as zf,ay as eg,az as tg,aA as rg,aB as ng,aC as ig,aD as Rn,aE as og,aF as tn,aG as Cc,aH as sg,aI as Gf,aJ as kc,aK as Ac,aL as Vf,aM as ag,aN as cg,aO as hl,aP as ya,aQ as Ni,aR as nn,aS as ug,aT as lg,aU as fg,aV as ba,aW as Ai,aX as dl,aY as hg}from"./c-split-tEjWOw3m.js";import"./a-split-D-MSsf_c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var Ic={},xs={};xs.byteLength=mg;xs.toByteArray=vg;xs.fromByteArray=wg;var jr=[],gr=[],dg=typeof Uint8Array<"u"?Uint8Array:Array,wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Mn=0,pg=wa.length;Mn<pg;++Mn)jr[Mn]=wa[Mn],gr[wa.charCodeAt(Mn)]=Mn;gr[45]=62;gr[95]=63;function qf(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function mg(e){var t=qf(e),r=t[0],n=t[1];return(r+n)*3/4-n}function gg(e,t,r){return(t+r)*3/4-r}function vg(e){var t,r=qf(e),n=r[0],o=r[1],s=new dg(gg(e,n,o)),u=0,i=o>0?n-4:n,g;for(g=0;g<i;g+=4)t=gr[e.charCodeAt(g)]<<18|gr[e.charCodeAt(g+1)]<<12|gr[e.charCodeAt(g+2)]<<6|gr[e.charCodeAt(g+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=t&255;return o===2&&(t=gr[e.charCodeAt(g)]<<2|gr[e.charCodeAt(g+1)]>>4,s[u++]=t&255),o===1&&(t=gr[e.charCodeAt(g)]<<10|gr[e.charCodeAt(g+1)]<<4|gr[e.charCodeAt(g+2)]>>2,s[u++]=t>>8&255,s[u++]=t&255),s}function yg(e){return jr[e>>18&63]+jr[e>>12&63]+jr[e>>6&63]+jr[e&63]}function bg(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),o.push(yg(n));return o.join("")}function wg(e){for(var t,r=e.length,n=r%3,o=[],s=16383,u=0,i=r-n;u<i;u+=s)o.push(bg(e,u,u+s>i?i:u+s));return n===1?(t=e[r-1],o.push(jr[t>>2]+jr[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(jr[t>>10]+jr[t>>4&63]+jr[t<<2&63]+"=")),o.join("")}var Rc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Rc.read=function(e,t,r,n,o){var s,u,i=o*8-n-1,g=(1<<i)-1,f=g>>1,a=-7,y=r?o-1:0,l=r?-1:1,v=e[t+y];for(y+=l,s=v&(1<<-a)-1,v>>=-a,a+=i;a>0;s=s*256+e[t+y],y+=l,a-=8);for(u=s&(1<<-a)-1,s>>=-a,a+=n;a>0;u=u*256+e[t+y],y+=l,a-=8);if(s===0)s=1-f;else{if(s===g)return u?NaN:(v?-1:1)*(1/0);u=u+Math.pow(2,n),s=s-f}return(v?-1:1)*u*Math.pow(2,s-n)};Rc.write=function(e,t,r,n,o,s){var u,i,g,f=s*8-o-1,a=(1<<f)-1,y=a>>1,l=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:s-1,I=n?1:-1,d=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,u=a):(u=Math.floor(Math.log(t)/Math.LN2),t*(g=Math.pow(2,-u))<1&&(u--,g*=2),u+y>=1?t+=l/g:t+=l*Math.pow(2,1-y),t*g>=2&&(u++,g/=2),u+y>=a?(i=0,u=a):u+y>=1?(i=(t*g-1)*Math.pow(2,o),u=u+y):(i=t*Math.pow(2,y-1)*Math.pow(2,o),u=0));o>=8;e[r+v]=i&255,v+=I,i/=256,o-=8);for(u=u<<o|i,f+=o;f>0;e[r+v]=u&255,v+=I,u/=256,f-=8);e[r+v-I]|=d*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=xs,r=Rc,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=S,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=s(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const h=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(h,c),h.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function u(h){if(h>o)throw new RangeError('The value "'+h+'" is invalid for option "size"');const c=new Uint8Array(h);return Object.setPrototypeOf(c,i.prototype),c}function i(h,c,p){if(typeof h=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(h)}return g(h,c,p)}i.poolSize=8192;function g(h,c,p){if(typeof h=="string")return l(h,c);if(ArrayBuffer.isView(h))return I(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(we(h,ArrayBuffer)||h&&we(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(h,SharedArrayBuffer)||h&&we(h.buffer,SharedArrayBuffer)))return d(h,c,p);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=h.valueOf&&h.valueOf();if(B!=null&&B!==h)return i.from(B,c,p);const J=R(h);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return i.from(h[Symbol.toPrimitive]("string"),c,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}i.from=function(h,c,p){return g(h,c,p)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function f(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function a(h,c,p){return f(h),h<=0?u(h):c!==void 0?typeof p=="string"?u(h).fill(c,p):u(h).fill(c):u(h)}i.alloc=function(h,c,p){return a(h,c,p)};function y(h){return f(h),u(h<0?0:w(h)|0)}i.allocUnsafe=function(h){return y(h)},i.allocUnsafeSlow=function(h){return y(h)};function l(h,c){if((typeof c!="string"||c==="")&&(c="utf8"),!i.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const p=O(h,c)|0;let B=u(p);const J=B.write(h,c);return J!==p&&(B=B.slice(0,J)),B}function v(h){const c=h.length<0?0:w(h.length)|0,p=u(c);for(let B=0;B<c;B+=1)p[B]=h[B]&255;return p}function I(h){if(we(h,Uint8Array)){const c=new Uint8Array(h);return d(c.buffer,c.byteOffset,c.byteLength)}return v(h)}function d(h,c,p){if(c<0||h.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<c+(p||0))throw new RangeError('"length" is outside of buffer bounds');let B;return c===void 0&&p===void 0?B=new Uint8Array(h):p===void 0?B=new Uint8Array(h,c):B=new Uint8Array(h,c,p),Object.setPrototypeOf(B,i.prototype),B}function R(h){if(i.isBuffer(h)){const c=w(h.length)|0,p=u(c);return p.length===0||h.copy(p,0,0,c),p}if(h.length!==void 0)return typeof h.length!="number"||Fe(h.length)?u(0):v(h);if(h.type==="Buffer"&&Array.isArray(h.data))return v(h.data)}function w(h){if(h>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return h|0}function S(h){return+h!=h&&(h=0),i.alloc(+h)}i.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==i.prototype},i.compare=function(c,p){if(we(c,Uint8Array)&&(c=i.from(c,c.offset,c.byteLength)),we(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),!i.isBuffer(c)||!i.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===p)return 0;let B=c.length,J=p.length;for(let ge=0,be=Math.min(B,J);ge<be;++ge)if(c[ge]!==p[ge]){B=c[ge],J=p[ge];break}return B<J?-1:J<B?1:0},i.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(c,p){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return i.alloc(0);let B;if(p===void 0)for(p=0,B=0;B<c.length;++B)p+=c[B].length;const J=i.allocUnsafe(p);let ge=0;for(B=0;B<c.length;++B){let be=c[B];if(we(be,Uint8Array))ge+be.length>J.length?(i.isBuffer(be)||(be=i.from(be)),be.copy(J,ge)):Uint8Array.prototype.set.call(J,be,ge);else if(i.isBuffer(be))be.copy(J,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=be.length}return J};function O(h,c){if(i.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||we(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const p=h.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&p===0)return 0;let J=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return se(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Re(h).length;default:if(J)return B?-1:se(h).length;c=(""+c).toLowerCase(),J=!0}}i.byteLength=O;function N(h,c,p){let B=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,c>>>=0,p<=c))return"";for(h||(h="utf8");;)switch(h){case"hex":return j(this,c,p);case"utf8":case"utf-8":return _(this,c,p);case"ascii":return F(this,c,p);case"latin1":case"binary":return V(this,c,p);case"base64":return Q(this,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,c,p);default:if(B)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),B=!0}}i.prototype._isBuffer=!0;function P(h,c,p){const B=h[c];h[c]=h[p],h[p]=B}i.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<c;p+=2)P(this,p,p+1);return this},i.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<c;p+=4)P(this,p,p+3),P(this,p+1,p+2);return this},i.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<c;p+=8)P(this,p,p+7),P(this,p+1,p+6),P(this,p+2,p+5),P(this,p+3,p+4);return this},i.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?_(this,0,c):N.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(c){if(!i.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:i.compare(this,c)===0},i.prototype.inspect=function(){let c="";const p=e.INSPECT_MAX_BYTES;return c=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(c+=" ... "),"<Buffer "+c+">"},n&&(i.prototype[n]=i.prototype.inspect),i.prototype.compare=function(c,p,B,J,ge){if(we(c,Uint8Array)&&(c=i.from(c,c.offset,c.byteLength)),!i.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(p===void 0&&(p=0),B===void 0&&(B=c?c.length:0),J===void 0&&(J=0),ge===void 0&&(ge=this.length),p<0||B>c.length||J<0||ge>this.length)throw new RangeError("out of range index");if(J>=ge&&p>=B)return 0;if(J>=ge)return-1;if(p>=B)return 1;if(p>>>=0,B>>>=0,J>>>=0,ge>>>=0,this===c)return 0;let be=ge-J,Ke=B-p;const tt=Math.min(be,Ke),rt=this.slice(J,ge),wt=c.slice(p,B);for(let mt=0;mt<tt;++mt)if(rt[mt]!==wt[mt]){be=rt[mt],Ke=wt[mt];break}return be<Ke?-1:Ke<be?1:0};function H(h,c,p,B,J){if(h.length===0)return-1;if(typeof p=="string"?(B=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Fe(p)&&(p=J?0:h.length-1),p<0&&(p=h.length+p),p>=h.length){if(J)return-1;p=h.length-1}else if(p<0)if(J)p=0;else return-1;if(typeof c=="string"&&(c=i.from(c,B)),i.isBuffer(c))return c.length===0?-1:D(h,c,p,B,J);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(h,c,p):Uint8Array.prototype.lastIndexOf.call(h,c,p):D(h,[c],p,B,J);throw new TypeError("val must be string, number or Buffer")}function D(h,c,p,B,J){let ge=1,be=h.length,Ke=c.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(h.length<2||c.length<2)return-1;ge=2,be/=2,Ke/=2,p/=2}function tt(wt,mt){return ge===1?wt[mt]:wt.readUInt16BE(mt*ge)}let rt;if(J){let wt=-1;for(rt=p;rt<be;rt++)if(tt(h,rt)===tt(c,wt===-1?0:rt-wt)){if(wt===-1&&(wt=rt),rt-wt+1===Ke)return wt*ge}else wt!==-1&&(rt-=rt-wt),wt=-1}else for(p+Ke>be&&(p=be-Ke),rt=p;rt>=0;rt--){let wt=!0;for(let mt=0;mt<Ke;mt++)if(tt(h,rt+mt)!==tt(c,mt)){wt=!1;break}if(wt)return rt}return-1}i.prototype.includes=function(c,p,B){return this.indexOf(c,p,B)!==-1},i.prototype.indexOf=function(c,p,B){return H(this,c,p,B,!0)},i.prototype.lastIndexOf=function(c,p,B){return H(this,c,p,B,!1)};function K(h,c,p,B){p=Number(p)||0;const J=h.length-p;B?(B=Number(B),B>J&&(B=J)):B=J;const ge=c.length;B>ge/2&&(B=ge/2);let be;for(be=0;be<B;++be){const Ke=parseInt(c.substr(be*2,2),16);if(Fe(Ke))return be;h[p+be]=Ke}return be}function U(h,c,p,B){return Pe(se(c,h.length-p),h,p,B)}function ue(h,c,p,B){return Pe(ne(c),h,p,B)}function he(h,c,p,B){return Pe(Re(c),h,p,B)}function q(h,c,p,B){return Pe(ve(c,h.length-p),h,p,B)}i.prototype.write=function(c,p,B,J){if(p===void 0)J="utf8",B=this.length,p=0;else if(B===void 0&&typeof p=="string")J=p,B=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(B)?(B=B>>>0,J===void 0&&(J="utf8")):(J=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ge=this.length-p;if((B===void 0||B>ge)&&(B=ge),c.length>0&&(B<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let be=!1;for(;;)switch(J){case"hex":return K(this,c,p,B);case"utf8":case"utf-8":return U(this,c,p,B);case"ascii":case"latin1":case"binary":return ue(this,c,p,B);case"base64":return he(this,c,p,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,c,p,B);default:if(be)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),be=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(h,c,p){return c===0&&p===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(c,p))}function _(h,c,p){p=Math.min(h.length,p);const B=[];let J=c;for(;J<p;){const ge=h[J];let be=null,Ke=ge>239?4:ge>223?3:ge>191?2:1;if(J+Ke<=p){let tt,rt,wt,mt;switch(Ke){case 1:ge<128&&(be=ge);break;case 2:tt=h[J+1],(tt&192)===128&&(mt=(ge&31)<<6|tt&63,mt>127&&(be=mt));break;case 3:tt=h[J+1],rt=h[J+2],(tt&192)===128&&(rt&192)===128&&(mt=(ge&15)<<12|(tt&63)<<6|rt&63,mt>2047&&(mt<55296||mt>57343)&&(be=mt));break;case 4:tt=h[J+1],rt=h[J+2],wt=h[J+3],(tt&192)===128&&(rt&192)===128&&(wt&192)===128&&(mt=(ge&15)<<18|(tt&63)<<12|(rt&63)<<6|wt&63,mt>65535&&mt<1114112&&(be=mt))}}be===null?(be=65533,Ke=1):be>65535&&(be-=65536,B.push(be>>>10&1023|55296),be=56320|be&1023),B.push(be),J+=Ke}return $(B)}const k=4096;function $(h){const c=h.length;if(c<=k)return String.fromCharCode.apply(String,h);let p="",B=0;for(;B<c;)p+=String.fromCharCode.apply(String,h.slice(B,B+=k));return p}function F(h,c,p){let B="";p=Math.min(h.length,p);for(let J=c;J<p;++J)B+=String.fromCharCode(h[J]&127);return B}function V(h,c,p){let B="";p=Math.min(h.length,p);for(let J=c;J<p;++J)B+=String.fromCharCode(h[J]);return B}function j(h,c,p){const B=h.length;(!c||c<0)&&(c=0),(!p||p<0||p>B)&&(p=B);let J="";for(let ge=c;ge<p;++ge)J+=Ve[h[ge]];return J}function Z(h,c,p){const B=h.slice(c,p);let J="";for(let ge=0;ge<B.length-1;ge+=2)J+=String.fromCharCode(B[ge]+B[ge+1]*256);return J}i.prototype.slice=function(c,p){const B=this.length;c=~~c,p=p===void 0?B:~~p,c<0?(c+=B,c<0&&(c=0)):c>B&&(c=B),p<0?(p+=B,p<0&&(p=0)):p>B&&(p=B),p<c&&(p=c);const J=this.subarray(c,p);return Object.setPrototypeOf(J,i.prototype),J};function G(h,c,p){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+c>p)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(c,p,B){c=c>>>0,p=p>>>0,B||G(c,p,this.length);let J=this[c],ge=1,be=0;for(;++be<p&&(ge*=256);)J+=this[c+be]*ge;return J},i.prototype.readUintBE=i.prototype.readUIntBE=function(c,p,B){c=c>>>0,p=p>>>0,B||G(c,p,this.length);let J=this[c+--p],ge=1;for(;p>0&&(ge*=256);)J+=this[c+--p]*ge;return J},i.prototype.readUint8=i.prototype.readUInt8=function(c,p){return c=c>>>0,p||G(c,1,this.length),this[c]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(c,p){return c=c>>>0,p||G(c,2,this.length),this[c]|this[c+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(c,p){return c=c>>>0,p||G(c,2,this.length),this[c]<<8|this[c+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(c,p){return c=c>>>0,p||G(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(c,p){return c=c>>>0,p||G(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},i.prototype.readBigUInt64LE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],B=this[c+7];(p===void 0||B===void 0)&&T(c,this.length-8);const J=p+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,ge=this[++c]+this[++c]*2**8+this[++c]*2**16+B*2**24;return BigInt(J)+(BigInt(ge)<<BigInt(32))}),i.prototype.readBigUInt64BE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],B=this[c+7];(p===void 0||B===void 0)&&T(c,this.length-8);const J=p*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],ge=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+B;return(BigInt(J)<<BigInt(32))+BigInt(ge)}),i.prototype.readIntLE=function(c,p,B){c=c>>>0,p=p>>>0,B||G(c,p,this.length);let J=this[c],ge=1,be=0;for(;++be<p&&(ge*=256);)J+=this[c+be]*ge;return ge*=128,J>=ge&&(J-=Math.pow(2,8*p)),J},i.prototype.readIntBE=function(c,p,B){c=c>>>0,p=p>>>0,B||G(c,p,this.length);let J=p,ge=1,be=this[c+--J];for(;J>0&&(ge*=256);)be+=this[c+--J]*ge;return ge*=128,be>=ge&&(be-=Math.pow(2,8*p)),be},i.prototype.readInt8=function(c,p){return c=c>>>0,p||G(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},i.prototype.readInt16LE=function(c,p){c=c>>>0,p||G(c,2,this.length);const B=this[c]|this[c+1]<<8;return B&32768?B|4294901760:B},i.prototype.readInt16BE=function(c,p){c=c>>>0,p||G(c,2,this.length);const B=this[c+1]|this[c]<<8;return B&32768?B|4294901760:B},i.prototype.readInt32LE=function(c,p){return c=c>>>0,p||G(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},i.prototype.readInt32BE=function(c,p){return c=c>>>0,p||G(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},i.prototype.readBigInt64LE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],B=this[c+7];(p===void 0||B===void 0)&&T(c,this.length-8);const J=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(B<<24);return(BigInt(J)<<BigInt(32))+BigInt(p+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),i.prototype.readBigInt64BE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],B=this[c+7];(p===void 0||B===void 0)&&T(c,this.length-8);const J=(p<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(J)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+B)}),i.prototype.readFloatLE=function(c,p){return c=c>>>0,p||G(c,4,this.length),r.read(this,c,!0,23,4)},i.prototype.readFloatBE=function(c,p){return c=c>>>0,p||G(c,4,this.length),r.read(this,c,!1,23,4)},i.prototype.readDoubleLE=function(c,p){return c=c>>>0,p||G(c,8,this.length),r.read(this,c,!0,52,8)},i.prototype.readDoubleBE=function(c,p){return c=c>>>0,p||G(c,8,this.length),r.read(this,c,!1,52,8)};function Y(h,c,p,B,J,ge){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>J||c<ge)throw new RangeError('"value" argument is out of bounds');if(p+B>h.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(c,p,B,J){if(c=+c,p=p>>>0,B=B>>>0,!J){const Ke=Math.pow(2,8*B)-1;Y(this,c,p,B,Ke,0)}let ge=1,be=0;for(this[p]=c&255;++be<B&&(ge*=256);)this[p+be]=c/ge&255;return p+B},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(c,p,B,J){if(c=+c,p=p>>>0,B=B>>>0,!J){const Ke=Math.pow(2,8*B)-1;Y(this,c,p,B,Ke,0)}let ge=B-1,be=1;for(this[p+ge]=c&255;--ge>=0&&(be*=256);)this[p+ge]=c/be&255;return p+B},i.prototype.writeUint8=i.prototype.writeUInt8=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,1,255,0),this[p]=c&255,p+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,2,65535,0),this[p]=c&255,this[p+1]=c>>>8,p+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,2,65535,0),this[p]=c>>>8,this[p+1]=c&255,p+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,4,4294967295,0),this[p+3]=c>>>24,this[p+2]=c>>>16,this[p+1]=c>>>8,this[p]=c&255,p+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,4,4294967295,0),this[p]=c>>>24,this[p+1]=c>>>16,this[p+2]=c>>>8,this[p+3]=c&255,p+4};function ye(h,c,p,B,J){ht(c,B,J,h,p,7);let ge=Number(c&BigInt(4294967295));h[p++]=ge,ge=ge>>8,h[p++]=ge,ge=ge>>8,h[p++]=ge,ge=ge>>8,h[p++]=ge;let be=Number(c>>BigInt(32)&BigInt(4294967295));return h[p++]=be,be=be>>8,h[p++]=be,be=be>>8,h[p++]=be,be=be>>8,h[p++]=be,p}function Ee(h,c,p,B,J){ht(c,B,J,h,p,7);let ge=Number(c&BigInt(4294967295));h[p+7]=ge,ge=ge>>8,h[p+6]=ge,ge=ge>>8,h[p+5]=ge,ge=ge>>8,h[p+4]=ge;let be=Number(c>>BigInt(32)&BigInt(4294967295));return h[p+3]=be,be=be>>8,h[p+2]=be,be=be>>8,h[p+1]=be,be=be>>8,h[p]=be,p+8}i.prototype.writeBigUInt64LE=m(function(c,p=0){return ye(this,c,p,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=m(function(c,p=0){return Ee(this,c,p,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(c,p,B,J){if(c=+c,p=p>>>0,!J){const tt=Math.pow(2,8*B-1);Y(this,c,p,B,tt-1,-tt)}let ge=0,be=1,Ke=0;for(this[p]=c&255;++ge<B&&(be*=256);)c<0&&Ke===0&&this[p+ge-1]!==0&&(Ke=1),this[p+ge]=(c/be>>0)-Ke&255;return p+B},i.prototype.writeIntBE=function(c,p,B,J){if(c=+c,p=p>>>0,!J){const tt=Math.pow(2,8*B-1);Y(this,c,p,B,tt-1,-tt)}let ge=B-1,be=1,Ke=0;for(this[p+ge]=c&255;--ge>=0&&(be*=256);)c<0&&Ke===0&&this[p+ge+1]!==0&&(Ke=1),this[p+ge]=(c/be>>0)-Ke&255;return p+B},i.prototype.writeInt8=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,1,127,-128),c<0&&(c=255+c+1),this[p]=c&255,p+1},i.prototype.writeInt16LE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,2,32767,-32768),this[p]=c&255,this[p+1]=c>>>8,p+2},i.prototype.writeInt16BE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,2,32767,-32768),this[p]=c>>>8,this[p+1]=c&255,p+2},i.prototype.writeInt32LE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,4,2147483647,-2147483648),this[p]=c&255,this[p+1]=c>>>8,this[p+2]=c>>>16,this[p+3]=c>>>24,p+4},i.prototype.writeInt32BE=function(c,p,B){return c=+c,p=p>>>0,B||Y(this,c,p,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[p]=c>>>24,this[p+1]=c>>>16,this[p+2]=c>>>8,this[p+3]=c&255,p+4},i.prototype.writeBigInt64LE=m(function(c,p=0){return ye(this,c,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=m(function(c,p=0){return Ee(this,c,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(h,c,p,B,J,ge){if(p+B>h.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ct(h,c,p,B,J){return c=+c,p=p>>>0,J||Te(h,c,p,4),r.write(h,c,p,B,23,4),p+4}i.prototype.writeFloatLE=function(c,p,B){return ct(this,c,p,!0,B)},i.prototype.writeFloatBE=function(c,p,B){return ct(this,c,p,!1,B)};function ft(h,c,p,B,J){return c=+c,p=p>>>0,J||Te(h,c,p,8),r.write(h,c,p,B,52,8),p+8}i.prototype.writeDoubleLE=function(c,p,B){return ft(this,c,p,!0,B)},i.prototype.writeDoubleBE=function(c,p,B){return ft(this,c,p,!1,B)},i.prototype.copy=function(c,p,B,J){if(!i.isBuffer(c))throw new TypeError("argument should be a Buffer");if(B||(B=0),!J&&J!==0&&(J=this.length),p>=c.length&&(p=c.length),p||(p=0),J>0&&J<B&&(J=B),J===B||c.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),c.length-p<J-B&&(J=c.length-p+B);const ge=J-B;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,B,J):Uint8Array.prototype.set.call(c,this.subarray(B,J),p),ge},i.prototype.fill=function(c,p,B,J){if(typeof c=="string"){if(typeof p=="string"?(J=p,p=0,B=this.length):typeof B=="string"&&(J=B,B=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!i.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(c.length===1){const be=c.charCodeAt(0);(J==="utf8"&&be<128||J==="latin1")&&(c=be)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(p<0||this.length<p||this.length<B)throw new RangeError("Out of range index");if(B<=p)return this;p=p>>>0,B=B===void 0?this.length:B>>>0,c||(c=0);let ge;if(typeof c=="number")for(ge=p;ge<B;++ge)this[ge]=c;else{const be=i.isBuffer(c)?c:i.from(c,J),Ke=be.length;if(Ke===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(ge=0;ge<B-p;++ge)this[ge+p]=be[ge%Ke]}return this};const Ze={};function et(h,c,p){Ze[h]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}et("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),et("ERR_INVALID_ARG_TYPE",function(h,c){return`The "${h}" argument must be of type number. Received type ${typeof c}`},TypeError),et("ERR_OUT_OF_RANGE",function(h,c,p){let B=`The value of "${h}" is out of range.`,J=p;return Number.isInteger(p)&&Math.abs(p)>2**32?J=Qe(String(p)):typeof p=="bigint"&&(J=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(J=Qe(J)),J+="n"),B+=` It must be ${c}. Received ${J}`,B},RangeError);function Qe(h){let c="",p=h.length;const B=h[0]==="-"?1:0;for(;p>=B+4;p-=3)c=`_${h.slice(p-3,p)}${c}`;return`${h.slice(0,p)}${c}`}function Je(h,c,p){lt(c,"offset"),(h[c]===void 0||h[c+p]===void 0)&&T(c,h.length-(p+1))}function ht(h,c,p,B,J,ge){if(h>p||h<c){const be=typeof c=="bigint"?"n":"";let Ke;throw c===0||c===BigInt(0)?Ke=`>= 0${be} and < 2${be} ** ${(ge+1)*8}${be}`:Ke=`>= -(2${be} ** ${(ge+1)*8-1}${be}) and < 2 ** ${(ge+1)*8-1}${be}`,new Ze.ERR_OUT_OF_RANGE("value",Ke,h)}Je(B,J,ge)}function lt(h,c){if(typeof h!="number")throw new Ze.ERR_INVALID_ARG_TYPE(c,"number",h)}function T(h,c,p){throw Math.floor(h)!==h?(lt(h,p),new Ze.ERR_OUT_OF_RANGE("offset","an integer",h)):c<0?new Ze.ERR_BUFFER_OUT_OF_BOUNDS:new Ze.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,h)}const Se=/[^+/0-9A-Za-z-_]/g;function Ae(h){if(h=h.split("=")[0],h=h.trim().replace(Se,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function se(h,c){c=c||1/0;let p;const B=h.length;let J=null;const ge=[];for(let be=0;be<B;++be){if(p=h.charCodeAt(be),p>55295&&p<57344){if(!J){if(p>56319){(c-=3)>-1&&ge.push(239,191,189);continue}else if(be+1===B){(c-=3)>-1&&ge.push(239,191,189);continue}J=p;continue}if(p<56320){(c-=3)>-1&&ge.push(239,191,189),J=p;continue}p=(J-55296<<10|p-56320)+65536}else J&&(c-=3)>-1&&ge.push(239,191,189);if(J=null,p<128){if((c-=1)<0)break;ge.push(p)}else if(p<2048){if((c-=2)<0)break;ge.push(p>>6|192,p&63|128)}else if(p<65536){if((c-=3)<0)break;ge.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((c-=4)<0)break;ge.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return ge}function ne(h){const c=[];for(let p=0;p<h.length;++p)c.push(h.charCodeAt(p)&255);return c}function ve(h,c){let p,B,J;const ge=[];for(let be=0;be<h.length&&!((c-=2)<0);++be)p=h.charCodeAt(be),B=p>>8,J=p%256,ge.push(J),ge.push(B);return ge}function Re(h){return t.toByteArray(Ae(h))}function Pe(h,c,p,B){let J;for(J=0;J<B&&!(J+p>=c.length||J>=h.length);++J)c[J+p]=h[J];return J}function we(h,c){return h instanceof c||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===c.name}function Fe(h){return h!==h}const Ve=function(){const h="0123456789abcdef",c=new Array(256);for(let p=0;p<16;++p){const B=p*16;for(let J=0;J<16;++J)c[B+J]=h[p]+h[J]}return c}();function m(h){return typeof BigInt>"u"?A:h}function A(){throw new Error("BigInt not supported")}})(Ic);var Hf={exports:{}},jt=Hf.exports={},Fr,Dr;function Ha(){throw new Error("setTimeout has not been defined")}function Wa(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Fr=setTimeout:Fr=Ha}catch{Fr=Ha}try{typeof clearTimeout=="function"?Dr=clearTimeout:Dr=Wa}catch{Dr=Wa}})();function Wf(e){if(Fr===setTimeout)return setTimeout(e,0);if((Fr===Ha||!Fr)&&setTimeout)return Fr=setTimeout,setTimeout(e,0);try{return Fr(e,0)}catch{try{return Fr.call(null,e,0)}catch{return Fr.call(this,e,0)}}}function xg(e){if(Dr===clearTimeout)return clearTimeout(e);if((Dr===Wa||!Dr)&&clearTimeout)return Dr=clearTimeout,clearTimeout(e);try{return Dr(e)}catch{try{return Dr.call(null,e)}catch{return Dr.call(this,e)}}}var Wr=[],Hn=!1,Sn,Wo=-1;function _g(){!Hn||!Sn||(Hn=!1,Sn.length?Wr=Sn.concat(Wr):Wo=-1,Wr.length&&Kf())}function Kf(){if(!Hn){var e=Wf(_g);Hn=!0;for(var t=Wr.length;t;){for(Sn=Wr,Wr=[];++Wo<t;)Sn&&Sn[Wo].run();Wo=-1,t=Wr.length}Sn=null,Hn=!1,xg(e)}}jt.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Wr.push(new Zf(e,t)),Wr.length===1&&!Hn&&Wf(Kf)};function Zf(e,t){this.fun=e,this.array=t}Zf.prototype.run=function(){this.fun.apply(null,this.array)};jt.title="browser";jt.browser=!0;jt.env={};jt.argv=[];jt.version="";jt.versions={};function Kr(){}jt.on=Kr;jt.addListener=Kr;jt.once=Kr;jt.off=Kr;jt.removeListener=Kr;jt.removeAllListeners=Kr;jt.emit=Kr;jt.prependListener=Kr;jt.prependOnceListener=Kr;jt.listeners=function(e){return[]};jt.binding=function(e){throw new Error("process.binding is not supported")};jt.cwd=function(){return"/"};jt.chdir=function(e){throw new Error("process.chdir is not supported")};jt.umask=function(){return 0};var Eg=Hf.exports;const Yf=vs(Eg);window.Buffer=Ic.Buffer;window.process=Yf;function Ji(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function Sg(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=Ji(r);return(o,s)=>n.then(u=>s(u.transaction(t,o).objectStore(t)))}let xa;function _s(){return xa||(xa=Sg("keyval-store","keyval")),xa}function LS(e,t=_s()){return t("readonly",r=>Ji(r.get(e)))}function Xf(e,t,r=_s()){return r("readwrite",n=>(n.put(t,e),Ji(n.transaction)))}function Cg(e,t=_s()){return t("readonly",r=>Promise.all(e.map(n=>Ji(r.get(n)))))}function PS(e,t=_s()){return t("readwrite",r=>(r.delete(e),Ji(r.transaction)))}const{APP_URL:kg,CLOUD_HOME_URL:Ag}=at,Ig=`${kg}/redirect`,Rg=`${Ag}/sketches`;function pl(e){return Qo.customKey?e.replace("https://",`https://${Qo.customKey}.`):e}const Es={domain:at.AUTH_URL,clientId:at.AUTH_ID,authorizationParams:{redirect_uri:pl(Ig),logout_uri:pl(Rg),audience:at.AUTH_AUDIENCE,scope:at.AUTH_SCOPE,state:Og()},cacheLocation:"memory"},Tg=5;function Og(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function bt(){return Promise.reject(new Error("User not authorized to perform request"))}`${Es.authorizationParams.client_id}`;const Ng=`auth0.${Es.authorizationParams.client_id}.is.authenticated=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,Lg="authRedirectTo",ti="token-placeholder";let or=null,Pg=null;async function Bg(){return or||(or=await Fg()),or}async function Fg(){var r;const e=await tm(Es,Tg),t=(r=e.getCustomization())==null?void 0:r.url;return t&&rm({CLOUD_HOME_URL:t,APP_ORIGIN:t,NEW_WINDOW_ORIGIN:t,SERIAL_MONITOR_PARENT_ORIGIN:t}),or=e,e}async function ts(){if(!or)throw new Error("Cannot login when auth client not initialized");const{state:e,...t}=Es.authorizationParams;await Xf(Lg,{previousState:e,redirectTo:window.location.pathname+window.location.search}),im(or,{...t,appState:{previousState:e}})}async function BS(){if(!or)throw new Error("Cannot get auth state when Auth client not initialized");return om(or)}async function Dg(){if(!or)throw new Error("Can not authenticate when Auth client not initialized");return Jp(or)}function jg(){document.cookie=Ng}async function Qf(){if(!or)throw new Error("Cannot get user when Auth client not initialized");return em(or)}async function Mg(e,t=!1){if(!or)throw new Error("Cannot get token when Auth client not initialized");try{return await nm(or,e)}catch(r){if(t)return ti;switch(r.error){case ul.LoginRequired:jg(),ts();break;case ul.InteractionRequired:ts();break}throw r}}let Tc=!1;function Ug(e){Tc=e}let rs=null;function $g(){rs=null}function zg(){return rs=new In(!1),rs}function Oc(){return rs||zg()}function Gg(e){Oc().next(e)}function yt(e,t=!1,r=!1){return!t&&Tc&&!Oc().getValue()?Promise.resolve(ti):Mg(e,r)}let Ka=!1,Jf=!1;async function Vg(){await xc(`https://www.googletagmanager.com/gtm.js?id=${at.GTM_ID}`,"gtm-script"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.start":new Date().getTime(),event:"gtm.js"}),window.dataLayer.push({event:"pageMetaData",page:{type:"content",title:"Arduino Cloud Editor",path:window.location.pathname,environment:"%VITE_HF_CDN_ENV%",region:"global",brand:"arduino",language:"EN"}})}async function qg(){const e=window.analytics||[];if(window.analytics=e,!e.initialize){if(e.invoked){console.error("Segment snippet included twice.");return}return e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=t=>()=>{const r=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(t)>-1){const n=document.querySelector("link[rel='canonical']");r.push({__t:"bpc",c:n&&n.getAttribute("href")||void 0,p:window.location.pathname,u:window.location.href,s:window.location.search,t:document.title,r:document.referrer})}return r.unshift(t),e.push(r),e},e.methods.forEach(t=>{const r=e.methods[t];e[r]=e.factory(r)}),e._writeKey=at.SEGMENT_TOKEN,e._cdn="https://evs.aayinltcs.arduino.cc",e.SNIPPET_VERSION="5.2.0",e.load=async t=>{await xc(at.SEGMENT_SCRIPT,"segment-script"),e._loadOptions=t},e.load(e._writeKey)}}async function Hg(e){sm(`${at.HF_CDN_URL}/cookieSolution.css`),await xc(`${at.HF_CDN_URL}/cookieSolution.js`,"cookieSolution");const t=e[ll]===void 0?!1:!e[ll];window.arduinoCookieSolution.initCookieConsent(t)}async function Wg(e){if(at.MODE==="development")return!1;Jf=!0;const t=4;async function r(n,o=0,s=1e3){return new Promise((u,i)=>{o>10&&i(),n()?u():setTimeout(()=>r(n,o+1).then(u),s)})}await Hg(e),await Vg(),await qg(),r(()=>{var n,o,s,u;return!!((n=window.analytics)!=null&&n.page)&&!!window._iub&&((u=(s=(o=window._iub)==null?void 0:o.cs)==null?void 0:s.consent)==null?void 0:u.purposes[t])}).then(()=>window.analytics.page()).catch(()=>console.warn("Page not triggered!")),r(()=>{var n;return!!((n=window.analytics)!=null&&n.identify)&&!!window._iub}).then(()=>{var o,s,u;const n=(u=(s=(o=window._iub)==null?void 0:o.cs)==null?void 0:s.consent)==null?void 0:u.purposes[t];window.analytics.identify(e[Pi],{email:e.email},{integrations:{All:!1,"Segment.io":n,ProfitWell:n}})}).catch(()=>console.warn("Profitwell not triggered!"));try{await r(()=>{var n,o;return!!((n=window.analytics)!=null&&n.track)&&!!((o=window.analytics)!=null&&o.identify)}),Ka=!0}catch{console.warn("Analytics could not be initialized")}return Ka}function Kg(e){switch(e){case"INIT":return{event:"web_editor_initiate"};case"COMPILE":return{event:"web_editor_compile"};case"UPLOAD":return{event:"web_editor_upload"};case"SKETCH_MOD":return{event:"editor_sketch_interaction"};case"BOARD_CHANGE":return{event:"editor_board_selection"};case"EXAMPLE_SELECT":return{event:"editor_examples"};case"LIBRARY_SELECT":return{event:"editor_libraries"};case"LIBRARY_FAVORITE":return{event:"editor_libraries",action:"add to favorites"};case"REFERENCE_VIEW":return{event:"editor_reference",action:"view_reference"};case"GEN_AI_INTERACTION":return{event:"ai_interaction"};default:return{}}}async function Zg({type:e,payload:t=void 0}){if(!Jf||at.MODE==="development")return;if(!Ka){console.error("Tried to emit event before analytics was initialized");return}let r=Pg;if(!r)try{r=await Qf()}catch{console.error("Error retrieving user profile for event emission");return}if(!r){console.error("Tried to emit event without a user profile");return}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({...Kg(e),...t,site_area:"editor",user_id:r[Pi]})}catch{console.error(`Error tracking event [${e}] with args [${t}]`)}}var eh={exports:{}};(function(e,t){var r={};/*!
 * 
 *   @bcmi-labs/arduino-chromeos-uploader v1.2.12
 *   https://www.github.com/bcmi-labs/arduino-chromeos-uploader
 *
 *   Copyright (c) Arduino (https://www.arduino.cc) and project contributors.
 *
 *   This source code is licensed under the UNLICENSED license found in the
 *   LICENSE.md file in the root directory of this source tree.
 *
 */(function(n,o){e.exports=o()})(self,()=>(()=>{var n={195:function(i,g,f){i=f.nmd(i),function(a){function y(z,te){te|=0;for(var ce=Math.max(z.length-te,0),me=Array(ce),Ie=0;Ie<ce;Ie++)me[Ie]=z[te+Ie];return me}var l=function(z){var te=y(arguments,1);return function(){var ce=y(arguments);return z.apply(null,te.concat(ce))}},v=function(z){return function(){var te=y(arguments),ce=te.pop();z.call(this,te,ce)}};function I(z){var te=typeof z;return z!=null&&(te=="object"||te=="function")}var d=typeof setImmediate=="function"&&setImmediate,R=typeof process=="object"&&typeof process.nextTick=="function";function w(z){setTimeout(z,0)}function S(z){return function(te){var ce=y(arguments,1);z(function(){te.apply(null,ce)})}}var O=S(d?setImmediate:R?process.nextTick:w);function N(z){return v(function(te,ce){var me;try{me=z.apply(this,te)}catch(Ie){return ce(Ie)}I(me)&&typeof me.then=="function"?me.then(function(Ie){P(ce,null,Ie)},function(Ie){P(ce,Ie.message?Ie:new Error(Ie))}):ce(null,me)})}function P(z,te,ce){try{z(te,ce)}catch(me){O(H,me)}}function H(z){throw z}var D=typeof Symbol=="function";function K(z){return D&&z[Symbol.toStringTag]==="AsyncFunction"}function U(z){return K(z)?N(z):z}function ue(z){return function(te){var ce=y(arguments,1),me=v(function(Ie,ke){var Ne=this;return z(te,function(je,ze){U(je).apply(Ne,Ie.concat(ze))},ke)});return ce.length?me.apply(this,ce):me}}var he=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,q=typeof self=="object"&&self&&self.Object===Object&&self,Q=he||q||Function("return this")(),_=Q.Symbol,k=Object.prototype,$=k.hasOwnProperty,F=k.toString,V=_?_.toStringTag:void 0;function j(z){var te=$.call(z,V),ce=z[V];try{z[V]=void 0;var me=!0}catch{}var Ie=F.call(z);return me&&(te?z[V]=ce:delete z[V]),Ie}var Z=Object.prototype.toString;function G(z){return Z.call(z)}var Y="[object Null]",ye="[object Undefined]",Ee=_?_.toStringTag:void 0;function Te(z){return z==null?z===void 0?ye:Y:Ee&&Ee in Object(z)?j(z):G(z)}var ct="[object AsyncFunction]",ft="[object Function]",Ze="[object GeneratorFunction]",et="[object Proxy]";function Qe(z){if(!I(z))return!1;var te=Te(z);return te==ft||te==Ze||te==ct||te==et}var Je=9007199254740991;function ht(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=Je}function lt(z){return z!=null&&ht(z.length)&&!Qe(z)}var T={};function Se(){}function Ae(z){return function(){if(z!==null){var te=z;z=null,te.apply(this,arguments)}}}var se=typeof Symbol=="function"&&Symbol.iterator,ne=function(z){return se&&z[se]&&z[se]()};function ve(z,te){for(var ce=-1,me=Array(z);++ce<z;)me[ce]=te(ce);return me}function Re(z){return z!=null&&typeof z=="object"}var Pe="[object Arguments]";function we(z){return Re(z)&&Te(z)==Pe}var Fe=Object.prototype,Ve=Fe.hasOwnProperty,m=Fe.propertyIsEnumerable,A=we(function(){return arguments}())?we:function(z){return Re(z)&&Ve.call(z,"callee")&&!m.call(z,"callee")},h=Array.isArray;function c(){return!1}var p=typeof a=="object"&&a&&!a.nodeType&&a,B=p&&i&&!i.nodeType&&i,J=B&&B.exports===p?Q.Buffer:void 0,ge=(J?J.isBuffer:void 0)||c,be=9007199254740991,Ke=/^(?:0|[1-9]\d*)$/;function tt(z,te){var ce=typeof z;return!!(te=te??be)&&(ce=="number"||ce!="symbol"&&Ke.test(z))&&z>-1&&z%1==0&&z<te}var rt="[object Arguments]",wt="[object Array]",mt="[object Boolean]",Xr="[object Date]",hn="[object Error]",dn="[object Function]",$r="[object Map]",Ir="[object Number]",Vs="[object Object]",qs="[object RegExp]",Nn="[object Set]",Hs="[object String]",fr="[object WeakMap]",Ws="[object ArrayBuffer]",Ks="[object DataView]",li="[object Float64Array]",oo="[object Int8Array]",so="[object Int16Array]",ao="[object Int32Array]",Zs="[object Uint8Array]",Ys="[object Uint8ClampedArray]",co="[object Uint16Array]",Xs="[object Uint32Array]",xt={};function pn(z){return Re(z)&&ht(z.length)&&!!xt[Te(z)]}function uo(z){return function(te){return z(te)}}xt["[object Float32Array]"]=xt[li]=xt[oo]=xt[so]=xt[ao]=xt[Zs]=xt[Ys]=xt[co]=xt[Xs]=!0,xt[rt]=xt[wt]=xt[Ws]=xt[mt]=xt[Ks]=xt[Xr]=xt[hn]=xt[dn]=xt[$r]=xt[Ir]=xt[Vs]=xt[qs]=xt[Nn]=xt[Hs]=xt[fr]=!1;var fi=typeof a=="object"&&a&&!a.nodeType&&a,mn=fi&&i&&!i.nodeType&&i,hi=mn&&mn.exports===fi&&he.process,lo=function(){try{var z=mn&&mn.require&&mn.require("util").types;return z||hi&&hi.binding&&hi.binding("util")}catch{}}(),gn=lo&&lo.isTypedArray,vn=gn?uo(gn):pn,fo=Object.prototype.hasOwnProperty;function ho(z,te){var ce=h(z),me=!ce&&A(z),Ie=!ce&&!me&&ge(z),ke=!ce&&!me&&!Ie&&vn(z),Ne=ce||me||Ie||ke,je=Ne?ve(z.length,String):[],ze=je.length;for(var nt in z)!fo.call(z,nt)||Ne&&(nt=="length"||Ie&&(nt=="offset"||nt=="parent")||ke&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||tt(nt,ze))||je.push(nt);return je}var Qs=Object.prototype;function di(z){var te=z&&z.constructor;return z===(typeof te=="function"&&te.prototype||Qs)}function Js(z,te){return function(ce){return z(te(ce))}}var ea=Js(Object.keys,Object),Ln=Object.prototype.hasOwnProperty;function ta(z){if(!di(z))return ea(z);var te=[];for(var ce in Object(z))Ln.call(z,ce)&&ce!="constructor"&&te.push(ce);return te}function Rr(z){return lt(z)?ho(z):ta(z)}function Zt(z){var te=-1,ce=z.length;return function(){return++te<ce?{value:z[te],key:te}:null}}function po(z){var te=-1;return function(){var ce=z.next();return ce.done?null:(te++,{value:ce.value,key:te})}}function ra(z){var te=Rr(z),ce=-1,me=te.length;return function Ie(){var ke=te[++ce];return ke==="__proto__"?Ie():ce<me?{value:z[ke],key:ke}:null}}function pi(z){if(lt(z))return Zt(z);var te=ne(z);return te?po(te):ra(z)}function Nt(z){return function(){if(z===null)throw new Error("Callback was already called.");var te=z;z=null,te.apply(this,arguments)}}function Pn(z){return function(te,ce,me){if(me=Ae(me||Se),z<=0||!te)return me(null);var Ie=pi(te),ke=!1,Ne=0,je=!1;function ze(He,st){if(Ne-=1,He)ke=!0,me(He);else{if(st===T||ke&&Ne<=0)return ke=!0,me(null);je||nt()}}function nt(){for(je=!0;Ne<z&&!ke;){var He=Ie();if(He===null)return ke=!0,void(Ne<=0&&me(null));Ne+=1,ce(He.value,He.key,Nt(ze))}je=!1}nt()}}function Tr(z,te,ce,me){Pn(te)(z,U(ce),me)}function Mt(z,te){return function(ce,me,Ie){return z(ce,te,me,Ie)}}function na(z,te,ce){ce=Ae(ce||Se);var me=0,Ie=0,ke=z.length;function Ne(je,ze){je?ce(je):++Ie!==ke&&ze!==T||ce(null)}for(ke===0&&ce(null);me<ke;me++)te(z[me],me,Nt(Ne))}var mi=Mt(Tr,1/0),_t=function(z,te,ce){(lt(z)?na:mi)(z,U(te),ce)};function zr(z){return function(te,ce,me){return z(_t,te,U(ce),me)}}function hr(z,te,ce,me){me=me||Se,te=te||[];var Ie=[],ke=0,Ne=U(ce);z(te,function(je,ze,nt){var He=ke++;Ne(je,function(st,Bt){Ie[He]=Bt,nt(st)})},function(je){me(je,Ie)})}var dr=zr(hr),gi=ue(dr);function pr(z){return function(te,ce,me,Ie){return z(Pn(ce),te,U(me),Ie)}}var Or=pr(hr),Gr=Mt(Or,1),vi=ue(Gr);function Bn(z,te){for(var ce=-1,me=z==null?0:z.length;++ce<me&&te(z[ce],ce,z)!==!1;);return z}function ia(z){return function(te,ce,me){for(var Ie=-1,ke=Object(te),Ne=me(te),je=Ne.length;je--;){var ze=Ne[++Ie];if(ce(ke[ze],ze,ke)===!1)break}return te}}var oa=ia();function Qr(z,te){return z&&oa(z,te,Rr)}function mo(z,te,ce,me){for(var Ie=z.length,ke=ce+-1;++ke<Ie;)if(te(z[ke],ke,z))return ke;return-1}function go(z){return z!=z}function sa(z,te,ce){for(var me=ce-1,Ie=z.length;++me<Ie;)if(z[me]===te)return me;return-1}function yn(z,te,ce){return te==te?sa(z,te,ce):mo(z,go,ce)}var yi=function(z,te,ce){typeof te=="function"&&(ce=te,te=null),ce=Ae(ce||Se);var me=Rr(z).length;if(!me)return ce(null);te||(te=me);var Ie={},ke=0,Ne=!1,je=Object.create(null),ze=[],nt=[],He={};function st(Ft,Pt){ze.push(function(){mr(Ft,Pt)})}function Bt(){if(ze.length===0&&ke===0)return ce(null,Ie);for(;ze.length&&ke<te;)ze.shift()()}function cr(Ft,Pt){var ur=je[Ft];ur||(ur=je[Ft]=[]),ur.push(Pt)}function Nr(Ft){Bn(je[Ft]||[],function(Pt){Pt()}),Bt()}function mr(Ft,Pt){if(!Ne){var ur=Nt(function(jn,ma){if(ke--,arguments.length>2&&(ma=y(arguments,1)),jn){var ga={};Qr(Ie,function(op,sp){ga[sp]=op}),ga[Ft]=ma,Ne=!0,je=Object.create(null),ce(jn,ga)}else Ie[Ft]=ma,Nr(Ft)});ke++;var Jr=U(Pt[Pt.length-1]);Pt.length>1?Jr(Ie,ur):Jr(ur)}}function Lr(){for(var Ft=0;nt.length;)Ft++,Bn(ip(nt.pop()),function(Pt){--He[Pt]==0&&nt.push(Pt)});if(Ft!==me)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function ip(Ft){var Pt=[];return Qr(z,function(ur,Jr){h(ur)&&yn(ur,Ft,0)>=0&&Pt.push(Jr)}),Pt}Qr(z,function(Ft,Pt){if(!h(Ft))return st(Pt,[Ft]),void nt.push(Pt);var ur=Ft.slice(0,Ft.length-1),Jr=ur.length;if(Jr===0)return st(Pt,Ft),void nt.push(Pt);He[Pt]=Jr,Bn(ur,function(jn){if(!z[jn])throw new Error("async.auto task `"+Pt+"` has a non-existent dependency `"+jn+"` in "+ur.join(", "));cr(jn,function(){--Jr==0&&st(Pt,Ft)})})}),Lr(),Bt()};function ar(z,te){for(var ce=-1,me=z==null?0:z.length,Ie=Array(me);++ce<me;)Ie[ce]=te(z[ce],ce,z);return Ie}var aa="[object Symbol]";function Fn(z){return typeof z=="symbol"||Re(z)&&Te(z)==aa}var L=_?_.prototype:void 0,b=L?L.toString:void 0;function E(z){if(typeof z=="string")return z;if(h(z))return ar(z,E)+"";if(Fn(z))return b?b.call(z):"";var te=z+"";return te=="0"&&1/z==-1/0?"-0":te}function M(z,te,ce){var me=-1,Ie=z.length;te<0&&(te=-te>Ie?0:Ie+te),(ce=ce>Ie?Ie:ce)<0&&(ce+=Ie),Ie=te>ce?0:ce-te>>>0,te>>>=0;for(var ke=Array(Ie);++me<Ie;)ke[me]=z[me+te];return ke}function W(z,te,ce){var me=z.length;return ce=ce===void 0?me:ce,!te&&ce>=me?z:M(z,te,ce)}function le(z,te){for(var ce=z.length;ce--&&yn(te,z[ce],0)>-1;);return ce}function de(z,te){for(var ce=-1,me=z.length;++ce<me&&yn(te,z[ce],0)>-1;);return ce}function oe(z){return z.split("")}var fe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function ie(z){return fe.test(z)}var ae="\\ud800-\\udfff",Le="["+ae+"]",De="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ce="\\ud83c[\\udffb-\\udfff]",Ue="[^"+ae+"]",xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Ye="(?:"+De+"|"+Ce+")?",Ct="[\\ufe0e\\ufe0f]?",ot="(?:\\u200d(?:"+[Ue,xe,Ge].join("|")+")"+Ct+Ye+")*",ut=Ct+Ye+ot,Yt="(?:"+[Ue+De+"?",De,xe,Ge,Le].join("|")+")",Tt=RegExp(Ce+"(?="+Ce+")|"+Yt+ut,"g");function Ot(z){return z.match(Tt)||[]}function At(z){return ie(z)?Ot(z):oe(z)}function zt(z){return z==null?"":E(z)}var C=/^\s+|\s+$/g;function x(z,te,ce){if((z=zt(z))&&te===void 0)return z.replace(C,"");if(!z||!(te=E(te)))return z;var me=At(z),Ie=At(te);return W(me,de(me,Ie),le(me,Ie)+1).join("")}var re=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,pe=/,/,ee=/(=.+)?(\s*)$/,Be=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function Me(z){return z=(z=(z=(z=z.toString().replace(Be,"")).match(re)[2].replace(" ",""))?z.split(pe):[]).map(function(te){return x(te.replace(ee,""))})}function qe(z,te){var ce={};Qr(z,function(me,Ie){var ke,Ne=K(me),je=!Ne&&me.length===1||Ne&&me.length===0;if(h(me))ke=me.slice(0,-1),me=me[me.length-1],ce[Ie]=ke.concat(ke.length>0?ze:me);else if(je)ce[Ie]=me;else{if(ke=Me(me),me.length===0&&!Ne&&ke.length===0)throw new Error("autoInject task functions require explicit parameters.");Ne||ke.pop(),ce[Ie]=ke.concat(ze)}function ze(nt,He){var st=ar(ke,function(Bt){return nt[Bt]});st.push(He),U(me).apply(null,st)}}),yi(ce,te)}function We(){this.head=this.tail=null,this.length=0}function _e(z,te){z.length=1,z.head=z.tail=te}function $e(z,te,ce){if(te==null)te=1;else if(te===0)throw new Error("Concurrency must not be zero");var me=U(z),Ie=0,ke=[],Ne=!1;function je(st,Bt,cr){if(cr!=null&&typeof cr!="function")throw new Error("task callback must be a function");if(He.started=!0,h(st)||(st=[st]),st.length===0&&He.idle())return O(function(){He.drain()});for(var Nr=0,mr=st.length;Nr<mr;Nr++){var Lr={data:st[Nr],callback:cr||Se};Bt?He._tasks.unshift(Lr):He._tasks.push(Lr)}Ne||(Ne=!0,O(function(){Ne=!1,He.process()}))}function ze(st){return function(Bt){Ie-=1;for(var cr=0,Nr=st.length;cr<Nr;cr++){var mr=st[cr],Lr=yn(ke,mr,0);Lr===0?ke.shift():Lr>0&&ke.splice(Lr,1),mr.callback.apply(mr,arguments),Bt!=null&&He.error(Bt,mr.data)}Ie<=He.concurrency-He.buffer&&He.unsaturated(),He.idle()&&He.drain(),He.process()}}var nt=!1,He={_tasks:new We,concurrency:te,payload:ce,saturated:Se,unsaturated:Se,buffer:te/4,empty:Se,drain:Se,error:Se,started:!1,paused:!1,push:function(st,Bt){je(st,!1,Bt)},kill:function(){He.drain=Se,He._tasks.empty()},unshift:function(st,Bt){je(st,!0,Bt)},remove:function(st){He._tasks.remove(st)},process:function(){if(!nt){for(nt=!0;!He.paused&&Ie<He.concurrency&&He._tasks.length;){var st=[],Bt=[],cr=He._tasks.length;He.payload&&(cr=Math.min(cr,He.payload));for(var Nr=0;Nr<cr;Nr++){var mr=He._tasks.shift();st.push(mr),ke.push(mr),Bt.push(mr.data)}Ie+=1,He._tasks.length===0&&He.empty(),Ie===He.concurrency&&He.saturated();var Lr=Nt(ze(st));me(Bt,Lr)}nt=!1}},length:function(){return He._tasks.length},running:function(){return Ie},workersList:function(){return ke},idle:function(){return He._tasks.length+Ie===0},pause:function(){He.paused=!0},resume:function(){He.paused!==!1&&(He.paused=!1,O(He.process))}};return He}function Xe(z,te){return $e(z,1,te)}We.prototype.removeLink=function(z){return z.prev?z.prev.next=z.next:this.head=z.next,z.next?z.next.prev=z.prev:this.tail=z.prev,z.prev=z.next=null,this.length-=1,z},We.prototype.empty=function(){for(;this.head;)this.shift();return this},We.prototype.insertAfter=function(z,te){te.prev=z,te.next=z.next,z.next?z.next.prev=te:this.tail=te,z.next=te,this.length+=1},We.prototype.insertBefore=function(z,te){te.prev=z.prev,te.next=z,z.prev?z.prev.next=te:this.head=te,z.prev=te,this.length+=1},We.prototype.unshift=function(z){this.head?this.insertBefore(this.head,z):_e(this,z)},We.prototype.push=function(z){this.tail?this.insertAfter(this.tail,z):_e(this,z)},We.prototype.shift=function(){return this.head&&this.removeLink(this.head)},We.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},We.prototype.toArray=function(){for(var z=Array(this.length),te=this.head,ce=0;ce<this.length;ce++)z[ce]=te.data,te=te.next;return z},We.prototype.remove=function(z){for(var te=this.head;te;){var ce=te.next;z(te)&&this.removeLink(te),te=ce}return this};var Lt=Mt(Tr,1);function It(z,te,ce,me){me=Ae(me||Se);var Ie=U(ce);Lt(z,function(ke,Ne,je){Ie(te,ke,function(ze,nt){te=nt,je(ze)})},function(ke){me(ke,te)})}function kt(){var z=ar(arguments,U);return function(){var te=y(arguments),ce=this,me=te[te.length-1];typeof me=="function"?te.pop():me=Se,It(z,te,function(Ie,ke,Ne){ke.apply(ce,Ie.concat(function(je){var ze=y(arguments,1);Ne(je,ze)}))},function(Ie,ke){me.apply(ce,[Ie].concat(ke))})}}var dt=function(){return kt.apply(null,y(arguments).reverse())},Xd=Array.prototype.concat,vo=function(z,te,ce,me){me=me||Se;var Ie=U(ce);Or(z,te,function(ke,Ne){Ie(ke,function(je){return je?Ne(je):Ne(null,y(arguments,1))})},function(ke,Ne){for(var je=[],ze=0;ze<Ne.length;ze++)Ne[ze]&&(je=Xd.apply(je,Ne[ze]));return me(ke,je)})},wu=Mt(vo,1/0),xu=Mt(vo,1),_u=function(){var z=y(arguments),te=[null].concat(z);return function(){return arguments[arguments.length-1].apply(this,te)}};function bi(z){return z}function Dn(z,te){return function(ce,me,Ie,ke){ke=ke||Se;var Ne,je=!1;ce(me,function(ze,nt,He){Ie(ze,function(st,Bt){st?He(st):z(Bt)&&!Ne?(je=!0,Ne=te(!0,ze),He(null,T)):He()})},function(ze){ze?ke(ze):ke(null,je?Ne:te(!1))})}}function Eu(z,te){return te}var yo=zr(Dn(bi,Eu)),wi=pr(Dn(bi,Eu)),bo=Mt(wi,1);function Su(z){return function(te){var ce=y(arguments,1);ce.push(function(me){var Ie=y(arguments,1);typeof console=="object"&&(me?console.error&&console.error(me):console[z]&&Bn(Ie,function(ke){console[z](ke)}))}),U(te).apply(null,ce)}}var Cu=Su("dir");function ku(z,te,ce){ce=Nt(ce||Se);var me=U(z),Ie=U(te);function ke(je){if(je)return ce(je);var ze=y(arguments,1);ze.push(Ne),Ie.apply(this,ze)}function Ne(je,ze){return je?ce(je):ze?void me(ke):ce(null)}Ne(null,!0)}function ca(z,te,ce){ce=Nt(ce||Se);var me=U(z),Ie=function(ke){if(ke)return ce(ke);var Ne=y(arguments,1);if(te.apply(this,Ne))return me(Ie);ce.apply(null,[null].concat(Ne))};me(Ie)}function Au(z,te,ce){ca(z,function(){return!te.apply(this,arguments)},ce)}function Iu(z,te,ce){ce=Nt(ce||Se);var me=U(te),Ie=U(z);function ke(je){if(je)return ce(je);Ie(Ne)}function Ne(je,ze){return je?ce(je):ze?void me(ke):ce(null)}Ie(Ne)}function Ru(z){return function(te,ce,me){return z(te,me)}}function wo(z,te,ce){_t(z,Ru(U(te)),ce)}function xi(z,te,ce,me){Pn(te)(z,Ru(U(ce)),me)}var _i=Mt(xi,1);function ua(z){return K(z)?z:v(function(te,ce){var me=!0;te.push(function(){var Ie=arguments;me?O(function(){ce.apply(null,Ie)}):ce.apply(null,Ie)}),z.apply(this,te),me=!1})}function xo(z){return!z}var _o=zr(Dn(xo,xo)),Ei=pr(Dn(xo,xo)),Eo=Mt(Ei,1);function Tu(z){return function(te){return te==null?void 0:te[z]}}function Qd(z,te,ce,me){var Ie=new Array(te.length);z(te,function(ke,Ne,je){ce(ke,function(ze,nt){Ie[Ne]=!!nt,je(ze)})},function(ke){if(ke)return me(ke);for(var Ne=[],je=0;je<te.length;je++)Ie[je]&&Ne.push(te[je]);me(null,Ne)})}function Jd(z,te,ce,me){var Ie=[];z(te,function(ke,Ne,je){ce(ke,function(ze,nt){ze?je(ze):(nt&&Ie.push({index:Ne,value:ke}),je())})},function(ke){ke?me(ke):me(null,ar(Ie.sort(function(Ne,je){return Ne.index-je.index}),Tu("value")))})}function la(z,te,ce,me){(lt(te)?Qd:Jd)(z,te,U(ce),me||Se)}var So=zr(la),Si=pr(la),Co=Mt(Si,1);function Ou(z,te){var ce=Nt(te||Se),me=U(ua(z));function Ie(ke){if(ke)return ce(ke);me(Ie)}Ie()}var ko=function(z,te,ce,me){me=me||Se;var Ie=U(ce);Or(z,te,function(ke,Ne){Ie(ke,function(je,ze){return je?Ne(je):Ne(null,{key:ze,val:ke})})},function(ke,Ne){for(var je={},ze=Object.prototype.hasOwnProperty,nt=0;nt<Ne.length;nt++)if(Ne[nt]){var He=Ne[nt].key,st=Ne[nt].val;ze.call(je,He)?je[He].push(st):je[He]=[st]}return me(ke,je)})},Nu=Mt(ko,1/0),Lu=Mt(ko,1),Pu=Su("log");function Ao(z,te,ce,me){me=Ae(me||Se);var Ie={},ke=U(ce);Tr(z,te,function(Ne,je,ze){ke(Ne,je,function(nt,He){if(nt)return ze(nt);Ie[je]=He,ze()})},function(Ne){me(Ne,Ie)})}var Bu=Mt(Ao,1/0),Fu=Mt(Ao,1);function Du(z,te){return te in z}function ju(z,te){var ce=Object.create(null),me=Object.create(null);te=te||bi;var Ie=U(z),ke=v(function(Ne,je){var ze=te.apply(null,Ne);Du(ce,ze)?O(function(){je.apply(null,ce[ze])}):Du(me,ze)?me[ze].push(je):(me[ze]=[je],Ie.apply(null,Ne.concat(function(){var nt=y(arguments);ce[ze]=nt;var He=me[ze];delete me[ze];for(var st=0,Bt=He.length;st<Bt;st++)He[st].apply(null,nt)})))});return ke.memo=ce,ke.unmemoized=z,ke}var Mu=S(R?process.nextTick:d?setImmediate:w);function fa(z,te,ce){ce=ce||Se;var me=lt(te)?[]:{};z(te,function(Ie,ke,Ne){U(Ie)(function(je,ze){arguments.length>2&&(ze=y(arguments,1)),me[ke]=ze,Ne(je)})},function(Ie){ce(Ie,me)})}function Uu(z,te){fa(_t,z,te)}function $u(z,te,ce){fa(Pn(te),z,ce)}var ha=function(z,te){var ce=U(z);return $e(function(me,Ie){ce(me[0],Ie)},te,1)},zu=function(z,te){var ce=ha(z,te);return ce.push=function(me,Ie,ke){if(ke==null&&(ke=Se),typeof ke!="function")throw new Error("task callback must be a function");if(ce.started=!0,h(me)||(me=[me]),me.length===0)return O(function(){ce.drain()});Ie=Ie||0;for(var Ne=ce._tasks.head;Ne&&Ie>=Ne.priority;)Ne=Ne.next;for(var je=0,ze=me.length;je<ze;je++){var nt={data:me[je],priority:Ie,callback:ke};Ne?ce._tasks.insertBefore(Ne,nt):ce._tasks.push(nt)}O(ce.process)},delete ce.unshift,ce};function Gu(z,te){if(te=Ae(te||Se),!h(z))return te(new TypeError("First argument to race must be an array of functions"));if(!z.length)return te();for(var ce=0,me=z.length;ce<me;ce++)U(z[ce])(te)}function Io(z,te,ce,me){It(y(z).reverse(),te,ce,me)}function Ro(z){var te=U(z);return v(function(ce,me){return ce.push(function(Ie,ke){var Ne;Ie?me(null,{error:Ie}):(Ne=arguments.length<=2?ke:y(arguments,1),me(null,{value:Ne}))}),te.apply(this,ce)})}function Vu(z){var te;return h(z)?te=ar(z,Ro):(te={},Qr(z,function(ce,me){te[me]=Ro.call(this,ce)})),te}function qu(z,te,ce,me){la(z,te,function(Ie,ke){ce(Ie,function(Ne,je){ke(Ne,!je)})},me)}var Hu=zr(qu),da=pr(qu),Wu=Mt(da,1);function Ku(z){return function(){return z}}function To(z,te,ce){var me=5,Ie=0,ke={times:me,intervalFunc:Ku(Ie)};function Ne(He,st){if(typeof st=="object")He.times=+st.times||me,He.intervalFunc=typeof st.interval=="function"?st.interval:Ku(+st.interval||Ie),He.errorFilter=st.errorFilter;else{if(typeof st!="number"&&typeof st!="string")throw new Error("Invalid arguments for async.retry");He.times=+st||me}}if(arguments.length<3&&typeof z=="function"?(ce=te||Se,te=z):(Ne(ke,z),ce=ce||Se),typeof te!="function")throw new Error("Invalid arguments for async.retry");var je=U(te),ze=1;function nt(){je(function(He){He&&ze++<ke.times&&(typeof ke.errorFilter!="function"||ke.errorFilter(He))?setTimeout(nt,ke.intervalFunc(ze)):ce.apply(null,arguments)})}nt()}var Zu=function(z,te){te||(te=z,z=null);var ce=U(te);return v(function(me,Ie){function ke(Ne){ce.apply(null,me.concat(Ne))}z?To(z,ke,Ie):To(ke,Ie)})};function Yu(z,te){fa(Lt,z,te)}var Oo=zr(Dn(Boolean,bi)),Ci=pr(Dn(Boolean,bi)),No=Mt(Ci,1);function Xu(z,te,ce){var me=U(te);function Ie(ke,Ne){var je=ke.criteria,ze=Ne.criteria;return je<ze?-1:je>ze?1:0}dr(z,function(ke,Ne){me(ke,function(je,ze){if(je)return Ne(je);Ne(null,{value:ke,criteria:ze})})},function(ke,Ne){if(ke)return ce(ke);ce(null,ar(Ne.sort(Ie),Tu("value")))})}function Qu(z,te,ce){var me=U(z);return v(function(Ie,ke){var Ne,je=!1;function ze(){var nt=z.name||"anonymous",He=new Error('Callback function "'+nt+'" timed out.');He.code="ETIMEDOUT",ce&&(He.info=ce),je=!0,ke(He)}Ie.push(function(){je||(ke.apply(null,arguments),clearTimeout(Ne))}),Ne=setTimeout(ze,te),me.apply(null,Ie)})}var ep=Math.ceil,tp=Math.max;function rp(z,te,ce,me){for(var Ie=-1,ke=tp(ep((te-z)/ce),0),Ne=Array(ke);ke--;)Ne[++Ie]=z,z+=ce;return Ne}function Lo(z,te,ce,me){var Ie=U(ce);Or(rp(0,z,1),te,Ie,me)}var Ju=Mt(Lo,1/0),el=Mt(Lo,1);function tl(z,te,ce,me){arguments.length<=3&&(me=ce,ce=te,te=h(z)?[]:{}),me=Ae(me||Se);var Ie=U(ce);_t(z,function(ke,Ne,je){Ie(te,ke,Ne,je)},function(ke){me(ke,te)})}function rl(z,te){var ce,me=null;te=te||Se,_i(z,function(Ie,ke){U(Ie)(function(Ne,je){ce=arguments.length>2?y(arguments,1):je,me=Ne,ke(!Ne)})},function(){te(me,ce)})}function nl(z){return function(){return(z.unmemoized||z).apply(null,arguments)}}function pa(z,te,ce){ce=Nt(ce||Se);var me=U(te);if(!z())return ce(null);var Ie=function(ke){if(ke)return ce(ke);if(z())return me(Ie);var Ne=y(arguments,1);ce.apply(null,[null].concat(Ne))};me(Ie)}function il(z,te,ce){pa(function(){return!z.apply(this,arguments)},te,ce)}var ol=function(z,te){if(te=Ae(te||Se),!h(z))return te(new Error("First argument to waterfall must be an array of functions"));if(!z.length)return te();var ce=0;function me(ke){var Ne=U(z[ce++]);ke.push(Nt(Ie)),Ne.apply(null,ke)}function Ie(ke){if(ke||ce===z.length)return te.apply(null,arguments);me(y(arguments,1))}me([])},np={apply:l,applyEach:gi,applyEachSeries:vi,asyncify:N,auto:yi,autoInject:qe,cargo:Xe,compose:dt,concat:wu,concatLimit:vo,concatSeries:xu,constant:_u,detect:yo,detectLimit:wi,detectSeries:bo,dir:Cu,doDuring:ku,doUntil:Au,doWhilst:ca,during:Iu,each:wo,eachLimit:xi,eachOf:_t,eachOfLimit:Tr,eachOfSeries:Lt,eachSeries:_i,ensureAsync:ua,every:_o,everyLimit:Ei,everySeries:Eo,filter:So,filterLimit:Si,filterSeries:Co,forever:Ou,groupBy:Nu,groupByLimit:ko,groupBySeries:Lu,log:Pu,map:dr,mapLimit:Or,mapSeries:Gr,mapValues:Bu,mapValuesLimit:Ao,mapValuesSeries:Fu,memoize:ju,nextTick:Mu,parallel:Uu,parallelLimit:$u,priorityQueue:zu,queue:ha,race:Gu,reduce:It,reduceRight:Io,reflect:Ro,reflectAll:Vu,reject:Hu,rejectLimit:da,rejectSeries:Wu,retry:To,retryable:Zu,seq:kt,series:Yu,setImmediate:O,some:Oo,someLimit:Ci,someSeries:No,sortBy:Xu,timeout:Qu,times:Ju,timesLimit:Lo,timesSeries:el,transform:tl,tryEach:rl,unmemoize:nl,until:il,waterfall:ol,whilst:pa,all:_o,allLimit:Ei,allSeries:Eo,any:Oo,anyLimit:Ci,anySeries:No,find:yo,findLimit:wi,findSeries:bo,forEach:wo,forEachSeries:_i,forEachLimit:xi,forEachOf:_t,forEachOfSeries:Lt,forEachOfLimit:Tr,inject:It,foldl:It,foldr:Io,select:So,selectLimit:Si,selectSeries:Co,wrapSync:N};a.default=np,a.apply=l,a.applyEach=gi,a.applyEachSeries=vi,a.asyncify=N,a.auto=yi,a.autoInject=qe,a.cargo=Xe,a.compose=dt,a.concat=wu,a.concatLimit=vo,a.concatSeries=xu,a.constant=_u,a.detect=yo,a.detectLimit=wi,a.detectSeries=bo,a.dir=Cu,a.doDuring=ku,a.doUntil=Au,a.doWhilst=ca,a.during=Iu,a.each=wo,a.eachLimit=xi,a.eachOf=_t,a.eachOfLimit=Tr,a.eachOfSeries=Lt,a.eachSeries=_i,a.ensureAsync=ua,a.every=_o,a.everyLimit=Ei,a.everySeries=Eo,a.filter=So,a.filterLimit=Si,a.filterSeries=Co,a.forever=Ou,a.groupBy=Nu,a.groupByLimit=ko,a.groupBySeries=Lu,a.log=Pu,a.map=dr,a.mapLimit=Or,a.mapSeries=Gr,a.mapValues=Bu,a.mapValuesLimit=Ao,a.mapValuesSeries=Fu,a.memoize=ju,a.nextTick=Mu,a.parallel=Uu,a.parallelLimit=$u,a.priorityQueue=zu,a.queue=ha,a.race=Gu,a.reduce=It,a.reduceRight=Io,a.reflect=Ro,a.reflectAll=Vu,a.reject=Hu,a.rejectLimit=da,a.rejectSeries=Wu,a.retry=To,a.retryable=Zu,a.seq=kt,a.series=Yu,a.setImmediate=O,a.some=Oo,a.someLimit=Ci,a.someSeries=No,a.sortBy=Xu,a.timeout=Qu,a.times=Ju,a.timesLimit=Lo,a.timesSeries=el,a.transform=tl,a.tryEach=rl,a.unmemoize=nl,a.until=il,a.waterfall=ol,a.whilst=pa,a.all=_o,a.allLimit=Ei,a.allSeries=Eo,a.any=Oo,a.anyLimit=Ci,a.anySeries=No,a.find=yo,a.findLimit=wi,a.findSeries=bo,a.forEach=wo,a.forEachSeries=_i,a.forEachLimit=xi,a.forEachOf=_t,a.forEachOfSeries=Lt,a.forEachOfLimit=Tr,a.inject=It,a.foldl=It,a.foldr=Io,a.select=So,a.selectLimit=Si,a.selectSeries=Co,a.wrapSync=N,Object.defineProperty(a,"__esModule",{value:!0})}(g)},664:i=>{i.exports=function(g,f){for(var a=0;a++<f;)g*=2;return g}},911:(i,g,f)=>{var a=f(346),y=f(664);i.exports=function(l){if(!arguments.length)throw new SyntaxError("must supply a polling function");if(!a(l,"function"))throw new TypeError("poll must be a function");return function(){var v,I,d=1/0,R=!1,w=1e3,S=null,O=0;function N(){var H=l(P);l.length===0&&P(H)}function P(H){var D=w,K=I;O+=1,H||O>=d?I&&(I=null,K(!!H)):(R&&(R===!0?D=y(D,O):D+=O*R),S=setTimeout(N,D))}return v=function(H){if(S&&(clearTimeout(S),S=null,I&&I(!1),I=null,O=0),arguments.length){if(!a(H,"function"))throw new TypeError("done callback must be a function");I=H}S=setTimeout(N,w)},v.ask=function(H){if(S)throw new SyntaxError("can not set ask limit during polling");if(!a(H,"number"))throw new TypeError("ask limit must be a number");return d=H,v},v.every=function(H){if(S)throw new SyntaxError("can not set timeout during polling");if(!a(H,"number"))throw new TypeError("timout must be a number");return w=H,v},v.incr=function(H){if(S)throw new SyntexError("can not set increment during polling");if(!arguments.length||a(H,"boolean"))R=!!H;else{if(!a(H,"number"))throw new TypeError("increment must be a boolean or number");R=H}return v},v}()}},742:(i,g)=>{g.byteLength=function(w){var S=d(w),O=S[0],N=S[1];return 3*(O+N)/4-N},g.toByteArray=function(w){var S,O,N=d(w),P=N[0],H=N[1],D=new y(function(ue,he,q){return 3*(he+q)/4-q}(0,P,H)),K=0,U=H>0?P-4:P;for(O=0;O<U;O+=4)S=a[w.charCodeAt(O)]<<18|a[w.charCodeAt(O+1)]<<12|a[w.charCodeAt(O+2)]<<6|a[w.charCodeAt(O+3)],D[K++]=S>>16&255,D[K++]=S>>8&255,D[K++]=255&S;return H===2&&(S=a[w.charCodeAt(O)]<<2|a[w.charCodeAt(O+1)]>>4,D[K++]=255&S),H===1&&(S=a[w.charCodeAt(O)]<<10|a[w.charCodeAt(O+1)]<<4|a[w.charCodeAt(O+2)]>>2,D[K++]=S>>8&255,D[K++]=255&S),D},g.fromByteArray=function(w){for(var S,O=w.length,N=O%3,P=[],H=16383,D=0,K=O-N;D<K;D+=H)P.push(R(w,D,D+H>K?K:D+H));return N===1?(S=w[O-1],P.push(f[S>>2]+f[S<<4&63]+"==")):N===2&&(S=(w[O-2]<<8)+w[O-1],P.push(f[S>>10]+f[S>>4&63]+f[S<<2&63]+"=")),P.join("")};for(var f=[],a=[],y=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,I=l.length;v<I;++v)f[v]=l[v],a[l.charCodeAt(v)]=v;function d(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=w.indexOf("=");return O===-1&&(O=S),[O,O===S?0:4-O%4]}function R(w,S,O){for(var N,P,H=[],D=S;D<O;D+=3)N=(w[D]<<16&16711680)+(w[D+1]<<8&65280)+(255&w[D+2]),H.push(f[(P=N)>>18&63]+f[P>>12&63]+f[P>>6&63]+f[63&P]);return H.join("")}a[45]=62,a[95]=63},764:(i,g,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const a=f(742),y=f(645),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.lW=d,g.h2=50;const v=2147483647;function I(m){if(m>v)throw new RangeError('The value "'+m+'" is invalid for option "size"');const A=new Uint8Array(m);return Object.setPrototypeOf(A,d.prototype),A}function d(m,A,h){if(typeof m=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(m)}return R(m,A,h)}function R(m,A,h){if(typeof m=="string")return function(B,J){if(typeof J=="string"&&J!==""||(J="utf8"),!d.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const ge=0|H(B,J);let be=I(ge);const Ke=be.write(B,J);return Ke!==ge&&(be=be.slice(0,Ke)),be}(m,A);if(ArrayBuffer.isView(m))return function(B){if(Re(B,Uint8Array)){const J=new Uint8Array(B);return N(J.buffer,J.byteOffset,J.byteLength)}return O(B)}(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Re(m,ArrayBuffer)||m&&Re(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(m,SharedArrayBuffer)||m&&Re(m.buffer,SharedArrayBuffer)))return N(m,A,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const c=m.valueOf&&m.valueOf();if(c!=null&&c!==m)return d.from(c,A,h);const p=function(B){if(d.isBuffer(B)){const J=0|P(B.length),ge=I(J);return ge.length===0||B.copy(ge,0,0,J),ge}if(B.length!==void 0)return typeof B.length!="number"||Pe(B.length)?I(0):O(B);if(B.type==="Buffer"&&Array.isArray(B.data))return O(B.data)}(m);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return d.from(m[Symbol.toPrimitive]("string"),A,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}function w(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function S(m){return w(m),I(m<0?0:0|P(m))}function O(m){const A=m.length<0?0:0|P(m.length),h=I(A);for(let c=0;c<A;c+=1)h[c]=255&m[c];return h}function N(m,A,h){if(A<0||m.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<A+(h||0))throw new RangeError('"length" is outside of buffer bounds');let c;return c=A===void 0&&h===void 0?new Uint8Array(m):h===void 0?new Uint8Array(m,A):new Uint8Array(m,A,h),Object.setPrototypeOf(c,d.prototype),c}function P(m){if(m>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|m}function H(m,A){if(d.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||Re(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&h===0)return 0;let p=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return se(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return ne(m).length;default:if(p)return c?-1:se(m).length;A=(""+A).toLowerCase(),p=!0}}function D(m,A,h){let c=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0)<=(A>>>=0))return"";for(m||(m="utf8");;)switch(m){case"hex":return G(this,A,h);case"utf8":case"utf-8":return F(this,A,h);case"ascii":return j(this,A,h);case"latin1":case"binary":return Z(this,A,h);case"base64":return $(this,A,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,A,h);default:if(c)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),c=!0}}function K(m,A,h){const c=m[A];m[A]=m[h],m[h]=c}function U(m,A,h,c,p){if(m.length===0)return-1;if(typeof h=="string"?(c=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),Pe(h=+h)&&(h=p?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(p)return-1;h=m.length-1}else if(h<0){if(!p)return-1;h=0}if(typeof A=="string"&&(A=d.from(A,c)),d.isBuffer(A))return A.length===0?-1:ue(m,A,h,c,p);if(typeof A=="number")return A&=255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(m,A,h):Uint8Array.prototype.lastIndexOf.call(m,A,h):ue(m,[A],h,c,p);throw new TypeError("val must be string, number or Buffer")}function ue(m,A,h,c,p){let B,J=1,ge=m.length,be=A.length;if(c!==void 0&&((c=String(c).toLowerCase())==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(m.length<2||A.length<2)return-1;J=2,ge/=2,be/=2,h/=2}function Ke(tt,rt){return J===1?tt[rt]:tt.readUInt16BE(rt*J)}if(p){let tt=-1;for(B=h;B<ge;B++)if(Ke(m,B)===Ke(A,tt===-1?0:B-tt)){if(tt===-1&&(tt=B),B-tt+1===be)return tt*J}else tt!==-1&&(B-=B-tt),tt=-1}else for(h+be>ge&&(h=ge-be),B=h;B>=0;B--){let tt=!0;for(let rt=0;rt<be;rt++)if(Ke(m,B+rt)!==Ke(A,rt)){tt=!1;break}if(tt)return B}return-1}function he(m,A,h,c){h=Number(h)||0;const p=m.length-h;c?(c=Number(c))>p&&(c=p):c=p;const B=A.length;let J;for(c>B/2&&(c=B/2),J=0;J<c;++J){const ge=parseInt(A.substr(2*J,2),16);if(Pe(ge))return J;m[h+J]=ge}return J}function q(m,A,h,c){return ve(se(A,m.length-h),m,h,c)}function Q(m,A,h,c){return ve(function(p){const B=[];for(let J=0;J<p.length;++J)B.push(255&p.charCodeAt(J));return B}(A),m,h,c)}function _(m,A,h,c){return ve(ne(A),m,h,c)}function k(m,A,h,c){return ve(function(p,B){let J,ge,be;const Ke=[];for(let tt=0;tt<p.length&&!((B-=2)<0);++tt)J=p.charCodeAt(tt),ge=J>>8,be=J%256,Ke.push(be),Ke.push(ge);return Ke}(A,m.length-h),m,h,c)}function $(m,A,h){return A===0&&h===m.length?a.fromByteArray(m):a.fromByteArray(m.slice(A,h))}function F(m,A,h){h=Math.min(m.length,h);const c=[];let p=A;for(;p<h;){const B=m[p];let J=null,ge=B>239?4:B>223?3:B>191?2:1;if(p+ge<=h){let be,Ke,tt,rt;switch(ge){case 1:B<128&&(J=B);break;case 2:be=m[p+1],(192&be)==128&&(rt=(31&B)<<6|63&be,rt>127&&(J=rt));break;case 3:be=m[p+1],Ke=m[p+2],(192&be)==128&&(192&Ke)==128&&(rt=(15&B)<<12|(63&be)<<6|63&Ke,rt>2047&&(rt<55296||rt>57343)&&(J=rt));break;case 4:be=m[p+1],Ke=m[p+2],tt=m[p+3],(192&be)==128&&(192&Ke)==128&&(192&tt)==128&&(rt=(15&B)<<18|(63&be)<<12|(63&Ke)<<6|63&tt,rt>65535&&rt<1114112&&(J=rt))}}J===null?(J=65533,ge=1):J>65535&&(J-=65536,c.push(J>>>10&1023|55296),J=56320|1023&J),c.push(J),p+=ge}return function(B){const J=B.length;if(J<=V)return String.fromCharCode.apply(String,B);let ge="",be=0;for(;be<J;)ge+=String.fromCharCode.apply(String,B.slice(be,be+=V));return ge}(c)}d.TYPED_ARRAY_SUPPORT=function(){try{const m=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(m,A),m.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(m,A,h){return R(m,A,h)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(m,A,h){return function(c,p,B){return w(c),c<=0?I(c):p!==void 0?typeof B=="string"?I(c).fill(p,B):I(c).fill(p):I(c)}(m,A,h)},d.allocUnsafe=function(m){return S(m)},d.allocUnsafeSlow=function(m){return S(m)},d.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==d.prototype},d.compare=function(m,A){if(Re(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength)),Re(A,Uint8Array)&&(A=d.from(A,A.offset,A.byteLength)),!d.isBuffer(m)||!d.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===A)return 0;let h=m.length,c=A.length;for(let p=0,B=Math.min(h,c);p<B;++p)if(m[p]!==A[p]){h=m[p],c=A[p];break}return h<c?-1:c<h?1:0},d.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(m,A){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return d.alloc(0);let h;if(A===void 0)for(A=0,h=0;h<m.length;++h)A+=m[h].length;const c=d.allocUnsafe(A);let p=0;for(h=0;h<m.length;++h){let B=m[h];if(Re(B,Uint8Array))p+B.length>c.length?(d.isBuffer(B)||(B=d.from(B)),B.copy(c,p)):Uint8Array.prototype.set.call(c,B,p);else{if(!d.isBuffer(B))throw new TypeError('"list" argument must be an Array of Buffers');B.copy(c,p)}p+=B.length}return c},d.byteLength=H,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const m=this.length;if(m%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<m;A+=2)K(this,A,A+1);return this},d.prototype.swap32=function(){const m=this.length;if(m%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<m;A+=4)K(this,A,A+3),K(this,A+1,A+2);return this},d.prototype.swap64=function(){const m=this.length;if(m%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<m;A+=8)K(this,A,A+7),K(this,A+1,A+6),K(this,A+2,A+5),K(this,A+3,A+4);return this},d.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?F(this,0,m):D.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(m){if(!d.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m||d.compare(this,m)===0},d.prototype.inspect=function(){let m="";const A=g.h2;return m=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(m+=" ... "),"<Buffer "+m+">"},l&&(d.prototype[l]=d.prototype.inspect),d.prototype.compare=function(m,A,h,c,p){if(Re(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength)),!d.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(A===void 0&&(A=0),h===void 0&&(h=m?m.length:0),c===void 0&&(c=0),p===void 0&&(p=this.length),A<0||h>m.length||c<0||p>this.length)throw new RangeError("out of range index");if(c>=p&&A>=h)return 0;if(c>=p)return-1;if(A>=h)return 1;if(this===m)return 0;let B=(p>>>=0)-(c>>>=0),J=(h>>>=0)-(A>>>=0);const ge=Math.min(B,J),be=this.slice(c,p),Ke=m.slice(A,h);for(let tt=0;tt<ge;++tt)if(be[tt]!==Ke[tt]){B=be[tt],J=Ke[tt];break}return B<J?-1:J<B?1:0},d.prototype.includes=function(m,A,h){return this.indexOf(m,A,h)!==-1},d.prototype.indexOf=function(m,A,h){return U(this,m,A,h,!0)},d.prototype.lastIndexOf=function(m,A,h){return U(this,m,A,h,!1)},d.prototype.write=function(m,A,h,c){if(A===void 0)c="utf8",h=this.length,A=0;else if(h===void 0&&typeof A=="string")c=A,h=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A>>>=0,isFinite(h)?(h>>>=0,c===void 0&&(c="utf8")):(c=h,h=void 0)}const p=this.length-A;if((h===void 0||h>p)&&(h=p),m.length>0&&(h<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let B=!1;for(;;)switch(c){case"hex":return he(this,m,A,h);case"utf8":case"utf-8":return q(this,m,A,h);case"ascii":case"latin1":case"binary":return Q(this,m,A,h);case"base64":return _(this,m,A,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,m,A,h);default:if(B)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),B=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const V=4096;function j(m,A,h){let c="";h=Math.min(m.length,h);for(let p=A;p<h;++p)c+=String.fromCharCode(127&m[p]);return c}function Z(m,A,h){let c="";h=Math.min(m.length,h);for(let p=A;p<h;++p)c+=String.fromCharCode(m[p]);return c}function G(m,A,h){const c=m.length;(!A||A<0)&&(A=0),(!h||h<0||h>c)&&(h=c);let p="";for(let B=A;B<h;++B)p+=we[m[B]];return p}function Y(m,A,h){const c=m.slice(A,h);let p="";for(let B=0;B<c.length-1;B+=2)p+=String.fromCharCode(c[B]+256*c[B+1]);return p}function ye(m,A,h){if(m%1!=0||m<0)throw new RangeError("offset is not uint");if(m+A>h)throw new RangeError("Trying to access beyond buffer length")}function Ee(m,A,h,c,p,B){if(!d.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>p||A<B)throw new RangeError('"value" argument is out of bounds');if(h+c>m.length)throw new RangeError("Index out of range")}function Te(m,A,h,c,p){lt(A,c,p,m,h,7);let B=Number(A&BigInt(4294967295));m[h++]=B,B>>=8,m[h++]=B,B>>=8,m[h++]=B,B>>=8,m[h++]=B;let J=Number(A>>BigInt(32)&BigInt(4294967295));return m[h++]=J,J>>=8,m[h++]=J,J>>=8,m[h++]=J,J>>=8,m[h++]=J,h}function ct(m,A,h,c,p){lt(A,c,p,m,h,7);let B=Number(A&BigInt(4294967295));m[h+7]=B,B>>=8,m[h+6]=B,B>>=8,m[h+5]=B,B>>=8,m[h+4]=B;let J=Number(A>>BigInt(32)&BigInt(4294967295));return m[h+3]=J,J>>=8,m[h+2]=J,J>>=8,m[h+1]=J,J>>=8,m[h]=J,h+8}function ft(m,A,h,c,p,B){if(h+c>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Ze(m,A,h,c,p){return A=+A,h>>>=0,p||ft(m,0,h,4),y.write(m,A,h,c,23,4),h+4}function et(m,A,h,c,p){return A=+A,h>>>=0,p||ft(m,0,h,8),y.write(m,A,h,c,52,8),h+8}d.prototype.slice=function(m,A){const h=this.length;(m=~~m)<0?(m+=h)<0&&(m=0):m>h&&(m=h),(A=A===void 0?h:~~A)<0?(A+=h)<0&&(A=0):A>h&&(A=h),A<m&&(A=m);const c=this.subarray(m,A);return Object.setPrototypeOf(c,d.prototype),c},d.prototype.readUintLE=d.prototype.readUIntLE=function(m,A,h){m>>>=0,A>>>=0,h||ye(m,A,this.length);let c=this[m],p=1,B=0;for(;++B<A&&(p*=256);)c+=this[m+B]*p;return c},d.prototype.readUintBE=d.prototype.readUIntBE=function(m,A,h){m>>>=0,A>>>=0,h||ye(m,A,this.length);let c=this[m+--A],p=1;for(;A>0&&(p*=256);)c+=this[m+--A]*p;return c},d.prototype.readUint8=d.prototype.readUInt8=function(m,A){return m>>>=0,A||ye(m,1,this.length),this[m]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(m,A){return m>>>=0,A||ye(m,2,this.length),this[m]|this[m+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(m,A){return m>>>=0,A||ye(m,2,this.length),this[m]<<8|this[m+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(m,A){return m>>>=0,A||ye(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+16777216*this[m+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(m,A){return m>>>=0,A||ye(m,4,this.length),16777216*this[m]+(this[m+1]<<16|this[m+2]<<8|this[m+3])},d.prototype.readBigUInt64LE=Fe(function(m){T(m>>>=0,"offset");const A=this[m],h=this[m+7];A!==void 0&&h!==void 0||Se(m,this.length-8);const c=A+256*this[++m]+65536*this[++m]+this[++m]*2**24,p=this[++m]+256*this[++m]+65536*this[++m]+h*2**24;return BigInt(c)+(BigInt(p)<<BigInt(32))}),d.prototype.readBigUInt64BE=Fe(function(m){T(m>>>=0,"offset");const A=this[m],h=this[m+7];A!==void 0&&h!==void 0||Se(m,this.length-8);const c=A*2**24+65536*this[++m]+256*this[++m]+this[++m],p=this[++m]*2**24+65536*this[++m]+256*this[++m]+h;return(BigInt(c)<<BigInt(32))+BigInt(p)}),d.prototype.readIntLE=function(m,A,h){m>>>=0,A>>>=0,h||ye(m,A,this.length);let c=this[m],p=1,B=0;for(;++B<A&&(p*=256);)c+=this[m+B]*p;return p*=128,c>=p&&(c-=Math.pow(2,8*A)),c},d.prototype.readIntBE=function(m,A,h){m>>>=0,A>>>=0,h||ye(m,A,this.length);let c=A,p=1,B=this[m+--c];for(;c>0&&(p*=256);)B+=this[m+--c]*p;return p*=128,B>=p&&(B-=Math.pow(2,8*A)),B},d.prototype.readInt8=function(m,A){return m>>>=0,A||ye(m,1,this.length),128&this[m]?-1*(255-this[m]+1):this[m]},d.prototype.readInt16LE=function(m,A){m>>>=0,A||ye(m,2,this.length);const h=this[m]|this[m+1]<<8;return 32768&h?4294901760|h:h},d.prototype.readInt16BE=function(m,A){m>>>=0,A||ye(m,2,this.length);const h=this[m+1]|this[m]<<8;return 32768&h?4294901760|h:h},d.prototype.readInt32LE=function(m,A){return m>>>=0,A||ye(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},d.prototype.readInt32BE=function(m,A){return m>>>=0,A||ye(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},d.prototype.readBigInt64LE=Fe(function(m){T(m>>>=0,"offset");const A=this[m],h=this[m+7];A!==void 0&&h!==void 0||Se(m,this.length-8);const c=this[m+4]+256*this[m+5]+65536*this[m+6]+(h<<24);return(BigInt(c)<<BigInt(32))+BigInt(A+256*this[++m]+65536*this[++m]+this[++m]*16777216)}),d.prototype.readBigInt64BE=Fe(function(m){T(m>>>=0,"offset");const A=this[m],h=this[m+7];A!==void 0&&h!==void 0||Se(m,this.length-8);const c=(A<<24)+65536*this[++m]+256*this[++m]+this[++m];return(BigInt(c)<<BigInt(32))+BigInt(this[++m]*16777216+65536*this[++m]+256*this[++m]+h)}),d.prototype.readFloatLE=function(m,A){return m>>>=0,A||ye(m,4,this.length),y.read(this,m,!0,23,4)},d.prototype.readFloatBE=function(m,A){return m>>>=0,A||ye(m,4,this.length),y.read(this,m,!1,23,4)},d.prototype.readDoubleLE=function(m,A){return m>>>=0,A||ye(m,8,this.length),y.read(this,m,!0,52,8)},d.prototype.readDoubleBE=function(m,A){return m>>>=0,A||ye(m,8,this.length),y.read(this,m,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(m,A,h,c){m=+m,A>>>=0,h>>>=0,!c&&Ee(this,m,A,h,Math.pow(2,8*h)-1,0);let p=1,B=0;for(this[A]=255&m;++B<h&&(p*=256);)this[A+B]=m/p&255;return A+h},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(m,A,h,c){m=+m,A>>>=0,h>>>=0,!c&&Ee(this,m,A,h,Math.pow(2,8*h)-1,0);let p=h-1,B=1;for(this[A+p]=255&m;--p>=0&&(B*=256);)this[A+p]=m/B&255;return A+h},d.prototype.writeUint8=d.prototype.writeUInt8=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,1,255,0),this[A]=255&m,A+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,2,65535,0),this[A]=255&m,this[A+1]=m>>>8,A+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,2,65535,0),this[A]=m>>>8,this[A+1]=255&m,A+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,4,4294967295,0),this[A+3]=m>>>24,this[A+2]=m>>>16,this[A+1]=m>>>8,this[A]=255&m,A+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,4,4294967295,0),this[A]=m>>>24,this[A+1]=m>>>16,this[A+2]=m>>>8,this[A+3]=255&m,A+4},d.prototype.writeBigUInt64LE=Fe(function(m,A=0){return Te(this,m,A,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Fe(function(m,A=0){return ct(this,m,A,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(m,A,h,c){if(m=+m,A>>>=0,!c){const ge=Math.pow(2,8*h-1);Ee(this,m,A,h,ge-1,-ge)}let p=0,B=1,J=0;for(this[A]=255&m;++p<h&&(B*=256);)m<0&&J===0&&this[A+p-1]!==0&&(J=1),this[A+p]=(m/B>>0)-J&255;return A+h},d.prototype.writeIntBE=function(m,A,h,c){if(m=+m,A>>>=0,!c){const ge=Math.pow(2,8*h-1);Ee(this,m,A,h,ge-1,-ge)}let p=h-1,B=1,J=0;for(this[A+p]=255&m;--p>=0&&(B*=256);)m<0&&J===0&&this[A+p+1]!==0&&(J=1),this[A+p]=(m/B>>0)-J&255;return A+h},d.prototype.writeInt8=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,1,127,-128),m<0&&(m=255+m+1),this[A]=255&m,A+1},d.prototype.writeInt16LE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,2,32767,-32768),this[A]=255&m,this[A+1]=m>>>8,A+2},d.prototype.writeInt16BE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,2,32767,-32768),this[A]=m>>>8,this[A+1]=255&m,A+2},d.prototype.writeInt32LE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,4,2147483647,-2147483648),this[A]=255&m,this[A+1]=m>>>8,this[A+2]=m>>>16,this[A+3]=m>>>24,A+4},d.prototype.writeInt32BE=function(m,A,h){return m=+m,A>>>=0,h||Ee(this,m,A,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[A]=m>>>24,this[A+1]=m>>>16,this[A+2]=m>>>8,this[A+3]=255&m,A+4},d.prototype.writeBigInt64LE=Fe(function(m,A=0){return Te(this,m,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Fe(function(m,A=0){return ct(this,m,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(m,A,h){return Ze(this,m,A,!0,h)},d.prototype.writeFloatBE=function(m,A,h){return Ze(this,m,A,!1,h)},d.prototype.writeDoubleLE=function(m,A,h){return et(this,m,A,!0,h)},d.prototype.writeDoubleBE=function(m,A,h){return et(this,m,A,!1,h)},d.prototype.copy=function(m,A,h,c){if(!d.isBuffer(m))throw new TypeError("argument should be a Buffer");if(h||(h=0),c||c===0||(c=this.length),A>=m.length&&(A=m.length),A||(A=0),c>0&&c<h&&(c=h),c===h||m.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),m.length-A<c-h&&(c=m.length-A+h);const p=c-h;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,h,c):Uint8Array.prototype.set.call(m,this.subarray(h,c),A),p},d.prototype.fill=function(m,A,h,c){if(typeof m=="string"){if(typeof A=="string"?(c=A,A=0,h=this.length):typeof h=="string"&&(c=h,h=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!d.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(m.length===1){const B=m.charCodeAt(0);(c==="utf8"&&B<128||c==="latin1")&&(m=B)}}else typeof m=="number"?m&=255:typeof m=="boolean"&&(m=Number(m));if(A<0||this.length<A||this.length<h)throw new RangeError("Out of range index");if(h<=A)return this;let p;if(A>>>=0,h=h===void 0?this.length:h>>>0,m||(m=0),typeof m=="number")for(p=A;p<h;++p)this[p]=m;else{const B=d.isBuffer(m)?m:d.from(m,c),J=B.length;if(J===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(p=0;p<h-A;++p)this[p+A]=B[p%J]}return this};const Qe={};function Je(m,A,h){Qe[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}function ht(m){let A="",h=m.length;const c=m[0]==="-"?1:0;for(;h>=c+4;h-=3)A=`_${m.slice(h-3,h)}${A}`;return`${m.slice(0,h)}${A}`}function lt(m,A,h,c,p,B){if(m>h||m<A){const J=typeof A=="bigint"?"n":"";let ge;throw ge=A===0||A===BigInt(0)?`>= 0${J} and < 2${J} ** ${8*(B+1)}${J}`:`>= -(2${J} ** ${8*(B+1)-1}${J}) and < 2 ** ${8*(B+1)-1}${J}`,new Qe.ERR_OUT_OF_RANGE("value",ge,m)}(function(J,ge,be){T(ge,"offset"),J[ge]!==void 0&&J[ge+be]!==void 0||Se(ge,J.length-(be+1))})(c,p,B)}function T(m,A){if(typeof m!="number")throw new Qe.ERR_INVALID_ARG_TYPE(A,"number",m)}function Se(m,A,h){throw Math.floor(m)!==m?(T(m,h),new Qe.ERR_OUT_OF_RANGE("offset","an integer",m)):A<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${A}`,m)}Je("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Je("ERR_INVALID_ARG_TYPE",function(m,A){return`The "${m}" argument must be of type number. Received type ${typeof A}`},TypeError),Je("ERR_OUT_OF_RANGE",function(m,A,h){let c=`The value of "${m}" is out of range.`,p=h;return Number.isInteger(h)&&Math.abs(h)>4294967296?p=ht(String(h)):typeof h=="bigint"&&(p=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(p=ht(p)),p+="n"),c+=` It must be ${A}. Received ${p}`,c},RangeError);const Ae=/[^+/0-9A-Za-z-_]/g;function se(m,A){let h;A=A||1/0;const c=m.length;let p=null;const B=[];for(let J=0;J<c;++J){if(h=m.charCodeAt(J),h>55295&&h<57344){if(!p){if(h>56319){(A-=3)>-1&&B.push(239,191,189);continue}if(J+1===c){(A-=3)>-1&&B.push(239,191,189);continue}p=h;continue}if(h<56320){(A-=3)>-1&&B.push(239,191,189),p=h;continue}h=65536+(p-55296<<10|h-56320)}else p&&(A-=3)>-1&&B.push(239,191,189);if(p=null,h<128){if((A-=1)<0)break;B.push(h)}else if(h<2048){if((A-=2)<0)break;B.push(h>>6|192,63&h|128)}else if(h<65536){if((A-=3)<0)break;B.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;B.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return B}function ne(m){return a.toByteArray(function(A){if((A=(A=A.split("=")[0]).trim().replace(Ae,"")).length<2)return"";for(;A.length%4!=0;)A+="=";return A}(m))}function ve(m,A,h,c){let p;for(p=0;p<c&&!(p+h>=A.length||p>=m.length);++p)A[p+h]=m[p];return p}function Re(m,A){return m instanceof A||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===A.name}function Pe(m){return m!=m}const we=function(){const m="0123456789abcdef",A=new Array(256);for(let h=0;h<16;++h){const c=16*h;for(let p=0;p<16;++p)A[c+p]=m[h]+m[p]}return A}();function Fe(m){return typeof BigInt>"u"?Ve:m}function Ve(){throw new Error("BigInt not supported")}},517:(i,g,f)=>{var a={};i.exports=a,a.themes={};var y=f(947),l=a.styles=f(784),v=Object.defineProperties,I=new RegExp(/[\r\n]+/g);a.supportsColor=f(561).supportsColor,a.enabled===void 0&&(a.enabled=a.supportsColor()!==!1),a.enable=function(){a.enabled=!0},a.disable=function(){a.enabled=!1},a.stripColors=a.strip=function(D){return(""+D).replace(/\x1B\[\d+m/g,"")},a.stylize=function(D,K){if(!a.enabled)return D+"";var U=l[K];return!U&&K in a?a[K](D):U.open+D+U.close};var d=/[|\\{}()[\]^$+*?.]/g;function R(D){var K=function U(){return N.apply(U,arguments)};return K._styles=D,K.__proto__=O,K}var w,S=(w={},l.grey=l.gray,Object.keys(l).forEach(function(D){l[D].closeRe=new RegExp(function(K){if(typeof K!="string")throw new TypeError("Expected a string");return K.replace(d,"\\$&")}(l[D].close),"g"),w[D]={get:function(){return R(this._styles.concat(D))}}}),w),O=v(function(){},S);function N(){var D=Array.prototype.slice.call(arguments),K=D.map(function(Q){return Q!=null&&Q.constructor===String?Q:y.inspect(Q)}).join(" ");if(!a.enabled||!K)return K;for(var U=K.indexOf(`
`)!=-1,ue=this._styles,he=ue.length;he--;){var q=l[ue[he]];K=q.open+K.replace(q.closeRe,q.open)+q.close,U&&(K=K.replace(I,function(Q){return q.close+Q+q.open}))}return K}a.setTheme=function(D){if(typeof D!="string")for(var K in D)(function(U){a[U]=function(ue){if(typeof D[U]=="object"){var he=ue;for(var q in D[U])he=a[D[U][q]](he);return he}return a[D[U]](ue)}})(K);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var P=function(D,K){var U=K.split("");return(U=U.map(D)).join("")};for(var H in a.trap=f(117),a.zalgo=f(492),a.maps={},a.maps.america=f(260)(a),a.maps.zebra=f(270)(a),a.maps.rainbow=f(920)(a),a.maps.random=f(449)(a),a.maps)(function(D){a[D]=function(K){return P(a.maps[D],K)}})(H);v(a,function(){var D={};return Object.keys(S).forEach(function(K){D[K]={get:function(){return R([K])}}}),D}())},117:i=>{i.exports=function(g,f){var a="";g=(g=g||"Run the trap, drop the bass").split("");var y={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return g.forEach(function(l){l=l.toLowerCase();var v=y[l]||[" "],I=Math.floor(Math.random()*v.length);a+=y[l]!==void 0?y[l][I]:l}),a}},492:i=>{i.exports=function(g,f){g=g||"   he is here   ";var a={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},y=[].concat(a.up,a.down,a.mid);function l(I){return Math.floor(Math.random()*I)}function v(I){var d=!1;return y.filter(function(R){d=R===I}),d}return function(I,d){var R,w,S="";for(w in(d=d||{}).up=d.up===void 0||d.up,d.mid=d.mid===void 0||d.mid,d.down=d.down===void 0||d.down,d.size=d.size!==void 0?d.size:"maxi",I=I.split(""))if(!v(w)){switch(S+=I[w],R={up:0,down:0,mid:0},d.size){case"mini":R.up=l(8),R.mid=l(2),R.down=l(8);break;case"maxi":R.up=l(16)+3,R.mid=l(4)+1,R.down=l(64)+3;break;default:R.up=l(8)+1,R.mid=l(6)/2,R.down=l(8)+1}var O=["up","mid","down"];for(var N in O)for(var P=O[N],H=0;H<=R[P];H++)d[P]&&(S+=a[P][l(a[P].length)])}return S}(g,f)}},883:(i,g,f)=>{var a=f(517);i.exports=function(){var y=function(l,v){String.prototype.__defineGetter__(l,v)};y("strip",function(){return a.strip(this)}),y("stripColors",function(){return a.strip(this)}),y("trap",function(){return a.trap(this)}),y("zalgo",function(){return a.zalgo(this)}),y("zebra",function(){return a.zebra(this)}),y("rainbow",function(){return a.rainbow(this)}),y("random",function(){return a.random(this)}),y("america",function(){return a.america(this)}),Object.keys(a.styles).forEach(function(l){y(l,function(){return a.stylize(this,l)})}),a.setTheme=function(l){typeof l!="string"?function(v){var I=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(v).forEach(function(d){if(I.indexOf(d)!==-1)console.log("warn: ".red+("String.prototype"+d).magenta+" is probably something you don't want to override.  Ignoring style name");else if(typeof v[d]=="string")a[d]=a[v[d]],y(d,function(){return a[d](this)});else{var R=function(w){for(var S=w||this,O=0;O<v[d].length;O++)S=a[v[d][O]](S);return S};y(d,R),a[d]=function(w){return R(w)}}})}(l):console.log("colors.setTheme now only accepts an object, not a string. If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")}}},196:(i,g,f)=>{var a=f(517);i.exports=a,f(883)()},260:i=>{i.exports=function(g){return function(f,a,y){if(f===" ")return f;switch(a%3){case 0:return g.red(f);case 1:return g.white(f);case 2:return g.blue(f)}}}},920:i=>{i.exports=function(g){var f=["red","yellow","green","blue","magenta"];return function(a,y,l){return a===" "?a:g[f[y++%f.length]](a)}}},449:i=>{i.exports=function(g){var f=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(a,y,l){return a===" "?a:g[f[Math.round(Math.random()*(f.length-2))]](a)}}},270:i=>{i.exports=function(g){return function(f,a,y){return a%2==0?f:g.inverse(f)}}},784:i=>{var g={};i.exports=g;var f={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(f).forEach(function(a){var y=f[a],l=g[a]=[];l.open="\x1B["+y[0]+"m",l.close="\x1B["+y[1]+"m"})},340:i=>{i.exports=function(g,f){var a=(f=f||process.argv).indexOf("--"),y=/^-{1,2}/.test(g)?"":"--",l=f.indexOf(y+g);return l!==-1&&(a===-1||l<a)}},561:(i,g,f)=>{var a=f(987),y=f(340),l=r,v=void 0;function I(d){var R=function(w){if(v===!1)return 0;if(y("color=16m")||y("color=full")||y("color=truecolor"))return 3;if(y("color=256"))return 2;if(w&&!w.isTTY&&v!==!0)return 0;var S=v?1:0;if(process.platform==="win32"){var O=a.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(O[0])>=10&&Number(O[2])>=10586?Number(O[2])>=14931?3:2:1}if("CI"in l)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(P){return P in l})||l.CI_NAME==="codeship"?1:S;if("TEAMCITY_VERSION"in l)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(l.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in l){var N=parseInt((l.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(l.TERM_PROGRAM){case"iTerm.app":return N>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(l.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(l.TERM)||"COLORTERM"in l?1:S}(d);return function(w){return w!==0&&{level:w,hasBasic:!0,has256:w>=2,has16m:w>=3}}(R)}y("no-color")||y("no-colors")||y("color=false")?v=!1:(y("color")||y("colors")||y("color=true")||y("color=always"))&&(v=!0),"FORCE_COLOR"in l&&(v=l.FORCE_COLOR.length===0||parseInt(l.FORCE_COLOR,10)!==0),i.exports={supportsColor:I,stdout:I(process.stdout),stderr:I(process.stderr)}},187:i=>{var g,f=typeof Reflect=="object"?Reflect:null,a=f&&typeof f.apply=="function"?f.apply:function(D,K,U){return Function.prototype.apply.call(D,K,U)};g=f&&typeof f.ownKeys=="function"?f.ownKeys:Object.getOwnPropertySymbols?function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:function(D){return Object.getOwnPropertyNames(D)};var y=Number.isNaN||function(D){return D!=D};function l(){l.init.call(this)}i.exports=l,i.exports.once=function(D,K){return new Promise(function(U,ue){function he(Q){D.removeListener(K,q),ue(Q)}function q(){typeof D.removeListener=="function"&&D.removeListener("error",he),U([].slice.call(arguments))}H(D,K,q,{once:!0}),K!=="error"&&function(Q,_,k){typeof Q.on=="function"&&H(Q,"error",_,k)}(D,he,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var v=10;function I(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}function d(D){return D._maxListeners===void 0?l.defaultMaxListeners:D._maxListeners}function R(D,K,U,ue){var he,q,Q,_;if(I(U),(q=D._events)===void 0?(q=D._events=Object.create(null),D._eventsCount=0):(q.newListener!==void 0&&(D.emit("newListener",K,U.listener?U.listener:U),q=D._events),Q=q[K]),Q===void 0)Q=q[K]=U,++D._eventsCount;else if(typeof Q=="function"?Q=q[K]=ue?[U,Q]:[Q,U]:ue?Q.unshift(U):Q.push(U),(he=d(D))>0&&Q.length>he&&!Q.warned){Q.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(K)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=D,k.type=K,k.count=Q.length,_=k,console&&console.warn&&console.warn(_)}return D}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(D,K,U){var ue={fired:!1,wrapFn:void 0,target:D,type:K,listener:U},he=w.bind(ue);return he.listener=U,ue.wrapFn=he,he}function O(D,K,U){var ue=D._events;if(ue===void 0)return[];var he=ue[K];return he===void 0?[]:typeof he=="function"?U?[he.listener||he]:[he]:U?function(q){for(var Q=new Array(q.length),_=0;_<Q.length;++_)Q[_]=q[_].listener||q[_];return Q}(he):P(he,he.length)}function N(D){var K=this._events;if(K!==void 0){var U=K[D];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}function P(D,K){for(var U=new Array(K),ue=0;ue<K;++ue)U[ue]=D[ue];return U}function H(D,K,U,ue){if(typeof D.on=="function")ue.once?D.once(K,U):D.on(K,U);else{if(typeof D.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D);D.addEventListener(K,function he(q){ue.once&&D.removeEventListener(K,he),U(q)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(D){if(typeof D!="number"||D<0||y(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");v=D}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||y(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(D){for(var K=[],U=1;U<arguments.length;U++)K.push(arguments[U]);var ue=D==="error",he=this._events;if(he!==void 0)ue=ue&&he.error===void 0;else if(!ue)return!1;if(ue){var q;if(K.length>0&&(q=K[0]),q instanceof Error)throw q;var Q=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw Q.context=q,Q}var _=he[D];if(_===void 0)return!1;if(typeof _=="function")a(_,this,K);else{var k=_.length,$=P(_,k);for(U=0;U<k;++U)a($[U],this,K)}return!0},l.prototype.addListener=function(D,K){return R(this,D,K,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(D,K){return R(this,D,K,!0)},l.prototype.once=function(D,K){return I(K),this.on(D,S(this,D,K)),this},l.prototype.prependOnceListener=function(D,K){return I(K),this.prependListener(D,S(this,D,K)),this},l.prototype.removeListener=function(D,K){var U,ue,he,q,Q;if(I(K),(ue=this._events)===void 0)return this;if((U=ue[D])===void 0)return this;if(U===K||U.listener===K)--this._eventsCount==0?this._events=Object.create(null):(delete ue[D],ue.removeListener&&this.emit("removeListener",D,U.listener||K));else if(typeof U!="function"){for(he=-1,q=U.length-1;q>=0;q--)if(U[q]===K||U[q].listener===K){Q=U[q].listener,he=q;break}if(he<0)return this;he===0?U.shift():function(_,k){for(;k+1<_.length;k++)_[k]=_[k+1];_.pop()}(U,he),U.length===1&&(ue[D]=U[0]),ue.removeListener!==void 0&&this.emit("removeListener",D,Q||K)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(D){var K,U,ue;if((U=this._events)===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[D]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete U[D]),this;if(arguments.length===0){var he,q=Object.keys(U);for(ue=0;ue<q.length;++ue)(he=q[ue])!=="removeListener"&&this.removeAllListeners(he);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(K=U[D])=="function")this.removeListener(D,K);else if(K!==void 0)for(ue=K.length-1;ue>=0;ue--)this.removeListener(D,K[ue]);return this},l.prototype.listeners=function(D){return O(this,D,!0)},l.prototype.rawListeners=function(D){return O(this,D,!1)},l.listenerCount=function(D,K){return typeof D.listenerCount=="function"?D.listenerCount(K):N.call(D,K)},l.prototype.listenerCount=N,l.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},645:(i,g)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(f,a,y,l,v){var I,d,R=8*v-l-1,w=(1<<R)-1,S=w>>1,O=-7,N=y?v-1:0,P=y?-1:1,H=f[a+N];for(N+=P,I=H&(1<<-O)-1,H>>=-O,O+=R;O>0;I=256*I+f[a+N],N+=P,O-=8);for(d=I&(1<<-O)-1,I>>=-O,O+=l;O>0;d=256*d+f[a+N],N+=P,O-=8);if(I===0)I=1-S;else{if(I===w)return d?NaN:1/0*(H?-1:1);d+=Math.pow(2,l),I-=S}return(H?-1:1)*d*Math.pow(2,I-l)},g.write=function(f,a,y,l,v,I){var d,R,w,S=8*I-v-1,O=(1<<S)-1,N=O>>1,P=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=l?0:I-1,D=l?1:-1,K=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(R=isNaN(a)?1:0,d=O):(d=Math.floor(Math.log(a)/Math.LN2),a*(w=Math.pow(2,-d))<1&&(d--,w*=2),(a+=d+N>=1?P/w:P*Math.pow(2,1-N))*w>=2&&(d++,w/=2),d+N>=O?(R=0,d=O):d+N>=1?(R=(a*w-1)*Math.pow(2,v),d+=N):(R=a*Math.pow(2,N-1)*Math.pow(2,v),d=0));v>=8;f[y+H]=255&R,H+=D,R/=256,v-=8);for(d=d<<v|R,S+=v;S>0;f[y+H]=255&d,H+=D,d/=256,S-=8);f[y+H-D]|=128*K}},717:i=>{typeof Object.create=="function"?i.exports=function(g,f){f&&(g.super_=f,g.prototype=Object.create(f.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(g,f){if(f){g.super_=f;var a=function(){};a.prototype=f.prototype,g.prototype=new a,g.prototype.constructor=g}}},620:(i,g)=>{g.parse=function(f,a){f instanceof Buffer&&(f=f.toString("ascii"));for(var y=Buffer.alloc(a||8192),l=0,v=0,I=null,d=null,R=0,w=0;w+11<=f.length;){if(f.charAt(w++)!=":")throw new Error("Line "+(R+1)+" does not start with a colon (:).");R++;var S=parseInt(f.substr(w,2),16);w+=2;var O=parseInt(f.substr(w,4),16);w+=4;var N=parseInt(f.substr(w,2),16);w+=2;var P=f.substr(w,2*S),H=Buffer.from(P,"hex");w+=2*S;var D=parseInt(f.substr(w,2),16);w+=2;for(var K=S+(O>>8)+O+N&255,U=0;U<S;U++)K=K+H[U]&255;if(D!=(K=256-K&255))throw new Error("Invalid checksum on line "+R+": got "+D+", but expected "+K);switch(N){case 0:var ue=v+O;if(ue+S>=y.length){var he=Buffer.alloc(2*(ue+S));y.copy(he,0,0,l),y=he}ue>l&&y.fill(255,l,ue),H.copy(y,ue),l=Math.max(l,ue+S);break;case 1:if(S!=0)throw new Error("Invalid EOF record on line "+R+".");return{data:y.slice(0,l),startSegmentAddress:I,startLinearAddress:d};case 2:if(S!=2||O!=0)throw new Error("Invalid extended segment address record on line "+R+".");v=parseInt(P,16)<<4;break;case 3:if(S!=4||O!=0)throw new Error("Invalid start segment address record on line "+R+".");I=parseInt(P,16);break;case 4:if(S!=2||O!=0)throw new Error("Invalid extended linear address record on line "+R+".");v=parseInt(P,16)<<16;break;case 5:if(S!=4||O!=0)throw new Error("Invalid start linear address record on line "+R+".");d=parseInt(P,16);break;default:throw new Error("Invalid record type ("+N+") on line "+R)}f.charAt(w)=="\r"&&w++,f.charAt(w)==`
`&&w++}throw new Error("Unexpected end of input: missing or invalid EOF record.")}},346:i=>{i.exports=function(g,f){function a(l){return typeof g=="object"&&g!==null}function y(l){return l.name.toLowerCase()}switch(arguments.length===2&&f===void 0?f="undefined":Number.isNaN(f)&&(f="NaN"),f){case"boolean":case"function":case"string":return typeof g===f;case"number":return typeof g===f&&!isNaN(g);case Number:if(isNaN(g))return!1;case String:case Boolean:return typeof g===y(f);case Object:case"object":return a();case"array":return Array.isArray(g);case"regex":case"regexp":return g instanceof RegExp;case"date":return g instanceof Date;case"null":case null:return g===null;case"undefined":return g===void 0;case"NaN":return Number.isNaN(g);case"arguments":return!!a()&&(typeof g.callee=="function"||/arguments/i.test(g.toString()));default:return typeof f=="function"?g instanceof f:g}}},777:(i,g,f)=>{var a=f(190),y=f(5),l=f(269),v=200,I=100,d=25,R=32,w=0,S=83,O=3;function N(P){if(!(this instanceof N))return new N(P);var H=this;H.parser=y(P),H.constants=H.parser.constants,H.serialPort=P}N.prototype.sync=function(P,H){var D=this,K=1,U=Buffer.from([1]);(function ue(){K+=1,D.parser.send(U,function(he,q){var Q;if(!he){var _=q.message;_[0]!==l.CMD_SIGN_ON?(he=new Error("command response was not CMD_SIGN_ON. "+_[0])).code="E_CMD_ERROR":_[1]!==l.STATUS_CMD_OK?(he=new Error("command status was not ok. "+_[1])).code="E_CMD_STATUS":(_[2],(Q=_.slice(3)+"").length)}if(he&&K<=P)return ue();H(he,Q)})})()},N.prototype.reset=function(P,H,D){var K=this;a.series([function(U){K.serialPort.set({rts:!0,dtr:!0},function(ue){ue?U(ue):U()})},function(U){setTimeout(U,P)},function(U){K.serialPort.set({rts:!1,dtr:!1},function(ue){ue?U(ue):U()})},function(U){setTimeout(U,H)}],function(U){D(U)})},N.prototype.verifySignature=function(P,H){this.getSignature(function(D,K){P.equals(K)?H():H(new Error("signature doesnt match. Found: "+K.toString("hex"),D))})},N.prototype.getSignature=function(P){var H=this,D=Buffer.alloc(3);a.series([function(K){var U=Buffer.from([29,4,4,0,48,0,0,0]);H.parser.send(U,function(ue,he){if(he&&he.message&&he.message.length>=6){var q=he.message[5];D.writeUInt8(q,0)}K(ue)})},function(K){var U=Buffer.from([29,4,4,0,48,0,1,0]);H.parser.send(U,function(ue,he){if(he&&he.message&&he.message.length>=6){var q=he.message[5];D.writeUInt8(q,1)}K(ue)})},function(K){var U=Buffer.from([29,4,4,0,48,0,2,0]);H.parser.send(U,function(ue,he){if(he&&he.message&&he.message.length>=6){var q=he.message[5];D.writeUInt8(q,2)}K(ue)})}],function(K){P(K,D)})},N.prototype.enterProgrammingMode=function(P,H){var D=this,K=Array.prototype.slice.call(arguments);typeof(H=K.pop())!="function"&&(H=null),(P=typeof P!="function"&&P||{}).timeout=P.timeout||v,P.stabDelay=P.stabDelay||I,P.cmdexeDelay=P.cmdexeDelay||d,P.synchLoops=P.synchLoops||R,P.byteDelay=P.byteDelay||w,P.pollValue=P.pollValue||S,P.pollIndex=P.pollIndex||O;var U=172,ue=83,he=0,q=0,Q=Buffer.from([16,P.timeout,P.stabDelay,P.cmdexeDelay,P.synchLoops,P.byteDelay,P.pollValue,P.pollIndex,U,ue,he,q]);D.parser.send(Q,function(_,k){H(_)})},N.prototype.loadAddress=function(P,H){msb=P>>24&255|128,xsb=P>>16&255,ysb=P>>8&255,lsb=255&P;var D=Buffer.from([6,msb,xsb,ysb,lsb]);this.parser.send(D,function(K,U){H(K)})},N.prototype.loadPage=function(P,H){var D=P.length>>8,K=255&P.length,U=Buffer.from([19,D,K,193,10,64,76,32,0,0]);U=Buffer.concat([U,P]),this.parser.send(U,function(ue,he){H(ue)})},N.prototype.upload=function(P,H,D){var K,U,ue=0,he=this;a.whilst(function(){return ue<P.length},function(q){a.series([function(Q){U=ue>>1,Q()},function(Q){he.loadAddress(U,Q)},function(Q){K=P.slice(ue,P.length>H?ue+H:P.length-1),Q()},function(Q){he.loadPage(K,Q)},function(Q){ue+=K.length,setTimeout(Q,4)}],function(Q){q(Q)})},function(q){D(q)})},N.prototype.exitProgrammingMode=function(P){var H=Buffer.from([17,1,1]);this.parser.send(H,function(D,K){P(D)})},N.prototype.verify=function(P,H){H()},N.prototype.bootload=function(P,H,D){D()},i.exports=N},269:i=>{i.exports.MESSAGE_START=27,i.exports.TOKEN=14,i.exports.CMD_SIGN_ON=1,i.exports.CMD_SET_PARAMETER=2,i.exports.CMD_GET_PARAMETER=3,i.exports.CMD_SET_DEVICE_PARAMETERS=4,i.exports.CMD_OSCCAL=5,i.exports.CMD_LOAD_ADDRESS=6,i.exports.CMD_FIRMWARE_UPGRADE=7,i.exports.CMD_ENTER_PROGMODE_ISP=16,i.exports.CMD_LEAVE_PROGMODE_ISP=17,i.exports.CMD_CHIP_ERASE_ISP=18,i.exports.CMD_PROGRAM_FLASH_ISP=19,i.exports.CMD_READ_FLASH_ISP=20,i.exports.CMD_PROGRAM_EEPROM_ISP=21,i.exports.CMD_READ_EEPROM_ISP=22,i.exports.CMD_PROGRAM_FUSE_ISP=23,i.exports.CMD_READ_FUSE_ISP=24,i.exports.CMD_PROGRAM_LOCK_ISP=25,i.exports.CMD_READ_LOCK_ISP=26,i.exports.CMD_READ_SIGNATURE_ISP=27,i.exports.CMD_READ_OSCCAL_ISP=28,i.exports.CMD_SPI_MULTI=29,i.exports.CMD_ENTER_PROGMODE_PP=32,i.exports.CMD_LEAVE_PROGMODE_PP=33,i.exports.CMD_CHIP_ERASE_PP=34,i.exports.CMD_PROGRAM_FLASH_PP=35,i.exports.CMD_READ_FLASH_PP=36,i.exports.CMD_PROGRAM_EEPROM_PP=37,i.exports.CMD_READ_EEPROM_PP=38,i.exports.CMD_PROGRAM_FUSE_PP=39,i.exports.CMD_READ_FUSE_PP=40,i.exports.CMD_PROGRAM_LOCK_PP=41,i.exports.CMD_READ_LOCK_PP=42,i.exports.CMD_READ_SIGNATURE_PP=43,i.exports.CMD_READ_OSCCAL_PP=44,i.exports.CMD_SET_CONTROL_STACK=45,i.exports.CMD_ENTER_PROGMODE_HVSP=48,i.exports.CMD_LEAVE_PROGMODE_HVSP=49,i.exports.CMD_CHIP_ERASE_HVSP=50,i.exports.CMD_PROGRAM_FLASH_HVSP=51,i.exports.CMD_READ_FLASH_HVSP=52,i.exports.CMD_PROGRAM_EEPROM_HVSP=53,i.exports.CMD_READ_EEPROM_HVSP=54,i.exports.CMD_PROGRAM_FUSE_HVSP=55,i.exports.CMD_READ_FUSE_HVSP=56,i.exports.CMD_PROGRAM_LOCK_HVSP=57,i.exports.CMD_READ_LOCK_HVSP=58,i.exports.CMD_READ_SIGNATURE_HVSP=59,i.exports.CMD_READ_OSCCAL_HVSP=60,i.exports.STATUS_CMD_OK=0,i.exports.STATUS_CMD_TOUT=128,i.exports.STATUS_RDY_BSY_TOUT=129,i.exports.STATUS_SET_PARAM_MISSING=130,i.exports.STATUS_CMD_FAILED=192,i.exports.STATUS_CKSUM_ERROR=193,i.exports.STATUS_CMD_UNKNOWN=201,i.exports.STATUS_BUILD_NUMBER_LOW=128,i.exports.STATUS_BUILD_NUMBER_HIGH=129,i.exports.STATUS_HW_VER=144,i.exports.STATUS_SW_MAJOR=145,i.exports.STATUS_SW_MINOR=146,i.exports.STATUS_VTARGET=148,i.exports.STATUS_VADJUST=149,i.exports.STATUS_OSC_PSCALE=150,i.exports.STATUS_OSC_CMATCH=151,i.exports.STATUS_SCK_DURATION=152,i.exports.STATUS_TOPCARD_DETECT=154,i.exports.STATUS_STATUS=156,i.exports.STATUS_DATA=157,i.exports.STATUS_RESET_POLARITY=158,i.exports.STATUS_CONTROLLER_INIT=159,i.exports.ANSWER_CKSUM_ERROR=176},5:(i,g,f)=>{var a=f(269),y=f(187).EventEmitter;i.exports=function(l){var v,I,d=(v=new y,I={constants:a,port:l,boundOpen:!1,closed:!1,_inc:-1,_queue:[],_current:!1,states:["Start","GetSequenceNumber","GetMessageSize1","GetMessageSize2","GetToken","GetData","GetChecksum","Done"],state:0,pkt:!1,send:function(S,O){if(this.closed)return setImmediate(function(){var K=new Error("this parser is closed.");K.code="E_CLOSED",O(K)});Buffer.isBuffer(S)||(S=Buffer.from(S));var N=this._commandTimeout(S[0]),P=Buffer.from([0,0]);P.writeUInt16BE(S.length,0);var H=Buffer.concat([Buffer.from([a.MESSAGE_START,this._seq(),P[0],P[1],a.TOKEN]),S]),D=this.checksum(H);this._queue.push({buf:Buffer.concat([H,Buffer.from([D])]),seq:this._inc,cb:O,timeout:N}),this._send()},checksum:function(S){for(var O=0,N=0;N<S.length;++N)O^=S[N];return O},_seq:function(){return this._inc++,this._inc>255&&(this._inc=0),this._inc},_commandTimeout:function(S){if(timeout=1e3,S===a.CMD_SIGN_ON)timeout=200;else for(var O=Object.keys(a),N=0;N<O.length;++N)if(a[O[N]]===S){(O[N].indexOf("CMD_READ")>-1||O[N].indexOf("PROGRAM_FLASH")>-1||O[N].indexOf("EEPROM")>-1)&&(timeout=5e3);break}return timeout},_send:function(){if(this.closed)return!1;if(!this._current&&this._queue.length)if(typeof l.isOpen=="function"?l.isOpen():l.isOpen){var S=this._queue.shift(),O=this._current={timeout:!1,seq:S.seq,cb:S.cb};this._current,this.state=0,N=this,this.port.write(S.buf),this.port.drain(function(){if(O!==N._current)return N.emit("log","current was no longer the current message after drain callback");O.timeout=setTimeout(function(){var P=new Error("stk500 timeout. "+S.timeout+"ms");P.code="E_TIMEOUT",N._resolveCurrent(P)},S.timeout)}),this.emit("rawinput",S.buf)}else{var N=this;this.boundOpen||l.once("open",function(){N._send()})}},_handle:function(S){var O=this._current;if(this.emit("raw",S),!O)return this.emit("log","notice","dropping data","data");for(var N=0;N<S.length;++N)this._stateMachine(S.readUInt8(N))},_pkt:function(){return{seq:-1,len:[],raw:[],message:[],checksum:0}},_stateMachine:function(S){var O=this.pkt;switch(this.state){case 0:if(O=this.pkt=this._pkt(),S!==27)return this.emit("log","parser","Invalid header byte expected 27 got: "+S);++this.state;break;case 1:if(S!==this._current.seq)return this.state=0,this.emit("log","parser","Invalid sequence number. back to start. got: "+S);O.seq=S,++this.state;break;case 2:O.len.push(S),++this.state;break;case 3:O.len.push(S),O.len=O.len[0]<<8|O.len[1],++this.state;break;case 4:if(S!==14)return this.state=0,O.error=new Error("Invalid message token byte. got: "+S),O.error.code="E_PARSE",this.emit("log","parser",this.pkt.error);++this.state,O.len||++this.state;break;case 5:O.len===0&&S===a.STATUS_CKSUM_ERROR&&(O.error=new Error("send checksum error"),O.error.code="E_STATUS_CKSUM"),O.message.push(S),--O.len==0&&++this.state;break;case 6:O.checksum=this.checksum(O.raw),O.checksum=O.checksum===S,O.checksum||(O.error=new Error("recv cecksum didn't match"),O.error.code="E_RECV_CKSUM"),O.message=Buffer.from(O.message),this.emit("data",O),this.state++,O.len=O.message.length,delete O.raw,this._resolveCurrent(!!O.error&&O.error,O)}O.raw&&O.raw.push(S)},_resolveCurrent:function(S,O){var N=this._current;this._current=!1;var P=!1;if((S.code=="E_PARSE"||S.code=="E_TIMEOUT"||this.closed)&&(P=this.queue,this.queue=[]),clearTimeout(N.timeout),N.cb(S,O),P){var H=S;for(this.closed||((H=new Error("a call queued before this call errored leaving the protocol in an upredictable state. timidly refusing to run queued commands.")).code="E_DEPENDENT",H.prev_code=S.code);P.lenth;)P.shift()(S)}this._send()}},Object.keys(I).forEach(function(S){v[S]=I[S]}),v);return l.on("data",R).once("error",w).once("close",w),d;function R(S){d._handle(S)}function w(S){d.closed=!0,l.removeListener("data",R),S||((S=new Error("serial closed.")).code="E_CLOSED"),d._current&&d._resolveCurrent(S),this.emit("closed")}}},190:(i,g)=>{var f;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){var a,y,l={};function v(k){var $=!1;return function(){if($)throw new Error("Callback was already called.");$=!0,k.apply(a,arguments)}}(a=this)!=null&&(y=a.async),l.noConflict=function(){return a.async=y,l};var I=Object.prototype.toString,d=Array.isArray||function(k){return I.call(k)==="[object Array]"},R=function(k,$){for(var F=0;F<k.length;F+=1)$(k[F],F,k)},w=function(k,$){if(k.map)return k.map($);var F=[];return R(k,function(V,j,Z){F.push($(V,j,Z))}),F},S=function(k){if(Object.keys)return Object.keys(k);var $=[];for(var F in k)k.hasOwnProperty(F)&&$.push(F);return $};typeof process<"u"&&process.nextTick?(l.nextTick=process.nextTick,typeof setImmediate<"u"?l.setImmediate=function(k){setImmediate(k)}:l.setImmediate=l.nextTick):typeof setImmediate=="function"?(l.nextTick=function(k){setImmediate(k)},l.setImmediate=l.nextTick):(l.nextTick=function(k){setTimeout(k,0)},l.setImmediate=l.nextTick),l.each=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0;function j(Z){Z?(F(Z),F=function(){}):(V+=1)>=k.length&&F()}R(k,function(Z){$(Z,v(j))})},l.forEach=l.each,l.eachSeries=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0,j=function(){$(k[V],function(Z){Z?(F(Z),F=function(){}):(V+=1)>=k.length?F():j()})};j()},l.forEachSeries=l.eachSeries,l.eachLimit=function(k,$,F,V){O($).apply(null,[k,F,V])},l.forEachLimit=l.eachLimit;var O=function(k){return function($,F,V){if(V=V||function(){},!$.length||k<=0)return V();var j=0,Z=0,G=0;(function Y(){if(j>=$.length)return V();for(;G<k&&Z<$.length;)G+=1,F($[(Z+=1)-1],function(ye){ye?(V(ye),V=function(){}):(G-=1,(j+=1)>=$.length?V():Y())})})()}},N=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.each].concat($))}},P=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.eachSeries].concat($))}},H=function(k,$,F,V){if($=w($,function(Z,G){return{index:G,value:Z}}),V){var j=[];k($,function(Z,G){F(Z.value,function(Y,ye){j[Z.index]=ye,G(Y)})},function(Z){V(Z,j)})}else k($,function(Z,G){F(Z.value,function(Y){G(Y)})})};l.map=N(H),l.mapSeries=P(H),l.mapLimit=function(k,$,F,V){return D($)(k,F,V)};var D=function(k){return function($,F){return function(){var V=Array.prototype.slice.call(arguments);return F.apply(null,[O($)].concat(V))}}(k,H)};l.reduce=function(k,$,F,V){l.eachSeries(k,function(j,Z){F($,j,function(G,Y){$=Y,Z(G)})},function(j){V(j,$)})},l.inject=l.reduce,l.foldl=l.reduce,l.reduceRight=function(k,$,F,V){var j=w(k,function(Z){return Z}).reverse();l.reduce(j,$,F,V)},l.foldr=l.reduceRight;var K=function(k,$,F,V){var j=[];k($=w($,function(Z,G){return{index:G,value:Z}}),function(Z,G){F(Z.value,function(Y){Y&&j.push(Z),G()})},function(Z){V(w(j.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.filter=N(K),l.filterSeries=P(K),l.select=l.filter,l.selectSeries=l.filterSeries;var U=function(k,$,F,V){var j=[];k($=w($,function(Z,G){return{index:G,value:Z}}),function(Z,G){F(Z.value,function(Y){Y||j.push(Z),G()})},function(Z){V(w(j.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.reject=N(U),l.rejectSeries=P(U);var ue=function(k,$,F,V){k($,function(j,Z){F(j,function(G){G?(V(j),V=function(){}):Z()})},function(j){V()})};l.detect=N(ue),l.detectSeries=P(ue),l.some=function(k,$,F){l.each(k,function(V,j){$(V,function(Z){Z&&(F(!0),F=function(){}),j()})},function(V){F(!1)})},l.any=l.some,l.every=function(k,$,F){l.each(k,function(V,j){$(V,function(Z){Z||(F(!1),F=function(){}),j()})},function(V){F(!0)})},l.all=l.every,l.sortBy=function(k,$,F){l.map(k,function(V,j){$(V,function(Z,G){Z?j(Z):j(null,{value:V,criteria:G})})},function(V,j){if(V)return F(V);F(null,w(j.sort(function(Z,G){var Y=Z.criteria,ye=G.criteria;return Y<ye?-1:Y>ye?1:0}),function(Z){return Z.value}))})},l.auto=function(k,$){$=$||function(){};var F=S(k),V=F.length;if(!V)return $();var j={},Z=[],G=function(ye){Z.unshift(ye)},Y=function(){V--,R(Z.slice(0),function(ye){ye()})};G(function(){if(!V){var ye=$;$=function(){},ye(null,j)}}),R(F,function(ye){var Ee=d(k[ye])?k[ye]:[k[ye]],Te=function(et){var Qe=Array.prototype.slice.call(arguments,1);if(Qe.length<=1&&(Qe=Qe[0]),et){var Je={};R(S(j),function(ht){Je[ht]=j[ht]}),Je[ye]=Qe,$(et,Je),$=function(){}}else j[ye]=Qe,l.setImmediate(Y)},ct=Ee.slice(0,Math.abs(Ee.length-1))||[],ft=function(){return Qe=function(ht,lt){return ht&&j.hasOwnProperty(lt)},Je=!0,((et=ct).reduce?et.reduce(Qe,Je):(R(et,function(ht,lt,T){Je=Qe(Je,ht,lt,T)}),Je))&&!j.hasOwnProperty(ye);var et,Qe,Je};if(ft())Ee[Ee.length-1](Te,j);else{var Ze=function(){ft()&&(function(et){for(var Qe=0;Qe<Z.length;Qe+=1)if(Z[Qe]===et)return void Z.splice(Qe,1)}(Ze),Ee[Ee.length-1](Te,j))};G(Ze)}})},l.retry=function(k,$,F){var V=[];typeof k=="function"&&(F=$,$=k,k=5),k=parseInt(k,10)||5;var j=function(Z,G){for(var Y=function(ye,Ee){return function(Te){ye(function(ct,ft){Te(!ct||Ee,{err:ct,result:ft})},G)}};k;)V.push(Y($,!(k-=1)));l.series(V,function(ye,Ee){Ee=Ee[Ee.length-1],(Z||F)(Ee.err,Ee.result)})};return F?j():j},l.waterfall=function(k,$){if($=$||function(){},!d(k)){var F=new Error("First argument to waterfall must be an array of functions");return $(F)}if(!k.length)return $();var V=function(j){return function(Z){if(Z)$.apply(null,arguments),$=function(){};else{var G=Array.prototype.slice.call(arguments,1),Y=j.next();Y?G.push(V(Y)):G.push($),l.setImmediate(function(){j.apply(null,G)})}}};V(l.iterator(k))()};var he=function(k,$,F){if(F=F||function(){},d($))k.map($,function(j,Z){j&&j(function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),Z.call(null,G,Y)})},F);else{var V={};k.each(S($),function(j,Z){$[j](function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),V[j]=Y,Z(G)})},function(j){F(j,V)})}};l.parallel=function(k,$){he({map:l.map,each:l.each},k,$)},l.parallelLimit=function(k,$,F){he({map:D($),each:O($)},k,F)},l.series=function(k,$){if($=$||function(){},d(k))l.mapSeries(k,function(V,j){V&&V(function(Z){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),j.call(null,Z,G)})},$);else{var F={};l.eachSeries(S(k),function(V,j){k[V](function(Z){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),F[V]=G,j(Z)})},function(V){$(V,F)})}},l.iterator=function(k){var $=function(F){var V=function(){return k.length&&k[F].apply(null,arguments),V.next()};return V.next=function(){return F<k.length-1?$(F+1):null},V};return $(0)},l.apply=function(k){var $=Array.prototype.slice.call(arguments,1);return function(){return k.apply(null,$.concat(Array.prototype.slice.call(arguments)))}};var q=function(k,$,F,V){var j=[];k($,function(Z,G){F(Z,function(Y,ye){j=j.concat(ye||[]),G(Y)})},function(Z){V(Z,j)})};l.concat=N(q),l.concatSeries=P(q),l.whilst=function(k,$,F){k()?$(function(V){if(V)return F(V);l.whilst(k,$,F)}):F()},l.doWhilst=function(k,$,F){k(function(V){if(V)return F(V);var j=Array.prototype.slice.call(arguments,1);$.apply(null,j)?l.doWhilst(k,$,F):F()})},l.until=function(k,$,F){k()?F():$(function(V){if(V)return F(V);l.until(k,$,F)})},l.doUntil=function(k,$,F){k(function(V){if(V)return F(V);var j=Array.prototype.slice.call(arguments,1);$.apply(null,j)?F():l.doUntil(k,$,F)})},l.queue=function(k,$){function F(Z,G,Y,ye){if(Z.started||(Z.started=!0),d(G)||(G=[G]),G.length==0)return l.setImmediate(function(){Z.drain&&Z.drain()});R(G,function(Ee){var Te={data:Ee,callback:typeof ye=="function"?ye:null};Y?Z.tasks.unshift(Te):Z.tasks.push(Te),Z.saturated&&Z.tasks.length===Z.concurrency&&Z.saturated(),l.setImmediate(Z.process)})}$===void 0&&($=1);var V=0,j={tasks:[],concurrency:$,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(Z,G){F(j,Z,!1,G)},kill:function(){j.drain=null,j.tasks=[]},unshift:function(Z,G){F(j,Z,!0,G)},process:function(){if(!j.paused&&V<j.concurrency&&j.tasks.length){var Z=j.tasks.shift();j.empty&&j.tasks.length===0&&j.empty(),V+=1;var G=v(function(){V-=1,Z.callback&&Z.callback.apply(Z,arguments),j.drain&&j.tasks.length+V===0&&j.drain(),j.process()});k(Z.data,G)}},length:function(){return j.tasks.length},running:function(){return V},idle:function(){return j.tasks.length+V===0},pause:function(){j.paused!==!0&&(j.paused=!0)},resume:function(){if(j.paused!==!1){j.paused=!1;for(var Z=1;Z<=j.concurrency;Z++)l.setImmediate(j.process)}}};return j},l.priorityQueue=function(k,$){function F(j,Z){return j.priority-Z.priority}var V=l.queue(k,$);return V.push=function(j,Z,G){(function(Y,ye,Ee,Te){if(Y.started||(Y.started=!0),d(ye)||(ye=[ye]),ye.length==0)return l.setImmediate(function(){Y.drain&&Y.drain()});R(ye,function(ct){var ft={data:ct,priority:Ee,callback:typeof Te=="function"?Te:null};Y.tasks.splice(function(Ze,et,Qe){for(var Je=-1,ht=Ze.length-1;Je<ht;){var lt=Je+(ht-Je+1>>>1);Qe(et,Ze[lt])>=0?Je=lt:ht=lt-1}return Je}(Y.tasks,ft,F)+1,0,ft),Y.saturated&&Y.tasks.length===Y.concurrency&&Y.saturated(),l.setImmediate(Y.process)})})(V,j,Z,G)},delete V.unshift,V},l.cargo=function(k,$){var F=!1,V=[],j={tasks:V,payload:$,saturated:null,empty:null,drain:null,drained:!0,push:function(Z,G){d(Z)||(Z=[Z]),R(Z,function(Y){V.push({data:Y,callback:typeof G=="function"?G:null}),j.drained=!1,j.saturated&&V.length===$&&j.saturated()}),l.setImmediate(j.process)},process:function Z(){if(!F){if(V.length===0)return j.drain&&!j.drained&&j.drain(),void(j.drained=!0);var G=typeof $=="number"?V.splice(0,$):V.splice(0,V.length),Y=w(G,function(ye){return ye.data});j.empty&&j.empty(),F=!0,k(Y,function(){F=!1;var ye=arguments;R(G,function(Ee){Ee.callback&&Ee.callback.apply(null,ye)}),Z()})}},length:function(){return V.length},running:function(){return F}};return j};var Q=function(k){return function($){var F=Array.prototype.slice.call(arguments,1);$.apply(null,F.concat([function(V){var j=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(V?console.error&&console.error(V):console[k]&&R(j,function(Z){console[k](Z)}))}]))}};l.log=Q("log"),l.dir=Q("dir"),l.memoize=function(k,$){var F={},V={};$=$||function(Z){return Z};var j=function(){var Z=Array.prototype.slice.call(arguments),G=Z.pop(),Y=$.apply(null,Z);Y in F?l.nextTick(function(){G.apply(null,F[Y])}):Y in V?V[Y].push(G):(V[Y]=[G],k.apply(null,Z.concat([function(){F[Y]=arguments;var ye=V[Y];delete V[Y];for(var Ee=0,Te=ye.length;Ee<Te;Ee++)ye[Ee].apply(null,arguments)}])))};return j.memo=F,j.unmemoized=k,j},l.unmemoize=function(k){return function(){return(k.unmemoized||k).apply(null,arguments)}},l.times=function(k,$,F){for(var V=[],j=0;j<k;j++)V.push(j);return l.map(V,$,F)},l.timesSeries=function(k,$,F){for(var V=[],j=0;j<k;j++)V.push(j);return l.mapSeries(V,$,F)},l.seq=function(){var k=arguments;return function(){var $=this,F=Array.prototype.slice.call(arguments),V=F.pop();l.reduce(k,F,function(j,Z,G){Z.apply($,j.concat([function(){var Y=arguments[0],ye=Array.prototype.slice.call(arguments,1);G(Y,ye)}]))},function(j,Z){V.apply($,[j].concat(Z))})}},l.compose=function(){return l.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(k,$){var F=function(){var j=this,Z=Array.prototype.slice.call(arguments),G=Z.pop();return k($,function(Y,ye){Y.apply(j,Z.concat([ye]))},G)};if(arguments.length>2){var V=Array.prototype.slice.call(arguments,2);return F.apply(this,V)}return F};l.applyEach=N(_),l.applyEachSeries=P(_),l.forever=function(k,$){(function F(V){if(V){if($)return $(V);throw V}k(F)})()},i.exports?i.exports=l:(f=(function(){return l}).apply(g,[]))===void 0||(i.exports=f)})()},668:(i,g)=>{var f;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){var a,y,l={};function v(k){var $=!1;return function(){if($)throw new Error("Callback was already called.");$=!0,k.apply(a,arguments)}}(a=this)!=null&&(y=a.async),l.noConflict=function(){return a.async=y,l};var I=Object.prototype.toString,d=Array.isArray||function(k){return I.call(k)==="[object Array]"},R=function(k,$){for(var F=0;F<k.length;F+=1)$(k[F],F,k)},w=function(k,$){if(k.map)return k.map($);var F=[];return R(k,function(V,j,Z){F.push($(V,j,Z))}),F},S=function(k){if(Object.keys)return Object.keys(k);var $=[];for(var F in k)k.hasOwnProperty(F)&&$.push(F);return $};typeof process<"u"&&process.nextTick?(l.nextTick=process.nextTick,typeof setImmediate<"u"?l.setImmediate=function(k){setImmediate(k)}:l.setImmediate=l.nextTick):typeof setImmediate=="function"?(l.nextTick=function(k){setImmediate(k)},l.setImmediate=l.nextTick):(l.nextTick=function(k){setTimeout(k,0)},l.setImmediate=l.nextTick),l.each=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0;function j(Z){Z?(F(Z),F=function(){}):(V+=1)>=k.length&&F()}R(k,function(Z){$(Z,v(j))})},l.forEach=l.each,l.eachSeries=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0,j=function(){$(k[V],function(Z){Z?(F(Z),F=function(){}):(V+=1)>=k.length?F():j()})};j()},l.forEachSeries=l.eachSeries,l.eachLimit=function(k,$,F,V){O($).apply(null,[k,F,V])},l.forEachLimit=l.eachLimit;var O=function(k){return function($,F,V){if(V=V||function(){},!$.length||k<=0)return V();var j=0,Z=0,G=0;(function Y(){if(j>=$.length)return V();for(;G<k&&Z<$.length;)G+=1,F($[(Z+=1)-1],function(ye){ye?(V(ye),V=function(){}):(G-=1,(j+=1)>=$.length?V():Y())})})()}},N=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.each].concat($))}},P=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.eachSeries].concat($))}},H=function(k,$,F,V){if($=w($,function(Z,G){return{index:G,value:Z}}),V){var j=[];k($,function(Z,G){F(Z.value,function(Y,ye){j[Z.index]=ye,G(Y)})},function(Z){V(Z,j)})}else k($,function(Z,G){F(Z.value,function(Y){G(Y)})})};l.map=N(H),l.mapSeries=P(H),l.mapLimit=function(k,$,F,V){return D($)(k,F,V)};var D=function(k){return function($,F){return function(){var V=Array.prototype.slice.call(arguments);return F.apply(null,[O($)].concat(V))}}(k,H)};l.reduce=function(k,$,F,V){l.eachSeries(k,function(j,Z){F($,j,function(G,Y){$=Y,Z(G)})},function(j){V(j,$)})},l.inject=l.reduce,l.foldl=l.reduce,l.reduceRight=function(k,$,F,V){var j=w(k,function(Z){return Z}).reverse();l.reduce(j,$,F,V)},l.foldr=l.reduceRight;var K=function(k,$,F,V){var j=[];k($=w($,function(Z,G){return{index:G,value:Z}}),function(Z,G){F(Z.value,function(Y){Y&&j.push(Z),G()})},function(Z){V(w(j.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.filter=N(K),l.filterSeries=P(K),l.select=l.filter,l.selectSeries=l.filterSeries;var U=function(k,$,F,V){var j=[];k($=w($,function(Z,G){return{index:G,value:Z}}),function(Z,G){F(Z.value,function(Y){Y||j.push(Z),G()})},function(Z){V(w(j.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.reject=N(U),l.rejectSeries=P(U);var ue=function(k,$,F,V){k($,function(j,Z){F(j,function(G){G?(V(j),V=function(){}):Z()})},function(j){V()})};l.detect=N(ue),l.detectSeries=P(ue),l.some=function(k,$,F){l.each(k,function(V,j){$(V,function(Z){Z&&(F(!0),F=function(){}),j()})},function(V){F(!1)})},l.any=l.some,l.every=function(k,$,F){l.each(k,function(V,j){$(V,function(Z){Z||(F(!1),F=function(){}),j()})},function(V){F(!0)})},l.all=l.every,l.sortBy=function(k,$,F){l.map(k,function(V,j){$(V,function(Z,G){Z?j(Z):j(null,{value:V,criteria:G})})},function(V,j){if(V)return F(V);F(null,w(j.sort(function(Z,G){var Y=Z.criteria,ye=G.criteria;return Y<ye?-1:Y>ye?1:0}),function(Z){return Z.value}))})},l.auto=function(k,$){$=$||function(){};var F=S(k),V=F.length;if(!V)return $();var j={},Z=[],G=function(ye){Z.unshift(ye)},Y=function(){V--,R(Z.slice(0),function(ye){ye()})};G(function(){if(!V){var ye=$;$=function(){},ye(null,j)}}),R(F,function(ye){var Ee=d(k[ye])?k[ye]:[k[ye]],Te=function(et){var Qe=Array.prototype.slice.call(arguments,1);if(Qe.length<=1&&(Qe=Qe[0]),et){var Je={};R(S(j),function(ht){Je[ht]=j[ht]}),Je[ye]=Qe,$(et,Je),$=function(){}}else j[ye]=Qe,l.setImmediate(Y)},ct=Ee.slice(0,Math.abs(Ee.length-1))||[],ft=function(){return Qe=function(ht,lt){return ht&&j.hasOwnProperty(lt)},Je=!0,((et=ct).reduce?et.reduce(Qe,Je):(R(et,function(ht,lt,T){Je=Qe(Je,ht,lt,T)}),Je))&&!j.hasOwnProperty(ye);var et,Qe,Je};if(ft())Ee[Ee.length-1](Te,j);else{var Ze=function(){ft()&&(function(et){for(var Qe=0;Qe<Z.length;Qe+=1)if(Z[Qe]===et)return void Z.splice(Qe,1)}(Ze),Ee[Ee.length-1](Te,j))};G(Ze)}})},l.retry=function(k,$,F){var V=[];typeof k=="function"&&(F=$,$=k,k=5),k=parseInt(k,10)||5;var j=function(Z,G){for(var Y=function(ye,Ee){return function(Te){ye(function(ct,ft){Te(!ct||Ee,{err:ct,result:ft})},G)}};k;)V.push(Y($,!(k-=1)));l.series(V,function(ye,Ee){Ee=Ee[Ee.length-1],(Z||F)(Ee.err,Ee.result)})};return F?j():j},l.waterfall=function(k,$){if($=$||function(){},!d(k)){var F=new Error("First argument to waterfall must be an array of functions");return $(F)}if(!k.length)return $();var V=function(j){return function(Z){if(Z)$.apply(null,arguments),$=function(){};else{var G=Array.prototype.slice.call(arguments,1),Y=j.next();Y?G.push(V(Y)):G.push($),l.setImmediate(function(){j.apply(null,G)})}}};V(l.iterator(k))()};var he=function(k,$,F){if(F=F||function(){},d($))k.map($,function(j,Z){j&&j(function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),Z.call(null,G,Y)})},F);else{var V={};k.each(S($),function(j,Z){$[j](function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),V[j]=Y,Z(G)})},function(j){F(j,V)})}};l.parallel=function(k,$){he({map:l.map,each:l.each},k,$)},l.parallelLimit=function(k,$,F){he({map:D($),each:O($)},k,F)},l.series=function(k,$){if($=$||function(){},d(k))l.mapSeries(k,function(V,j){V&&V(function(Z){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),j.call(null,Z,G)})},$);else{var F={};l.eachSeries(S(k),function(V,j){k[V](function(Z){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),F[V]=G,j(Z)})},function(V){$(V,F)})}},l.iterator=function(k){var $=function(F){var V=function(){return k.length&&k[F].apply(null,arguments),V.next()};return V.next=function(){return F<k.length-1?$(F+1):null},V};return $(0)},l.apply=function(k){var $=Array.prototype.slice.call(arguments,1);return function(){return k.apply(null,$.concat(Array.prototype.slice.call(arguments)))}};var q=function(k,$,F,V){var j=[];k($,function(Z,G){F(Z,function(Y,ye){j=j.concat(ye||[]),G(Y)})},function(Z){V(Z,j)})};l.concat=N(q),l.concatSeries=P(q),l.whilst=function(k,$,F){k()?$(function(V){if(V)return F(V);l.whilst(k,$,F)}):F()},l.doWhilst=function(k,$,F){k(function(V){if(V)return F(V);var j=Array.prototype.slice.call(arguments,1);$.apply(null,j)?l.doWhilst(k,$,F):F()})},l.until=function(k,$,F){k()?F():$(function(V){if(V)return F(V);l.until(k,$,F)})},l.doUntil=function(k,$,F){k(function(V){if(V)return F(V);var j=Array.prototype.slice.call(arguments,1);$.apply(null,j)?F():l.doUntil(k,$,F)})},l.queue=function(k,$){function F(Z,G,Y,ye){if(Z.started||(Z.started=!0),d(G)||(G=[G]),G.length==0)return l.setImmediate(function(){Z.drain&&Z.drain()});R(G,function(Ee){var Te={data:Ee,callback:typeof ye=="function"?ye:null};Y?Z.tasks.unshift(Te):Z.tasks.push(Te),Z.saturated&&Z.tasks.length===Z.concurrency&&Z.saturated(),l.setImmediate(Z.process)})}$===void 0&&($=1);var V=0,j={tasks:[],concurrency:$,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(Z,G){F(j,Z,!1,G)},kill:function(){j.drain=null,j.tasks=[]},unshift:function(Z,G){F(j,Z,!0,G)},process:function(){if(!j.paused&&V<j.concurrency&&j.tasks.length){var Z=j.tasks.shift();j.empty&&j.tasks.length===0&&j.empty(),V+=1;var G=v(function(){V-=1,Z.callback&&Z.callback.apply(Z,arguments),j.drain&&j.tasks.length+V===0&&j.drain(),j.process()});k(Z.data,G)}},length:function(){return j.tasks.length},running:function(){return V},idle:function(){return j.tasks.length+V===0},pause:function(){j.paused!==!0&&(j.paused=!0)},resume:function(){if(j.paused!==!1){j.paused=!1;for(var Z=1;Z<=j.concurrency;Z++)l.setImmediate(j.process)}}};return j},l.priorityQueue=function(k,$){function F(j,Z){return j.priority-Z.priority}var V=l.queue(k,$);return V.push=function(j,Z,G){(function(Y,ye,Ee,Te){if(Y.started||(Y.started=!0),d(ye)||(ye=[ye]),ye.length==0)return l.setImmediate(function(){Y.drain&&Y.drain()});R(ye,function(ct){var ft={data:ct,priority:Ee,callback:typeof Te=="function"?Te:null};Y.tasks.splice(function(Ze,et,Qe){for(var Je=-1,ht=Ze.length-1;Je<ht;){var lt=Je+(ht-Je+1>>>1);Qe(et,Ze[lt])>=0?Je=lt:ht=lt-1}return Je}(Y.tasks,ft,F)+1,0,ft),Y.saturated&&Y.tasks.length===Y.concurrency&&Y.saturated(),l.setImmediate(Y.process)})})(V,j,Z,G)},delete V.unshift,V},l.cargo=function(k,$){var F=!1,V=[],j={tasks:V,payload:$,saturated:null,empty:null,drain:null,drained:!0,push:function(Z,G){d(Z)||(Z=[Z]),R(Z,function(Y){V.push({data:Y,callback:typeof G=="function"?G:null}),j.drained=!1,j.saturated&&V.length===$&&j.saturated()}),l.setImmediate(j.process)},process:function Z(){if(!F){if(V.length===0)return j.drain&&!j.drained&&j.drain(),void(j.drained=!0);var G=typeof $=="number"?V.splice(0,$):V.splice(0,V.length),Y=w(G,function(ye){return ye.data});j.empty&&j.empty(),F=!0,k(Y,function(){F=!1;var ye=arguments;R(G,function(Ee){Ee.callback&&Ee.callback.apply(null,ye)}),Z()})}},length:function(){return V.length},running:function(){return F}};return j};var Q=function(k){return function($){var F=Array.prototype.slice.call(arguments,1);$.apply(null,F.concat([function(V){var j=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(V?console.error&&console.error(V):console[k]&&R(j,function(Z){console[k](Z)}))}]))}};l.log=Q("log"),l.dir=Q("dir"),l.memoize=function(k,$){var F={},V={};$=$||function(Z){return Z};var j=function(){var Z=Array.prototype.slice.call(arguments),G=Z.pop(),Y=$.apply(null,Z);Y in F?l.nextTick(function(){G.apply(null,F[Y])}):Y in V?V[Y].push(G):(V[Y]=[G],k.apply(null,Z.concat([function(){F[Y]=arguments;var ye=V[Y];delete V[Y];for(var Ee=0,Te=ye.length;Ee<Te;Ee++)ye[Ee].apply(null,arguments)}])))};return j.memo=F,j.unmemoized=k,j},l.unmemoize=function(k){return function(){return(k.unmemoized||k).apply(null,arguments)}},l.times=function(k,$,F){for(var V=[],j=0;j<k;j++)V.push(j);return l.map(V,$,F)},l.timesSeries=function(k,$,F){for(var V=[],j=0;j<k;j++)V.push(j);return l.mapSeries(V,$,F)},l.seq=function(){var k=arguments;return function(){var $=this,F=Array.prototype.slice.call(arguments),V=F.pop();l.reduce(k,F,function(j,Z,G){Z.apply($,j.concat([function(){var Y=arguments[0],ye=Array.prototype.slice.call(arguments,1);G(Y,ye)}]))},function(j,Z){V.apply($,[j].concat(Z))})}},l.compose=function(){return l.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(k,$){var F=function(){var j=this,Z=Array.prototype.slice.call(arguments),G=Z.pop();return k($,function(Y,ye){Y.apply(j,Z.concat([ye]))},G)};if(arguments.length>2){var V=Array.prototype.slice.call(arguments,2);return F.apply(this,V)}return F};l.applyEach=N(_),l.applyEachSeries=P(_),l.forever=function(k,$){(function F(V){if(V){if($)return $(V);throw V}k(F)})()},i.exports?i.exports=l:(f=(function(){return l}).apply(g,[]))===void 0||(i.exports=f)})()},987:()=>{},947:()=>{},479:(i,g,f)=>{var a=f(668),y=f(204),l=f(177),v=function(I){this.opts=I||{},this.quiet=this.opts.quiet||!1,this.quiet?this.log=function(){}:typeof window=="object"?this.log=console.log.bind(window):this.log=console.log};v.prototype.sync=function(I,d,R,w){this.log("sync");var S=this,O=1,N={cmd:[y.Cmnd_STK_GET_SYNC],responseData:y.OK_RESPONSE,timeout:R};(function P(){O+=1,l(I,N,function(H,D){if(H&&O<=d)return H&&S.log(H),S.log("failed attempt again",O),P();S.log("sync complete",H,D,O),w(H,D)})})()},v.prototype.verifySignature=function(I,d,R,w){this.log("verify signature");var S=this;match=Buffer.concat([Buffer.from([y.Resp_STK_INSYNC]),d,Buffer.from([y.Resp_STK_OK])]);var O={cmd:[y.Cmnd_STK_READ_SIGN],responseLength:match.length,timeout:R};l(I,O,function(N,P){P?S.log("confirm signature",N,P,P.toString("hex")):S.log("confirm signature",N,"no data"),w(N,P)})},v.prototype.getSignature=function(I,d,R){this.log("get signature");var w={cmd:[y.Cmnd_STK_READ_SIGN],responseLength:5,timeout:d};l(I,w,function(S,O){this.log("getSignature",S,O),R(S,O)})},v.prototype.setOptions=function(I,d,R,w){this.log("set device");var S=this,O={cmd:[y.Cmnd_STK_SET_DEVICE,d.devicecode||0,d.revision||0,d.progtype||0,d.parmode||0,d.polling||0,d.selftimed||0,d.lockbytes||0,d.fusebytes||0,d.flashpollval1||0,d.flashpollval2||0,d.eeprompollval1||0,d.eeprompollval2||0,d.pagesizehigh||0,d.pagesizelow||0,d.eepromsizehigh||0,d.eepromsizelow||0,d.flashsize4||0,d.flashsize3||0,d.flashsize2||0,d.flashsize1||0],responseData:y.OK_RESPONSE,timeout:R};l(I,O,function(N,P){if(S.log("setOptions",N,P),N)return w(N);w()})},v.prototype.enterProgrammingMode=function(I,d,R){this.log("send enter programming mode");var w=this,S={cmd:[y.Cmnd_STK_ENTER_PROGMODE],responseData:y.OK_RESPONSE,timeout:d};l(I,S,function(O,N){w.log("sent enter programming mode",O,N),R(O,N)})},v.prototype.loadAddress=function(I,d,R,w){this.log("load address");var S=this,O=255&d,N=d>>8&255,P={cmd:[y.Cmnd_STK_LOAD_ADDRESS,O,N],responseData:y.OK_RESPONSE,timeout:R};l(I,P,function(H,D){S.log("loaded address",H,D),w(H,D)})},v.prototype.loadPage=function(I,d,R,w){this.log("load page");var S=this,O=255&d.length,N=d.length>>8,P={cmd:Buffer.concat([Buffer.from([y.Cmnd_STK_PROG_PAGE,N,O,70]),d,Buffer.from([y.Sync_CRC_EOP])]),responseData:y.OK_RESPONSE,timeout:R};l(I,P,function(H,D){S.log("loaded page",H,D),w(H,D)})},v.prototype.upload=function(){var I,d,R,w,S,O;this.log("program"),arguments.length===6?(I=arguments[0],d=arguments[1],R=arguments[2],w=arguments[3],S=arguments[4],O=arguments[5]):(I=arguments[0],d=arguments[1],R=arguments[2],w=arguments[3],S=void 0,O=arguments[4]);var N,P,H=0,D=this;a.whilst(function(){return H<d.length},function(K){D.log("program page"),a.series([function(U){P=S?H:H>>1,U()},function(U){D.loadAddress(I,P,w,U)},function(U){N=d.slice(H,d.length>R?H+R:d.length-1),U()},function(U){D.loadPage(I,N,w,U)},function(U){D.log("programmed page"),H+=N.length,setTimeout(U,4)}],function(U){D.log("page done"),K(U)})},function(K){D.log("upload done"),O(K)})},v.prototype.exitProgrammingMode=function(I,d,R){this.log("send leave programming mode");var w=this,S={cmd:[y.Cmnd_STK_LEAVE_PROGMODE],responseData:y.OK_RESPONSE,timeout:d};l(I,S,function(O,N){w.log("sent leave programming mode",O,N),R(O,N)})},v.prototype.verify=function(I,d,R,w,S){this.log("verify");var O,N,P=0,H=this;a.whilst(function(){return P<d.length},function(D){H.log("verify page"),a.series([function(K){N=P>>1,K()},function(K){H.loadAddress(I,N,w,K)},function(K){O=d.slice(P,d.length>R?P+R:d.length-1),K()},function(K){H.verifyPage(I,O,R,w,K)},function(K){H.log("verified page"),P+=O.length,setTimeout(K,4)}],function(K){H.log("verify done"),D(K)})},function(D){H.log("verify done"),S(D)})},v.prototype.verifyPage=function(I,d,R,w,S){this.log("verify page");var O=this;match=Buffer.concat([Buffer.from([y.Resp_STK_INSYNC]),d,Buffer.from([y.Resp_STK_OK])]);var N=d.length>=R?R:d.length,P={cmd:[y.Cmnd_STK_READ_PAGE,N>>8&255,255&N,70],responseLength:match.length,timeout:w};l(I,P,function(H,D){O.log("confirm page",H,D,D.toString("hex")),S(H,D)})},v.prototype.bootload=function(I,d,R,w){var S={pagesizehigh:R.pagesizehigh<<8&255,pagesizelow:255&R.pagesizelow};a.series([this.sync.bind(this,I,3,R.timeout),this.sync.bind(this,I,3,R.timeout),this.sync.bind(this,I,3,R.timeout),this.verifySignature.bind(this,I,R.signature,R.timeout),this.setOptions.bind(this,I,S,R.timeout),this.enterProgrammingMode.bind(this,I,R.timeout),this.upload.bind(this,I,d,R.pageSize,R.timeout,R.dontShiftPageAddr),this.verify.bind(this,I,d,R.pageSize,R.timeout),this.exitProgrammingMode.bind(this,I,R.timeout)],function(O){return w(O)})},i.exports=v},950:(i,g,f)=>{var a=[f(204).Resp_STK_INSYNC];i.exports=function(y,l,v,I){var d=Buffer.alloc(0),R=!1,w=null,S=function(N){for(var P=0;!R&&P<N.length;){var H=N[P];a.indexOf(H)!==-1&&(N=N.slice(P,N.length-P),R=!0),P++}if(R&&(d=Buffer.concat([d,N])),d.length>v)return O(new Error("buffer overflow "+d.length+" > "+v));d.length==v&&O()},O=function(N){w&&clearTimeout(w),y.removeListener("data",S),I(N,d)};l&&l>0&&(w=setTimeout(function(){w=null,O(new Error("receiveData timeout after "+l+"ms"))},l)),y.on("data",S)}},177:(i,g,f)=>{var a=f(950),y=f(204);i.exports=function(l,v,I){var d,R=v.timeout||0,w=(y.Resp_STK_INSYNC,y.Resp_STK_NOSYNC,null),S=0;v.responseData&&v.responseData.length>0&&(w=v.responseData),w&&(S=w.length),v.responseLength&&(S=v.responseLength);var O=v.cmd;O instanceof Array&&(O=Buffer.from(O.concat(y.Sync_CRC_EOP))),l.write(O,function(N){if(N)return d=new Error("Sending "+O.toString("hex")+": "+N.message),I(d);a(l,R,S,function(P,H){return P?(d=new Error("Sending "+O.toString("hex")+": "+P.message),I(d)):w&&!H.equals(w)?(d=new Error(O+" response mismatch: "+H.toString("hex")+", "+w.toString("hex")),I(d)):void I(null,H)})})}},204:i=>{i.exports={Cmnd_STK_GET_SYNC:48,Cmnd_STK_SET_DEVICE:66,Cmnd_STK_ENTER_PROGMODE:80,Cmnd_STK_LOAD_ADDRESS:85,Cmnd_STK_PROG_PAGE:100,Cmnd_STK_LEAVE_PROGMODE:81,Cmnd_STK_READ_SIGN:117,Sync_CRC_EOP:32,Resp_STK_OK:16,Resp_STK_INSYNC:20,Resp_STK_NOSYNC:21,Cmnd_STK_READ_PAGE:116,OK_RESPONSE:Buffer.from([20,16])}}},o={};function s(i){var g=o[i];if(g!==void 0)return g.exports;var f=o[i]={id:i,loaded:!1,exports:{}};return n[i].call(f.exports,f,f.exports,s),f.loaded=!0,f.exports}s.d=(i,g)=>{for(var f in g)s.o(g,f)&&!s.o(i,f)&&Object.defineProperty(i,f,{enumerable:!0,get:g[f]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(i,g)=>Object.prototype.hasOwnProperty.call(i,g),s.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.nmd=i=>(i.paths=[],i.children||(i.children=[]),i);var u={};return(()=>{s.r(u),s.d(u,{UNKNOWN_BOARD_FQBN:()=>I,UNKNOWN_BOARD_NAME:()=>d,Uploader:()=>Fn});class i{constructor(){this.logger=window.console}debug(b,E){this.log("debug",b,E)}info(b,E){this.log("info",b,E)}warn(b,E){this.log("warn",b,E)}error(b,E){this.log("error",b,E)}log(b,E,M){this.logger[b](E,M?Object.assign({},M):"")}}const g={"arduino:avr:uno":{name:"Arduino Uno",flasher:"avr",avr_name:"uno",ids:[{vid:9025,pid:67},{vid:9025,pid:1},{vid:10755,pid:67},{vid:9025,pid:579}]},"arduino:megaavr:uno2018":{name:"Arduino Uno WiFi Rev2",flasher:"avr",ids:[{vid:1003,pid:8517}],avr_name:"unowifirev2"},"arduino:samd:mkrwifi1010":{name:"Arduino MKR WiFi 1010",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:84},{vid:9025,pid:32852,bootloader:!0}],use_1200bps_touch:!0},"arduino:mbed_nano:nanorp2040connect":{name:"Arduino Nano RP2040 Connect",flasher:"rp",iot_enabled:!1,supports_uf2:!0,ids:[{vid:9025,pid:94},{vid:9025,pid:32862},{vid:9025,pid:350},{vid:9025,pid:606}],use_1200bps_touch:!0},"arduino:samd:nano_33_iot":{name:"Arduino NANO 33 IoT",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:87},{vid:9025,pid:32855,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:minima":{name:"Arduino Uno R4 Minima",flasher:"dfu",iot_enabled:!1,ids:[{vid:9025,pid:105},{vid:9025,pid:873,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:unor4wifi":{name:"Arduino Uno R4 WiFi",flasher:"sam-ba-renesas",iot_enabled:!0,ids:[{vid:9025,pid:4098},{vid:9025,pid:109,bootloader:!0}]}},f=`
  .confirm-dialog {
    max-width: 45em;
    padding: 2rem;
    width: 60vw;
    box-shadow: 2px 2px 8px #888888;
    position: absolute;
    float: left;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .confirm-dialog::backdrop {
    background-color: rgba(0, 0, 0, 0.3);
  }

  .confirm-dialog .header-image {
    margin: 0 auto;
    display: block;
    width: 100%;
  }

  .additional-warning-container {
    padding: 20px;
    background-color: #fbedb7;
    border-radius: 3px;
    margin-top: 30px;
    margin-left: 16px;
  }

  .additional-warning-container::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' id='warning-mono'%3E%3Cpath d='M8.897 2.556c1.72-3.222 4.486-3.222 6.186 0l8.221 15.474c1.72 3.222.139 5.83-3.498 5.83H4.194c-3.637 0-5.218-2.608-3.498-5.83zm1.443 2.648v10.632h3.537V5.204zm0 12.747v3.538h3.537V17.95z' fill='%23374146'%3E%3C/path%3E%3C/svg%3E");
    margin-left: -36px;
    margin-top: -36px;
    background-color: #fbedb7;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    padding: 12px;
    display: block;
  }

  .additional-warning {
    font-size: 14px;
  }
  `;class a{constructor(){this.dialog=void 0,this.positiveButton=void 0,this.negativeButton=void 0,this.parent=void 0,this.titleText="Confirm",this.questionText="Are you sure?",this.positiveButtonText="Yes",this.negativeButtonText="No",this.css=f,this.headerImageSrc=void 0,this.additionalWarning=void 0,this.dialog=void 0,this.positiveButton=void 0,this.negativeButton=void 0,this.parent=document.body}static From(b){const E=new a;return E.customize(b),E.createDialog(),E.createStyle(),E.appendDialog(),E}confirm(){return new Promise((b,E)=>{var M,W,le;(!this.dialog||!this.positiveButton)&&E(new Error("Something went wrong upon dialog creation")),(M=this.dialog)===null||M===void 0||M.showModal(),(W=this.positiveButton)===null||W===void 0||W.addEventListener("click",()=>{b(!0),this.destroy()}),(le=this.negativeButton)===null||le===void 0||le.addEventListener("click",()=>{b(!1),this.destroy()})})}customize(b){b&&(b.css&&(this.css=b.css),b.titleText&&(this.titleText=b.titleText),b.negativeButtonText&&(this.negativeButtonText=b.negativeButtonText),b.positiveButtonText&&(this.positiveButtonText=b.positiveButtonText),b.questionText&&(this.questionText=b.questionText),b.headerImageSrc&&(this.headerImageSrc=b.headerImageSrc),b.additionalWarning&&(this.additionalWarning=b.additionalWarning))}createStyle(){const b=document.createElement("style");b.innerHTML=`${f} ${this.css}`,document.getElementsByTagName("head")[0].appendChild(b)}createDialog(){if(this.dialog=document.createElement("dialog"),this.dialog.classList.add("confirm-dialog"),this.headerImageSrc){const W=document.createElement("div");W.classList.add("header-image-container");const le=document.createElement("img");le.classList.add("header-image"),le.src=this.headerImageSrc,W.appendChild(le),this.dialog.appendChild(W)}const b=document.createElement("div");b.classList.add("title"),b.innerHTML=this.titleText,this.dialog.appendChild(b);const E=document.createElement("div");if(E.classList.add("question"),E.innerHTML=this.questionText,this.dialog.appendChild(E),this.additionalWarning){const W=document.createElement("div");W.classList.add("additional-warning-container");const le=document.createElement("div");le.classList.add("additional-warning"),le.innerHTML=this.additionalWarning,W.appendChild(le),this.dialog.appendChild(W)}const M=document.createElement("div");M.classList.add("button-group"),this.dialog.appendChild(M),this.positiveButton=document.createElement("button"),this.positiveButton.type="button",this.positiveButton.classList.add("true-button"),this.positiveButton.textContent=this.positiveButtonText,M.appendChild(this.positiveButton)}appendDialog(){var b;(b=this.parent)===null||b===void 0||b.appendChild(this.dialog)}destroy(){var b;(b=this.parent)===null||b===void 0||b.removeChild(this.dialog),delete this.dialog}}function y(L){if(!L||L<0)throw new Error("Provided parameter should be a positive integer");return`0x${Math.round(L).toString(16).padStart(4,"0").toUpperCase()}`}function l({vid:L,pid:b}){if(typeof L!="number"||typeof b!="number")throw new Error("VendorID (vid) and ProductID (pid) must be integer");return`${y(L)}/${y(b)}`}var v=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};const I="unknown",d="Unknown";function R({vid:L,pid:b}){var E;return v(this,void 0,void 0,function*(){return(E=yield navigator.serial.getPorts())===null||E===void 0?void 0:E.find(M=>{const{usbVendorId:W,usbProductId:le}=M.getInfo();return le===b&&W===L})})}function w({vid:L,pid:b}){var E;return v(this,void 0,void 0,function*(){return(E=yield navigator.usb.getDevices())===null||E===void 0?void 0:E.find(M=>{const{productId:W,vendorId:le}=M;return W===b&&le===L})})}function S(L){let b=g[L];if(!b){const E=L.indexOf(":mode=");E!==-1&&(b=g[L.substring(0,E)])}return b}function O(L){return v(this,void 0,void 0,function*(){const b=S(L);for(let E=0;E<b.ids.length;E+=1){const{vid:M,pid:W}=b.ids[E],le=yield w({vid:M,pid:W});if(le)return le}})}function N(L){return v(this,void 0,void 0,function*(){if(yield a.From(L).confirm())return yield navigator.serial.requestPort();throw new Error("Permission denied")})}function P(L){return Uint8Array.from(Buffer.from(L,"base64"))}var H=[{name:"uno",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x0043","0x7523","0x0001","0xea60","0x6015"],productPage:"https://store.arduino.cc/arduino-uno-rev3",protocol:"stk500v1"},{name:"unowifirev2",baud:57600,signature:Buffer.from([30,150,81]),pageSize:128,numPages:256,timeout:400,productId:["0x2145"],productPage:"https://store.arduino.cc/arduino-uno-wifi-rev2",protocol:"stk500v1",dontShiftPageAddr:!0},{name:"micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0037","0x8037","0x0036","0x0237"],productPage:"https://store.arduino.cc/arduino-micro",protocol:"avr109"},{name:"imuduino",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8037","0x8036"],productPage:"https://www.kickstarter.com/projects/1265095814/imuduino-wireless-3d-motion-html-js-apps-arduino-p?lang=de",protocol:"avr109"},{name:"leonardo",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://store.arduino.cc/leonardo",protocol:"avr109"},{name:"arduboy",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://arduboy.com/",protocol:"avr109"},{name:"feather",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x800c","0x000c"],productPage:"https://www.adafruit.com/feather",protocol:"avr109"},{name:"little-bits",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036"],productPage:"https://littlebits.com/collections/bits-and-accessories/products/arduino-bit",protocol:"avr109"},{name:"blend-micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x2404"],productPage:"https://redbear.cc/product/retired/blend-micro.html",protocol:"avr109"},{name:"nano",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"https://web.archive.org/web/20150813095112/https://www.arduino.cc/en/Main/ArduinoBoardNano",protocol:"stk500v1"},{name:"nano (new bootloader)",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"https://store.arduino.cc/arduino-nano",protocol:"stk500v1"},{name:"duemilanove168",baud:19200,signature:Buffer.from([30,148,6]),pageSize:128,numPages:128,timeout:400,productId:["0x6001"],productPage:"https://www.arduino.cc/en/Main/arduinoBoardDuemilanove",protocol:"stk500v1"},{name:"duemilanove328",baud:57600,signature:Buffer.from([30,149,20]),pageSize:128,numPages:256,timeout:400,productId:["0x6001"],productPage:"https://www.arduino.cc/en/Main/arduinoBoardDuemilanove",protocol:"stk500v1"},{name:"tinyduino",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6015"],productPage:"https://tinycircuits.com/pages/tinyduino-overview",protocol:"stk500v1",aliases:["tinduino"]},{name:"mega",baud:115200,signature:Buffer.from([30,152,1]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x0042","0x6001","0x0010","0x7523"],productPage:"https://store.arduino.cc/mega-2560-r3",protocol:"stk500v2"},{name:"adk",baud:115200,signature:Buffer.from([30,152,1]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x0044","0x6001","0x003F"],productPage:"https://store.arduino.cc/arduino-mega-adk-rev3",protocol:"stk500v2"},{name:"sf-pro-micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x9206","0x9205","0x0036"],productPage:"https://www.sparkfun.com/products/12640",protocol:"avr109"},{name:"pro-mini",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productPage:"https://store.arduino.cc/arduino-pro-mini",protocol:"stk500v1"},{name:"qduino",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x516d","0x514d"],productPage:"https://www.sparkfun.com/products/13614",protocol:"avr109"},{name:"pinoccio",baud:115200,signature:Buffer.from([30,168,2]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x6051"],productPage:"https://www.mouser.de/new/crowd-supply/crowd-supply-pinoccio-microcontroller/",protocol:"stk500v2"},{name:"lilypad-usb",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x9207","0x9208","0x1B4F"],productPage:"https://www.sparkfun.com/products/12049",protocol:"avr109"},{name:"yun",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0041","0x8041"],productPage:"https://store.arduino.cc/arduino-yun",protocol:"avr109"},{name:"esplora",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x003C","0x803C"],productPage:"https://store.arduino.cc/arduino-esplora",protocol:"avr109"},{name:"circuit-playground-classic",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0011","0x8011"],productPage:"https://www.adafruit.com/product/3000",protocol:"avr109"},{name:"zumjunior",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0xEA60"],productPage:"https://store-de.bq.com/de/zum-kit-junior",protocol:"stk500v1"},{name:"zumcore2",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0xEA60"],productPage:"https://www.bq.com/de/zum-core-2-0",protocol:"stk500v1"},{name:"bqZum",baud:19200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"http://diwo.bq.com/zum-bt-328-especificaciones-tecnicas/",protocol:"stk500v1"},{name:"xprov4",baud:115200,signature:Buffer.from([30,149,22]),pageSize:128,numPages:256,timeout:400,productId:["0x0043","0x7523","0x0001","0xea60"],productPage:"http://www.spark-concepts.com/cnc-xpro-v4-controller/",protocol:"stk500v1"}];const D=function(){for(var L={},b=0;b<H.length;b++){var E=H[b];L[E.name]=E;var M=E.aliases;if(Array.isArray(M))for(var W=0;W<M.length;W++)L[M[W]]=E}return L}();var K=s(764),U=s(187);function ue(L){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ue(L)}function he(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */he=function(){return L};var L={},b=Object.prototype,E=b.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},W=M.iterator||"@@iterator",le=M.asyncIterator||"@@asyncIterator",de=M.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function fe(C,x,re,pe){var ee=x&&x.prototype instanceof Le?x:Le,Be=Object.create(ee.prototype),Me=new Ot(pe||[]);return Be._invoke=function(qe,We,_e){var $e="suspendedStart";return function(Xe,Lt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Lt;return zt()}for(_e.method=Xe,_e.arg=Lt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ae)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(qe,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(C,re,Me),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}L.wrap=fe;var ae={};function Le(){}function De(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ye=Ce.prototype=Le.prototype=Object.create(Ue);function Ct(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function ot(C,x){function re(ee,Be,Me,qe){var We=ie(C[ee],C,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&ue($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,qe)},function(Xe){re("throw",Xe,Me,qe)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,qe)})}qe(We.arg)}var pe;this._invoke=function(ee,Be){function Me(){return new x(function(qe,We){re(ee,Be,qe,We)})}return pe=pe?pe.then(Me,Me):Me()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function Tt(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Ot(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function At(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return De.prototype=Ce,oe(Ye,"constructor",Ce),oe(Ce,"constructor",De),De.displayName=oe(Ce,de,"GeneratorFunction"),L.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===De||(x.displayName||x.name)==="GeneratorFunction")},L.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ye),C},L.awrap=function(C){return{__await:C}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),L.AsyncIterator=ot,L.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new ot(fe(C,x,re,pe),ee);return L.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ye),oe(Ye,de,"Generator"),oe(Ye,W,function(){return this}),oe(Ye,"toString",function(){return"[object Generator]"}),L.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},L.values=At,Ot.prototype={constructor:Ot,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(We,_e){return Be.type="throw",Be.arg=C,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var Me=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(Me&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(Me){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),Tt(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;Tt(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:At(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},L}function q(L,b,E,M,W,le,de){try{var oe=L[le](de),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(M,W)}function Q(L){return function(){var b=this,E=arguments;return new Promise(function(M,W){var le=L.apply(b,E);function de(fe){q(le,M,W,de,oe,"next",fe)}function oe(fe){q(le,M,W,de,oe,"throw",fe)}de(void 0)})}}function _(L,b){for(var E=0;E<b.length;E++){var M=b[E];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}function k(L,b){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,M){return E.__proto__=M,E},k(L,b)}function $(L){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,M=V(L);if(b){var W=V(this).constructor;E=Reflect.construct(M,arguments,W)}else E=M.apply(this,arguments);return F(this,E)}}function F(L,b){if(b&&(ue(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(L)}function V(L){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},V(L)}const j=function(L){(function(De,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function");De.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:De,writable:!0,configurable:!0}}),Object.defineProperty(De,"prototype",{writable:!1}),Ce&&k(De,Ce)})(Le,L);var b,E,M,W,le,de,oe,fe,ie,ae=$(Le);function Le(De,Ce){var Ue;return function(xe,Ge){if(!(xe instanceof Ge))throw new TypeError("Cannot call a class as a function")}(this,Le),(Ue=ae.call(this,Ce)).port=De||null,Ue.options=Ce||{},Ue.browser=!0,Ue.path=Ue.options.path,Ue.isOpen=!1,Ue.writer=null,Ue.reader=null,Ue.isUpdating=!1,Ue.pausePromise=Promise.resolve(),Ue.closeReadPromise=null,Ue.pauseResolve=function(xe){},Ue.closeReadResolve=function(xe){},Ue.baudRate=Ue.options.baudRate,Ue.requestOptions=Ue.options.requestOptions||{},Ue.vid=null,Ue.pid=null,Ue.encoder=new TextEncoder,Ue.className="USBSerialPort",Ue.options.autoOpen&&Ue.open(),Ue}return b=Le,E=[{key:"_getPort",value:(ie=Q(he().mark(function De(){return he().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!this.port||this.options.forceRequest){Ce.next=2;break}return Ce.abrupt("return",this.port);case 2:return Ce.abrupt("return",window.navigator.serial.requestPort(this.requestOptions));case 3:case"end":return Ce.stop()}},De,this)})),function(){return ie.apply(this,arguments)})},{key:"open",value:function(De){var Ce=this;return new Promise(function(Ue,xe){Ce._getPort().then(function(Ge){if(Ce.port=Ge,Ce.vid=Ge.getInfo().usbVendorId,Ce.pid=Ge.getInfo().usbProductId,!Ce.isOpen)return Ce.port.open({baudRate:Ce.baudRate||57600})}).then(function(){Ce.writer=Ce.port.writable.getWriter()}).then(function(){Ce.reader=Ce.port.readable.getReader()}).then(Q(he().mark(function Ge(){var Ye,Ct;return he().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:Ce.isUpdating||Ce.emit("open"),Ce.isOpen=!0,De&&De(null),Ue(null);case 4:if(!Ce.port.readable.locked){ot.next=23;break}return ot.prev=5,ot.next=8,Ce.pausePromise;case 8:return ot.next=10,Ce.reader.read();case 10:if(Ye=ot.sent,Ct=Ye.value,!Ye.done&&!Ce.closeReadPromise){ot.next=15;break}return ot.abrupt("break",23);case 15:Ce.emit("data",K.lW.from(Ct)),ot.next=21;break;case 18:ot.prev=18,ot.t0=ot.catch(5),console.error(ot.t0);case 21:ot.next=4;break;case 23:Ce.closeReadResolve();case 24:case"end":return ot.stop()}},Ge,null,[[5,18]])}))).catch(function(Ge){De&&De(Ge),xe(Ge)})})}},{key:"forget",value:(fe=Q(he().mark(function De(){return he().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",this.port.forget());case 1:case"end":return Ce.stop()}},De,this)})),function(){return fe.apply(this,arguments)})},{key:"close",value:(oe=Q(he().mark(function De(Ce){var Ue=this;return he().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(this.isOpen){xe.next=3;break}return Ce&&Ce(null),xe.abrupt("return");case 3:if(!this.port.readable.locked){xe.next=17;break}return this.closeReadPromise=new Promise(function(Ge){Ue.closeReadResolve=Ge}),this.pauseResolve(),xe.prev=6,xe.next=9,this.reader.cancel();case 9:xe.next=14;break;case 11:xe.prev=11,xe.t0=xe.catch(6),console.error(xe.t0);case 14:return xe.next=16,this.closeReadPromise;case 16:this.closeReadPromise=null;case 17:return xe.prev=17,xe.next=20,this.reader.releaseLock();case 20:return xe.next=22,this.writer.releaseLock();case 22:return xe.next=24,this.port.close();case 24:this.isUpdating||this.emit("close"),this.isOpen=!1,xe.next=35;break;case 28:if(xe.prev=28,xe.t1=xe.catch(17),!Ce){xe.next=34;break}Ce(xe.t1),xe.next=35;break;case 34:throw xe.t1;case 35:Ce&&Ce(null);case 36:case"end":return xe.stop()}},De,this,[[6,11],[17,28]])})),function(De){return oe.apply(this,arguments)})},{key:"set",value:(de=Q(he().mark(function De(){var Ce,Ue,xe,Ge=arguments;return he().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Ce=Ge.length>0&&Ge[0]!==void 0?Ge[0]:{},Ue=Ge.length>1?Ge[1]:void 0,Ye.prev=2,xe={},Object.prototype.hasOwnProperty.call(Ce,"dtr")&&(xe.dataTerminalReady=Ce.dtr),Object.prototype.hasOwnProperty.call(Ce,"rts")&&(xe.requestToSend=Ce.rts),Object.prototype.hasOwnProperty.call(Ce,"brk")&&(xe.break=Ce.brk),!(Object.keys(xe).length>0)){Ye.next=10;break}return Ye.next=10,this.port.setSignals(xe);case 10:Ye.next=18;break;case 12:if(Ye.prev=12,Ye.t0=Ye.catch(2),!Ue){Ye.next=17;break}return Ue(Ye.t0),Ye.abrupt("return");case 17:throw Ye.t0;case 18:Ue&&Ue(null);case 19:case"end":return Ye.stop()}},De,this,[[2,12]])})),function(){return de.apply(this,arguments)})},{key:"get",value:(le=Q(he().mark(function De(Ce){var Ue,xe;return he().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ue={},Ge.prev=1,Ge.next=4,this.port.getSignals();case 4:xe=Ge.sent,Object.prototype.hasOwnProperty.call(xe,"dataCarrierDetect")&&(Ue.dcd=xe.dataCarrierDetect),Object.prototype.hasOwnProperty.call(xe,"clearToSend")&&(Ue.cts=xe.clearToSend),Object.prototype.hasOwnProperty.call(xe,"dataSetReady")&&(Ue.dsr=xe.dataSetReady),Ge.next=15;break;case 10:if(Ge.prev=10,Ge.t0=Ge.catch(1),!Ce){Ge.next=14;break}return Ge.abrupt("return",Ce(Ge.t0));case 14:throw Ge.t0;case 15:if(!Ce){Ge.next=17;break}return Ge.abrupt("return",Ce(Ue));case 17:return Ge.abrupt("return",Ue);case 18:case"end":return Ge.stop()}},De,this,[[1,10]])})),function(De){return le.apply(this,arguments)})},{key:"writeText",value:function(De,Ce){return this.write(this.encoder.encode(De),Ce)}},{key:"write",value:function(De,Ce){this.writer.write(De),Ce&&Ce(null)}},{key:"read",value:(W=Q(he().mark(function De(Ce){var Ue;return he().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,this.reader.read();case 3:Ue=xe.sent,xe.next=12;break;case 6:if(xe.prev=6,xe.t0=xe.catch(0),!Ce){xe.next=11;break}return Ce(xe.t0),xe.abrupt("return");case 11:throw xe.t0;case 12:Ce&&Ce(null,Ue);case 13:case"end":return xe.stop()}},De,this,[[0,6]])})),function(De){return W.apply(this,arguments)})},{key:"update",value:(M=Q(he().mark(function De(Ce,Ue){return he().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(xe.prev=0,!Object.prototype.hasOwnProperty.call(Ce,"baudRate")||this.baudRate===Ce.baudRate){xe.next=13;break}if(!this.isOpen){xe.next=12;break}return this.isUpdating=!0,xe.next=6,this.close();case 6:return this.baudRate=Ce.baudRate,xe.next=9,this.open();case 9:this.isUpdating=!1,xe.next=13;break;case 12:this.baudRate=Ce.baudRate;case 13:xe.next=21;break;case 15:if(xe.prev=15,xe.t0=xe.catch(0),!Ue){xe.next=20;break}return Ue(xe.t0),xe.abrupt("return");case 20:throw xe.t0;case 21:Ue&&Ue(null);case 22:case"end":return xe.stop()}},De,this,[[0,15]])})),function(De,Ce){return M.apply(this,arguments)})},{key:"pause",value:function(){var De=this;this.pausePromise=new Promise(function(Ce){De.pauseResolve=Ce})}},{key:"resume",value:function(){this.pauseResolve()}},{key:"flush",value:function(De){console.warn("flush method is a NOP right now"),De&&De(null)}},{key:"drain",value:function(De){console.warn("drain method is a NOP right now"),De&&De(null)}}],E&&_(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),Le}(U.EventEmitter);function Z(L){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},Z(L)}function G(L,b){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,M){return E.__proto__=M,E},G(L,b)}function Y(L){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,M=Ee(L);if(b){var W=Ee(this).constructor;E=Reflect.construct(M,arguments,W)}else E=M.apply(this,arguments);return ye(this,E)}}function ye(L,b){if(b&&(Z(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(L)}function Ee(L){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Ee(L)}const Te=function(L){(function(W,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(le&&le.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),le&&G(W,le)})(M,L);var b,E=Y(M);function M(W,le){var de;return function(oe,fe){if(!(oe instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,M),(de=E.call(this,W,le)).className="AvrUSBSerialPort",de}return b=M,Object.defineProperty(b,"prototype",{writable:!1}),b}(j);var ct=s(195),ft=s(911),Ze=function(L){if(this.options=L,this.debug=this.options.debug?console.log.bind(console):function(){},this.board=this.options.board,this.board.protocol==="avr109")throw new Error("Sorry, we currently don't support ".concat(this.board.name," or other avr109 boards in webserial. Please see https://github.com/noopkat/avrgirl-arduino/issues/204#issuecomment-703284131 for further details"))};Ze.prototype._init=function(L){this._setUpSerial(function(b){return L(b)})},Ze.prototype._setUpSerial=function(L){if(!this.options.serialPort)return this.serialPort=new Te(this.options.port,{baudRate:this.board.baud,autoOpen:!1}),this.serialPort.on("open",function(){}),L(null);this.serialPort=this.options.serialPort,this.serialPort.update({baudRate:this.board.baud},function(b){return L(b)})},Ze.prototype._sniffPort=function(L){var b=this.board.productId.map(function(E){return parseInt(E,16)});this._listPorts(function(E,M){var W=M.filter(function(le){return b.indexOf(parseInt(le._standardPid,16))!==-1});return L(null,W)})},Ze.prototype._setDTR=function(L,b,E){var M={rts:!1,dtr:L};this.serialPort.set(M,function(W){if(W)return E(W);setTimeout(function(){E(W)},b)})},Ze.prototype._pollForPort=function(L){var b=this,E=ft(function(M){var W=!1;b._sniffPort(function(le,de){de.length&&(b.options.port=de[0].comName,W=!0),M(W)})});E.every(100).ask(15),E(function(M){if(!M)return L(new Error("could not reconnect after resetting board."));b.debug("found port on",b.options.port),b._setUpSerial(function(W){return L(W)})})},Ze.prototype._pollForOpen=function(L){var b=this,E=ft(function(M){b.serialPort.open(function(W){M(!W)})});E.every(200).ask(10),E(function(M){var W;M||(W=new Error("could not open board on "+b.serialPort.path)),L(W)})},Ze.prototype._cycleDTR=function(L){var b=this;ct.series([b._setDTR.bind(b,!0,250),b._setDTR.bind(b,!1,50)],function(E){return L(E)})},Ze.prototype._listPorts=function(L){var b=[];Serialport.list(function(E,M){if(E)return L(E);for(var W=0;W<M.length;W+=1){var le;if(M[W].productId)le=M[W].productId;else if(M[W].pnpId)try{le="0x"+/PID_\d*/.exec(M[W].pnpId)[0].substr(4)}catch{le=""}else le="";M[W]._standardPid=le,b.push(M[W])}return L(null,b)})};const et=Ze;var Qe=s(479),Je=s(196),ht=s(620),lt={_parseHex:function(L){try{var b=Buffer.from(L);return ht.parse(b).data}catch(E){return E}},_hexStringToByte:function(L){return Buffer.from([parseInt(L,16)])}};const T=lt;var Se=function(L){this.debug=L.debug,this.megaDebug=L.megaDebug,this.board=L.board,this.connection=L.connection,this.chip=new L.protocol({quiet:!this.megaDebug})};Se.prototype._reset=function(L){var b=this;b.connection._setDTR(!1,250,function(E){return E||b.debug("reset complete."),L(E)})};const Ae=Se;var se=s(717),ne=function(L){L.protocol=Qe,Ae.call(this,L)};se(ne,Ae),ne.prototype._upload=function(L,b){var E=this;this.serialPort=this.connection.serialPort;var M=T._parseHex(L);if(!Buffer.isBuffer(M))return b(M);E.serialPort.open(function(W){if(W)return b(W);E.debug("connected"),E._reset(function(le){if(le)return b(le);E.debug("flashing, please wait..."),E.chip.bootload(E.serialPort,M,E.board,function(de){var oe=de?Je.red:Je.green;return E.debug(oe("flash complete.")),E.serialPort.close(),b(de)})})})},ne.prototype._reset=function(L){var b=this;b.connection._setDTR(!1,250,function(E){if(E)return L(E);b.connection._setDTR(!0,50,function(M){return b.debug("reset complete."),L(M)})})};const ve=ne;var Re=s(777),Pe=function(L){L.protocol=function(){return Re},Ae.call(this,L)};se(Pe,Ae),Pe.prototype._upload=function(L,b){var E=this;E.serialPort=E.connection.serialPort;var M=T._parseHex(L);if(!Buffer.isBuffer(M))return b(M);E.serialPort.open(function(W){if(W)return b(W);E.debug("connected");var le=E.chip(E.serialPort);ct.series([E._reset.bind(E),le.sync.bind(le,5),le.verifySignature.bind(le,E.board.signature),le.enterProgrammingMode.bind(le,E.board),function(de){E.debug("flashing, please wait..."),de(null)},le.upload.bind(le,M,E.board.pageSize),le.exitProgrammingMode.bind(le)],function(de){var oe=de?Je.red:Je.green;return E.debug(oe("flash complete.")),E.serialPort.close(),b(de)})})};function we(L){return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},we(L)}const Fe=function(L,b,E){var M=function(W){if(W=W||{},this.options={board:W.board||"uno",serialPort:W.serialPort||null,debug:W.debug||!1,megaDebug:W.megaDebug||!1,port:W.port||"",manualReset:W.manualReset||!1,disableVerify:W.disableVerify||!1},this.options.debug===!0?this.debug=this.options.debug=console.log.bind(console):typeof this.options.debug=="function"?this.debug=this.options.debug=this.options.debug:this.debug=this.options.debug=function(){},we(this.options.board)==="object"){var le=Object.getOwnPropertyNames(this.options.board);le.length===1&&le[0]==="name"&&(this.options.board=this.options.board.name)}if(typeof this.options.board=="string"&&(this.options.board=L[this.options.board]),this.options.board&&!this.options.board.manualReset&&(this.options.board.manualReset=this.options.manualReset),this.options.board&&!this.options.board.disableVerify&&(this.options.board.disableVerify=this.options.disableVerify),this.connection=new b(this.options),this.options.board){var de=E[this.options.board.protocol]||function(){};this.protocol=new de({board:this.options.board,connection:this.connection,debug:this.debug,megaDebug:this.options.megaDebug})}U.call(this)};return se(M,U),M.prototype._validateBoard=function(W){if(we(this.options.board)!=="object")return W(new Error('"'+this.options.board+'" is not a supported board type.'));if(this.protocol.chip)return this.options.port||this.options.board.name!=="pro-mini"?W(null):W(new Error("using a pro-mini, please specify the port in your options."));var le="not a supported programming protocol: "+this.options.board.protocol;return W(new Error(le))},M.prototype.flash=function(W,le){var de=this;de._validateBoard(function(oe){if(oe)return le(oe);de.connection._init(function(fe){if(fe)return le(fe);de.protocol._upload(W,le)})})},M.prototype.listPorts=M.listPorts=M.prototype.list=M.list=function(W){return b.prototype._listPorts(W)},M.listKnownBoards=function(){return Object.keys(L).filter(function(W){var le=L[W].aliases;return!le||!~le.indexOf(W)})},M.prototype.tools=T,M},Ve=Fe(D,et,{stk500v1:ve,stk500v2:Pe});var m=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};const A=()=>{};function h(L){return new Promise(b=>{setTimeout(b,L)})}var c=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};class p{constructor({logger:b,serialPort:E}){this.logger=b,this.usbSerialPort=new j(E,{baudRate:1200})}call(){return c(this,void 0,void 0,function*(){this.logger.debug("Starting CDC reset"),yield this.usbSerialPort.open(),this.logger.debug("Opening port"),yield h(500),yield this.usbSerialPort.close(),this.logger.debug("Port closed"),yield h(2e3)})}}var B=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};function J(L){const b=`000000000${L.toString(16)}`;return b.substring(b.length-8)}function ge(L){return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ge(L)}function be(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */be=function(){return L};var L={},b=Object.prototype,E=b.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},W=M.iterator||"@@iterator",le=M.asyncIterator||"@@asyncIterator",de=M.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function fe(C,x,re,pe){var ee=x&&x.prototype instanceof Le?x:Le,Be=Object.create(ee.prototype),Me=new Ot(pe||[]);return Be._invoke=function(qe,We,_e){var $e="suspendedStart";return function(Xe,Lt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Lt;return zt()}for(_e.method=Xe,_e.arg=Lt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ae)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(qe,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(C,re,Me),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}L.wrap=fe;var ae={};function Le(){}function De(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ye=Ce.prototype=Le.prototype=Object.create(Ue);function Ct(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function ot(C,x){function re(ee,Be,Me,qe){var We=ie(C[ee],C,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&ge($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,qe)},function(Xe){re("throw",Xe,Me,qe)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,qe)})}qe(We.arg)}var pe;this._invoke=function(ee,Be){function Me(){return new x(function(qe,We){re(ee,Be,qe,We)})}return pe=pe?pe.then(Me,Me):Me()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function Tt(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Ot(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function At(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return De.prototype=Ce,oe(Ye,"constructor",Ce),oe(Ce,"constructor",De),De.displayName=oe(Ce,de,"GeneratorFunction"),L.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===De||(x.displayName||x.name)==="GeneratorFunction")},L.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ye),C},L.awrap=function(C){return{__await:C}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),L.AsyncIterator=ot,L.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new ot(fe(C,x,re,pe),ee);return L.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ye),oe(Ye,de,"Generator"),oe(Ye,W,function(){return this}),oe(Ye,"toString",function(){return"[object Generator]"}),L.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},L.values=At,Ot.prototype={constructor:Ot,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(We,_e){return Be.type="throw",Be.arg=C,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var Me=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(Me&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(Me){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),Tt(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;Tt(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:At(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},L}function Ke(L,b,E,M,W,le,de){try{var oe=L[le](de),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(M,W)}function tt(L){return function(){var b=this,E=arguments;return new Promise(function(M,W){var le=L.apply(b,E);function de(fe){Ke(le,M,W,de,oe,"next",fe)}function oe(fe){Ke(le,M,W,de,oe,"throw",fe)}de(void 0)})}}function rt(L,b){if(!(L instanceof b))throw new TypeError("Cannot call a class as a function")}function wt(L,b){for(var E=0;E<b.length;E++){var M=b[E];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}var mt=function(){function L(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new TextDecoder;rt(this,L),this.reader=le,this.decoder=de,this.buffer=[],this.index=0}var b,E,M,W;return b=L,E=[{key:"startReading",value:(W=tt(be().mark(function le(){var de,oe,fe;return be().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=1,ie.next=4,this.reader.read();case 4:if(de=ie.sent,oe=de.value,!de.done){ie.next=11;break}return this.reader.releaseLock(),console.debug("Reader done"),ie.abrupt("break",20);case 11:oe&&(fe=this.decoder.decode(oe),this.buffer.push(fe),console.debug("Received Value: ".concat(fe))),ie.next=18;break;case 14:return ie.prev=14,ie.t0=ie.catch(1),console.warn("An error occurred while reading;",ie.t0),ie.abrupt("break",20);case 18:ie.next=0;break;case 20:case"end":return ie.stop()}},le,this,[[1,14]])})),function(){return W.apply(this,arguments)})},{key:"timedRead",value:(M=tt(be().mark(function le(de,oe){var fe,ie;return be().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:fe=!0,ie="",setTimeout(function(){fe=!1},oe);case 3:if(!fe){ae.next=10;break}return this.index<this.buffer.length&&(ie+=this.buffer[this.index],this.index+=1),ie.length>=de&&(fe=!1),ae.next=8,h(0);case 8:ae.next=3;break;case 10:return ae.abrupt("return",ie);case 11:case"end":return ae.stop()}},le,this)})),function(le,de){return M.apply(this,arguments)})},{key:"cancel",value:function(){return this.reader.cancel()}}],E&&wt(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),L}();function Xr(L){return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},Xr(L)}function hn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */hn=function(){return L};var L={},b=Object.prototype,E=b.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},W=M.iterator||"@@iterator",le=M.asyncIterator||"@@asyncIterator",de=M.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function fe(C,x,re,pe){var ee=x&&x.prototype instanceof Le?x:Le,Be=Object.create(ee.prototype),Me=new Ot(pe||[]);return Be._invoke=function(qe,We,_e){var $e="suspendedStart";return function(Xe,Lt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Lt;return zt()}for(_e.method=Xe,_e.arg=Lt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ae)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(qe,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(C,re,Me),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}L.wrap=fe;var ae={};function Le(){}function De(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ye=Ce.prototype=Le.prototype=Object.create(Ue);function Ct(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function ot(C,x){function re(ee,Be,Me,qe){var We=ie(C[ee],C,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&Xr($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,qe)},function(Xe){re("throw",Xe,Me,qe)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,qe)})}qe(We.arg)}var pe;this._invoke=function(ee,Be){function Me(){return new x(function(qe,We){re(ee,Be,qe,We)})}return pe=pe?pe.then(Me,Me):Me()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function Tt(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Ot(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function At(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return De.prototype=Ce,oe(Ye,"constructor",Ce),oe(Ce,"constructor",De),De.displayName=oe(Ce,de,"GeneratorFunction"),L.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===De||(x.displayName||x.name)==="GeneratorFunction")},L.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ye),C},L.awrap=function(C){return{__await:C}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),L.AsyncIterator=ot,L.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new ot(fe(C,x,re,pe),ee);return L.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ye),oe(Ye,de,"Generator"),oe(Ye,W,function(){return this}),oe(Ye,"toString",function(){return"[object Generator]"}),L.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},L.values=At,Ot.prototype={constructor:Ot,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(We,_e){return Be.type="throw",Be.arg=C,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var Me=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(Me&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(Me){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),Tt(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;Tt(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:At(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},L}function dn(L,b,E,M,W,le,de){try{var oe=L[le](de),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(M,W)}function $r(L,b){for(var E=0;E<b.length;E++){var M=b[E];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}function Ir(L,b){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,M){return E.__proto__=M,E},Ir(L,b)}function Vs(L){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,M=Nn(L);if(b){var W=Nn(this).constructor;E=Reflect.construct(M,arguments,W)}else E=M.apply(this,arguments);return qs(this,E)}}function qs(L,b){if(b&&(Xr(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(L)}function Nn(L){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Nn(L)}var Hs=function(L){(function(oe,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(fe&&fe.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),fe&&Ir(oe,fe)})(de,L);var b,E,M,W,le=Vs(de);function de(oe,fe){var ie;return function(ae,Le){if(!(ae instanceof Le))throw new TypeError("Cannot call a class as a function")}(this,de),(ie=le.call(this,oe,fe)).className="SambaUSBSerialPort",ie}return b=de,E=[{key:"open",value:(M=hn().mark(function oe(){var fe;return hn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._getPort();case 3:if(this.port=ie.sent,!this.isOpen){ie.next=6;break}return ie.abrupt("return");case 6:return ie.next=8,this.port.open(this.requestOptions||{baudRate:this.baudRate||57600});case 8:return ie.next=10,this.port.writable.getWriter();case 10:this.writer=ie.sent,this.reader=new mt(this.port.readable.getReader()),(fe=this.reader)===null||fe===void 0||fe.startReading(),this.isOpen=!0;case 14:return ie.prev=14,this.isOpen=!1,ie.finish(14);case 17:case"end":return ie.stop()}},oe,this,[[0,,14,17]])}),W=function(){var oe=this,fe=arguments;return new Promise(function(ie,ae){var Le=M.apply(oe,fe);function De(Ue){dn(Le,ie,ae,De,Ce,"next",Ue)}function Ce(Ue){dn(Le,ie,ae,De,Ce,"throw",Ue)}De(void 0)})},function(){return W.apply(this,arguments)})},{key:"timedRead",value:function(oe,fe){var ie;return(ie=this.reader)===null||ie===void 0?void 0:ie.timedRead(oe,fe)}}],E&&$r(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),de}(j),fr=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};const Ws=100,Ks=1e3,li=5e3,oo=8192,so=536891392,ao=1024,Zs=3758157068,Ys=100270084;class co{constructor({logger:b,serialPort:E}){this.serialPort=new Hs(E,{requestOptions:{baudRate:921600,dataBits:8,parity:"none",stopBits:1,flowControl:"none",bufferSize:4096,autoOpen:!1}}),this.logger=b}flash(b,E){return fr(this,void 0,void 0,function*(){E&&(yield this.cdcReset()),yield this.openSerial(),yield this.setBinaryMode(),yield this.checkVersion(),yield this.erase(),yield this.writeBinary(b),yield this.reset(),yield this.waitForPort()})}waitForPort(){return fr(this,void 0,void 0,function*(){yield h(500)})}reset(){return fr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#reset"),yield this.serialPort.writeText(`W${J(Zs)},${J(Ys)}#`)})}erase(){return fr(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#erase"),yield this.serialPort.writeText(`X${J(oo)}#`),!(yield this.checkResponse(`X
\r`,li)))throw new Error("Error while erasing")})}checkVersion(){return fr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#checkVersion"),yield this.serialPort.writeText("V#"),this.logger.info(yield this.serialPort.timedRead(256,Ws))})}setBinaryMode(){return fr(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#setBinaryMode"),yield this.serialPort.writeText("N#"),!(yield this.checkResponse(`
\r`,Ks)))throw new Error("Error setting binary mode")})}openSerial(){return fr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#openSerial"),yield this.serialPort.open()})}writeBinary(b){return fr(this,void 0,void 0,function*(){let E=0;do{let M=b.length-E;M>ao&&(M=ao);const W=b.slice(E,E+M);if(yield this.serialPort.writeText(`S${J(so)},${J(M)}#`),yield this.serialPort.write(W),yield h(5),yield this.serialPort.writeText(`Y${J(so)},0#`),!(yield this.checkResponse(`Y
\r`,5*li)))throw new Error(`Error while writing chunk ${(100*E/b.length).toFixed(0)}%`);if(yield this.serialPort.writeText(`Y${J(oo+E)},${J(M)}#`),!(yield this.checkResponse(`Y
\r`,li)))throw new Error("Error while writing buffer");E+=M}while(E<b.length)})}checkResponse(b,E){return fr(this,void 0,void 0,function*(){const{length:M}=b;yield h(10);const W=yield this.serialPort.timedRead(M,E);return this.logger.debug(`Checked Response.
${encodeURIComponent(b)} :expected
${encodeURIComponent(W)} :actual`),W===b})}cdcReset(){return fr(this,void 0,void 0,function*(){const b=yield this.serialPort._getPort();yield new p({logger:this.logger,serialPort:b}).call()})}}var Xs=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};function xt(L){return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},xt(L)}function pn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pn=function(){return L};var L={},b=Object.prototype,E=b.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},W=M.iterator||"@@iterator",le=M.asyncIterator||"@@asyncIterator",de=M.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function fe(C,x,re,pe){var ee=x&&x.prototype instanceof Le?x:Le,Be=Object.create(ee.prototype),Me=new Ot(pe||[]);return Be._invoke=function(qe,We,_e){var $e="suspendedStart";return function(Xe,Lt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Lt;return zt()}for(_e.method=Xe,_e.arg=Lt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ae)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(qe,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(C,re,Me),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}L.wrap=fe;var ae={};function Le(){}function De(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ye=Ce.prototype=Le.prototype=Object.create(Ue);function Ct(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function ot(C,x){function re(ee,Be,Me,qe){var We=ie(C[ee],C,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&xt($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,qe)},function(Xe){re("throw",Xe,Me,qe)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,qe)})}qe(We.arg)}var pe;this._invoke=function(ee,Be){function Me(){return new x(function(qe,We){re(ee,Be,qe,We)})}return pe=pe?pe.then(Me,Me):Me()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function Tt(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Ot(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function At(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return De.prototype=Ce,oe(Ye,"constructor",Ce),oe(Ce,"constructor",De),De.displayName=oe(Ce,de,"GeneratorFunction"),L.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===De||(x.displayName||x.name)==="GeneratorFunction")},L.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ye),C},L.awrap=function(C){return{__await:C}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),L.AsyncIterator=ot,L.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new ot(fe(C,x,re,pe),ee);return L.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ye),oe(Ye,de,"Generator"),oe(Ye,W,function(){return this}),oe(Ye,"toString",function(){return"[object Generator]"}),L.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},L.values=At,Ot.prototype={constructor:Ot,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(We,_e){return Be.type="throw",Be.arg=C,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var Me=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(Me&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(Me){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),Tt(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;Tt(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:At(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},L}function uo(L,b,E,M,W,le,de){try{var oe=L[le](de),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(M,W)}function fi(L){return function(){var b=this,E=arguments;return new Promise(function(M,W){var le=L.apply(b,E);function de(fe){uo(le,M,W,de,oe,"next",fe)}function oe(fe){uo(le,M,W,de,oe,"throw",fe)}de(void 0)})}}function mn(L,b){if(!(L instanceof b))throw new TypeError("Cannot call a class as a function")}function hi(L,b){for(var E=0;E<b.length;E++){var M=b[E];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}var lo=function(){function L(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new TextDecoder;mn(this,L),this.reader=le,this.decoder=de,this.buffer=[],this.index=0}var b,E,M,W;return b=L,E=[{key:"startReading",value:(W=fi(pn().mark(function le(){var de,oe,fe;return pn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=1,ie.next=4,this.reader.read();case 4:if(de=ie.sent,oe=de.value,!de.done){ie.next=11;break}return this.reader.releaseLock(),console.debug("Reader done"),ie.abrupt("break",20);case 11:oe&&(fe=this.decoder.decode(oe),this.buffer.push(fe),console.debug("Received Value: ".concat(fe))),ie.next=18;break;case 14:return ie.prev=14,ie.t0=ie.catch(1),console.warn("An error occurred while reading;",ie.t0),ie.abrupt("break",20);case 18:ie.next=0;break;case 20:case"end":return ie.stop()}},le,this,[[1,14]])})),function(){return W.apply(this,arguments)})},{key:"timedRead",value:(M=fi(pn().mark(function le(de,oe){var fe,ie;return pn().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:fe=!0,ie="",setTimeout(function(){fe=!1},oe);case 3:if(!fe){ae.next=10;break}return this.index<this.buffer.length&&(ie+=this.buffer[this.index],this.index+=1),ie.length>=de&&(fe=!1),ae.next=8,h(0);case 8:ae.next=3;break;case 10:return ae.abrupt("return",ie);case 11:case"end":return ae.stop()}},le,this)})),function(le,de){return M.apply(this,arguments)})},{key:"cancel",value:function(){return this.reader.cancel()}}],E&&hi(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),L}();function gn(L){return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},gn(L)}function vn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */vn=function(){return L};var L={},b=Object.prototype,E=b.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},W=M.iterator||"@@iterator",le=M.asyncIterator||"@@asyncIterator",de=M.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function fe(C,x,re,pe){var ee=x&&x.prototype instanceof Le?x:Le,Be=Object.create(ee.prototype),Me=new Ot(pe||[]);return Be._invoke=function(qe,We,_e){var $e="suspendedStart";return function(Xe,Lt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Lt;return zt()}for(_e.method=Xe,_e.arg=Lt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ae)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(qe,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(C,re,Me),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}L.wrap=fe;var ae={};function Le(){}function De(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ye=Ce.prototype=Le.prototype=Object.create(Ue);function Ct(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function ot(C,x){function re(ee,Be,Me,qe){var We=ie(C[ee],C,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&gn($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,qe)},function(Xe){re("throw",Xe,Me,qe)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,qe)})}qe(We.arg)}var pe;this._invoke=function(ee,Be){function Me(){return new x(function(qe,We){re(ee,Be,qe,We)})}return pe=pe?pe.then(Me,Me):Me()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function Tt(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Ot(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function At(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return De.prototype=Ce,oe(Ye,"constructor",Ce),oe(Ce,"constructor",De),De.displayName=oe(Ce,de,"GeneratorFunction"),L.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===De||(x.displayName||x.name)==="GeneratorFunction")},L.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ye),C},L.awrap=function(C){return{__await:C}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),L.AsyncIterator=ot,L.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new ot(fe(C,x,re,pe),ee);return L.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ye),oe(Ye,de,"Generator"),oe(Ye,W,function(){return this}),oe(Ye,"toString",function(){return"[object Generator]"}),L.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},L.values=At,Ot.prototype={constructor:Ot,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(We,_e){return Be.type="throw",Be.arg=C,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var Me=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(Me&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(Me){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),Tt(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;Tt(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:At(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},L}function fo(L,b,E,M,W,le,de){try{var oe=L[le](de),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(M,W)}function ho(L){return function(){var b=this,E=arguments;return new Promise(function(M,W){var le=L.apply(b,E);function de(fe){fo(le,M,W,de,oe,"next",fe)}function oe(fe){fo(le,M,W,de,oe,"throw",fe)}de(void 0)})}}function Qs(L,b){for(var E=0;E<b.length;E++){var M=b[E];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}function di(L,b){return di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,M){return E.__proto__=M,E},di(L,b)}function Js(L){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,M=Ln(L);if(b){var W=Ln(this).constructor;E=Reflect.construct(M,arguments,W)}else E=M.apply(this,arguments);return ea(this,E)}}function ea(L,b){if(b&&(gn(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(L)}function Ln(L){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Ln(L)}var ta=function(L){(function(oe,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(fe&&fe.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),fe&&di(oe,fe)})(de,L);var b,E,M,W,le=Js(de);function de(oe,fe){var ie;return function(ae,Le){if(!(ae instanceof Le))throw new TypeError("Cannot call a class as a function")}(this,de),(ie=le.call(this,oe,fe)).className="SambaUSBSerialPort",ie}return b=de,E=[{key:"open",value:(W=ho(vn().mark(function oe(){var fe;return vn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._getPort();case 3:if(this.port=ie.sent,!this.isOpen){ie.next=6;break}return ie.abrupt("return");case 6:return ie.next=8,this.port.open(this.requestOptions||{baudRate:this.baudRate||57600});case 8:return ie.next=10,this.port.writable.getWriter();case 10:this.writer=ie.sent,this.reader=new lo(this.port.readable.getReader()),this.isOpen=!0,(fe=this.reader)===null||fe===void 0||fe.startReading(),ie.next=20;break;case 16:ie.prev=16,ie.t0=ie.catch(0),console.error(ie.t0),this.isOpen=!1;case 20:case"end":return ie.stop()}},oe,this,[[0,16]])})),function(){return W.apply(this,arguments)})},{key:"close",value:(M=ho(vn().mark(function oe(){var fe,ie;return vn().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(this.isOpen){ae.next=2;break}return ae.abrupt("return");case 2:return ae.prev=2,ae.next=5,(fe=this.reader)===null||fe===void 0?void 0:fe.cancel();case 5:return ae.next=7,(ie=this.writer)===null||ie===void 0?void 0:ie.close();case 7:return ae.next=9,this.port.close();case 9:this.isOpen=!1,ae.next=15;break;case 12:ae.prev=12,ae.t0=ae.catch(2),console.error(ae.t0);case 15:case"end":return ae.stop()}},oe,this,[[2,12]])})),function(){return M.apply(this,arguments)})},{key:"timedRead",value:function(oe,fe){var ie;return(ie=this.reader)===null||ie===void 0?void 0:ie.timedRead(oe,fe)}}],E&&Qs(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),de}(j);function Rr(L){const b=`000000000${L.toString(16)}`;return b.substring(b.length-8)}var Zt=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};const po=100,ra=1e3,pi=5e3,Nt={startAddress:0,ramAddress:20480,transferSize:4096};function Pn(L,b){if(L.length>=b)return L.subarray(0,b);const E=new Uint8Array(b);return E.set(L),E}function Tr(L){if(L<0||L>100)return"[                              ]";const b=Math.round(L/100*30),E=30-b;return`[${"=".repeat(b)}${" ".repeat(E)}]`}class Mt{constructor({logger:b,serialPort:E}){this.serialPort=new ta(E,{requestOptions:{baudRate:230400,dataBits:8,parity:"none",stopBits:1,flowControl:"none",bufferSize:4096,autoOpen:!1}}),this.logger=b}flash(b,E){return Zt(this,void 0,void 0,function*(){E&&(yield this.cdcReset()),yield this.openSerial(),yield this.checkVersion(),yield this.identifyChip(),yield this.setBinaryMode(),yield this.erase(),yield this.writeBinary(b),yield this.reset(),yield this.waitForPort(),yield this.closeSerial()})}waitForPort(){return Zt(this,void 0,void 0,function*(){yield h(500)})}reset(){return Zt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#reset"),yield this.serialPort.writeText("K#")})}erase(){return Zt(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#erase"),yield this.serialPort.writeText(`X${Rr(Nt.startAddress)}#`),!(yield this.checkResponse(`X
\r`,pi)))throw new Error("Error while erasing")})}checkVersion(){return Zt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#checkVersion"),yield this.serialPort.writeText("V#"),this.logger.debug(yield this.serialPort.timedRead(256,po))})}identifyChip(){return Zt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#identifyChip"),yield this.serialPort.writeText("I#"),this.logger.debug(yield this.serialPort.timedRead(256,po))})}setBinaryMode(){return Zt(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#setBinaryMode"),yield this.serialPort.writeText("N#"),!(yield this.checkResponse(`
\r`,ra)))throw new Error("Error setting binary mode")})}forgetSerial(){return Zt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#forgetSerial"),yield this.serialPort.forget()})}closeSerial(){return Zt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#closeSerial"),yield this.serialPort.close()})}openSerial(){return Zt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#openSerial"),yield this.serialPort.open()})}writeBinary(b){return Zt(this,void 0,void 0,function*(){let E=0,M=0;const W=Math.ceil(b.length/Nt.transferSize);do{let le=b.length-E;le>Nt.transferSize&&(le=Nt.transferSize);let de=b.slice(E,E+le);Nt.transferSize-de.length>0&&(new Uint8Array(Nt.transferSize).set(de),de=Pn(de,Nt.transferSize),le=de.length),yield this.serialPort.writeText(`S${Rr(Nt.ramAddress)},${Rr(le)}#`);const oe=100*E/b.length;if(this.logger.info(`${Tr(oe)} ${oe.toFixed(0)}% (${M}/${W} pages) write(addr=0x${Nt.ramAddress.toString(16)}, size=0x${le.toString(16)})`),yield this.serialPort.write(de),yield h(5),yield this.serialPort.writeText(`Y${Rr(Nt.ramAddress)},0#`),!(yield this.checkResponse(`Y
\r`,5*pi)))throw new Error(`Error while writing chunk ${oe}%`);if(yield this.serialPort.writeText(`Y${Rr(Nt.startAddress+E)},${Rr(le)}#`),this.logger.info(`writeBuffer(scr_addr=0x${Nt.ramAddress.toString(16)}, dst_addr=0x${(Nt.startAddress+E).toString(16)}, size=0x${le.toString(16)})`),!(yield this.checkResponse(`Y
\r`,pi)))throw new Error("Error while writing buffer");E+=le,M+=1}while(E<b.length);this.logger.info(`${Tr(100)} 100% (${M}/${W} pages)`)})}checkResponse(b,E){return Zt(this,void 0,void 0,function*(){const{length:M}=b;yield h(10);const W=yield this.serialPort.timedRead(M,E);return this.logger.debug(`Checked Response.
${encodeURIComponent(b)} :expected
${encodeURIComponent(W)} :actual`),W===b})}cdcReset(){return Zt(this,void 0,void 0,function*(){const b=yield this.serialPort._getPort();yield new p({logger:this.logger,serialPort:b}).call()})}}var na=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};function mi(L){return mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},mi(L)}function _t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_t=function(){return L};var L={},b=Object.prototype,E=b.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},W=M.iterator||"@@iterator",le=M.asyncIterator||"@@asyncIterator",de=M.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function fe(C,x,re,pe){var ee=x&&x.prototype instanceof Le?x:Le,Be=Object.create(ee.prototype),Me=new Ot(pe||[]);return Be._invoke=function(qe,We,_e){var $e="suspendedStart";return function(Xe,Lt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Lt;return zt()}for(_e.method=Xe,_e.arg=Lt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ae)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(qe,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(C,re,Me),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}L.wrap=fe;var ae={};function Le(){}function De(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ye=Ce.prototype=Le.prototype=Object.create(Ue);function Ct(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function ot(C,x){function re(ee,Be,Me,qe){var We=ie(C[ee],C,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&mi($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,qe)},function(Xe){re("throw",Xe,Me,qe)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,qe)})}qe(We.arg)}var pe;this._invoke=function(ee,Be){function Me(){return new x(function(qe,We){re(ee,Be,qe,We)})}return pe=pe?pe.then(Me,Me):Me()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function Tt(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Ot(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function At(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return De.prototype=Ce,oe(Ye,"constructor",Ce),oe(Ce,"constructor",De),De.displayName=oe(Ce,de,"GeneratorFunction"),L.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===De||(x.displayName||x.name)==="GeneratorFunction")},L.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ye),C},L.awrap=function(C){return{__await:C}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),L.AsyncIterator=ot,L.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new ot(fe(C,x,re,pe),ee);return L.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ye),oe(Ye,de,"Generator"),oe(Ye,W,function(){return this}),oe(Ye,"toString",function(){return"[object Generator]"}),L.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},L.values=At,Ot.prototype={constructor:Ot,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(We,_e){return Be.type="throw",Be.arg=C,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var Me=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(Me&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(Me){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),Tt(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;Tt(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:At(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},L}function zr(L,b,E,M,W,le,de){try{var oe=L[le](de),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(M,W)}function hr(L){return function(){var b=this,E=arguments;return new Promise(function(M,W){var le=L.apply(b,E);function de(fe){zr(le,M,W,de,oe,"next",fe)}function oe(fe){zr(le,M,W,de,oe,"throw",fe)}de(void 0)})}}function dr(L,b){var E=typeof Symbol<"u"&&L[Symbol.iterator]||L["@@iterator"];if(!E){if(Array.isArray(L)||(E=function(fe,ie){if(fe){if(typeof fe=="string")return gi(fe,ie);var ae=Object.prototype.toString.call(fe).slice(8,-1);if(ae==="Object"&&fe.constructor&&(ae=fe.constructor.name),ae==="Map"||ae==="Set")return Array.from(fe);if(ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return gi(fe,ie)}}(L))||b){E&&(L=E);var M=0,W=function(){};return{s:W,n:function(){return M>=L.length?{done:!0}:{done:!1,value:L[M++]}},e:function(fe){throw fe},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,de=!0,oe=!1;return{s:function(){E=E.call(L)},n:function(){var fe=E.next();return de=fe.done,fe},e:function(fe){oe=!0,le=fe},f:function(){try{de||E.return==null||E.return()}finally{if(oe)throw le}}}}function gi(L,b){(b==null||b>L.length)&&(b=L.length);for(var E=0,M=new Array(b);E<b;E++)M[E]=L[E];return M}var pr=function(){var L={DETACH:0,DNLOAD:1,UPLOAD:2,GETSTATUS:3,CLRSTATUS:4,GETSTATE:5,ABORT:6,appIDLE:0,appDETACH:1,dfuIDLE:2,dfuDNLOAD_SYNC:3,dfuDNBUSY:4,dfuDNLOAD_IDLE:5,dfuMANIFEST_SYNC:6,dfuMANIFEST:7,dfuMANIFEST_WAIT_RESET:8,dfuUPLOAD_IDLE:9,dfuERROR:10,STATUS_OK:0,Device:function(b,E){this.device_=b,this.settings=E,this.intfNumber=E.interface.interfaceNumber},findDeviceDfuInterfaces:function(b){var E,M=[],W=dr(b.configurations);try{for(W.s();!(E=W.n()).done;){var le,de=E.value,oe=dr(de.interfaces);try{for(oe.s();!(le=oe.n()).done;){var fe,ie=le.value,ae=dr(ie.alternates);try{for(ae.s();!(fe=ae.n()).done;){var Le=fe.value;if(Le.interfaceClass===254&&Le.interfaceSubclass===1&&(Le.interfaceProtocol===1||Le.interfaceProtocol===2)){var De={configuration:de,interface:ie,alternate:Le,name:Le.interfaceName};M.push(De)}}}catch(Ce){ae.e(Ce)}finally{ae.f()}}}catch(Ce){oe.e(Ce)}finally{oe.f()}}}catch(Ce){W.e(Ce)}finally{W.f()}return M},findAllDfuInterfaces:function(){return navigator.usb.getDevices().then(function(b){var E,M=[],W=dr(b);try{for(W.s();!(E=W.n()).done;){var le,de=E.value,oe=dr(L.findDeviceDfuInterfaces(de));try{for(oe.s();!(le=oe.n()).done;){var fe=le.value;M.push(new L.Device(de,fe))}}catch(ie){oe.e(ie)}finally{oe.f()}}}catch(ie){W.e(ie)}finally{W.f()}return M})}};return L.Device.prototype.logDebug=function(b){console.debug(b)},L.Device.prototype.logInfo=function(b){console.log(b)},L.Device.prototype.logWarning=function(b){console.log(b)},L.Device.prototype.logError=function(b){console.log(b)},L.Device.prototype.logProgress=function(b,E){console.log(E===void 0?b:"".concat(b,"/").concat(E))},L.Device.prototype.open=hr(_t().mark(function b(){var E,M,W,le;return _t().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.device_.open();case 2:if(E=this.settings.configuration.configurationValue,this.device_.configuration!==null&&this.device_.configuration.configurationValue===E){de.next=6;break}return de.next=6,this.device_.selectConfiguration(E);case 6:if(M=this.settings.interface.interfaceNumber,this.device_.configuration.interfaces[M].claimed){de.next=10;break}return de.next=10,this.device_.claimInterface(M);case 10:if(W=this.settings.alternate.alternateSetting,!((le=this.device_.configuration.interfaces[M]).alternate===null||le.alternate.alternateSetting!==W||le.alternates.length>1)){de.next=25;break}return de.prev=13,de.next=16,this.device_.selectAlternateInterface(M,W);case 16:de.next=25;break;case 18:if(de.prev=18,de.t0=de.catch(13),le.alternate.alternateSetting!==W||!de.t0.endsWith("Unable to set device interface.")){de.next=24;break}this.logWarning("Redundant SET_INTERFACE request to select altSetting ".concat(W," failed")),de.next=25;break;case 24:throw de.t0;case 25:case"end":return de.stop()}},b,this,[[13,18]])})),L.Device.prototype.close=hr(_t().mark(function b(){return _t().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,this.device_.close();case 3:E.next=8;break;case 5:E.prev=5,E.t0=E.catch(0),console.log(E.t0);case 8:case"end":return E.stop()}},b,this,[[0,5]])})),L.Device.prototype.readDeviceDescriptor=function(){return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:256,index:0},18).then(function(b){return b.status==="ok"?Promise.resolve(b.data):Promise.reject(b.status)})},L.Device.prototype.readStringDescriptor=function(){var b=hr(_t().mark(function E(M,W){var le,de,oe,fe,ie,ae;return _t().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return W===void 0&&(W=0),le={requestType:"standard",recipient:"device",request:6,value:768|M,index:W},Le.next=7,this.device_.controlTransferIn(le,1);case 7:if((de=Le.sent).status!=="ok"){Le.next=20;break}return oe=de.data.getUint8(0),Le.next=12,this.device_.controlTransferIn(le,oe);case 12:if((de=Le.sent).status!=="ok"){Le.next=20;break}for(fe=(oe-2)/2,ie=[],ae=0;ae<fe;ae++)ie.push(de.data.getUint16(2+2*ae,!0));if(W!==0){Le.next=19;break}return Le.abrupt("return",ie);case 19:return Le.abrupt("return",String.fromCharCode.apply(String,ie));case 20:throw"Failed to read string descriptor ".concat(M,": ").concat(de.status);case 21:case"end":return Le.stop()}},E,this)}));return function(E,M){return b.apply(this,arguments)}}(),L.Device.prototype.readInterfaceNames=hr(_t().mark(function b(){var E,M,W,le,de,oe,fe,ie,ae,Le,De,Ce,Ue,xe,Ge,Ye,Ct,ot;return _t().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:E=4,M={},W=new Set,le=0;case 4:if(!(le<this.device_.configurations.length)){ut.next=16;break}return ut.next=7,this.readConfigurationDescriptor(le);case 7:de=ut.sent,oe=L.parseConfigurationDescriptor(de),fe=oe.bConfigurationValue,M[fe]={},ie=dr(oe.descriptors);try{for(ie.s();!(ae=ie.n()).done;)(Le=ae.value).bDescriptorType===E&&(Le.bInterfaceNumber in M[fe]||(M[fe][Le.bInterfaceNumber]={}),M[fe][Le.bInterfaceNumber][Le.bAlternateSetting]=Le.iInterface,Le.iInterface>0&&W.add(Le.iInterface))}catch(Yt){ie.e(Yt)}finally{ie.f()}case 13:le++,ut.next=4;break;case 16:De={},Ce=dr(W),ut.prev=18,Ce.s();case 20:if((Ue=Ce.n()).done){ut.next=34;break}return xe=Ue.value,ut.prev=22,ut.next=25,this.readStringDescriptor(xe,1033);case 25:De[xe]=ut.sent,ut.next=32;break;case 28:ut.prev=28,ut.t0=ut.catch(22),console.log(ut.t0),De[xe]=null;case 32:ut.next=20;break;case 34:ut.next=39;break;case 36:ut.prev=36,ut.t1=ut.catch(18),Ce.e(ut.t1);case 39:return ut.prev=39,Ce.f(),ut.finish(39);case 42:for(Ge in M)for(Ye in M[Ge])for(Ct in M[Ge][Ye])ot=M[Ge][Ye][Ct],M[Ge][Ye][Ct]=De[ot];return ut.abrupt("return",M);case 44:case"end":return ut.stop()}},b,this,[[18,36,39,42],[22,28]])})),L.parseDeviceDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bcdUSB:b.getUint16(2,!0),bDeviceClass:b.getUint8(4),bDeviceSubClass:b.getUint8(5),bDeviceProtocol:b.getUint8(6),bMaxPacketSize:b.getUint8(7),idVendor:b.getUint16(8,!0),idProduct:b.getUint16(10,!0),bcdDevice:b.getUint16(12,!0),iManufacturer:b.getUint8(14),iProduct:b.getUint8(15),iSerialNumber:b.getUint8(16),bNumConfigurations:b.getUint8(17)}},L.parseConfigurationDescriptor=function(b){var E=new DataView(b.buffer.slice(9)),M=L.parseSubDescriptors(E);return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),wTotalLength:b.getUint16(2,!0),bNumInterfaces:b.getUint8(4),bConfigurationValue:b.getUint8(5),iConfiguration:b.getUint8(6),bmAttributes:b.getUint8(7),bMaxPower:b.getUint8(8),descriptors:M}},L.parseInterfaceDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bInterfaceNumber:b.getUint8(2),bAlternateSetting:b.getUint8(3),bNumEndpoints:b.getUint8(4),bInterfaceClass:b.getUint8(5),bInterfaceSubClass:b.getUint8(6),bInterfaceProtocol:b.getUint8(7),iInterface:b.getUint8(8),descriptors:[]}},L.parseFunctionalDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bmAttributes:b.getUint8(2),wDetachTimeOut:b.getUint16(3,!0),wTransferSize:b.getUint16(5,!0),bcdDFUVersion:b.getUint16(7,!0)}},L.parseSubDescriptors=function(b){for(var E,M=b,W=[],le=!1;M.byteLength>2;){var de=M.getUint8(0),oe=M.getUint8(1),fe=new DataView(M.buffer.slice(0,de));if(oe===4)le=(E=L.parseInterfaceDescriptor(fe)).bInterfaceClass===254&&E.bInterfaceSubClass===1,W.push(E);else if(le&&oe===33){var ie=L.parseFunctionalDescriptor(fe);W.push(ie),E.descriptors.push(ie)}else{var ae={bLength:de,bDescriptorType:oe,data:fe};W.push(ae),E&&E.descriptors.push(ae)}M=new DataView(M.buffer.slice(de))}return W},L.Device.prototype.readConfigurationDescriptor=function(b){var E=this,M=512|b;return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:M,index:0},4).then(function(W){if(W.status==="ok"){var le=W.data.getUint16(2,!0);return E.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:M,index:0},le)}return Promise.reject(W.status)}).then(function(W){return W.status==="ok"?Promise.resolve(W.data):Promise.reject(W.status)})},L.Device.prototype.requestOut=function(b,E){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:b,value:M,index:this.intfNumber},E).then(function(W){return W.status==="ok"?Promise.resolve(W.bytesWritten):Promise.reject(W.status)},function(W){return Promise.reject("ControlTransferOut failed: ".concat(W))})},L.Device.prototype.requestIn=function(b,E){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.device_.controlTransferIn({requestType:"class",recipient:"interface",request:b,value:M,index:this.intfNumber},E).then(function(W){return W.status==="ok"?Promise.resolve(W.data):Promise.reject(W.status)},function(W){return Promise.reject("ControlTransferIn failed: ".concat(W))})},L.Device.prototype.detach=function(){return this.requestOut(L.DETACH,void 0,1e3)},L.Device.prototype.waitDisconnected=function(){var b=hr(_t().mark(function E(M){var W,le;return _t().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return W=this,le=this.device_,de.abrupt("return",new Promise(function(oe,fe){var ie;M>0&&(ie=setTimeout(fe,M));function ae(Le){Le.device===le&&(M>0&&clearTimeout(ie),W.disconnected=!0,navigator.usb.removeEventListener("disconnect",ae),Le.stopPropagation(),oe(W))}navigator.usb.addEventListener("disconnect",ae)}));case 3:case"end":return de.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),L.Device.prototype.download=function(b,E){return this.requestOut(L.DNLOAD,b,E)},L.Device.prototype.dnload=L.Device.prototype.download,L.Device.prototype.upload=function(b,E){return this.requestIn(L.UPLOAD,b,E)},L.Device.prototype.clearStatus=function(){return this.requestOut(L.CLRSTATUS)},L.Device.prototype.clrStatus=L.Device.prototype.clearStatus,L.Device.prototype.getStatus=function(){return this.requestIn(L.GETSTATUS,6).then(function(b){return Promise.resolve({status:b.getUint8(0),pollTimeout:16777215&b.getUint32(1,!0),state:b.getUint8(4)})},function(b){return Promise.reject("DFU GETSTATUS failed: ".concat(b))})},L.Device.prototype.getState=function(){return this.requestIn(L.GETSTATE,1).then(function(b){return Promise.resolve(b.getUint8(0))},function(b){return Promise.reject("DFU GETSTATE failed: ".concat(b))})},L.Device.prototype.abort=function(){return this.requestOut(L.ABORT)},L.Device.prototype.abortToIdle=hr(_t().mark(function b(){var E;return _t().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,this.abort();case 2:return M.next=4,this.getState();case 4:if((E=M.sent)!==L.dfuERROR){M.next=11;break}return M.next=8,this.clearStatus();case 8:return M.next=10,this.getState();case 10:E=M.sent;case 11:if(E===L.dfuIDLE){M.next=13;break}throw"Failed to return to idle state after abort: state ".concat(E.state);case 13:case"end":return M.stop()}},b,this)})),L.Device.prototype.do_upload=function(){var b=hr(_t().mark(function E(M){var W,le,de,oe,fe,ie,ae,Le=arguments;return _t().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:W=Le.length>1&&Le[1]!==void 0?Le[1]:1/0,le=Le.length>2&&Le[2]!==void 0?Le[2]:0,de=le,oe=[],fe=0,this.logInfo("Copying data from DFU device to browser"),this.logProgress(0);case 7:return ae=Math.min(M,W-fe),De.next=10,this.upload(ae,de++);case 10:ie=De.sent,this.logDebug("Read ".concat(ie.byteLength," bytes")),ie.byteLength>0&&(oe.push(ie),fe+=ie.byteLength),Number.isFinite(W)?this.logProgress(fe,W):this.logProgress(fe);case 14:if(fe<W&&ie.byteLength===ae){De.next=7;break}case 15:if(fe!==W){De.next=18;break}return De.next=18,this.abortToIdle();case 18:return this.logInfo("Read ".concat(fe," bytes")),De.abrupt("return",new Blob(oe,{type:"application/octet-stream"}));case 20:case"end":return De.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),L.Device.prototype.poll_until=function(){var b=hr(_t().mark(function E(M){var W,le,de;return _t().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return de=function(fe){return new Promise(function(ie,ae){le.logDebug("Sleeping for ".concat(fe,"ms")),setTimeout(ie,fe)})},oe.next=3,this.getStatus();case 3:W=oe.sent,le=this;case 5:if(M(W.state)||W.state===L.dfuERROR){oe.next=13;break}return oe.next=8,de(W.pollTimeout);case 8:return oe.next=10,this.getStatus();case 10:W=oe.sent,oe.next=5;break;case 13:return oe.abrupt("return",W);case 14:case"end":return oe.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),L.Device.prototype.poll_until_idle=function(b){return this.poll_until(function(E){return E===b})},L.Device.prototype.do_download=function(){var b=hr(_t().mark(function E(M,W,le){var de,oe,fe,ie,ae,Le,De,Ce,Ue;return _t().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:de=0,oe=W.byteLength,fe=0,this.logInfo("Copying data from browser to DFU device"),this.logProgress(de,oe);case 5:if(!(de<oe)){xe.next=30;break}return ie=oe-de,ae=Math.min(ie,M),Le=0,De=void 0,xe.prev=10,xe.next=13,this.download(W.slice(de,de+ae),fe++);case 13:return Le=xe.sent,this.logDebug("Sent ".concat(Le," bytes")),xe.next=17,this.poll_until_idle(L.dfuDNLOAD_IDLE);case 17:De=xe.sent,xe.next=23;break;case 20:throw xe.prev=20,xe.t0=xe.catch(10),"Error during DFU download: ".concat(xe.t0);case 23:if(De.status===L.STATUS_OK){xe.next=25;break}throw"DFU DOWNLOAD failed state=".concat(De.state,", status=").concat(De.status);case 25:this.logDebug("Wrote ".concat(Le," bytes")),de+=Le,this.logProgress(de,oe),xe.next=5;break;case 30:return this.logDebug("Sending empty block"),xe.prev=31,xe.next=34,this.download(new ArrayBuffer([]),fe++);case 34:xe.next=39;break;case 36:throw xe.prev=36,xe.t1=xe.catch(31),"Error during final DFU download: ".concat(xe.t1);case 39:if(this.logInfo("Wrote ".concat(de," bytes")),this.logInfo("Manifesting new firmware"),!le){xe.next=60;break}return xe.prev=42,xe.next=45,this.poll_until(function(Ge){return Ge===L.dfuIDLE||Ge===L.dfuMANIFEST_WAIT_RESET});case 45:if((Ce=xe.sent).state===L.dfuMANIFEST_WAIT_RESET&&this.logDebug("Device transitioned to MANIFEST_WAIT_RESET even though it is manifestation tolerant"),Ce.status===L.STATUS_OK){xe.next=49;break}throw"DFU MANIFEST failed state=".concat(Ce.state,", status=").concat(Ce.status);case 49:xe.next=58;break;case 51:if(xe.prev=51,xe.t2=xe.catch(42),!xe.t2.endsWith("ControlTransferIn failed: NotFoundError: Device unavailable.")&&!xe.t2.endsWith("ControlTransferIn failed: NotFoundError: The device was disconnected.")){xe.next=57;break}this.logWarning("Unable to poll final manifestation status"),xe.next=58;break;case 57:throw"Error during DFU manifest: ".concat(xe.t2);case 58:xe.next=70;break;case 60:return xe.prev=60,xe.next=63,this.getStatus();case 63:Ue=xe.sent,this.logDebug("Final DFU status: state=".concat(Ue.state,", status=").concat(Ue.status)),xe.next=70;break;case 67:xe.prev=67,xe.t3=xe.catch(60),this.logDebug("Manifest GET_STATUS poll error: ".concat(xe.t3));case 70:return xe.prev=70,xe.next=73,this.device_.reset();case 73:xe.next=82;break;case 75:if(xe.prev=75,xe.t4=xe.catch(70),xe.t4!=="NetworkError: Unable to reset the device."&&xe.t4!=="NotFoundError: Device unavailable."&&xe.t4!=="NotFoundError: The device was disconnected."){xe.next=81;break}this.logDebug("Ignored reset error"),xe.next=82;break;case 81:throw"Error during reset for manifestation: ".concat(xe.t4);case 82:case"end":return xe.stop()}},E,this,[[10,20],[31,36],[42,51],[60,67],[70,75]])}));return function(E,M,W){return b.apply(this,arguments)}}(),L}(),Or=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};class Gr{constructor(b){this.onDisconnect=de=>{de&&this.logger.error(de)},this.connect=de=>Or(this,void 0,void 0,function*(){try{yield de.open()}catch(fe){throw this.onDisconnect(fe),fe}let oe={};try{oe=yield function(fe){return fe.readConfigurationDescriptor(0).then(ie=>{const ae=pr.parseConfigurationDescriptor(ie);let Le=null;const De=fe.settings.configuration.configurationValue;if(ae.bConfigurationValue===De)for(let Ce=0;Ce<ae.descriptors.length;Ce+=1){const Ue=ae.descriptors[Ce];if(Ue.bDescriptorType===33&&Ue.bcdDFUVersion){Le=Ue;break}}return Le?{WillDetach:(8&Le.bmAttributes)!=0,ManifestationTolerant:(4&Le.bmAttributes)!=0,CanUpload:(2&Le.bmAttributes)!=0,CanDnload:(1&Le.bmAttributes)!=0,TransferSize:Le.wTransferSize,DetachTimeOut:Le.wDetachTimeOut,DFUVersion:Le.bcdDFUVersion}:{}},ie=>{console.error(ie)})}(de)}catch(fe){throw this.onDisconnect(fe),fe}return oe&&Object.keys(oe).length>0&&(de.properties=oe,oe.WillDetach,oe.ManifestationTolerant,oe.CanUpload,oe.CanDnload,oe.TransferSize,oe.DetachTimeOut,function(fe){let ie=fe.toString(16);for(;ie.length<4;)ie=`0${ie}`}(oe.DFUVersion),this.transferSize=oe.TransferSize,oe.CanDnload&&(this.manifestationTolerant=oe.ManifestationTolerant)),de});const{options:E,postMessage:M,fqbn:W,dialogCustomizations:le}=b;this.logger=(E==null?void 0:E.logger)||new i,this.fqbn=W,this.vid=b.vid,this.pid=b.pid,this.postMessage=M,this.dialogCustomizations=le}getCustomDialog(b){if(this.dialogCustomizations&&b<this.dialogCustomizations.length)return this.dialogCustomizations[b]}flash({filename:b,compiledSketch:E}){return Or(this,void 0,void 0,function*(){this.logger.info(`Compiling file '${b}' ...`);let M=yield R({vid:this.vid,pid:this.pid});if(!M){const de=yield N(this.getCustomDialog(0));this.vid=de.getInfo().usbVendorId||this.vid,this.pid=de.getInfo().usbProductId||this.pid,M=yield R({vid:this.vid,pid:this.pid})}if(!M)throw new Error("Cannot perform CDC reset");yield new p({logger:this.logger,serialPort:M}).call();let W=yield O(this.fqbn);if(W||(yield function(de){return v(this,void 0,void 0,function*(){if(!(yield a.From(de).confirm()))throw new Error("Permission denied");yield navigator.usb.requestDevice({filters:[]})})}(this.dialogCustomizations&&this.dialogCustomizations[0]),W=yield O(this.fqbn)),!W)throw new Error("Cannot connect USB device");const le=yield pr.findDeviceDfuInterfaces(W);if(le.length===0?this.logger.info("The selected device does not have any USB DFU interfaces."):(this.logger.info(`The selected device has ${le.length} USB DFU interfaces`),yield Gr.fixInterfaceNames(W,le),this.dfuDevice=yield this.connect(new pr.Device(W,le[0]))),this.dfuDevice&&E!=null){try{(yield this.dfuDevice.getStatus()).state===pr.dfuERROR&&(yield this.dfuDevice.clearStatus())}catch{this.logger.warn("Failed to clear status")}yield this.dfuDevice.do_download(64,Buffer.from(E,"base64"),this.manifestationTolerant).then(()=>{var de;this.logger.info("Done!"),this.manifestationTolerant||(de=this.dfuDevice)===null||de===void 0||de.waitDisconnected(5e3).then(oe=>this.logger.info("Disconnected"),oe=>this.logger.error("Device unexpectedly tolerated manifestation."))},de=>{this.logger.error(de)}),yield this.dfuDevice.detach()}})}}Gr.fixInterfaceNames=(L,b)=>Or(void 0,void 0,void 0,function*(){if(b.some(E=>E.name==null)){const E=new pr.Device(L,b[0]);yield E.device_.open(),yield E.device_.selectConfiguration(1);const M=yield E.readInterfaceNames();yield E.close();for(const W of b)if(W.name===null){const le=W.configuration.configurationValue,de=W.interface.interfaceNumber,oe=W.alternate.alternateSetting;W.name=M[le][de][oe]}}}),Gr.findDeviceDfuInterfaces=L=>{const b=[];for(const E of L.configurations)for(const M of E.interfaces)for(const W of M.alternates)if(W.interfaceClass===254&&W.interfaceSubclass===1&&(W.interfaceProtocol===1||W.interfaceProtocol===2)){const le={configuration:E,interface:M,alternate:W,name:W.interfaceName};b.push(le)}return b};const vi={avr:class{constructor(L){const{options:b,fqbn:E,vid:M,pid:W,dialogCustomizations:le,postMessage:de}=L;this.fqbn=E,this.vid=M,this.pid=W,this.dialogCustomizations=le,this.logger=(b==null?void 0:b.logger)||new i,this.options=L.options,this.postMessage=de,this.callback=this.options.callback||A,window.match||(window.match="")}flash({filename:L,compiledSketch:b}){return m(this,void 0,void 0,function*(){this.logger.info(`compiling file '${L}'`);let E=yield R({vid:this.vid,pid:this.pid});if(!E){const M=yield N(this.dialogCustomizations?this.dialogCustomizations[0]:void 0);this.vid=M.getInfo().usbVendorId||this.vid,this.pid=M.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid})}if(!E)throw new Error("Cannot find the serial port.");return new Ve({board:this.options.avr_name,serialPort:new Te(E),debug:!0,megaDebug:!0}).flash(new TextDecoder().decode(P(b)),this.callback)})}},"sam-ba":class{constructor(L){const{options:b,fqbn:E,dialogCustomizations:M,postMessage:W}=L;this.flasherOptions=b,this.logger=(b==null?void 0:b.logger)||new i,this.fqbn=E,this.vid=L.vid,this.pid=L.pid,this.postMessage=W,this.dialogCustomizations=M}flash({filename:L,compiledSketch:b}){return Xs(this,void 0,void 0,function*(){this.logger.info(`compiling file '${L}'`);let E=yield R({vid:this.vid,pid:this.pid});if(E){yield new p({logger:this.logger,serialPort:E}).call();const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid}),E)return new co({logger:this.logger,serialPort:E}).flash(P(b),!1);throw new Error("Cannot find the serial port.")}const M=yield N(this.getCustomDialog(0));if(this.vid=M.getInfo().usbVendorId||this.vid,this.pid=M.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid}),E){yield new p({logger:this.logger,serialPort:E}).call();const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid}),E)return new co({logger:this.logger,serialPort:E}).flash(P(b),!1);throw new Error("Cannot find the serial port.")}throw new Error("Some unexpeted error occurred.")})}getCustomDialog(L){if(this.dialogCustomizations&&L<this.dialogCustomizations.length)return this.dialogCustomizations[L]}},"sam-ba-renesas":class{constructor(L){const{options:b,fqbn:E,dialogCustomizations:M,postMessage:W}=L;this.flasherOptions=b,this.logger=(b==null?void 0:b.logger)||new i,this.fqbn=E,this.pid=L.pid,this.vid=L.vid,this.postMessage=W,this.dialogCustomizations=M}flash({filename:L,compiledSketch:b}){return na(this,void 0,void 0,function*(){this.logger.info(`compiling file '${L}'`);let E=yield R({vid:this.vid,pid:this.pid});if(E){const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid}),E)return yield new p({logger:this.logger,serialPort:E}).call(),new Mt({logger:this.logger,serialPort:E,options:this.flasherOptions}).flash(P(b));throw new Error("Cannot find the serial port.")}const M=yield N(this.getCustomDialog(1));if(this.vid=M.getInfo().usbVendorId||this.vid,this.pid=M.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid}),E){const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid}),E)return yield new p({logger:this.logger,serialPort:E}).call(),new Mt({logger:this.logger,serialPort:E,options:this.flasherOptions}).flash(P(b));throw new Error("Cannot find the serial port.")}throw new Error(`An unexpected error occurred flashing ${this.fqbn}`)})}getCustomDialog(L){if(this.dialogCustomizations&&L<this.dialogCustomizations.length)return this.dialogCustomizations[L]}},rp:class{constructor(L){const{options:b,fqbn:E,dialogCustomizations:M,postMessage:W}=L;this.fqbn=E,this.vid=L.vid,this.pid=L.pid,this.dialogCustomizations=M,this.logger=(b==null?void 0:b.logger)||new i,this.postMessage=W}flash({filename:L,compiledSketch:b}){return B(this,void 0,void 0,function*(){let E=yield R({vid:this.vid,pid:this.pid});if(!E){const M=yield this.connectToSerialDevice(this.getCustomDialog(0));this.vid=M.getInfo().usbVendorId||this.vid,this.pid=M.getInfo().usbProductId||this.pid,E=yield R({vid:this.vid,pid:this.pid})}if(!E)throw new Error("Cannot find the serial port.");yield new p({logger:this.logger,serialPort:E}).call(),yield this.saveToFile({compiledSketch:b,filename:L||"sketch.uf2",dialogCustomization:this.getCustomDialog(2)})})}saveToFile({filename:L,compiledSketch:b,dialogCustomization:E}){return B(this,void 0,void 0,function*(){const M=a.From(E);let W=L;if(W.endsWith(".elf")&&(W=`${W.substring(0,W.length-4)}.uf2`),!(yield M.confirm()))throw new Error("User aborted");{const le={suggestedName:W,types:[{description:"UF2 files (*.uf2)",accept:{"application/octet-stream":[".uf2"]}}]},de=Buffer.from(b,"base64");yield window.showSaveFilePicker(le).then(oe=>{this.fileHandle=oe,oe.createWritable().then(fe=>(fe.write(de),fe)).then(fe=>{fe.close(),this.postMessage&&this.postMessage({uploadStatus:"success",message:"Flash completed."})}).catch(fe=>console.error(fe))})}})}connectToSerialDevice(L){return B(this,void 0,void 0,function*(){if(yield a.From(L).confirm())return yield navigator.serial.requestPort();throw new Error("Permission denied")})}getCustomDialog(L){if(this.dialogCustomizations&&L<this.dialogCustomizations.length)return this.dialogCustomizations[L]}},dfu:Gr};class Bn{constructor(){this.create=({fqbn:b,vid:E,pid:M,dialogCustomizations:W,postMessage:le,options:de,logger:oe})=>{const fe=S(b),ie=fe.flasher;if(!vi[ie])throw new Error(`Flasher for ${b} not found`);return new vi[ie]({fqbn:b,vid:E,pid:M,dialogCustomizations:W,postMessage:le,options:Object.assign(Object.assign({},de),{logger:oe,avr_name:fe.avr_name})})}}}var ia=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};class oa{constructor({logger:b,filters:E,fqbn:M,vid:W,pid:le,dialogCustomizations:de,postMessage:oe}){this.fqbn=M,this.vid=W,this.pid=le,this.dialogCustomizations=de,this.logger=b,this.filters=E,this.postMessage=oe,this.flasherFactory=new Bn}flash({filename:b,compiledSketch:E}){return ia(this,void 0,void 0,function*(){yield this.flasherFactory.create({fqbn:this.fqbn,vid:this.vid,pid:this.pid,dialogCustomizations:this.dialogCustomizations,postMessage:this.postMessage,logger:this.logger||new i,options:{callback:W=>{this.logger.info(W)}}}).flash({filename:b,compiledSketch:E})})}}const Qr="uploader-inbound-channel",mo="uploader-outbound-channel";function go(L,b){return!(!L||!b)&&L.some(E=>b.includes(E))}const sa=class{constructor(L=[]){console.debug("Initializing event channel"),this.whiteListedOrigins=L,this.createInboundChannel(),this.createOutboundChannel()}createInboundChannel(){console.debug("creating inbound channel"),this.inboundChannelBroadcaster=new BroadcastChannel(Qr),this.inboundChannelReceiver=new BroadcastChannel(Qr),this.inboundChannelReceiver.onmessage=L=>{const b=L.origin.toLowerCase();go(this.whiteListedOrigins,b)&&this._onMessage(L)},this.inboundChannelBroadcaster.onmessageerror=L=>this._onDisconnect(L),this.inboundChannelReceiver.onmessageerror=L=>this._onDisconnect(L)}createOutboundChannel(){console.debug("creating outbound channel"),this.port=new BroadcastChannel(mo),this.outboundChannelReceiver=new BroadcastChannel(mo),this.port.onmessageerror=L=>this._onDisconnect(L),this.outboundChannelReceiver.onmessageerror=L=>this._onDisconnect(L)}_onDisconnect(L){console.error(L),this.disconnectCallback&&this.disconnectCallback(L),this.inboundChannelBroadcaster.close(),this.inboundChannelReceiver.close(),this.port.close(),this.outboundChannelReceiver.close()}onDisconnect(L){this.disconnectCallback=L}postMessage(L){this.inboundChannelBroadcaster.postMessage(L)}onMessage(L){this.outboundChannelReceiver.onmessage=b=>{const E=b.origin.toLowerCase();go(this.whiteListedOrigins,E)&&L(b.data)}}};function yn(L){const b=L.split("/"),E=parseInt(b[0],16),M=parseInt(b[1],16);if(Number.isNaN(E)||Number.isNaN(M))throw new Error(`Port name [${L}] has an invalid format`);return{vid:E,pid:M}}const yi=function(L){var b,E;const{extrafiles:M}=L;return((E=(b=M==null?void 0:M[0])===null||b===void 0?void 0:b.filename)===null||E===void 0?void 0:E.indexOf(".uf2"))>0?M[0].hex:L.data};var ar=function(L,b,E,M){return new(E||(E=Promise))(function(W,le){function de(ie){try{fe(M.next(ie))}catch(ae){le(ae)}}function oe(ie){try{fe(M.throw(ie))}catch(ae){le(ae)}}function fe(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Le){Le(ae)})).then(de,oe)}fe((M=M.apply(L,[])).next())})};const aa=["create.arduino.cc"];class Fn extends sa{constructor({logger:b,filters:E,whiteListedOrigins:M=aa}){super(M),this.logger=b||new i,this.filters=E,this.serialRxBuffer=Buffer.alloc(0),this.openPorts={},this.sendInitialData()}sendInitialData(){setTimeout(()=>{this.sendVersion(),this.sendSupportedBoards()},500)}_onMessage(b){const{command:E,data:M}=b.data;E==="listPorts"?this.listPorts():E==="upload"?this.upload(M):E==="openPort"?this.openPort(M):E==="closePort"?this.closePort(M):E==="writePort"?this.writePort(M):E==="connectToSerial"&&this.connectToSerialDevice({from:M.from,dialogCustomization:M.dialogCustomization})}writePort(b){var E;(E=this.serialReader)===null||E===void 0||E.writeText(b.data)}listPorts(){this.listBoards().then(b=>{this.port.postMessage({ports:b})})}sendVersion(){this.port.postMessage({version:1})}sendSupportedBoards(){this.port.postMessage({supportedBoards:g})}static isSerialSupported(){return"serial"in navigator}openPort({name:b,baudrate:E}){return ar(this,void 0,void 0,function*(){const{vid:M,pid:W}=yn(b);try{const le=yield R({vid:M,pid:W});le&&(this.serialReader=new j(le,{baudRate:E}),yield this.serialReader.open(),this.serialRxBuffer=Buffer.alloc(0),this.serialReader.on("data",de=>{this.onSerialData(de)}),this.port.postMessage({portOpenStatus:"success"}),this.markPortAsOpen(le))}catch(le){console.error(le),this.port.postMessage({portOpenStatus:"error",message:le.message})}})}markPortAsOpen(b){const{usbVendorId:E,usbProductId:M}=b.getInfo();this.openPorts[l({vid:E,pid:M})]=!0}markPortAsClosed(b){const{usbVendorId:E,usbProductId:M}=b.getInfo();this.openPorts[l({vid:E,pid:M})]=null}isPortOpen(b){const{usbVendorId:E,usbProductId:M}=b.getInfo();return!!this.openPorts[l({vid:E,pid:M})]}onSerialData(b){if(!b)return;this.serialRxBuffer=Buffer.concat([this.serialRxBuffer,b]);let E=0;for(let M=0;M<this.serialRxBuffer.length;M+=1){const W=this.serialRxBuffer[M];let le=1;if(W>>3==30?le=4:W>>4==14?le=3:W>>5==6&&(le=2),M+le>this.serialRxBuffer.length)break;M+=le-1,E+=le}E>0&&(this.port.postMessage({serialData:this.serialRxBuffer.slice(0,E).toString("utf8")}),this.serialRxBuffer=this.serialRxBuffer.slice(E))}closeAllPorts(){return ar(this,void 0,void 0,function*(){(yield this.listBoards()).forEach(b=>this.closePort({name:b.name}))})}closePort({name:b}){return ar(this,void 0,void 0,function*(){const{vid:E,pid:M}=yn(b);try{const W=yield R({vid:E,pid:M});W&&this.serialReader&&(yield this.serialReader.close(),this.markPortAsClosed(W),this.port.postMessage({portCloseStatus:"success"}))}catch(W){console.error(W),this.port.postMessage({portCloseStatus:"error",message:W.message})}})}listBoards(){return ar(this,void 0,void 0,function*(){return Fn.isSerialSupported()?(yield navigator.serial.getPorts()).map(b=>{const{usbVendorId:E,usbProductId:M}=b.getInfo();return function({vid:W,pid:le,isOpen:de}){const oe=Object.keys(g).find(fe=>g[fe].ids.find(ie=>ie.vid===W&&ie.pid===le));return{name:l({vid:W,pid:le}),vendorId:y(W),productId:y(le),fqbn:oe??I,isOpen:de||!1}}({vid:E,pid:M,isOpen:this.isPortOpen(b)})}):[]})}upload(b){return ar(this,void 0,void 0,function*(){if(Fn.isSerialSupported())try{yield new oa({fqbn:b.board,vid:b.vid,pid:b.pid,dialogCustomizations:b.dialogCustomizations,logger:this.logger,filters:this.filters,postMessage:this.port.postMessage}).flash({filename:b.filename,compiledSketch:yi(b)}),this.port.postMessage({uploadStatus:"success",message:"Upload completed"})}catch(E){console.error(E),this.port.postMessage({uploadStatus:"error",message:E.message})}finally{this.listPorts()}})}connectToSerialDevice({from:b,dialogCustomization:E}){return ar(this,void 0,void 0,function*(){b==="serial-monitor"&&(yield N(E))})}}})(),u})())})(eh);var Nc=eh.exports,Za={exports:{}};const Yg="2.0.0",Xg=256,Qg=Number.MAX_SAFE_INTEGER||9007199254740991,Jg=16,e0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Ss={MAX_LENGTH:Xg,MAX_SAFE_COMPONENT_LENGTH:Jg,MAX_SAFE_INTEGER:Qg,RELEASE_TYPES:e0,SEMVER_SPEC_VERSION:Yg,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},_a={};const t0=typeof process=="object"&&_a&&_a.NODE_DEBUG&&/\bsemver\b/i.test(_a.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Cs=t0;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=Ss,n=Cs;t=e.exports={};const o=t.re=[],s=t.safeRe=[],u=t.src=[],i=t.t={};let g=0;const f=(a,y,l)=>{const v=y.split("\\s*").join("\\s{0,1}").split("\\s+").join("\\s"),I=g++;n(a,I,y),i[a]=I,u[I]=y,o[I]=new RegExp(y,l?"g":void 0),s[I]=new RegExp(v,l?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${u[i.NUMERICIDENTIFIER]})\\.(${u[i.NUMERICIDENTIFIER]})\\.(${u[i.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${u[i.NUMERICIDENTIFIERLOOSE]})\\.(${u[i.NUMERICIDENTIFIERLOOSE]})\\.(${u[i.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${u[i.NUMERICIDENTIFIER]}|${u[i.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${u[i.NUMERICIDENTIFIERLOOSE]}|${u[i.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${u[i.PRERELEASEIDENTIFIER]}(?:\\.${u[i.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${u[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[i.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${u[i.BUILDIDENTIFIER]}(?:\\.${u[i.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${u[i.MAINVERSION]}${u[i.PRERELEASE]}?${u[i.BUILD]}?`),f("FULL",`^${u[i.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${u[i.MAINVERSIONLOOSE]}${u[i.PRERELEASELOOSE]}?${u[i.BUILD]}?`),f("LOOSE",`^${u[i.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${u[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${u[i.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${u[i.XRANGEIDENTIFIER]})(?:\\.(${u[i.XRANGEIDENTIFIER]})(?:\\.(${u[i.XRANGEIDENTIFIER]})(?:${u[i.PRERELEASE]})?${u[i.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${u[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[i.XRANGEIDENTIFIERLOOSE]})(?:${u[i.PRERELEASELOOSE]})?${u[i.BUILD]}?)?)?`),f("XRANGE",`^${u[i.GTLT]}\\s*${u[i.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${u[i.GTLT]}\\s*${u[i.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",u[i.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${u[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${u[i.LONETILDE]}${u[i.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${u[i.LONETILDE]}${u[i.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${u[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${u[i.LONECARET]}${u[i.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${u[i.LONECARET]}${u[i.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${u[i.GTLT]}\\s*(${u[i.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${u[i.GTLT]}\\s*(${u[i.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${u[i.GTLT]}\\s*(${u[i.LOOSEPLAIN]}|${u[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${u[i.XRANGEPLAIN]})\\s+-\\s+(${u[i.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${u[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[i.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Za,Za.exports);var eo=Za.exports;const r0=Object.freeze({loose:!0}),n0=Object.freeze({}),i0=e=>e?typeof e!="object"?r0:e:n0;var Lc=i0;const ml=/^[0-9]+$/,th=(e,t)=>{const r=ml.test(e),n=ml.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},o0=(e,t)=>th(t,e);var rh={compareIdentifiers:th,rcompareIdentifiers:o0};const Po=Cs,{MAX_LENGTH:gl,MAX_SAFE_INTEGER:Bo}=Ss,{safeRe:vl,t:yl}=eo,s0=Lc,{compareIdentifiers:Un}=rh;let a0=class Pr{constructor(t,r){if(r=s0(r),t instanceof Pr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>gl)throw new TypeError(`version is longer than ${gl} characters`);Po("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?vl[yl.LOOSE]:vl[yl.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Bo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Bo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Bo||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const s=+o;if(s>=0&&s<Bo)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Po("SemVer.compare",this.version,this.options,t),!(t instanceof Pr)){if(typeof t=="string"&&t===this.version)return 0;t=new Pr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Pr||(t=new Pr(t,this.options)),Un(this.major,t.major)||Un(this.minor,t.minor)||Un(this.patch,t.patch)}comparePre(t){if(t instanceof Pr||(t=new Pr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(Po("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Un(n,o)}while(++r)}compareBuild(t){t instanceof Pr||(t=new Pr(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(Po("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Un(n,o)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),Un(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var rr=a0;const bl=rr,c0=(e,t,r=!1)=>{if(e instanceof bl)return e;try{return new bl(e,t)}catch(n){if(!r)return null;throw n}};var ri=c0;const u0=ri,l0=(e,t)=>{const r=u0(e,t);return r?r.version:null};var f0=l0;const h0=ri,d0=(e,t)=>{const r=h0(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var p0=d0;const wl=rr,m0=(e,t,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new wl(e instanceof wl?e.version:e,r).inc(t,n,o).version}catch{return null}};var g0=m0;const xl=ri,v0=(e,t)=>{const r=xl(e,null,!0),n=xl(t,null,!0),o=r.compare(n);if(o===0)return null;const s=o>0,u=s?r:n,i=s?n:r,g=!!u.prerelease.length;if(!!i.prerelease.length&&!g)return!i.patch&&!i.minor?"major":u.patch?"patch":u.minor?"minor":"major";const a=g?"pre":"";return r.major!==n.major?a+"major":r.minor!==n.minor?a+"minor":r.patch!==n.patch?a+"patch":"prerelease"};var y0=v0;const b0=rr,w0=(e,t)=>new b0(e,t).major;var x0=w0;const _0=rr,E0=(e,t)=>new _0(e,t).minor;var S0=E0;const C0=rr,k0=(e,t)=>new C0(e,t).patch;var A0=k0;const I0=ri,R0=(e,t)=>{const r=I0(e,t);return r&&r.prerelease.length?r.prerelease:null};var T0=R0;const _l=rr,O0=(e,t,r)=>new _l(e,r).compare(new _l(t,r));var kr=O0;const N0=kr,L0=(e,t,r)=>N0(t,e,r);var P0=L0;const B0=kr,F0=(e,t)=>B0(e,t,!0);var D0=F0;const El=rr,j0=(e,t,r)=>{const n=new El(e,r),o=new El(t,r);return n.compare(o)||n.compareBuild(o)};var Pc=j0;const M0=Pc,U0=(e,t)=>e.sort((r,n)=>M0(r,n,t));var $0=U0;const z0=Pc,G0=(e,t)=>e.sort((r,n)=>z0(n,r,t));var V0=G0;const q0=kr,H0=(e,t,r)=>q0(e,t,r)>0;var ks=H0;const W0=kr,K0=(e,t,r)=>W0(e,t,r)<0;var Bc=K0;const Z0=kr,Y0=(e,t,r)=>Z0(e,t,r)===0;var nh=Y0;const X0=kr,Q0=(e,t,r)=>X0(e,t,r)!==0;var ih=Q0;const J0=kr,ev=(e,t,r)=>J0(e,t,r)>=0;var Fc=ev;const tv=kr,rv=(e,t,r)=>tv(e,t,r)<=0;var Dc=rv;const nv=nh,iv=ih,ov=ks,sv=Fc,av=Bc,cv=Dc,uv=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return nv(e,r,n);case"!=":return iv(e,r,n);case">":return ov(e,r,n);case">=":return sv(e,r,n);case"<":return av(e,r,n);case"<=":return cv(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var oh=uv;const lv=rr,fv=ri,{safeRe:Fo,t:Do}=eo,hv=(e,t)=>{if(e instanceof lv)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Fo[Do.COERCE]);else{let n;for(;(n=Fo[Do.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Fo[Do.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Fo[Do.COERCERTL].lastIndex=-1}return r===null?null:fv(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var dv=hv,Ea,Sl;function pv(){return Sl||(Sl=1,Ea=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ea}var mv=gt;gt.Node=An;gt.create=gt;function gt(e){var t=this;if(t instanceof gt||(t=new gt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}gt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};gt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};gt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};gt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)vv(this,arguments[e]);return this.length};gt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)yv(this,arguments[e]);return this.length};gt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};gt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};gt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};gt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};gt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};gt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};gt.prototype.map=function(e,t){t=t||this;for(var r=new gt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};gt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new gt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};gt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};gt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};gt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};gt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};gt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new gt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};gt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new gt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};gt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var s=[],n=0;o&&n<t;n++)s.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=gv(this,o,r[n]);return s};gt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function gv(e,t,r){var n=t===e.head?new An(r,null,t,e):new An(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function vv(e,t){e.tail=new An(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function yv(e,t){e.head=new An(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function An(e,t,r,n){if(!(this instanceof An))return new An(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{pv()(gt)}catch{}const bv=mv,En=Symbol("max"),qr=Symbol("length"),$n=Symbol("lengthCalculator"),Bi=Symbol("allowStale"),Cn=Symbol("maxAge"),Vr=Symbol("dispose"),Cl=Symbol("noDisposeOnSet"),qt=Symbol("lruList"),wr=Symbol("cache"),sh=Symbol("updateAgeOnGet"),Sa=()=>1;class wv{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[En]=t.max||1/0;const r=t.length||Sa;if(this[$n]=typeof r!="function"?Sa:r,this[Bi]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Cn]=t.maxAge||0,this[Vr]=t.dispose,this[Cl]=t.noDisposeOnSet||!1,this[sh]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[En]=t||1/0,Ii(this)}get max(){return this[En]}set allowStale(t){this[Bi]=!!t}get allowStale(){return this[Bi]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Cn]=t,Ii(this)}get maxAge(){return this[Cn]}set lengthCalculator(t){typeof t!="function"&&(t=Sa),t!==this[$n]&&(this[$n]=t,this[qr]=0,this[qt].forEach(r=>{r.length=this[$n](r.value,r.key),this[qr]+=r.length})),Ii(this)}get lengthCalculator(){return this[$n]}get length(){return this[qr]}get itemCount(){return this[qt].length}rforEach(t,r){r=r||this;for(let n=this[qt].tail;n!==null;){const o=n.prev;kl(this,t,n,r),n=o}}forEach(t,r){r=r||this;for(let n=this[qt].head;n!==null;){const o=n.next;kl(this,t,n,r),n=o}}keys(){return this[qt].toArray().map(t=>t.key)}values(){return this[qt].toArray().map(t=>t.value)}reset(){this[Vr]&&this[qt]&&this[qt].length&&this[qt].forEach(t=>this[Vr](t.key,t.value)),this[wr]=new Map,this[qt]=new bv,this[qr]=0}dump(){return this[qt].map(t=>ns(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[qt]}set(t,r,n){if(n=n||this[Cn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const o=n?Date.now():0,s=this[$n](r,t);if(this[wr].has(t)){if(s>this[En])return Wn(this,this[wr].get(t)),!1;const g=this[wr].get(t).value;return this[Vr]&&(this[Cl]||this[Vr](t,g.value)),g.now=o,g.maxAge=n,g.value=r,this[qr]+=s-g.length,g.length=s,this.get(t),Ii(this),!0}const u=new xv(t,r,s,o,n);return u.length>this[En]?(this[Vr]&&this[Vr](t,r),!1):(this[qr]+=u.length,this[qt].unshift(u),this[wr].set(t,this[qt].head),Ii(this),!0)}has(t){if(!this[wr].has(t))return!1;const r=this[wr].get(t).value;return!ns(this,r)}get(t){return Ca(this,t,!0)}peek(t){return Ca(this,t,!1)}pop(){const t=this[qt].tail;return t?(Wn(this,t),t.value):null}del(t){Wn(this,this[wr].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const o=t[n],s=o.e||0;if(s===0)this.set(o.k,o.v);else{const u=s-r;u>0&&this.set(o.k,o.v,u)}}}prune(){this[wr].forEach((t,r)=>Ca(this,r,!1))}}const Ca=(e,t,r)=>{const n=e[wr].get(t);if(n){const o=n.value;if(ns(e,o)){if(Wn(e,n),!e[Bi])return}else r&&(e[sh]&&(n.value.now=Date.now()),e[qt].unshiftNode(n));return o.value}},ns=(e,t)=>{if(!t||!t.maxAge&&!e[Cn])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Cn]&&r>e[Cn]},Ii=e=>{if(e[qr]>e[En])for(let t=e[qt].tail;e[qr]>e[En]&&t!==null;){const r=t.prev;Wn(e,t),t=r}},Wn=(e,t)=>{if(t){const r=t.value;e[Vr]&&e[Vr](r.key,r.value),e[qr]-=r.length,e[wr].delete(r.key),e[qt].removeNode(t)}};class xv{constructor(t,r,n,o,s){this.key=t,this.value=r,this.length=n,this.now=o,this.maxAge=s||0}}const kl=(e,t,r,n)=>{let o=r.value;ns(e,o)&&(Wn(e,r),e[Bi]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};var _v=wv,ka,Al;function Ar(){if(Al)return ka;Al=1;class e{constructor(_,k){if(k=n(k),_ instanceof e)return _.loose===!!k.loose&&_.includePrerelease===!!k.includePrerelease?_:new e(_.raw,k);if(_ instanceof o)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map($=>this.parseRange($)).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(F=>!I(F[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&d(F[0])){this.set=[F];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){const $=((this.options.includePrerelease&&l)|(this.options.loose&&v))+":"+_,F=r.get($);if(F)return F;const V=this.options.loose,j=V?i[g.HYPHENRANGELOOSE]:i[g.HYPHENRANGE];_=_.replace(j,he(this.options.includePrerelease)),s("hyphen replace",_),_=_.replace(i[g.COMPARATORTRIM],f),s("comparator trim",_),_=_.replace(i[g.TILDETRIM],a),_=_.replace(i[g.CARETTRIM],y);let Z=_.split(" ").map(Ee=>w(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>ue(Ee,this.options));V&&(Z=Z.filter(Ee=>(s("loose invalid filter",Ee,this.options),!!Ee.match(i[g.COMPARATORLOOSE])))),s("range list",Z);const G=new Map,Y=Z.map(Ee=>new o(Ee,this.options));for(const Ee of Y){if(I(Ee))return[Ee];G.set(Ee.value,Ee)}G.size>1&&G.has("")&&G.delete("");const ye=[...G.values()];return r.set($,ye),ye}intersects(_,k){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some($=>R($,k)&&_.set.some(F=>R(F,k)&&$.every(V=>F.every(j=>V.intersects(j,k)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new u(_,this.options)}catch{return!1}for(let k=0;k<this.set.length;k++)if(q(this.set[k],_,this.options))return!0;return!1}}ka=e;const t=_v,r=new t({max:1e3}),n=Lc,o=As(),s=Cs,u=rr,{safeRe:i,t:g,comparatorTrimReplace:f,tildeTrimReplace:a,caretTrimReplace:y}=eo,{FLAG_INCLUDE_PRERELEASE:l,FLAG_LOOSE:v}=Ss,I=Q=>Q.value==="<0.0.0-0",d=Q=>Q.value==="",R=(Q,_)=>{let k=!0;const $=Q.slice();let F=$.pop();for(;k&&$.length;)k=$.every(V=>F.intersects(V,_)),F=$.pop();return k},w=(Q,_)=>(s("comp",Q,_),Q=P(Q,_),s("caret",Q),Q=O(Q,_),s("tildes",Q),Q=D(Q,_),s("xrange",Q),Q=U(Q,_),s("stars",Q),Q),S=Q=>!Q||Q.toLowerCase()==="x"||Q==="*",O=(Q,_)=>Q.trim().split(/\s+/).map(k=>N(k,_)).join(" "),N=(Q,_)=>{const k=_.loose?i[g.TILDELOOSE]:i[g.TILDE];return Q.replace(k,($,F,V,j,Z)=>{s("tilde",Q,$,F,V,j,Z);let G;return S(F)?G="":S(V)?G=`>=${F}.0.0 <${+F+1}.0.0-0`:S(j)?G=`>=${F}.${V}.0 <${F}.${+V+1}.0-0`:Z?(s("replaceTilde pr",Z),G=`>=${F}.${V}.${j}-${Z} <${F}.${+V+1}.0-0`):G=`>=${F}.${V}.${j} <${F}.${+V+1}.0-0`,s("tilde return",G),G})},P=(Q,_)=>Q.trim().split(/\s+/).map(k=>H(k,_)).join(" "),H=(Q,_)=>{s("caret",Q,_);const k=_.loose?i[g.CARETLOOSE]:i[g.CARET],$=_.includePrerelease?"-0":"";return Q.replace(k,(F,V,j,Z,G)=>{s("caret",Q,F,V,j,Z,G);let Y;return S(V)?Y="":S(j)?Y=`>=${V}.0.0${$} <${+V+1}.0.0-0`:S(Z)?V==="0"?Y=`>=${V}.${j}.0${$} <${V}.${+j+1}.0-0`:Y=`>=${V}.${j}.0${$} <${+V+1}.0.0-0`:G?(s("replaceCaret pr",G),V==="0"?j==="0"?Y=`>=${V}.${j}.${Z}-${G} <${V}.${j}.${+Z+1}-0`:Y=`>=${V}.${j}.${Z}-${G} <${V}.${+j+1}.0-0`:Y=`>=${V}.${j}.${Z}-${G} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?j==="0"?Y=`>=${V}.${j}.${Z}${$} <${V}.${j}.${+Z+1}-0`:Y=`>=${V}.${j}.${Z}${$} <${V}.${+j+1}.0-0`:Y=`>=${V}.${j}.${Z} <${+V+1}.0.0-0`),s("caret return",Y),Y})},D=(Q,_)=>(s("replaceXRanges",Q,_),Q.split(/\s+/).map(k=>K(k,_)).join(" ")),K=(Q,_)=>{Q=Q.trim();const k=_.loose?i[g.XRANGELOOSE]:i[g.XRANGE];return Q.replace(k,($,F,V,j,Z,G)=>{s("xRange",Q,$,F,V,j,Z,G);const Y=S(V),ye=Y||S(j),Ee=ye||S(Z),Te=Ee;return F==="="&&Te&&(F=""),G=_.includePrerelease?"-0":"",Y?F===">"||F==="<"?$="<0.0.0-0":$="*":F&&Te?(ye&&(j=0),Z=0,F===">"?(F=">=",ye?(V=+V+1,j=0,Z=0):(j=+j+1,Z=0)):F==="<="&&(F="<",ye?V=+V+1:j=+j+1),F==="<"&&(G="-0"),$=`${F+V}.${j}.${Z}${G}`):ye?$=`>=${V}.0.0${G} <${+V+1}.0.0-0`:Ee&&($=`>=${V}.${j}.0${G} <${V}.${+j+1}.0-0`),s("xRange return",$),$})},U=(Q,_)=>(s("replaceStars",Q,_),Q.trim().replace(i[g.STAR],"")),ue=(Q,_)=>(s("replaceGTE0",Q,_),Q.trim().replace(i[_.includePrerelease?g.GTE0PRE:g.GTE0],"")),he=Q=>(_,k,$,F,V,j,Z,G,Y,ye,Ee,Te,ct)=>(S($)?k="":S(F)?k=`>=${$}.0.0${Q?"-0":""}`:S(V)?k=`>=${$}.${F}.0${Q?"-0":""}`:j?k=`>=${k}`:k=`>=${k}${Q?"-0":""}`,S(Y)?G="":S(ye)?G=`<${+Y+1}.0.0-0`:S(Ee)?G=`<${Y}.${+ye+1}.0-0`:Te?G=`<=${Y}.${ye}.${Ee}-${Te}`:Q?G=`<${Y}.${ye}.${+Ee+1}-0`:G=`<=${G}`,`${k} ${G}`.trim()),q=(Q,_,k)=>{for(let $=0;$<Q.length;$++)if(!Q[$].test(_))return!1;if(_.prerelease.length&&!k.includePrerelease){for(let $=0;$<Q.length;$++)if(s(Q[$].semver),Q[$].semver!==o.ANY&&Q[$].semver.prerelease.length>0){const F=Q[$].semver;if(F.major===_.major&&F.minor===_.minor&&F.patch===_.patch)return!0}return!1}return!0};return ka}var Aa,Il;function As(){if(Il)return Aa;Il=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(a,y){if(y=r(y),a instanceof t){if(a.loose===!!y.loose)return a;a=a.value}a=a.trim().split(/\s+/).join(" "),u("comparator",a,y),this.options=y,this.loose=!!y.loose,this.parse(a),this.semver===e?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(a){const y=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],l=a.match(y);if(!l)throw new TypeError(`Invalid comparator: ${a}`);this.operator=l[1]!==void 0?l[1]:"",this.operator==="="&&(this.operator=""),l[2]?this.semver=new i(l[2],this.options.loose):this.semver=e}toString(){return this.value}test(a){if(u("Comparator.test",a,this.options.loose),this.semver===e||a===e)return!0;if(typeof a=="string")try{a=new i(a,this.options)}catch{return!1}return s(a,this.operator,this.semver,this.options)}intersects(a,y){if(!(a instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new g(a.value,y).test(this.value):a.operator===""?a.value===""?!0:new g(this.value,y).test(a.semver):(y=r(y),y.includePrerelease&&(this.value==="<0.0.0-0"||a.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||s(this.semver,"<",a.semver,y)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||s(this.semver,">",a.semver,y)&&this.operator.startsWith("<")&&a.operator.startsWith(">")))}}Aa=t;const r=Lc,{safeRe:n,t:o}=eo,s=oh,u=Cs,i=rr,g=Ar();return Aa}const Ev=Ar(),Sv=(e,t,r)=>{try{t=new Ev(t,r)}catch{return!1}return t.test(e)};var Is=Sv;const Cv=Ar(),kv=(e,t)=>new Cv(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Av=kv;const Iv=rr,Rv=Ar(),Tv=(e,t,r)=>{let n=null,o=null,s=null;try{s=new Rv(t,r)}catch{return null}return e.forEach(u=>{s.test(u)&&(!n||o.compare(u)===-1)&&(n=u,o=new Iv(n,r))}),n};var Ov=Tv;const Nv=rr,Lv=Ar(),Pv=(e,t,r)=>{let n=null,o=null,s=null;try{s=new Lv(t,r)}catch{return null}return e.forEach(u=>{s.test(u)&&(!n||o.compare(u)===1)&&(n=u,o=new Nv(n,r))}),n};var Bv=Pv;const Ia=rr,Fv=Ar(),Rl=ks,Dv=(e,t)=>{e=new Fv(e,t);let r=new Ia("0.0.0");if(e.test(r)||(r=new Ia("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const o=e.set[n];let s=null;o.forEach(u=>{const i=new Ia(u.semver.version);switch(u.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!s||Rl(i,s))&&(s=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),s&&(!r||Rl(r,s))&&(r=s)}return r&&e.test(r)?r:null};var jv=Dv;const Mv=Ar(),Uv=(e,t)=>{try{return new Mv(e,t).range||"*"}catch{return null}};var $v=Uv;const zv=rr,ah=As(),{ANY:Gv}=ah,Vv=Ar(),qv=Is,Tl=ks,Ol=Bc,Hv=Dc,Wv=Fc,Kv=(e,t,r,n)=>{e=new zv(e,n),t=new Vv(t,n);let o,s,u,i,g;switch(r){case">":o=Tl,s=Hv,u=Ol,i=">",g=">=";break;case"<":o=Ol,s=Wv,u=Tl,i="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qv(e,t,n))return!1;for(let f=0;f<t.set.length;++f){const a=t.set[f];let y=null,l=null;if(a.forEach(v=>{v.semver===Gv&&(v=new ah(">=0.0.0")),y=y||v,l=l||v,o(v.semver,y.semver,n)?y=v:u(v.semver,l.semver,n)&&(l=v)}),y.operator===i||y.operator===g||(!l.operator||l.operator===i)&&s(e,l.semver))return!1;if(l.operator===g&&u(e,l.semver))return!1}return!0};var jc=Kv;const Zv=jc,Yv=(e,t,r)=>Zv(e,t,">",r);var Xv=Yv;const Qv=jc,Jv=(e,t,r)=>Qv(e,t,"<",r);var ey=Jv;const Nl=Ar(),ty=(e,t,r)=>(e=new Nl(e,r),t=new Nl(t,r),e.intersects(t,r));var ry=ty;const ny=Is,iy=kr;var oy=(e,t,r)=>{const n=[];let o=null,s=null;const u=e.sort((a,y)=>iy(a,y,r));for(const a of u)ny(a,t,r)?(s=a,o||(o=a)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);const i=[];for(const[a,y]of n)a===y?i.push(a):!y&&a===u[0]?i.push("*"):y?a===u[0]?i.push(`<=${y}`):i.push(`${a} - ${y}`):i.push(`>=${a}`);const g=i.join(" || "),f=typeof t.raw=="string"?t.raw:String(t);return g.length<f.length?g:t};const Ll=Ar(),Mc=As(),{ANY:Ra}=Mc,Ri=Is,Uc=kr,sy=(e,t,r={})=>{if(e===t)return!0;e=new Ll(e,r),t=new Ll(t,r);let n=!1;e:for(const o of e.set){for(const s of t.set){const u=cy(o,s,r);if(n=n||u!==null,u)continue e}if(n)return!1}return!0},ay=[new Mc(">=0.0.0-0")],Pl=[new Mc(">=0.0.0")],cy=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ra){if(t.length===1&&t[0].semver===Ra)return!0;r.includePrerelease?e=ay:e=Pl}if(t.length===1&&t[0].semver===Ra){if(r.includePrerelease)return!0;t=Pl}const n=new Set;let o,s;for(const v of e)v.operator===">"||v.operator===">="?o=Bl(o,v,r):v.operator==="<"||v.operator==="<="?s=Fl(s,v,r):n.add(v.semver);if(n.size>1)return null;let u;if(o&&s){if(u=Uc(o.semver,s.semver,r),u>0)return null;if(u===0&&(o.operator!==">="||s.operator!=="<="))return null}for(const v of n){if(o&&!Ri(v,String(o),r)||s&&!Ri(v,String(s),r))return null;for(const I of t)if(!Ri(v,String(I),r))return!1;return!0}let i,g,f,a,y=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,l=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;y&&y.prerelease.length===1&&s.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(const v of t){if(a=a||v.operator===">"||v.operator===">=",f=f||v.operator==="<"||v.operator==="<=",o){if(l&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===l.major&&v.semver.minor===l.minor&&v.semver.patch===l.patch&&(l=!1),v.operator===">"||v.operator===">="){if(i=Bl(o,v,r),i===v&&i!==o)return!1}else if(o.operator===">="&&!Ri(o.semver,String(v),r))return!1}if(s){if(y&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===y.major&&v.semver.minor===y.minor&&v.semver.patch===y.patch&&(y=!1),v.operator==="<"||v.operator==="<="){if(g=Fl(s,v,r),g===v&&g!==s)return!1}else if(s.operator==="<="&&!Ri(s.semver,String(v),r))return!1}if(!v.operator&&(s||o)&&u!==0)return!1}return!(o&&f&&!s&&u!==0||s&&a&&!o&&u!==0||l||y)},Bl=(e,t,r)=>{if(!e)return t;const n=Uc(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Fl=(e,t,r)=>{if(!e)return t;const n=Uc(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var uy=sy;const Ta=eo,Dl=Ss,ly=rr,jl=rh,fy=ri,hy=f0,dy=p0,py=g0,my=y0,gy=x0,vy=S0,yy=A0,by=T0,wy=kr,xy=P0,_y=D0,Ey=Pc,Sy=$0,Cy=V0,ky=ks,Ay=Bc,Iy=nh,Ry=ih,Ty=Fc,Oy=Dc,Ny=oh,Ly=dv,Py=As(),By=Ar(),Fy=Is,Dy=Av,jy=Ov,My=Bv,Uy=jv,$y=$v,zy=jc,Gy=Xv,Vy=ey,qy=ry,Hy=oy,Wy=uy;var Ky={parse:fy,valid:hy,clean:dy,inc:py,diff:my,major:gy,minor:vy,patch:yy,prerelease:by,compare:wy,rcompare:xy,compareLoose:_y,compareBuild:Ey,sort:Sy,rsort:Cy,gt:ky,lt:Ay,eq:Iy,neq:Ry,gte:Ty,lte:Oy,cmp:Ny,coerce:Ly,Comparator:Py,Range:By,satisfies:Fy,toComparators:Dy,maxSatisfying:jy,minSatisfying:My,minVersion:Uy,validRange:$y,outside:zy,gtr:Gy,ltr:Vy,intersects:qy,simplifyRange:Hy,subset:Wy,SemVer:ly,re:Ta.re,src:Ta.src,tokens:Ta.t,SEMVER_SPEC_VERSION:Dl.SEMVER_SPEC_VERSION,RELEASE_TYPES:Dl.RELEASE_TYPES,compareIdentifiers:jl.compareIdentifiers,rcompareIdentifiers:jl.rcompareIdentifiers};function Zy(e){try{return decodeURIComponent(escape(atob(e)))}catch{return atob(e)}}function Yy(e){return decodeURIComponent(escape(e))}function Xy(e){return btoa(unescape(encodeURIComponent(e)))}function Qy(e){return unescape(encodeURIComponent(e))}function ch(e){return!e.startsWith("text")&&!e.startsWith("application/json")}function $c(e,t){return t&&ch(t)?Yy(e):Zy(e)}function Er(e,t){return t&&ch(t)?Qy(e):Xy(e)}function Jy(e,t){return new Set(e.add(t))}function e1(e,t){return e.delete(t),new Set(e)}let Kn;function t1(){return Kn||(Kn=new Bf.UAParser),Kn.getOS().name}const zc=t1()==="Chromium OS"||at.MODE!=="production"&&new URLSearchParams(window.location.search).has("forceWebSerial");function FS(){return Kn||(Kn=new Bf.UAParser),Kn.getBrowser().name}function ni(){const e=/CrOS/.test(navigator.userAgent),t=window.matchMedia("(display-mode: standalone)").matches;return sessionStorage.getItem("arduino::chrome-app")==="true"||e&&t}const Fi=["filefullname","row","col"],r1=e=>Fi.every(t=>t in e)&&Object.keys(e).length===Fi.length,Ml=e=>!!(e.name&&e.path),uh=e=>!!(e.name&&e.ino&&Ml(e.ino)&&e.folder&&e.path&&e.types&&(!e.files||e.files&&e.files.every(Ml))),lh=36,n1=(e,t)=>{const r=t.indexOf(e)+e.length,o=t.slice(r,t.length).split("_"),s=o.slice(0,3).join("."),u=o.slice(3,o.length).join(".");return u?`${s}-${u}`:s},i1=e=>new RegExp(`.*?${am(e)}/(?<${Fi[0]}>.+?.ino):(?<${Fi[1]}>[0-9]+):(?<${Fi[2]}>[0-9]+):.*error:`,"g"),o1=(e,t)=>[...e.matchAll(i1(t))].filter(n=>{const o=n.groups;return o&&r1(o)}).map(({groups:n})=>n),s1=e=>e.toLowerCase().replace(/[\s-.]+/g,"_")+"_",DS=e=>`:${e.map(n=>{var o;return{key:n.id,value:(o=n.variants.find(s=>s.selected))==null?void 0:o.id}}).map(n=>`${n.key}=${n.value}`).join(",")}`;function fh(e){return e.length>lh}function hh(e){return e.match(/[^a-zA-Z0-9-_]{1}[^a-zA-Z0-9-_.]{0,35}/g)!==null}function jS(e){return e.replace(/[^a-zA-Z0-9-_]{1}[^a-zA-Z0-9-_.]{0,35}/g,"_")}async function MS(){const e=await yt();if(!e)return bt();try{const t=await _m(e);return(t==null?void 0:t.status)==200}catch{return!1}}function a1(e){return e&&e.status==="failed"?e.error||"Unknown error":null}function US(e,t,r,n,o){const s=/\r\n|\r|\n/;if(o&&!t)return{output:o,errors:[],failed:!0,settled:!0,warnLineStart:1,warnLineEnd:o.split(s).length,outputLineEnd:1};let u=t&&r?o1(t,r):void 0;const i=!!t&&(t.indexOf("error")!==-1||t.indexOf("#error")!==-1),g=!!e&&(e.indexOf("[error]")!==-1||e.indexOf("#error")!==-1),f=e?e.split(s).length:void 0,a=e?1:void 0,y=f,l=f&&t?f+1:t?1:void 0,v=l&&t?l+t.split(s).length:void 0,I=g,d=v!==void 0,R=[e,t].filter(Boolean).join(`

`),w=R.split(s).length;return{output:R,errors:u,failed:i||g,settled:!0,warnLineStart:I?a:l,warnLineEnd:d?v:g?y:void 0,outputLineEnd:w}}async function $S({sketch:e,ota:t=!1,verbose:r=!1,...n},o){const s=await yt();return s?wm({...n,sketch:e,ota:t,verbose:r},s,o):bt()}async function zS(e){const t=await yt();return t?hm({id:e},t):bt()}async function GS(e){const t=await yt();return t?xm({id:e},t):bt()}let vr;function c1(){vr!=null&&vr.lastAbortController&&vr.lastAbortController.abort("User interrupted compilation"),vr=void 0}async function VS(e,t,r,n,o,s,u,i){if(vr){console.error(`A compilation stream is already open for compilation id: ${vr.id}`);return}vr={id:e,lastAbortController:i};try{const g=await yt();if(!g)return vr=void 0,bt();const f=a=>{var v;const y=a.event,l=JSON.parse(a.data);switch(y){case ki.Stdout:t("out",l.timestamp,l.lines);break;case ki.Stderr:r("err",l.timestamp,l.lines);break;case ki.Status:n(l.status);break;case ki.Progress:o(l.progress);break;case ki.Result:{const I=l.diagnostics||a1(l);s(I,l.status==="failed"?l.error||"Unknown error":void 0);break}}(v=u.onmessage)==null||v.call(u,a)};i&&(i.signal.onabort=()=>{vr=void 0}),await mm({id:e},{...u,onclose:()=>{var a;vr=void 0,(a=u.onclose)==null||a.call(u)},onmessage:f},g,i);return}catch(g){throw vr=void 0,g}}async function qS(e){const t=await yt();return t?await dm({id:e},t):bt()}async function HS(e){const{boards:t,...r}=await pm(e);return{...r,boards:Mr.sortBy(t,["name"])}}async function WS(e,t){const r={...t,id:Mr.uniqueId(),isUnknownBoard:!0};if(e.vid.toLocaleLowerCase()==="0x303a"&&e.pid.toLocaleLowerCase()==="0x1001")return r;let n;try{n=t.fqbn===Nc.UNKNOWN_BOARD_FQBN?{id:Mr.uniqueId(),isUnknownBoard:!0}:await cm(e)}catch{return r}return{...t,...n}}function KS(e){return um(e)}async function ZS({fqbn:e,agentOS:t}){const r=await yt();return r?bm({fqbn:e},{action:"upload",verbose:!0,os:t},r):bt()}async function YS(e){return{...await Em(e),fromParams:JSON.stringify(e)}}async function XS(e){const t=await fm(e);let r;if(t.otherVersions){const n=s1(t.name);r=t.otherVersions.map(s=>n1(n,s)).sort((s,u)=>Ky.lt(s,u)?1:-1)}return{...t,examples:t.examples?t.examples.filter(uh):void 0,otherVersions:r}}async function QS(e){return(await lm(e)).examples.filter(uh)}async function JS(){const e=await yt();return e?gm(e):bt()}async function eC({id:e},t){const r=await yt();return r?t?vm({id:e},r):ym({id:e},r):bt()}async function tC(e,t,r,n){const{data:o,mimetype:s,href:u}=await Ff({path:e});if(typeof o>"u")return Promise.reject(new Error("No data to decode in retrieved example file"));const i=e.substring(e.lastIndexOf(".")+1),g=$c(o,s),f=n&&g.split(`
`).slice(n.start,n.end+1).join(`
`);return{name:_c(t),fullName:t,extension:i,data:o,content:g,scopedContent:f,mimetype:s,path:e,href:u||"",exampleInoPath:r}}async function rC(e,t){const{data:r,mimetype:n,href:o}=await Ff({path:e});if(typeof r>"u")return Promise.reject(new Error("No data to decode in retrieved library file"));let s;return t.toLocaleLowerCase().indexOf("license")!==-1?s="txt":s=e.substring(e.lastIndexOf(".")+1),{name:_c(t),fullName:t,extension:s,data:r,content:$c(r,n),mimetype:n,href:o||"",path:e}}var Zr={exports:{}};const u1={},l1=Object.freeze(Object.defineProperty({__proto__:null,default:u1},Symbol.toStringTag,{value:"Module"})),to=up(l1),f1="16.4.7",h1={version:f1};var Di={};const Ya=to,Gc=to,d1=to,p1=to,m1=h1,Vc=m1.version,g1=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function v1(e){const t={};let r=e.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=g1.exec(r))!=null;){const o=n[1];let s=n[2]||"";s=s.trim();const u=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),u==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),t[o]=s}return t}function y1(e){const t=ph(e),r=Gt.configDotenv({path:t});if(!r.parsed){const u=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw u.code="MISSING_DATA",u}const n=dh(e).split(","),o=n.length;let s;for(let u=0;u<o;u++)try{const i=n[u].trim(),g=x1(r,i);s=Gt.decrypt(g.ciphertext,g.key);break}catch(i){if(u+1>=o)throw i}return Gt.parse(s)}function b1(e){console.log(`[dotenv@${Vc}][INFO] ${e}`)}function w1(e){console.log(`[dotenv@${Vc}][WARN] ${e}`)}function is(e){console.log(`[dotenv@${Vc}][DEBUG] ${e}`)}function dh(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:Di.DOTENV_KEY&&Di.DOTENV_KEY.length>0?Di.DOTENV_KEY:""}function x1(e,t){let r;try{r=new URL(t)}catch(i){if(i.code==="ERR_INVALID_URL"){const g=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw g.code="INVALID_DOTENV_KEY",g}throw i}const n=r.password;if(!n){const i=new Error("INVALID_DOTENV_KEY: Missing key part");throw i.code="INVALID_DOTENV_KEY",i}const o=r.searchParams.get("environment");if(!o){const i=new Error("INVALID_DOTENV_KEY: Missing environment part");throw i.code="INVALID_DOTENV_KEY",i}const s=`DOTENV_VAULT_${o.toUpperCase()}`,u=e.parsed[s];if(!u){const i=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw i.code="NOT_FOUND_DOTENV_ENVIRONMENT",i}return{ciphertext:u,key:n}}function ph(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const r of e.path)Ya.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=Gc.resolve(process.cwd(),".env.vault");return Ya.existsSync(t)?t:null}function Ul(e){return e[0]==="~"?Gc.join(d1.homedir(),e.slice(1)):e}function _1(e){b1("Loading env from encrypted .env.vault");const t=Gt._parseVault(e);let r=Di;return e&&e.processEnv!=null&&(r=e.processEnv),Gt.populate(r,t,e),{parsed:t}}function E1(e){const t=Gc.resolve(process.cwd(),".env");let r="utf8";const n=!!(e&&e.debug);e&&e.encoding?r=e.encoding:n&&is("No encoding is specified. UTF-8 is used by default");let o=[t];if(e&&e.path)if(!Array.isArray(e.path))o=[Ul(e.path)];else{o=[];for(const g of e.path)o.push(Ul(g))}let s;const u={};for(const g of o)try{const f=Gt.parse(Ya.readFileSync(g,{encoding:r}));Gt.populate(u,f,e)}catch(f){n&&is(`Failed to load ${g} ${f.message}`),s=f}let i=Di;return e&&e.processEnv!=null&&(i=e.processEnv),Gt.populate(i,u,e),s?{parsed:u,error:s}:{parsed:u}}function S1(e){if(dh(e).length===0)return Gt.configDotenv(e);const t=ph(e);return t?Gt._configVault(e):(w1(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),Gt.configDotenv(e))}function C1(e,t){const r=Buffer.from(t.slice(-64),"hex");let n=Buffer.from(e,"base64");const o=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{const u=p1.createDecipheriv("aes-256-gcm",r,o);return u.setAuthTag(s),`${u.update(n)}${u.final()}`}catch(u){const i=u instanceof RangeError,g=u.message==="Invalid key length",f=u.message==="Unsupported state or unable to authenticate data";if(i||g){const a=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw a.code="INVALID_DOTENV_KEY",a}else if(f){const a=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw a.code="DECRYPTION_FAILED",a}else throw u}}function k1(e,t,r={}){const n=!!(r&&r.debug),o=!!(r&&r.override);if(typeof t!="object"){const s=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw s.code="OBJECT_REQUIRED",s}for(const s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(o===!0&&(e[s]=t[s]),n&&is(o===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}const Gt={configDotenv:E1,_configVault:_1,_parseVault:y1,config:S1,decrypt:C1,parse:v1,populate:k1};Zr.exports.configDotenv=Gt.configDotenv;Zr.exports._configVault=Gt._configVault;Zr.exports._parseVault=Gt._parseVault;Zr.exports.config=Gt.config;Zr.exports.decrypt=Gt.decrypt;Zr.exports.parse=Gt.parse;Zr.exports.populate=Gt.populate;Zr.exports=Gt;var A1=Zr.exports;const I1=vs(A1),qc="arduino_secrets.h",R1=()=>({name:qc,data:"",content:"",mimetype:"text"});function T1(e,t){for(const r of t){const n=r.value?r.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"'):"";e.content+=`#define ${r.name} "${n}"
`}return e}function mh(e){const t=R1(),r=T1(t,e);return{data:Er(r.content,r.mimetype),name:r.name}}function gh(e,t,r){const n=`#include "${qc}"
${t}`;return{...e,data:Er(n,r)}}function vh(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=vh(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function O1(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=vh(e))&&(n&&(n+=" "),n+=t);return n}const $l=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,sr=O1,ro=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return sr(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:s}=t,u=Object.keys(o).map(f=>{const a=r==null?void 0:r[f],y=s==null?void 0:s[f];if(a===null)return null;const l=$l(a)||$l(y);return o[f][l]}),i=r&&Object.entries(r).reduce((f,a)=>{let[y,l]=a;return l===void 0||(f[y]=l),f},{}),g=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,a)=>{let{class:y,className:l,...v}=a;return Object.entries(v).every(I=>{let[d,R]=I;return Array.isArray(R)?R.includes({...s,...i}[d]):{...s,...i}[d]===R})?[...f,y,l]:f},[]);return sr(e,u,g,r==null?void 0:r.class,r==null?void 0:r.className)};var Qt={id:"my-cloud",name:"My Cloud",space:"private",plan_id:"",plan_name:"",roles:[],country:"",type:""},N1={CLOUD_HOME_URL:"https://app.arduino.cc",DIGITAL_STORE_URL:"https://digital-store.arduino.cc",ID_URL:"https://id.arduino.cc",ICON_CDN:"https://wedo-organizations-logo.arduino.cc"},Xa=["arduino","create-entry","create-maker","create-maker-plus","cloud-enterprise","cloud-classroom"];function L1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M6.67 26.67c-.74 0-1.36-.26-1.89-.79A2.57 2.57 0 0 1 4 24V5.33c0-.73.26-1.36.78-1.88a2.57 2.57 0 0 1 1.89-.78h18.66c.74 0 1.36.26 1.89.78.52.52.78 1.15.78 1.88v7.57a9.22 9.22 0 0 0-2.67-.8V5.33H6.67v17.14a14.15 14.15 0 0 1 3.78-2.6 12.62 12.62 0 0 1 4.58-1.17 11.78 11.78 0 0 0-.36 2.7 10.04 10.04 0 0 0-5.34 2.27V24h5.74c.15.49.33.96.53 1.4.2.44.44.87.73 1.27H6.67ZM16 16h.33a9.45 9.45 0 0 1 4.14-3.3 4.8 4.8 0 0 0 .2-1.37 4.5 4.5 0 0 0-1.37-3.3A4.5 4.5 0 0 0 16 6.67a4.5 4.5 0 0 0-3.3 1.36 4.5 4.5 0 0 0-1.37 3.3 4.5 4.5 0 0 0 1.37 3.3A4.5 4.5 0 0 0 16 16Zm0-2.67c-.56 0-1.03-.2-1.42-.58a1.93 1.93 0 0 1-.58-1.42c0-.55.2-1.02.58-1.41.4-.4.86-.59 1.42-.59.56 0 1.03.2 1.42.59.39.39.58.86.58 1.41 0 .56-.2 1.03-.58 1.42-.4.39-.86.58-1.42.58ZM22.67 28l-.4-2a5.79 5.79 0 0 1-1.47-.8l-1.93.6-1.34-2.27 1.54-1.33a6.15 6.15 0 0 1 0-1.73l-1.54-1.34 1.34-2.26 1.93.6a5.79 5.79 0 0 1 1.47-.8l.4-2h2.66l.4 2a6.72 6.72 0 0 1 1.47.86l1.93-.66 1.34 2.33-1.54 1.33a5.06 5.06 0 0 1 0 1.67l1.54 1.33-1.34 2.27-1.93-.6a5.79 5.79 0 0 1-1.47.8l-.4 2h-2.66ZM24 24c.73 0 1.36-.26 1.88-.78.53-.53.79-1.15.79-1.89 0-.73-.26-1.36-.79-1.88a2.57 2.57 0 0 0-1.88-.78c-.73 0-1.36.26-1.88.78a2.57 2.57 0 0 0-.79 1.88c0 .74.26 1.36.79 1.89.52.52 1.15.78 1.88.78Z"})})}function P1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"#374146",fillRule:"evenodd",clipRule:"evenodd",d:"m7.42 21 4.3-4.29a1 1 0 0 0 .21-1.09 1 1 0 0 0-1.63-.33l-6 6a1 1 0 0 0 0 1.42l6 6a1 1 0 1 0 1.42-1.42L7.42 23H27a1 1 0 0 0 0-2H7.4Zm20.3-11.7-6-6a1 1 0 0 0-1.42 1.4L24.59 9H5a1 1 0 0 0 0 2h19.58l-4.3 4.28a1 1 0 1 0 1.43 1.42l6-6a1 1 0 0 0 .21-1.09 1 1 0 0 0-.21-.33Z"})})}function B1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M11.9 25.33c-.31 0-.67-.13-.92-.38l-8.31-8.3 1.86-1.82 7.38 7.37L27.47 6.67l1.86 1.85-16.5 16.43c-.25.25-.6.38-.92.38"})})}function F1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M29.33 8v16c0 .73-.26 1.36-.78 1.88-.52.53-1.15.79-1.88.79H5.33c-.73 0-1.36-.27-1.88-.79A2.57 2.57 0 0 1 2.67 24V8c0-.73.26-1.36.78-1.88a2.57 2.57 0 0 1 1.88-.79h21.34c.73 0 1.36.26 1.88.79.52.52.78 1.15.78 1.88Zm-24 2.67h21.34V8H5.33v2.67Zm0 5.33v8h21.34v-8H5.33Z"})})}function D1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",fill:"none",...e,children:X.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.7 5.3 8 8c.2.2.3.4.3.7v12c0 .6-.4 1-1 1H8a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v1h14V15h-7a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V7H8a1 1 0 0 1-1-1c0-.6.4-1 1-1h8c.3 0 .5.1.7.3Zm.3 3.1V13h4.6L17 8.4ZM12 21h8a1 1 0 1 0 0-2h-8a1 1 0 1 0 0 2Zm-4-2a1 1 0 0 1-1-1v-2a1 1 0 1 1 2 0v2c0 .6-.4 1-1 1Zm-1-7a1 1 0 1 0 2 0v-2a1 1 0 1 0-2 0v2Z",clipRule:"evenodd"})})}function j1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"#374146",d:"M6.67 28c-.74 0-1.36-.26-1.89-.78A2.57 2.57 0 0 1 4 25.33V6.67c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 6.67 4H16v2.67H6.67v18.66H16V28H6.67Zm14.66-5.33-1.83-1.94 3.4-3.4H12v-2.66h10.9l-3.4-3.4 1.83-1.94L28 16l-6.67 6.67Z"})})}var zl={label:"Plan Usage",href:"/plan-usage",icon:wp,allowed:{space:["edu","pro","private"],minor:!1}},M1={label:"Space Settings",href:"/settings",icon:bp,allowed:{space:["edu","pro"],minor:!1}},U1=[[{label:"Home",href:"/",icon:lp,allowed:{space:["edu","pro","private"],minor:!0}}],[{label:"Sketches",href:"/sketches",icon:fp,allowed:{space:["edu","pro","private"],minor:!0}}],[{label:"Devices",href:"/devices",icon:hp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Things",href:"/things",icon:dp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Dashboards",href:"/dashboards",icon:pp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Triggers",href:"/triggers",icon:mp,requiresPaidPlan:Xa.filter(e=>e!=="create-entry"),allowed:{space:["edu","pro","private"],minor:!1}}],[{label:"Templates",href:"/templates",icon:D1,allowed:{space:["edu","pro","private"],minor:!1},extra:()=>window.localStorage.getItem("cs-link-templates")===null?X.jsx("span",{className:"rounded bg-teal-0/30 px-2 font-roboto text-xx-small font-bold text-teal-3",children:"NEW"}):null,onClickEmit:()=>window.localStorage.setItem("cs-link-templates","true")}],[{label:"Resources",href:"/resources",icon:gp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Courses",href:"/courses",icon:vp,allowed:{space:["edu","private"],minor:!0}}],[{label:"Integrations",href:"/integrations",icon:yp,allowed:{space:["edu","pro","private"],minor:!1}}],[M1,{...zl,allowed:{...zl.allowed,space:["private"]}}]],Ko={linkGroup:U1},$1={enabled:!0,cacheTime:0,initialData:void 0},Oa=new Map,Na=(e,t,r)=>{const n=Oe.useRef(),[o,s]=Oe.useState("stale"),[u,i]=Oe.useState(r==null?void 0:r.initialData),g=Oe.useMemo(()=>typeof e=="string"?e:e.join("/"),[e]),{enabled:f,cacheTime:a}={...$1,...r};return n.current=t,Oe.useEffect(()=>{var y;f&&(a===1/0&&Oa.has(g)?i(Oa.get(g)):(s("loading"),(y=n.current)==null||y.call(n).then(l=>{i(l),s("done"),Oa.set(g,l)}).catch(()=>s("error"))))},[g,f,a]),{loading:o==="loading",error:o==="error",data:u}},yh=class Qa{constructor(t,r){this.domain=t??"arduino.cc",this.prefix=r??"arduino",this._listeners=[]}static isSSR(){return typeof document>"u"||typeof window>"u"}get(t){if(!this.prefix||Qa.isSSR())return"";const r=document.cookie.match(new RegExp(`(?:^|; )${`${this.prefix}::${t}`.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return r?decodeURIComponent(r[1]):""}set(t,r,n){if(!(!this.prefix||Qa.isSSR())&&(document.cookie=`${this.prefix}::${r}=${encodeURIComponent(t)};max-age=31622400;Domain=${this.domain}; Path=/; SameSite=Strict`,!n))for(const o of this._listeners)o(t,r)}getSpace(){return this.get("space-id")}setSpace(t,r){this.set(t,"space-id",r)}getHiddenlogo(){return this.get("hidden-logo")}setHiddenlogo(t){this.set(t.filter(r=>r!=="").join(","),"hidden-logo")}subscribe(t){this._listeners.push(t)}unsubscribe(t){this._listeners=this._listeners.filter(r=>r!==t)}};function z1(e){if(!e)throw new Error("CloudSidebar: No token provided.");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json;charset=UTF-8"}}async function Gl(e,t){const r=await fetch(e,{...t});if(!r.ok){const n=await r.json();return Promise.reject(n)}return r.json().then(n=>n)}function Yn(e){return e.replace(/\/+$/,"")}function bh(e,t){return e?e.includes(t)||e.includes("data:image")?e:`${Yn(t)}/${e}`:""}function Vl(e,t,r=!1){return e.map(n=>n.filter(({allowed:s})=>!s.minor&&r?!1:s.space.includes(t.id!==Qt.id?t.space:"private"))).filter(n=>n.length>0)}function G1(e,t,r){if(!t||!r)return e;for(const[n,o]of Object.entries(t)){const s=o.linkGroup.flat();if(s.length>1&&s.filter(u=>r===u.href).length>0||s.length===1&&r===s[0].href&&e.linkGroup.flat().filter(u=>r===u.href).length===0)return{...t[n],isSubNav:!0}}return{...e,isSubNav:!1}}function wh(){return typeof window>"u"||typeof document>"u"?!0:localStorage.getItem("create.installed-from-store")==="true"}var xh={page:{id:"",name:"",url:"",updated_at:""},status:{indicator:"",description:"Loading..."}},_h=Oe.createContext({spaces:[],env:N1,selectedSpace:Qt,plans:[],storage:new yh,cloudStatus:{data:xh}}),Yr=()=>{const e=Oe.useContext(_h);if(!e)throw new Error("useCloudContext must be used within a CloudContextProvider");return e};function V1(e){var t,r;const{children:n,spaces:o,onSpaceChange:s,env:u,privateSpacePlans:i,api:g,storage:f}=e,{client:a,isAuthenticated:y}=Cr(),l=typeof window>"u"||typeof document>"u"?void 0:a.getCustomization(),v=Oe.useCallback(async N=>Gl(N,{headers:z1(await a.getTokenSilently())}),[a]),I=Na("spaces",()=>v(`${g==null?void 0:g.baseurl}/classroom/v1/organizations`),{enabled:y&&!!g,cacheTime:5*60*1e3}),d=Na("privatePlans",()=>v(`${g==null?void 0:g.baseurl}/restrictions/v1/recap/me`),{enabled:y&&!!g,cacheTime:5*60*1e3}),R=Na("cloudStatus",()=>Gl("https://status.arduino.cc/api/v2/status.json"),{cacheTime:5*60*1e3,initialData:xh}),w=Oe.useMemo(()=>{var N;const P=o||((N=I.data)==null?void 0:N.organizations);if(P){if(l){const H=P.find(D=>D.id===l.organization_id);return H?[H]:[Qt]}return P.includes(Qt)?P:[Qt,...P]}},[o,(t=I.data)==null?void 0:t.organizations,l]),S=Oe.useSyncExternalStore(N=>{const P=(H,D)=>{if(D!=="space-id"||!H)return;const K=(w==null?void 0:w.find(U=>U.id===H))||Qt;s==null||s(K),N()};return f.subscribe(P),()=>{f.unsubscribe(P)}},()=>{const N=f.getSpace();if(!N||N!==Qt.id&&w&&w.length>1&&!w.some(P=>P.id===N))return f.setSpace(Qt.id,!0),Qt;if(l){const P=w==null?void 0:w.find(H=>H.id===l.organization_id);if(P&&N!==P.id)return f.setSpace(P.id,!0),P}return(w==null?void 0:w.find(P=>P.id===N))||Qt},()=>Qt);Oe.useEffect(()=>{const N=document.createElement("script");return N.src="https://status.arduino.cc/embed/script.js",N.async=!0,document.body.appendChild(N),()=>{document.body.removeChild(N)}},[]);const O=Oe.useMemo(()=>{var N;return{spaces:w,selectedSpace:S,env:u,cloudStatus:R,plans:S.space==="edu"||S.space==="pro"?[S.plan_name]:i||((N=d.data)==null?void 0:N.plans)||[],storage:f}},[i,R,u,(r=d.data)==null?void 0:r.plans,S,w,f]);return X.jsx(_h.Provider,{value:O,children:n})}function q1(e){const{storage:t,selectedSpace:r}=Yr(),{client:n}=Cr(),o=typeof window>"u"||typeof document>"u"?void 0:n.getCustomization(),s=Oe.useSyncExternalStore(i=>{const g=(f,a)=>a==="hidden-logo"&&i();return t.subscribe(g),()=>{t.unsubscribe(g)}},()=>t.getHiddenlogo(),()=>"");return Oe.useMemo(()=>s.split(",").filter(i=>i!=="").includes(r.id),[s,r.id])?null:X.jsxs("div",{className:"mx-auto my-3.5 flex flex-col items-center gap-2 text-center text-fog",children:[o?X.jsx("span",{className:"font-opensans text-xx-small text-smoke",children:"Powered by"}):void 0,X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"53",height:"38",fill:"none",...e,children:X.jsxs("g",{fill:"currentColor",children:[X.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.5 13.572C52.5 6.574 46.744.89 39.69.89c-.65 0-1.318.037-1.967.149-5.485.796-9.166 4.85-11.223 7.961-2.057-3.11-5.738-7.165-11.223-7.961a14.061 14.061 0 0 0-1.966-.149C6.237.89.5 6.574.5 13.572c0 7 5.756 12.683 12.81 12.683.65 0 1.318-.037 1.985-.148 5.485-.814 9.166-4.87 11.223-7.98 2.057 3.11 5.738 7.166 11.223 7.98.65.093 1.317.148 1.984.148 7.02 0 12.775-5.684 12.775-12.683Zm-37.854 8.091a8.31 8.31 0 0 1-1.354.093c-4.655 0-8.426-3.684-8.426-8.184 0-4.517 3.79-8.183 8.444-8.183.452 0 .903.037 1.354.092 5.178.76 8.336 6 9.418 8.091-1.1 2.111-4.276 7.332-9.436 8.091Zm23.69-16.182c-5.178.76-8.354 6-9.418 8.091 1.064 2.093 4.24 7.332 9.418 8.091.451.056.902.093 1.354.093 4.637 0 8.426-3.666 8.426-8.184 0-4.499-3.771-8.183-8.426-8.183-.452 0-.903.037-1.354.092ZM9.697 12.214h7.748v2.438H9.697v-2.438Zm33.568 2.456h-2.613v2.563h-2.504V14.67h-2.613v-2.456h2.613V9.65h2.504v2.563h2.613v2.456Zm5.938-12.374c0-.77.627-1.407 1.389-1.407a1.41 1.41 0 0 1 1.41 1.407c0 .813-.626 1.406-1.41 1.406a1.406 1.406 0 0 1-1.39-1.406Zm1.408-.88h-.694v1.759h.448V2.58h.246l.247.594h.493l-.336-.66c.224-.087.336-.263.336-.505 0-.373-.202-.593-.74-.593Zm1.144.88c0-.638-.493-1.187-1.165-1.187s-1.143.484-1.143 1.187c0 .725.538 1.186 1.143 1.186.672 0 1.165-.461 1.165-1.186Zm-.875-.308c0 .22-.112.286-.313.286l-.224.022v-.572h.224c.246 0 .313.066.313.264Z"}),X.jsx("path",{d:"m.993 37.79 2.303-7.535h2.093l2.407 7.536H5.808l-.419-1.465H3.296l-.419 1.465H.993Zm3.35-5.65-.733 2.72h1.465l-.733-2.72ZM8.947 30.36h3.036c2.093 0 2.825 1.047 2.825 2.512 0 1.046-.418 1.779-1.256 2.197l1.466 2.722H12.82l-1.047-2.303h-.942v2.407H8.947V30.36Zm3.977 2.512c0-.628-.209-1.047-1.15-1.047h-.943v2.093h.942c.733.105 1.151-.209 1.151-1.046ZM16.378 30.36h2.407c2.826 0 3.768 1.36 3.768 3.663 0 1.78-.523 3.768-3.768 3.768h-2.512V30.36h.105Zm1.884 1.465v4.396h.733c1.57 0 1.674-.942 1.674-2.198 0-1.465-.105-2.198-1.78-2.198h-.627ZM27.995 30.36h1.78v4.919c0 2.198-1.675 2.721-3.036 2.721-1.256 0-2.93-.419-2.93-2.721v-4.92h1.884v4.606c0 1.256.418 1.57 1.15 1.57.838 0 1.152-.419 1.152-1.57V30.36ZM31.449 36.325h1.988V31.93h-1.883v-1.57h5.756v1.57H35.32v4.395h1.989v1.57h-5.757v-1.57h-.104ZM40.45 37.79h-1.78v-7.43h2.093l2.407 4.5v-4.5h1.78v7.535h-1.884l-2.512-4.814-.105 4.71ZM52.485 34.128c0 2.197-.837 3.872-3.244 3.872-2.198 0-3.14-1.256-3.14-3.768 0-2.302.837-3.977 3.14-3.977 2.198 0 3.244.942 3.244 3.873Zm-1.988 0c0-1.884-.105-2.303-1.256-2.303-.942-.104-1.151.524-1.151 2.407 0 1.465.104 2.303 1.15 2.303 1.152-.105 1.257-.733 1.257-2.407Z"})]})})]})}function H1(e){const{children:t,className:r,...n}=e;return X.jsx("div",{className:sr("flex items-center justify-center",r),...n,children:t})}var Eh=Oe.forwardRef(({children:e,className:t,...r},n)=>{const o=typeof e=="string"?"span":Ip;return X.jsx(o,{className:sr("whitespace-nowrap rounded px-1 text-x-small text-asbestos ","no-underline duration-150 ease-in-out hover:bg-clouds hover:text-jet",t),...r,ref:n,children:e})});Eh.displayName="BreadcrumbsItem";function W1(){return X.jsx(Rp,{className:"text-medium text-concrete"})}function K1(e){const{triggerContent:t,hideCaret:r,triggerIcon:n,openOnHover:o,children:s,className:u,...i}=e,[g,f]=Oe.useState(!1);return X.jsx("div",{className:sr("flex items-center justify-center",u),...i,children:X.jsxs(Cf,{modal:!1,open:g,onOpenChange:f,children:[X.jsx(kf,{asChild:!0,onMouseEnter:()=>{o&&!g&&f(!0)},children:X.jsxs("button",{className:"group flex cursor-pointer items-center rounded-md border-0 bg-transparent px-2 font-opensans text-x-small font-bold text-jet transition-colors duration-150 hover:bg-teal-5/10 hover:text-teal-3 data-[state=open]:bg-teal-5/10 data-[state=open]:text-teal-3",children:[X.jsxs("span",{className:"flex items-center justify-center gap-1",children:[n,X.jsx("span",{className:"max-w-40 truncate",children:t})]}),r?null:X.jsx(Tp,{className:"text-medium text-asbestos transition-transform duration-300 group-hover:text-teal-3 group-data-[state=open]:rotate-180 group-data-[state=open]:text-teal-3"})]})}),X.jsx(Af,{children:X.jsx(If,{className:"w-64 rounded bg-white py-0.5 shadow-deep data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in",align:"start",sideOffset:5,side:"bottom",children:s})})]})})}var br=Oe.forwardRef((e,t)=>{const{className:r,children:n,...o}=e;return X.jsx(qn,{className:sr("box-border inline-flex w-full cursor-pointer items-center gap-4 px-4 py-2 font-opensans text-xx-small text-jet outline-none transition-colors duration-[250ms] ease-in-out data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",r),...o,ref:t,children:n})});br.displayName="BreadcrumbsDropdownItem";function Z1(e){const{children:t,container:r="cloud-header-portal",rightPadding:n=!0,className:o,...s}=e,[u,i]=Oe.useState(!1);if(Oe.useEffect(()=>{i(!0)},[]),!u)return null;const g=document.getElementById(r);return u&&!g&&console.warn(`HeaderPortal: Could not find ${r} element. Is the CloudHeader component correctly mounted?`),g?Ap.createPortal(X.jsx("div",{className:sr("flex size-full items-center justify-between gap-2 pl-5",n?"pr-[60px]":"",o),...s,children:t}),g):null}function Y1(e){const{children:t,className:r,...n}=e;return X.jsx("div",{className:sr("scrollable mt-5 flex size-full flex-1 flex-col overflow-auto from-feather",r),...n,children:t})}var X1=ro("mx-4 my-2 flex animate-fade-in flex-col items-center gap-4 rounded-md p-4",{variants:{intent:{normal:"bg-clouds",edu:"border border-solid border-edu bg-[#F39C12]/10",expired:"border border-solid border-warning bg-[#FCFEEE]"}},defaultVariants:{intent:"normal"}});function Q1(e){var t;const{callbacks:r,...n}=e,{spaces:o,selectedSpace:s,plans:u,env:i}=Yr(),{user:g,isAuthenticated:f,client:a}=Cr(),y=typeof window>"u"||typeof document>"u"?void 0:a.getCustomization(),l=wh(),v=Oe.useMemo(()=>({"free-plan":{intent:"normal",title:"Arduino Cloud",description:"Ready to go beyond this free plan? Upgrade for premium features.",button:{label:"SEE PLANS",onClick:()=>window.open("https://cloud.arduino.cc/plans/","_blank")}},minor:{intent:"edu",title:"Hey Kid!",description:"Join your School in Arduino Cloud and enjoy your experiments!",button:{label:"JOIN SHARED SPACE",onClick:()=>window.open(`${Yn(i.CLOUD_HOME_URL)}/home/?join-space}`,"_blank")}}}),[i]),I=Oe.useMemo(()=>{if(!(!g||u===void 0||!o)){if(g["http://arduino.cc/is_minor"]&&(o==null?void 0:o.length)===1)return"minor";if(!g["http://arduino.cc/is_minor"])return s.id===Qt.id?u.some(d=>Xa.includes(d))?void 0:"free-plan":s.space==="edu"&&s.roles.includes("role:edu-admin")?u.some(d=>Xa.includes(d))?void 0:"free-plan":void 0}},[u,s,o,g]);return!I||!f||y||I==="free-plan"&&l?null:X.jsxs("div",{className:X1({intent:v[I].intent}),...n,children:[X.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 text-jet",children:[v[I].icon,X.jsx("span",{className:"text-x-small font-bold",children:v[I].title}),X.jsx("span",{className:"text-center text-xx-small",children:v[I].description})]}),X.jsx("button",{className:"cursor-pointer rounded-full border-0 bg-teal-3 px-4 py-0.5 font-opensans text-x-small font-bold uppercase text-white",onClick:(t=r==null?void 0:r[I])!=null?t:v[I].button.onClick,children:v[I].button.label})]})}function Sh(e){return e.condition?e.wrapper(e.children):e.children}var os=Oe.forwardRef((e,t)=>{const{as:r="a",hrefProp:n="href",onClick:o,className:s,...u}=e;return X.jsx(r,{ref:t,[n]:e.href,onClick:o,className:s,...u})});os.displayName="PolymorphicLink";function J1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M6.67 28c-.74 0-1.36-.26-1.89-.78A2.57 2.57 0 0 1 4 25.33V6.67c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 6.67 4h18.66c.74 0 1.36.26 1.89.78.52.53.78 1.15.78 1.89v18.66c0 .74-.26 1.36-.78 1.89-.53.52-1.15.78-1.89.78H6.67Zm4-2.67V6.67h-4v18.66h4Zm2.66 0h12V6.67h-12v18.66Z"})})}var Ch=Oe.createContext({navigation:Ko,subNavigation:{}});function kh(){const e=Oe.useContext(Ch);if(!e)throw new Error("useSidebarContext must be used within a SidebarRoot");return e}function eb(e){const{className:t,children:r,asDialog:n,navigation:o=Ko,linkElement:s,path:u,subNavigation:i,...g}=e,{selectedSpace:f}=Yr(),{user:a,client:y}=Cr(),l=typeof window>"u"||typeof document>"u"?void 0:y.getCustomization(),v=a["http://arduino.cc/is_minor"]||!1,I=Oe.useMemo(()=>({...o,linkGroup:Vl(o.linkGroup,f,v)}),[o,f,v]),d=Oe.useMemo(()=>i?Object.fromEntries(Object.entries(i).map(([w,S])=>[w,{...S,linkGroup:Vl(S.linkGroup,f,v)}])):void 0,[i,f,v]),R=Oe.useMemo(()=>({linkElement:s,subNavigation:i,asDialog:n,navigation:f.id===Qt.id&&l?{...Ko,linkGroup:[[Ko.linkGroup[0][0]]],isSubNav:!1,path:u}:{...G1(I,d,u),path:u}}),[n,I,d,l,s,u,f.id,i]);return X.jsx(Ch.Provider,{value:R,children:n?X.jsx(Sh,{condition:n==="header",wrapper:w=>X.jsxs("nav",{className:"fixed z-[1] box-border flex h-[60px] w-full items-center justify-between border-0 border-b border-solid border-fog bg-white font-opensans",children:[X.jsx(tb,{}),w,X.jsx("div",{id:"cloud-header-portal",className:"contents"})]}),children:X.jsxs(wf,{children:[X.jsx(xf,{asChild:!0,children:n==="header"?X.jsx("button",{className:"flex h-full cursor-pointer items-center justify-center border-0 bg-transparent px-3.5 hover:bg-clouds",id:"cs-sidebarroot-trigger",children:X.jsx(J1,{className:"text-[32px] text-teal-2"})}):n.trigger}),X.jsxs(_f,{children:[X.jsx(Ef,{className:"fixed inset-0 z-auto bg-black/50 data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in"}),X.jsx(Sf,{asChild:!0,children:X.jsx("div",{className:sr("fixed inset-0 z-auto m-5 w-[270px] overflow-auto border-0 border-r border-solid border-fog bg-feather font-opensans data-[state=closed]:animate-sidebar-out data-[state=open]:animate-sidebar-in",t),...g,children:X.jsx("nav",{className:"flex h-full flex-col justify-between",children:r})})})]})]})}):X.jsx("div",{className:sr("fixed w-[var(--cloud-sidebar-width)] border-0 border-r border-solid border-fog bg-feather font-opensans",t),...g,children:X.jsx("nav",{className:"flex h-screen flex-col justify-between",children:r})})})}function tb(){const{selectedSpace:e,env:t}=Yr(),{client:r}=Cr(),n=typeof window>"u"||typeof document>"u"?void 0:r.getCustomization(),o=n?n.organization_second_logo:e.second_logo;return n&&!n.organization_second_logo?X.jsx("span",{className:"absolute inset-0 m-auto flex h-[30px] justify-center text-small font-bold text-jet opacity-0 transition-opacity duration-300 xl:opacity-100",children:n.organization_name}):o?X.jsx("img",{className:"absolute inset-0 m-auto aspect-[3/1] h-[30px] object-contain text-5xl text-[#BDC7C7] opacity-0 transition-opacity duration-300 xl:opacity-100",src:bh(o,t.ICON_CDN)}):X.jsx(Op,{className:"absolute inset-0 m-auto h-full text-5xl text-[#BDC7C7] opacity-0 transition-opacity duration-300 xl:opacity-100"})}function rb(){const{spaces:e,plans:t,env:r}=Yr(),{navigation:n,asDialog:o,linkElement:s}=kh(),{isAuthenticated:u}=Cr();return!u||!e?X.jsx("div",{className:"size-full flex-1",children:n.linkGroup.map((i,g,{length:f})=>X.jsxs("div",{children:[X.jsx("ul",{className:"my-1 list-none space-y-2 p-0",children:i.map(({href:a})=>X.jsx("li",{className:"px-2",children:X.jsxs("div",{className:"box-border inline-flex w-full items-center gap-4 px-4 py-2",children:[X.jsx("div",{className:"size-5 animate-pulse rounded-full bg-fog"}),X.jsx("div",{className:"h-6 w-24 animate-pulse rounded-md bg-fog"})]})},a))}),f!==g+1?X.jsx(va,{className:"h-px w-full bg-fog"}):null]},`linkgroup-${g}`))}):X.jsxs("div",{className:"w-full flex-1",id:"cs-sidebarnavigation",children:[n.name?X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"flex items-center justify-between px-4 py-1.5",children:X.jsx("span",{className:"text-xx-small font-bold uppercase text-jet",children:n.name})}),X.jsx(va,{className:"h-px w-full bg-fog"})]}):null,n.linkGroup.map((i,g,{length:f})=>X.jsxs("div",{children:[X.jsx("ul",{className:"my-1 list-none space-y-2 p-0",children:i.map(({href:a,label:y,icon:l,requiresPaidPlan:v,onClickEmit:I,extra:d})=>{const R=s?n.path===`${Yn(r.CLOUD_HOME_URL)}${a}`:!1,w=()=>v?!t.filter(Boolean).some(S=>v.includes(S)):!1;return X.jsx("li",{className:"px-2",children:X.jsx(Sh,{condition:o!==void 0,wrapper:S=>X.jsx(bc,{asChild:!0,children:S}),children:X.jsxs(os,{as:s==null?void 0:s.as,hrefProp:s==null?void 0:s.hrefProp,className:"box-border inline-flex w-full items-center justify-between rounded px-4 py-2 text-x-small text-jet no-underline hover:bg-teal-5/5 focus-visible:bg-teal-5/5 data-[active=true]:bg-cloud-selected data-[active=true]:font-bold data-[active=true]:text-teal-3","data-active":R,onClick:S=>I==null?void 0:I(S),ref:S=>{R&&(S==null||S.scrollIntoView({behavior:"smooth",block:"nearest"}))},href:s?a:`${Yn(r.CLOUD_HOME_URL)}${a}`,children:[X.jsxs("div",{className:"flex w-full items-center gap-4",children:[X.jsx(l,{className:"text-medium"}),X.jsx("span",{children:y}),d==null?void 0:d()]}),w()?X.jsx(kp,{className:"text-medium"}):null]})})},a)})}),f!==g+1?X.jsx(va,{className:"h-px w-full bg-fog"}):null]},`linkgroup-${g}`))]})}function nb(e){return e.condition?e.children:null}function Ah(e){const{children:t,trigger:r,title:n,padded:o=!0,contentProps:s,...u}=e;return X.jsxs(wf,{...u,children:[X.jsx(xf,{asChild:!0,children:r}),X.jsxs(_f,{children:[X.jsx(Ef,{className:"fixed inset-0 z-auto bg-black/80 data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in"}),X.jsx(Sf,{className:"fixed left-[50%] top-[50%] flex max-h-[90vh] w-[90%] translate-x-[-50%] translate-y-[-50%] transition-all duration-500 data-[state=closed]:animate-modal-out data-[state=open]:animate-modal-in md:w-[650px]",...s,children:X.jsxs("div",{className:"relative z-auto w-full overflow-auto rounded bg-white shadow-deep",children:[X.jsxs("div",{className:"sticky top-0 inline-flex h-[54px] w-full border-spacing-1 items-center justify-between border-0 border-b border-solid border-smoke bg-white",children:[X.jsx("div",{className:"w-[50px]"}),X.jsx(Bp,{className:"font-opensans text-small font-normal",children:n}),X.jsx(Fp,{className:"flex w-[50px] cursor-pointer items-center justify-center border-0 bg-transparent",children:X.jsx(Dp,{className:"size-6"})})]}),X.jsx("div",{className:sr("scrollable space-y-7 overflow-auto overscroll-y-none from-white",o&&"p-9 md:px-[86px]"),children:t})]})})]})]})}var ib='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="none"><g clip-path="url(%23a)"><mask id="b" width="60" height="60" x="0" y="0" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="%23fff" d="M30 60a30 30 0 1 0 0-60 30 30 0 0 0 0 60Z"/></mask><g mask="url(%23b)"><path fill="%230A7891" d="M30 60a30 30 0 1 0 0-60 30 30 0 0 0 0 60Z"/><path fill="%2399E9E7" d="M49.06 59.14 30 65.39l-19.06-6.25a19.07 19.07 0 0 1 38.12 0Z"/><path fill="%2369C3CA" d="M30.16 16.88h-.32a4.24 4.24 0 0 0-4.23 4.23v11.84c0 2.35 1.9 4.24 4.23 4.24h.32c2.34 0 4.23-1.9 4.23-4.24V21.11c0-2.34-1.9-4.23-4.23-4.23Z"/></g></g><defs><clipPath id="a"><path fill="%23fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>',ob=ro("block shrink-0 select-none overflow-hidden align-middle",{variants:{size:{sm:"size-7",lg:"size-9",xl:"size-10"}},defaultVariants:{size:"sm"}}),sb=ro("m-0 box-border size-full rounded-full border-2 border-solid object-cover p-px",{variants:{spaceType:{edu:"border-edu",pro:"border-jet",private:"border-teal-1"}},defaultVariants:{spaceType:"private"}});function Ja(e){const{name:t,spaceType:r,logo:n,size:o}=e,{env:s}=Yr(),{user:u}=Cr(),i=u["http://arduino.cc/is_minor"]?ib:u.picture;return X.jsxs(Np,{className:ob({size:o}),children:[X.jsx(Lp,{className:sb({spaceType:r}),src:r?bh(n,s.ICON_CDN):i,alt:t}),X.jsx(Pp,{className:"flex size-full items-center justify-center rounded-full bg-teal-2 font-opensans text-x-small font-bold text-white data-[spacetype=edu]:bg-edu data-[spacetype=pro]:bg-jet",delayMs:0,"data-spacetype":r,children:ab(r!=="private"?t:u.name||u["http://arduino.cc/username"]||u.email||t)})]})}function ab(e){try{const t=e.replace(/[^a-zA-Z0-9 ]/g,"").split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.filter(r=>r.length>0).slice(0,2).map(r=>r[0].toUpperCase()).join("")||""}catch{return""}}var cb=ro("cursor-pointer space-y-2 rounded-lg border-0 bg-transparent p-4 font-opensans outline outline-1 outline-smoke",{variants:{spaceType:{private:"hover:bg-teal-5/10 focus-visible:bg-teal-1/10 data-[selected]:bg-teal-5/10 data-[selected]:outline-teal-2",edu:"hover:bg-edu/10 focus-visible:bg-edu/10 data-[selected]:bg-edu/10 data-[selected]:outline-edu",pro:"hover:bg-jet/10 focus-visible:bg-jet/10 data-[selected]:bg-jet/10 data-[selected]:outline-jet"}},defaultVariants:{spaceType:"private"}}),ub={private:"My Cloud",edu:"School Space",pro:"Pro Space"};function jo(e){const{children:t,condition:r=!0,...n}=e;return r?X.jsx(qn,{className:"box-border inline-flex h-11 w-full cursor-pointer items-center gap-4 px-4 py-2.5 font-opensans text-xx-small text-jet outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",...n,children:t}):null}function lb(e){const{onSelect:t}=e,{spaces:r,selectedSpace:n,storage:o}=Yr();return X.jsxs(Ah,{title:"Switch space",contentProps:{onCloseAutoFocus:()=>t()},trigger:X.jsxs(qn,{className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-3xl border-0 bg-basegray py-1.5 font-opensans text-jet transition-colors duration-200 hover:bg-clouds hover:outline-none",onSelect:s=>{s.preventDefault()},children:[X.jsx(P1,{className:"text-[21px]"}),X.jsx("span",{className:"text-xx-small",children:"Switch space"})]}),children:[X.jsxs("div",{className:"flex flex-col justify-center gap-4 font-opensans",children:[X.jsx("span",{className:"text-medium font-bold text-jet",children:"Arduino Shared Space"}),X.jsx("span",{className:"text-x-small",children:"Select one and start to Collaborate on projects with shared devices and dashboards."})]}),X.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:r==null?void 0:r.map(s=>X.jsx(bc,{asChild:!0,children:X.jsxs("button",{onClick:()=>{o.setSpace(s.id)},className:cb({spaceType:s.space}),"data-selected":(n==null?void 0:n.id)===s.id?!0:void 0,children:[X.jsx(Ja,{name:s.name,spaceType:s.space,logo:s.logo,size:"xl"}),X.jsxs("div",{className:"block overflow-hidden text-start",children:[X.jsx("div",{title:s.name,className:"truncate text-x-small font-bold text-onyx",children:s.name}),X.jsx("span",{className:"text-xx-small text-jet",children:ub[s.space]||"Private Space"})]})]})},s.id))})]})}function La(e){const{user:t}=Cr();return t["http://arduino.cc/is_minor"]?X.jsx(Ah,{title:e.title,padded:!1,trigger:X.jsx("button",{className:"cursor-pointer border-none bg-inherit p-0 font-opensans text-inherit",style:{textDecoration:"inherit",fontSize:"inherit"},children:e.children}),children:X.jsx("iframe",{id:"iframe-content",name:"iframe-content",className:"h-[75vh] w-full border-none bg-white",src:e.href})}):X.jsx("a",{href:e.href,className:"text-inherit",style:{textDecoration:"inherit",fontSize:"inherit"},target:"_blank",rel:"noopener noreferrer",children:e.children})}function fb(){const[e,t]=Oe.useState(!1),{spaces:r,selectedSpace:n,storage:o,env:s}=Yr(),{navigation:u,asDialog:i,linkElement:g}=kh(),{user:f,isAuthenticated:a,client:y}=Cr(),l=(n==null?void 0:n.space)==="pro"&&(n==null?void 0:n.roles.includes("role:pro-editor")),v=Oe.useRef(null),I=typeof window>"u"||typeof document>"u"?void 0:y.getCustomization(),d=wh();if(!a||!r)return X.jsx("header",{className:"p-2",children:X.jsxs("div",{className:"box-border flex w-full cursor-wait flex-row flex-wrap items-center justify-between rounded px-4 py-2.5",children:[X.jsxs("div",{className:"inline-flex h-11 items-center gap-3",children:[X.jsx("div",{className:"size-9 select-none items-center justify-start overflow-hidden align-middle",children:X.jsx("div",{className:"flex size-full animate-pulse items-center justify-center rounded-full bg-fog"})}),X.jsxs("div",{className:"flex flex-col flex-wrap items-start justify-center gap-1",children:[X.jsx("div",{className:"h-6 w-24 animate-pulse rounded-md bg-fog"}),X.jsx("div",{className:"h-5 w-16 animate-pulse rounded-md bg-fog"})]})]}),X.jsx(al,{className:"animate-pulse text-3xl text-fog"})]})});if(u.isSubNav)return X.jsx("header",{className:"p-2",children:X.jsxs(os,{as:g==null?void 0:g.as,hrefProp:g==null?void 0:g.hrefProp,href:"/",className:"box-border flex h-16 items-center justify-start gap-3 rounded px-4 py-2.5 text-x-small font-bold text-jet no-underline transition-colors duration-150 hover:bg-teal-5/5",children:[X.jsx(xp,{className:"text-xl text-jet"}),"Back to Home"]})});const R=n.id===Qt.id?{title:f.name||f["http://arduino.cc/username"],desc:f.email}:{title:n.name,desc:f.name||f.email};return X.jsxs("header",{className:"p-2",children:[i!==void 0?X.jsx(bc,{className:"hidden",ref:v}):null,X.jsxs(Cf,{open:e,onOpenChange:t,children:[X.jsx(kf,{asChild:!0,children:X.jsxs("button",{id:"cs-spaceselector",className:"flex w-full cursor-pointer items-center justify-start gap-3 rounded border-0 bg-transparent px-4 py-2.5 font-opensans transition-colors duration-150 hover:bg-teal-5/5 data-[state=open]:bg-teal-5/5",children:[X.jsx(Ja,{name:n.name,spaceType:n==null?void 0:n.space,logo:n==null?void 0:n.logo,size:"lg"}),X.jsxs("div",{className:"block flex-1 overflow-hidden text-start",children:[X.jsx("div",{title:R.title,className:"truncate text-x-small font-bold text-gris",children:R.title}),X.jsx("div",{title:R.desc,className:"truncate text-xx-small text-gris",children:R.desc})]}),X.jsx(al,{className:"shrink-0 text-3xl text-jet"})]})}),X.jsx(Af,{children:X.jsxs(If,{className:"w-[var(--radix-dropdown-menu-trigger-width)] rounded bg-white py-0.5 shadow-deep data-[state=closed]:animate-fade-out data-[state=open]:animate-slide-in",align:"start",sideOffset:5,side:"bottom",children:[X.jsx(nb,{condition:!!r&&r.length>1,children:X.jsxs(X.Fragment,{children:[r&&r.length>3?X.jsx("div",{className:"px-4 py-3",children:X.jsx(lb,{onSelect:()=>t(!1)})}):X.jsx(_p,{className:"py-3 font-opensans",children:r.map(w=>X.jsxs(Ep,{className:"box-border flex w-full cursor-pointer items-center justify-start gap-4 px-4 py-2 text-jet outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",onClick:()=>o.setSpace(w.id),checked:(n==null?void 0:n.id)===w.id,children:[X.jsx(Ja,{name:w.name,spaceType:w.space,logo:w.logo}),X.jsx("div",{className:"block flex-1 overflow-hidden text-start",children:X.jsx("div",{title:w.name,className:sr("truncate text-xx-small text-jet",(n==null?void 0:n.id)===w.id&&"font-bold"),children:w.name})}),X.jsx(Sp,{children:X.jsx(B1,{className:"shrink-0 text-small text-jet"})})]},w.id))}),X.jsx(cl,{className:"h-px w-full bg-fog"})]})}),X.jsx(jo,{asChild:!0,condition:!f["http://arduino.cc/is_minor"]&&!l,children:X.jsxs("a",{href:s.ID_URL,className:"text-inherit no-underline",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(L1,{className:"text-small"}),"Account Settings"]})}),d?null:X.jsx(jo,{asChild:!0,condition:!f["http://arduino.cc/is_minor"]&&!l,children:X.jsxs("a",{href:`${Yn(s.DIGITAL_STORE_URL)}/subscriptions/plans`,className:"text-inherit no-underline",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(F1,{className:"text-small"}),"Billing & subscriptions"]})}),I&&n.id===Qt.id?null:X.jsx(jo,{asChild:!0,condition:!f["http://arduino.cc/is_minor"],children:X.jsxs(os,{as:g==null?void 0:g.as,hrefProp:g==null?void 0:g.hrefProp,onClick:()=>{var w;return(w=v.current)==null?void 0:w.click()},className:"font-opensans text-inherit no-underline",href:g?"/api-keys":`${Yn(s.CLOUD_HOME_URL)}/api-keys`,children:[X.jsx(Cp,{className:"text-small"}),"API Keys"]})}),X.jsxs(jo,{onClick:()=>y.logout({logoutParams:{returnTo:window.location.origin}}),children:[X.jsx(j1,{className:"text-small"}),"Sign out"]}),X.jsx(cl,{className:"h-px w-full bg-fog"}),X.jsxs("div",{className:sr("box-border inline-flex w-full items-baseline gap-2 px-4 pb-1 pt-2 text-center font-opensans text-xx-small text-asbestos",I?"justify-center":"justify-between"),children:[X.jsx(qn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(La,{title:"Privacy",href:I?I.policy_url:`https://www.arduino.cc/en/privacy-policy${f["http://arduino.cc/is_minor"]?"/children-privacy-policy":""}`,children:"Privacy"})}),X.jsx("span",{className:"h-1",children:"·"}),X.jsx(qn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(La,{title:"Terms",href:I?I.custom_tos:"https://www.arduino.cc/en/terms-conditions",children:"Terms"})}),I?null:X.jsxs(X.Fragment,{children:[X.jsx("span",{className:"h-1",children:"·"}),X.jsx(qn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(La,{title:"Security",href:"https://www.arduino.cc/en/security",children:"Security"})})]})]})]})})]})]})}var hb=ro("size-3.5 rounded-full bg-gray-500",{variants:{intent:{"":"",none:"!bg-[#1DA086]",minor:"!bg-[#E7BC43]",maintenance:"!bg-[#E7BC43]",major:"!bg-[#D9863B]",critical:"!bg-[#C11f09]"}},defaultVariants:{intent:""}}),db=()=>{var e,t;const{user:r}=Cr(),n=r["http://arduino.cc/is_minor"]||!1,{cloudStatus:o}=Yr();return X.jsxs("a",{className:sr("flex cursor-pointer items-center justify-center gap-3 border-0 border-t border-solid border-fog p-2 text-x-small text-jet no-underline",n&&"pointer-events-none"),href:"https://status.arduino.cc",target:"_blank",rel:"noopener noreferrer",id:"cs-systemstatus",children:[X.jsx("div",{className:hb({intent:o.error?"none":(e=o.data)==null?void 0:e.status.indicator})}),X.jsx("div",{children:o.error?"Unable to obtain status":(t=o.data)==null?void 0:t.status.description})]})};Oe.createContext({selected:"",setSelected:()=>{}});let Pa=null;function Ih(){return Pa||(Pa=new yh(at.COOKIES_DOMAIN,Qo.customKey?`${Qo.customKey}-arduino`:void 0)),Pa}function nr(){let e;return e=Ih().getSpace(),e==="my-cloud"&&(e=void 0),e}var Rh={exports:{}};(function(e,t){(function(r,n){n()})(Hr,function(){function r(f,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function n(f,a,y){var l=new XMLHttpRequest;l.open("GET",f),l.responseType="blob",l.onload=function(){g(l.response,a,y)},l.onerror=function(){console.error("could not download file")},l.send()}function o(f){var a=new XMLHttpRequest;a.open("HEAD",f,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(a)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hr=="object"&&Hr.global===Hr?Hr:void 0,i=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(f,a,y){var l=u.URL||u.webkitURL,v=document.createElement("a");a=a||f.name||"download",v.download=a,v.rel="noopener",typeof f=="string"?(v.href=f,v.origin===location.origin?s(v):o(v.href)?n(f,a,y):s(v,v.target="_blank")):(v.href=l.createObjectURL(f),setTimeout(function(){l.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(f,a,y){if(a=a||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(r(f,y),a);else if(o(f))n(f,a,y);else{var l=document.createElement("a");l.href=f,l.target="_blank",setTimeout(function(){s(l)})}}:function(f,a,y,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof f=="string")return n(f,a,y);var v=f.type==="application/octet-stream",I=/constructor/i.test(u.HTMLElement)||u.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||v&&I||i)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var O=R.result;O=d?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=O:location=O,l=null},R.readAsDataURL(f)}else{var w=u.URL||u.webkitURL,S=w.createObjectURL(f);l?l.location=S:location.href=S,l=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});u.saveAs=g.saveAs=g,e.exports=g})})(Rh);var pb=Rh.exports;function Mo(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Th={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,o,s){function u(f,a){if(!o[f]){if(!n[f]){var y=typeof Mo=="function"&&Mo;if(!a&&y)return y(f,!0);if(i)return i(f,!0);var l=new Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l}var v=o[f]={exports:{}};n[f][0].call(v.exports,function(I){var d=n[f][1][I];return u(d||I)},v,v.exports,r,n,o,s)}return o[f].exports}for(var i=typeof Mo=="function"&&Mo,g=0;g<s.length;g++)u(s[g]);return u}({1:[function(r,n,o){var s=r("./utils"),u=r("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(g){for(var f,a,y,l,v,I,d,R=[],w=0,S=g.length,O=S,N=s.getTypeOf(g)!=="string";w<g.length;)O=S-w,y=N?(f=g[w++],a=w<S?g[w++]:0,w<S?g[w++]:0):(f=g.charCodeAt(w++),a=w<S?g.charCodeAt(w++):0,w<S?g.charCodeAt(w++):0),l=f>>2,v=(3&f)<<4|a>>4,I=1<O?(15&a)<<2|y>>6:64,d=2<O?63&y:64,R.push(i.charAt(l)+i.charAt(v)+i.charAt(I)+i.charAt(d));return R.join("")},o.decode=function(g){var f,a,y,l,v,I,d=0,R=0,w="data:";if(g.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var S,O=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===i.charAt(64)&&O--,g.charAt(g.length-2)===i.charAt(64)&&O--,O%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=u.uint8array?new Uint8Array(0|O):new Array(0|O);d<g.length;)f=i.indexOf(g.charAt(d++))<<2|(l=i.indexOf(g.charAt(d++)))>>4,a=(15&l)<<4|(v=i.indexOf(g.charAt(d++)))>>2,y=(3&v)<<6|(I=i.indexOf(g.charAt(d++))),S[R++]=f,v!==64&&(S[R++]=a),I!==64&&(S[R++]=y);return S}},{"./support":30,"./utils":32}],2:[function(r,n,o){var s=r("./external"),u=r("./stream/DataWorker"),i=r("./stream/Crc32Probe"),g=r("./stream/DataLengthProbe");function f(a,y,l,v,I){this.compressedSize=a,this.uncompressedSize=y,this.crc32=l,this.compression=v,this.compressedContent=I}f.prototype={getContentWorker:function(){var a=new u(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),y=this;return a.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new u(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(a,y,l){return a.pipe(new i).pipe(new g("uncompressedSize")).pipe(y.compressWorker(l)).pipe(new g("compressedSize")).withStreamInfo("compression",y)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,o){var s=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,o){var s=r("./utils"),u=function(){for(var i,g=[],f=0;f<256;f++){i=f;for(var a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;g[f]=i}return g}();n.exports=function(i,g){return i!==void 0&&i.length?s.getTypeOf(i)!=="string"?function(f,a,y,l){var v=u,I=l+y;f^=-1;for(var d=l;d<I;d++)f=f>>>8^v[255&(f^a[d])];return-1^f}(0|g,i,i.length,0):function(f,a,y,l){var v=u,I=l+y;f^=-1;for(var d=l;d<I;d++)f=f>>>8^v[255&(f^a.charCodeAt(d))];return-1^f}(0|g,i,i.length,0):0}},{"./utils":32}],5:[function(r,n,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,n,o){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=r("pako"),i=r("./utils"),g=r("./stream/GenericWorker"),f=s?"uint8array":"array";function a(y,l){g.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=l,this.meta={}}o.magic="\b\0",i.inherits(a,g),a.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(f,y.data),!1)},a.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},a.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},a.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(l){y.push({data:l,meta:y.meta})}},o.compressWorker=function(y){return new a("Deflate",y)},o.uncompressWorker=function(){return new a("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,o){function s(v,I){var d,R="";for(d=0;d<I;d++)R+=String.fromCharCode(255&v),v>>>=8;return R}function u(v,I,d,R,w,S){var O,N,P=v.file,H=v.compression,D=S!==f.utf8encode,K=i.transformTo("string",S(P.name)),U=i.transformTo("string",f.utf8encode(P.name)),ue=P.comment,he=i.transformTo("string",S(ue)),q=i.transformTo("string",f.utf8encode(ue)),Q=U.length!==P.name.length,_=q.length!==ue.length,k="",$="",F="",V=P.dir,j=P.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};I&&!d||(Z.crc32=v.crc32,Z.compressedSize=v.compressedSize,Z.uncompressedSize=v.uncompressedSize);var G=0;I&&(G|=8),D||!Q&&!_||(G|=2048);var Y=0,ye=0;V&&(Y|=16),w==="UNIX"?(ye=798,Y|=function(Te,ct){var ft=Te;return Te||(ft=ct?16893:33204),(65535&ft)<<16}(P.unixPermissions,V)):(ye=20,Y|=function(Te){return 63&(Te||0)}(P.dosPermissions)),O=j.getUTCHours(),O<<=6,O|=j.getUTCMinutes(),O<<=5,O|=j.getUTCSeconds()/2,N=j.getUTCFullYear()-1980,N<<=4,N|=j.getUTCMonth()+1,N<<=5,N|=j.getUTCDate(),Q&&($=s(1,1)+s(a(K),4)+U,k+="up"+s($.length,2)+$),_&&(F=s(1,1)+s(a(he),4)+q,k+="uc"+s(F.length,2)+F);var Ee="";return Ee+=`
\0`,Ee+=s(G,2),Ee+=H.magic,Ee+=s(O,2),Ee+=s(N,2),Ee+=s(Z.crc32,4),Ee+=s(Z.compressedSize,4),Ee+=s(Z.uncompressedSize,4),Ee+=s(K.length,2),Ee+=s(k.length,2),{fileRecord:y.LOCAL_FILE_HEADER+Ee+K+k,dirRecord:y.CENTRAL_FILE_HEADER+s(ye,2)+Ee+s(he.length,2)+"\0\0\0\0"+s(Y,4)+s(R,4)+K+k+he}}var i=r("../utils"),g=r("../stream/GenericWorker"),f=r("../utf8"),a=r("../crc32"),y=r("../signature");function l(v,I,d,R){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=I,this.zipPlatform=d,this.encodeFileName=R,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(l,g),l.prototype.push=function(v){var I=v.meta.percent||0,d=this.entriesCount,R=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,g.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:d?(I+100*(d-R-1))/d:100}}))},l.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var I=this.streamFiles&&!v.file.dir;if(I){var d=u(v,I,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(v){this.accumulate=!1;var I=this.streamFiles&&!v.file.dir,d=u(v,I,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),I)this.push({data:function(R){return y.DATA_DESCRIPTOR+s(R.crc32,4)+s(R.compressedSize,4)+s(R.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var v=this.bytesWritten,I=0;I<this.dirRecords.length;I++)this.push({data:this.dirRecords[I],meta:{percent:100}});var d=this.bytesWritten-v,R=function(w,S,O,N,P){var H=i.transformTo("string",P(N));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(w,2)+s(w,2)+s(S,4)+s(O,4)+s(H.length,2)+H}(this.dirRecords.length,d,v,this.zipComment,this.encodeFileName);this.push({data:R,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(v){this._sources.push(v);var I=this;return v.on("data",function(d){I.processChunk(d)}),v.on("end",function(){I.closedSource(I.previous.streamInfo),I._sources.length?I.prepareNextSource():I.end()}),v.on("error",function(d){I.error(d)}),this},l.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(v){var I=this._sources;if(!g.prototype.error.call(this,v))return!1;for(var d=0;d<I.length;d++)try{I[d].error(v)}catch{}return!0},l.prototype.lock=function(){g.prototype.lock.call(this);for(var v=this._sources,I=0;I<v.length;I++)v[I].lock()},n.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,o){var s=r("../compressions"),u=r("./ZipFileWorker");o.generateWorker=function(i,g,f){var a=new u(g.streamFiles,f,g.platform,g.encodeFileName),y=0;try{i.forEach(function(l,v){y++;var I=function(S,O){var N=S||O,P=s[N];if(!P)throw new Error(N+" is not a valid compression method !");return P}(v.options.compression,g.compression),d=v.options.compressionOptions||g.compressionOptions||{},R=v.dir,w=v.date;v._compressWorker(I,d).withStreamInfo("file",{name:l,dir:R,date:w,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(a)}),a.entriesCount=y}catch(l){a.error(l)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,o){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new s;for(var i in this)typeof this[i]!="function"&&(u[i]=this[i]);return u}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(u,i){return new s().loadAsync(u,i)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,o){var s=r("./utils"),u=r("./external"),i=r("./utf8"),g=r("./zipEntries"),f=r("./stream/Crc32Probe"),a=r("./nodejsUtils");function y(l){return new u.Promise(function(v,I){var d=l.decompressed.getContentWorker().pipe(new f);d.on("error",function(R){I(R)}).on("end",function(){d.streamInfo.crc32!==l.decompressed.crc32?I(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(l,v){var I=this;return v=s.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),a.isNode&&a.isStream(l)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",l,!0,v.optimizedBinaryString,v.base64).then(function(d){var R=new g(v);return R.load(d),R}).then(function(d){var R=[u.Promise.resolve(d)],w=d.files;if(v.checkCRC32)for(var S=0;S<w.length;S++)R.push(y(w[S]));return u.Promise.all(R)}).then(function(d){for(var R=d.shift(),w=R.files,S=0;S<w.length;S++){var O=w[S],N=O.fileNameStr,P=s.resolve(O.fileNameStr);I.file(P,O.decompressed,{binary:!0,optimizedBinaryString:!0,date:O.date,dir:O.dir,comment:O.fileCommentStr.length?O.fileCommentStr:null,unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions,createFolders:v.createFolders}),O.dir||(I.file(P).unsafeOriginalName=N)}return R.zipComment.length&&(I.comment=R.zipComment),I})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,o){var s=r("../utils"),u=r("../stream/GenericWorker");function i(g,f){u.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(i,u),i.prototype._bindStream=function(g){var f=this;(this._stream=g).pause(),g.on("data",function(a){f.push({data:a,meta:{percent:0}})}).on("error",function(a){f.isPaused?this.generatedError=a:f.error(a)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},i.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,o){var s=r("readable-stream").Readable;function u(i,g,f){s.call(this,g),this._helper=i;var a=this;i.on("data",function(y,l){a.push(y)||a._helper.pause(),f&&f(l)}).on("error",function(y){a.emit("error",y)}).on("end",function(){a.push(null)})}r("../utils").inherits(u,s),u.prototype._read=function(){this._helper.resume()},n.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,n,o){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,u);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,u)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var u=new Buffer(s);return u.fill(0),u},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,o){function s(P,H,D){var K,U=i.getTypeOf(H),ue=i.extend(D||{},a);ue.date=ue.date||new Date,ue.compression!==null&&(ue.compression=ue.compression.toUpperCase()),typeof ue.unixPermissions=="string"&&(ue.unixPermissions=parseInt(ue.unixPermissions,8)),ue.unixPermissions&&16384&ue.unixPermissions&&(ue.dir=!0),ue.dosPermissions&&16&ue.dosPermissions&&(ue.dir=!0),ue.dir&&(P=w(P)),ue.createFolders&&(K=R(P))&&S.call(this,K,!0);var he=U==="string"&&ue.binary===!1&&ue.base64===!1;D&&D.binary!==void 0||(ue.binary=!he),(H instanceof y&&H.uncompressedSize===0||ue.dir||!H||H.length===0)&&(ue.base64=!1,ue.binary=!0,H="",ue.compression="STORE",U="string");var q=null;q=H instanceof y||H instanceof g?H:I.isNode&&I.isStream(H)?new d(P,H):i.prepareContent(P,H,ue.binary,ue.optimizedBinaryString,ue.base64);var Q=new l(P,q,ue);this.files[P]=Q}var u=r("./utf8"),i=r("./utils"),g=r("./stream/GenericWorker"),f=r("./stream/StreamHelper"),a=r("./defaults"),y=r("./compressedObject"),l=r("./zipObject"),v=r("./generate"),I=r("./nodejsUtils"),d=r("./nodejs/NodejsStreamInputAdapter"),R=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var H=P.lastIndexOf("/");return 0<H?P.substring(0,H):""},w=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},S=function(P,H){return H=H!==void 0?H:a.createFolders,P=w(P),this.files[P]||s.call(this,P,null,{dir:!0,createFolders:H}),this.files[P]};function O(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var H,D,K;for(H in this.files)K=this.files[H],(D=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&P(D,K)},filter:function(P){var H=[];return this.forEach(function(D,K){P(D,K)&&H.push(K)}),H},file:function(P,H,D){if(arguments.length!==1)return P=this.root+P,s.call(this,P,H,D),this;if(O(P)){var K=P;return this.filter(function(ue,he){return!he.dir&&K.test(ue)})}var U=this.files[this.root+P];return U&&!U.dir?U:null},folder:function(P){if(!P)return this;if(O(P))return this.filter(function(U,ue){return ue.dir&&P.test(U)});var H=this.root+P,D=S.call(this,H),K=this.clone();return K.root=D.name,K},remove:function(P){P=this.root+P;var H=this.files[P];if(H||(P.slice(-1)!=="/"&&(P+="/"),H=this.files[P]),H&&!H.dir)delete this.files[P];else for(var D=this.filter(function(U,ue){return ue.name.slice(0,P.length)===P}),K=0;K<D.length;K++)delete this.files[D[K].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var H,D={};try{if((D=i.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");i.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var K=D.comment||this.comment||"";H=v.generateWorker(this,D,K)}catch(U){(H=new g("error")).error(U)}return new f(H,D.type||"string",D.mimeType)},generateAsync:function(P,H){return this.generateInternalStream(P).accumulate(H)},generateNodeStream:function(P,H){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(H)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,o){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,o){var s=r("./DataReader");function u(i){s.call(this,i);for(var g=0;g<this.data.length;g++)i[g]=255&i[g]}r("../utils").inherits(u,s),u.prototype.byteAt=function(i){return this.data[this.zero+i]},u.prototype.lastIndexOfSignature=function(i){for(var g=i.charCodeAt(0),f=i.charCodeAt(1),a=i.charCodeAt(2),y=i.charCodeAt(3),l=this.length-4;0<=l;--l)if(this.data[l]===g&&this.data[l+1]===f&&this.data[l+2]===a&&this.data[l+3]===y)return l-this.zero;return-1},u.prototype.readAndCheckSignature=function(i){var g=i.charCodeAt(0),f=i.charCodeAt(1),a=i.charCodeAt(2),y=i.charCodeAt(3),l=this.readData(4);return g===l[0]&&f===l[1]&&a===l[2]&&y===l[3]},u.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,n,o){var s=r("../utils");function u(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var g,f=0;for(this.checkOffset(i),g=this.index+i-1;g>=this.index;g--)f=(f<<8)+this.byteAt(g);return this.index+=i,f},readString:function(i){return s.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},n.exports=u},{"../utils":32}],19:[function(r,n,o){var s=r("./Uint8ArrayReader");function u(i){s.call(this,i)}r("../utils").inherits(u,s),u.prototype.readData=function(i){this.checkOffset(i);var g=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,o){var s=r("./DataReader");function u(i){s.call(this,i)}r("../utils").inherits(u,s),u.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},u.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},u.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},u.prototype.readData=function(i){this.checkOffset(i);var g=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,n,o){var s=r("./ArrayReader");function u(i){s.call(this,i)}r("../utils").inherits(u,s),u.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,o){var s=r("../utils"),u=r("../support"),i=r("./ArrayReader"),g=r("./StringReader"),f=r("./NodeBufferReader"),a=r("./Uint8ArrayReader");n.exports=function(y){var l=s.getTypeOf(y);return s.checkSupport(l),l!=="string"||u.uint8array?l==="nodebuffer"?new f(y):u.uint8array?new a(s.transformTo("uint8array",y)):new i(s.transformTo("array",y)):new g(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,o){var s=r("./GenericWorker"),u=r("../utils");function i(g){s.call(this,"ConvertWorker to "+g),this.destType=g}u.inherits(i,s),i.prototype.processChunk=function(g){this.push({data:u.transformTo(this.destType,g.data),meta:g.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,o){var s=r("./GenericWorker"),u=r("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(i,s),i.prototype.processChunk=function(g){this.streamInfo.crc32=u(g.data,this.streamInfo.crc32||0),this.push(g)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,o){var s=r("../utils"),u=r("./GenericWorker");function i(g){u.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}s.inherits(i,u),i.prototype.processChunk=function(g){if(g){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+g.data.length}u.prototype.processChunk.call(this,g)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,o){var s=r("../utils"),u=r("./GenericWorker");function i(g){u.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(a){f.dataIsReady=!0,f.data=a,f.max=a&&a.length||0,f.type=s.getTypeOf(a),f.isPaused||f._tickAndRepeat()},function(a){f.error(a)})}s.inherits(i,u),i.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,f);break;case"uint8array":g=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":g=this.data.slice(this.index,f)}return this.index=f,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,o){function s(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,i){return this._listeners[u].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,i){if(this._listeners[u])for(var g=0;g<this._listeners[u].length;g++)this._listeners[u][g].call(this,i)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var i=this;return u.on("data",function(g){i.processChunk(g)}),u.on("end",function(){i.end()}),u.on("error",function(g){i.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,i){return this.extraStreamInfo[u]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},n.exports=s},{}],29:[function(r,n,o){var s=r("../utils"),u=r("./ConvertWorker"),i=r("./GenericWorker"),g=r("../base64"),f=r("../support"),a=r("../external"),y=null;if(f.nodestream)try{y=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function l(I,d){return new a.Promise(function(R,w){var S=[],O=I._internalType,N=I._outputType,P=I._mimeType;I.on("data",function(H,D){S.push(H),d&&d(D)}).on("error",function(H){S=[],w(H)}).on("end",function(){try{var H=function(D,K,U){switch(D){case"blob":return s.newBlob(s.transformTo("arraybuffer",K),U);case"base64":return g.encode(K);default:return s.transformTo(D,K)}}(N,function(D,K){var U,ue=0,he=null,q=0;for(U=0;U<K.length;U++)q+=K[U].length;switch(D){case"string":return K.join("");case"array":return Array.prototype.concat.apply([],K);case"uint8array":for(he=new Uint8Array(q),U=0;U<K.length;U++)he.set(K[U],ue),ue+=K[U].length;return he;case"nodebuffer":return Buffer.concat(K);default:throw new Error("concat : unsupported type '"+D+"'")}}(O,S),P);R(H)}catch(D){w(D)}S=[]}).resume()})}function v(I,d,R){var w=d;switch(d){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=d,this._mimeType=R,s.checkSupport(w),this._worker=I.pipe(new u(w)),I.lock()}catch(S){this._worker=new i("error"),this._worker.error(S)}}v.prototype={accumulate:function(I){return l(this,I)},on:function(I,d){var R=this;return I==="data"?this._worker.on(I,function(w){d.call(R,w.data,w.meta)}):this._worker.on(I,function(){s.delay(d,arguments,R)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(I){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},I)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var s=new ArrayBuffer(0);try{o.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(s),o.blob=u.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,o){for(var s=r("./utils"),u=r("./support"),i=r("./nodejsUtils"),g=r("./stream/GenericWorker"),f=new Array(256),a=0;a<256;a++)f[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;f[254]=f[254]=1;function y(){g.call(this,"utf-8 decode"),this.leftOver=null}function l(){g.call(this,"utf-8 encode")}o.utf8encode=function(v){return u.nodebuffer?i.newBufferFrom(v,"utf-8"):function(I){var d,R,w,S,O,N=I.length,P=0;for(S=0;S<N;S++)(64512&(R=I.charCodeAt(S)))==55296&&S+1<N&&(64512&(w=I.charCodeAt(S+1)))==56320&&(R=65536+(R-55296<<10)+(w-56320),S++),P+=R<128?1:R<2048?2:R<65536?3:4;for(d=u.uint8array?new Uint8Array(P):new Array(P),S=O=0;O<P;S++)(64512&(R=I.charCodeAt(S)))==55296&&S+1<N&&(64512&(w=I.charCodeAt(S+1)))==56320&&(R=65536+(R-55296<<10)+(w-56320),S++),R<128?d[O++]=R:(R<2048?d[O++]=192|R>>>6:(R<65536?d[O++]=224|R>>>12:(d[O++]=240|R>>>18,d[O++]=128|R>>>12&63),d[O++]=128|R>>>6&63),d[O++]=128|63&R);return d}(v)},o.utf8decode=function(v){return u.nodebuffer?s.transformTo("nodebuffer",v).toString("utf-8"):function(I){var d,R,w,S,O=I.length,N=new Array(2*O);for(d=R=0;d<O;)if((w=I[d++])<128)N[R++]=w;else if(4<(S=f[w]))N[R++]=65533,d+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&d<O;)w=w<<6|63&I[d++],S--;1<S?N[R++]=65533:w<65536?N[R++]=w:(w-=65536,N[R++]=55296|w>>10&1023,N[R++]=56320|1023&w)}return N.length!==R&&(N.subarray?N=N.subarray(0,R):N.length=R),s.applyFromCharCode(N)}(v=s.transformTo(u.uint8array?"uint8array":"array",v))},s.inherits(y,g),y.prototype.processChunk=function(v){var I=s.transformTo(u.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var d=I;(I=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),I.set(d,this.leftOver.length)}else I=this.leftOver.concat(I);this.leftOver=null}var R=function(S,O){var N;for((O=O||S.length)>S.length&&(O=S.length),N=O-1;0<=N&&(192&S[N])==128;)N--;return N<0||N===0?O:N+f[S[N]]>O?N:O}(I),w=I;R!==I.length&&(u.uint8array?(w=I.subarray(0,R),this.leftOver=I.subarray(R,I.length)):(w=I.slice(0,R),this.leftOver=I.slice(R,I.length))),this.push({data:o.utf8decode(w),meta:v.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=y,s.inherits(l,g),l.prototype.processChunk=function(v){this.push({data:o.utf8encode(v.data),meta:v.meta})},o.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,o){var s=r("./support"),u=r("./base64"),i=r("./nodejsUtils"),g=r("./external");function f(d){return d}function a(d,R){for(var w=0;w<d.length;++w)R[w]=255&d.charCodeAt(w);return R}r("setimmediate"),o.newBlob=function(d,R){o.checkSupport("blob");try{return new Blob([d],{type:R})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(d),w.getBlob(R)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(d,R,w){var S=[],O=0,N=d.length;if(N<=w)return String.fromCharCode.apply(null,d);for(;O<N;)R==="array"||R==="nodebuffer"?S.push(String.fromCharCode.apply(null,d.slice(O,Math.min(O+w,N)))):S.push(String.fromCharCode.apply(null,d.subarray(O,Math.min(O+w,N)))),O+=w;return S.join("")},stringifyByChar:function(d){for(var R="",w=0;w<d.length;w++)R+=String.fromCharCode(d[w]);return R},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function l(d){var R=65536,w=o.getTypeOf(d),S=!0;if(w==="uint8array"?S=y.applyCanBeUsed.uint8array:w==="nodebuffer"&&(S=y.applyCanBeUsed.nodebuffer),S)for(;1<R;)try{return y.stringifyByChunk(d,w,R)}catch{R=Math.floor(R/2)}return y.stringifyByChar(d)}function v(d,R){for(var w=0;w<d.length;w++)R[w]=d[w];return R}o.applyFromCharCode=l;var I={};I.string={string:f,array:function(d){return a(d,new Array(d.length))},arraybuffer:function(d){return I.string.uint8array(d).buffer},uint8array:function(d){return a(d,new Uint8Array(d.length))},nodebuffer:function(d){return a(d,i.allocBuffer(d.length))}},I.array={string:l,array:f,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return i.newBufferFrom(d)}},I.arraybuffer={string:function(d){return l(new Uint8Array(d))},array:function(d){return v(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:f,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return i.newBufferFrom(new Uint8Array(d))}},I.uint8array={string:l,array:function(d){return v(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:f,nodebuffer:function(d){return i.newBufferFrom(d)}},I.nodebuffer={string:l,array:function(d){return v(d,new Array(d.length))},arraybuffer:function(d){return I.nodebuffer.uint8array(d).buffer},uint8array:function(d){return v(d,new Uint8Array(d.length))},nodebuffer:f},o.transformTo=function(d,R){if(R=R||"",!d)return R;o.checkSupport(d);var w=o.getTypeOf(R);return I[w][d](R)},o.resolve=function(d){for(var R=d.split("/"),w=[],S=0;S<R.length;S++){var O=R[S];O==="."||O===""&&S!==0&&S!==R.length-1||(O===".."?w.pop():w.push(O))}return w.join("/")},o.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":s.nodebuffer&&i.isBuffer(d)?"nodebuffer":s.uint8array&&d instanceof Uint8Array?"uint8array":s.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(d){if(!s[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(d){var R,w,S="";for(w=0;w<(d||"").length;w++)S+="\\x"+((R=d.charCodeAt(w))<16?"0":"")+R.toString(16).toUpperCase();return S},o.delay=function(d,R,w){setImmediate(function(){d.apply(w||null,R||[])})},o.inherits=function(d,R){function w(){}w.prototype=R.prototype,d.prototype=new w},o.extend=function(){var d,R,w={};for(d=0;d<arguments.length;d++)for(R in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],R)&&w[R]===void 0&&(w[R]=arguments[d][R]);return w},o.prepareContent=function(d,R,w,S,O){return g.Promise.resolve(R).then(function(N){return s.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new g.Promise(function(P,H){var D=new FileReader;D.onload=function(K){P(K.target.result)},D.onerror=function(K){H(K.target.error)},D.readAsArrayBuffer(N)}):N}).then(function(N){var P=o.getTypeOf(N);return P?(P==="arraybuffer"?N=o.transformTo("uint8array",N):P==="string"&&(O?N=u.decode(N):w&&S!==!0&&(N=function(H){return a(H,s.uint8array?new Uint8Array(H.length):new Array(H.length))}(N))),N):g.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,o){var s=r("./reader/readerFor"),u=r("./utils"),i=r("./signature"),g=r("./zipEntry"),f=r("./support");function a(y){this.files=[],this.loadOptions=y}a.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var l=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(l)+", expected "+u.pretty(y)+")")}},isSignature:function(y,l){var v=this.reader.index;this.reader.setIndex(y);var I=this.reader.readString(4)===l;return this.reader.setIndex(v),I},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),l=f.uint8array?"uint8array":"array",v=u.transformTo(l,y);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,l,v,I=this.zip64EndOfCentralSize-44;0<I;)y=this.reader.readInt(2),l=this.reader.readInt(4),v=this.reader.readData(l),this.zip64ExtensibleData[y]={id:y,length:l,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,l;for(y=0;y<this.files.length;y++)l=this.files[y],this.reader.setIndex(l.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),l.readLocalPart(this.reader),l.handleUTF8(),l.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(y=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var l=y;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var I=l-v;if(0<I)this.isSignature(l,i.CENTRAL_FILE_HEADER)||(this.reader.zero=I);else if(I<0)throw new Error("Corrupted zip: missing "+Math.abs(I)+" bytes.")},prepareReader:function(y){this.reader=s(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=a},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,o){var s=r("./reader/readerFor"),u=r("./utils"),i=r("./compressedObject"),g=r("./crc32"),f=r("./utf8"),a=r("./compressions"),y=r("./support");function l(v,I){this.options=v,this.loadOptions=I}l.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var I,d;if(v.skip(22),this.fileNameLength=v.readInt(2),d=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((I=function(R){for(var w in a)if(Object.prototype.hasOwnProperty.call(a,w)&&a[w].magic===R)return a[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,I,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var I=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(I),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=s(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var I,d,R,w=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<w;)I=v.readInt(2),d=v.readInt(2),R=v.readData(d),this.extraFields[I]={id:I,length:d,value:R};v.setIndex(w)},handleUTF8:function(){var v=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var I=this.findExtraFieldUnicodePath();if(I!==null)this.fileNameStr=I;else{var d=u.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var R=this.findExtraFieldUnicodeComment();if(R!==null)this.fileCommentStr=R;else{var w=u.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var I=s(v.value);return I.readInt(1)!==1||g(this.fileName)!==I.readInt(4)?null:f.utf8decode(I.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var I=s(v.value);return I.readInt(1)!==1||g(this.fileComment)!==I.readInt(4)?null:f.utf8decode(I.readData(v.length-5))}return null}},n.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,o){function s(I,d,R){this.name=I,this.dir=R.dir,this.date=R.date,this.comment=R.comment,this.unixPermissions=R.unixPermissions,this.dosPermissions=R.dosPermissions,this._data=d,this._dataBinary=R.binary,this.options={compression:R.compression,compressionOptions:R.compressionOptions}}var u=r("./stream/StreamHelper"),i=r("./stream/DataWorker"),g=r("./utf8"),f=r("./compressedObject"),a=r("./stream/GenericWorker");s.prototype={internalStream:function(I){var d=null,R="string";try{if(!I)throw new Error("No output type specified.");var w=(R=I.toLowerCase())==="string"||R==="text";R!=="binarystring"&&R!=="text"||(R="string"),d=this._decompressWorker();var S=!this._dataBinary;S&&!w&&(d=d.pipe(new g.Utf8EncodeWorker)),!S&&w&&(d=d.pipe(new g.Utf8DecodeWorker))}catch(O){(d=new a("error")).error(O)}return new u(d,R,"")},async:function(I,d){return this.internalStream(I).accumulate(d)},nodeStream:function(I,d){return this.internalStream(I||"nodebuffer").toNodejsStream(d)},_compressWorker:function(I,d){if(this._data instanceof f&&this._data.compression.magic===I.magic)return this._data.getCompressedWorker();var R=this._decompressWorker();return this._dataBinary||(R=R.pipe(new g.Utf8EncodeWorker)),f.createWorkerFrom(R,I,d)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof a?this._data:new i(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<y.length;v++)s.prototype[y[v]]=l;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,o){(function(s){var u,i,g=s.MutationObserver||s.WebKitMutationObserver;if(g){var f=0,a=new g(I),y=s.document.createTextNode("");a.observe(y,{characterData:!0}),u=function(){y.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)u="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var d=s.document.createElement("script");d.onreadystatechange=function(){I(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},s.document.documentElement.appendChild(d)}:function(){setTimeout(I,0)};else{var l=new s.MessageChannel;l.port1.onmessage=I,u=function(){l.port2.postMessage(0)}}var v=[];function I(){var d,R;i=!0;for(var w=v.length;w;){for(R=v,v=[],d=-1;++d<w;)R[d]();w=v.length}i=!1}n.exports=function(d){v.push(d)!==1||i||u()}}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,o){var s=r("immediate");function u(){}var i={},g=["REJECTED"],f=["FULFILLED"],a=["PENDING"];function y(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,w!==u&&d(this,w)}function l(w,S,O){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}function v(w,S,O){s(function(){var N;try{N=S(O)}catch(P){return i.reject(w,P)}N===w?i.reject(w,new TypeError("Cannot resolve promise with itself")):i.resolve(w,N)})}function I(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function d(w,S){var O=!1;function N(D){O||(O=!0,i.reject(w,D))}function P(D){O||(O=!0,i.resolve(w,D))}var H=R(function(){S(P,N)});H.status==="error"&&N(H.value)}function R(w,S){var O={};try{O.value=w(S),O.status="success"}catch(N){O.status="error",O.value=N}return O}(n.exports=y).prototype.finally=function(w){if(typeof w!="function")return this;var S=this.constructor;return this.then(function(O){return S.resolve(w()).then(function(){return O})},function(O){return S.resolve(w()).then(function(){throw O})})},y.prototype.catch=function(w){return this.then(null,w)},y.prototype.then=function(w,S){if(typeof w!="function"&&this.state===f||typeof S!="function"&&this.state===g)return this;var O=new this.constructor(u);return this.state!==a?v(O,this.state===f?w:S,this.outcome):this.queue.push(new l(O,w,S)),O},l.prototype.callFulfilled=function(w){i.resolve(this.promise,w)},l.prototype.otherCallFulfilled=function(w){v(this.promise,this.onFulfilled,w)},l.prototype.callRejected=function(w){i.reject(this.promise,w)},l.prototype.otherCallRejected=function(w){v(this.promise,this.onRejected,w)},i.resolve=function(w,S){var O=R(I,S);if(O.status==="error")return i.reject(w,O.value);var N=O.value;if(N)d(w,N);else{w.state=f,w.outcome=S;for(var P=-1,H=w.queue.length;++P<H;)w.queue[P].callFulfilled(S)}return w},i.reject=function(w,S){w.state=g,w.outcome=S;for(var O=-1,N=w.queue.length;++O<N;)w.queue[O].callRejected(S);return w},y.resolve=function(w){return w instanceof this?w:i.resolve(new this(u),w)},y.reject=function(w){var S=new this(u);return i.reject(S,w)},y.all=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=w.length,N=!1;if(!O)return this.resolve([]);for(var P=new Array(O),H=0,D=-1,K=new this(u);++D<O;)U(w[D],D);return K;function U(ue,he){S.resolve(ue).then(function(q){P[he]=q,++H!==O||N||(N=!0,i.resolve(K,P))},function(q){N||(N=!0,i.reject(K,q))})}},y.race=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=w.length,N=!1;if(!O)return this.resolve([]);for(var P=-1,H=new this(u);++P<O;)D=w[P],S.resolve(D).then(function(K){N||(N=!0,i.resolve(H,K))},function(K){N||(N=!0,i.reject(H,K))});var D;return H}},{immediate:36}],38:[function(r,n,o){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,o){var s=r("./zlib/deflate"),u=r("./utils/common"),i=r("./utils/strings"),g=r("./zlib/messages"),f=r("./zlib/zstream"),a=Object.prototype.toString,y=0,l=-1,v=0,I=8;function d(w){if(!(this instanceof d))return new d(w);this.options=u.assign({level:l,method:I,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},w||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(O!==y)throw new Error(g[O]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var N;if(N=typeof S.dictionary=="string"?i.string2buf(S.dictionary):a.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(O=s.deflateSetDictionary(this.strm,N))!==y)throw new Error(g[O]);this._dict_set=!0}}function R(w,S){var O=new d(S);if(O.push(w,!0),O.err)throw O.msg||g[O.err];return O.result}d.prototype.push=function(w,S){var O,N,P=this.strm,H=this.options.chunkSize;if(this.ended)return!1;N=S===~~S?S:S===!0?4:0,typeof w=="string"?P.input=i.string2buf(w):a.call(w)==="[object ArrayBuffer]"?P.input=new Uint8Array(w):P.input=w,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new u.Buf8(H),P.next_out=0,P.avail_out=H),(O=s.deflate(P,N))!==1&&O!==y)return this.onEnd(O),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(u.shrinkBuf(P.output,P.next_out))):this.onData(u.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&O!==1);return N===4?(O=s.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===y):N!==2||(this.onEnd(y),!(P.avail_out=0))},d.prototype.onData=function(w){this.chunks.push(w)},d.prototype.onEnd=function(w){w===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},o.Deflate=d,o.deflate=R,o.deflateRaw=function(w,S){return(S=S||{}).raw=!0,R(w,S)},o.gzip=function(w,S){return(S=S||{}).gzip=!0,R(w,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,o){var s=r("./zlib/inflate"),u=r("./utils/common"),i=r("./utils/strings"),g=r("./zlib/constants"),f=r("./zlib/messages"),a=r("./zlib/zstream"),y=r("./zlib/gzheader"),l=Object.prototype.toString;function v(d){if(!(this instanceof v))return new v(d);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},d||{});var R=this.options;R.raw&&0<=R.windowBits&&R.windowBits<16&&(R.windowBits=-R.windowBits,R.windowBits===0&&(R.windowBits=-15)),!(0<=R.windowBits&&R.windowBits<16)||d&&d.windowBits||(R.windowBits+=32),15<R.windowBits&&R.windowBits<48&&!(15&R.windowBits)&&(R.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var w=s.inflateInit2(this.strm,R.windowBits);if(w!==g.Z_OK)throw new Error(f[w]);this.header=new y,s.inflateGetHeader(this.strm,this.header)}function I(d,R){var w=new v(R);if(w.push(d,!0),w.err)throw w.msg||f[w.err];return w.result}v.prototype.push=function(d,R){var w,S,O,N,P,H,D=this.strm,K=this.options.chunkSize,U=this.options.dictionary,ue=!1;if(this.ended)return!1;S=R===~~R?R:R===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof d=="string"?D.input=i.binstring2buf(d):l.call(d)==="[object ArrayBuffer]"?D.input=new Uint8Array(d):D.input=d,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new u.Buf8(K),D.next_out=0,D.avail_out=K),(w=s.inflate(D,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&U&&(H=typeof U=="string"?i.string2buf(U):l.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,w=s.inflateSetDictionary(this.strm,H)),w===g.Z_BUF_ERROR&&ue===!0&&(w=g.Z_OK,ue=!1),w!==g.Z_STREAM_END&&w!==g.Z_OK)return this.onEnd(w),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&w!==g.Z_STREAM_END&&(D.avail_in!==0||S!==g.Z_FINISH&&S!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(O=i.utf8border(D.output,D.next_out),N=D.next_out-O,P=i.buf2string(D.output,O),D.next_out=N,D.avail_out=K-N,N&&u.arraySet(D.output,D.output,O,N,0),this.onData(P)):this.onData(u.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(ue=!0)}while((0<D.avail_in||D.avail_out===0)&&w!==g.Z_STREAM_END);return w===g.Z_STREAM_END&&(S=g.Z_FINISH),S===g.Z_FINISH?(w=s.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===g.Z_OK):S!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(D.avail_out=0))},v.prototype.onData=function(d){this.chunks.push(d)},v.prototype.onEnd=function(d){d===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},o.Inflate=v,o.inflate=I,o.inflateRaw=function(d,R){return(R=R||{}).raw=!0,I(d,R)},o.ungzip=I},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(g){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var a=f.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var y in a)a.hasOwnProperty(y)&&(g[y]=a[y])}}return g},o.shrinkBuf=function(g,f){return g.length===f?g:g.subarray?g.subarray(0,f):(g.length=f,g)};var u={arraySet:function(g,f,a,y,l){if(f.subarray&&g.subarray)g.set(f.subarray(a,a+y),l);else for(var v=0;v<y;v++)g[l+v]=f[a+v]},flattenChunks:function(g){var f,a,y,l,v,I;for(f=y=0,a=g.length;f<a;f++)y+=g[f].length;for(I=new Uint8Array(y),f=l=0,a=g.length;f<a;f++)v=g[f],I.set(v,l),l+=v.length;return I}},i={arraySet:function(g,f,a,y,l){for(var v=0;v<y;v++)g[l+v]=f[a+v]},flattenChunks:function(g){return[].concat.apply([],g)}};o.setTyped=function(g){g?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,i))},o.setTyped(s)},{}],42:[function(r,n,o){var s=r("./common"),u=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var g=new s.Buf8(256),f=0;f<256;f++)g[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function a(y,l){if(l<65537&&(y.subarray&&i||!y.subarray&&u))return String.fromCharCode.apply(null,s.shrinkBuf(y,l));for(var v="",I=0;I<l;I++)v+=String.fromCharCode(y[I]);return v}g[254]=g[254]=1,o.string2buf=function(y){var l,v,I,d,R,w=y.length,S=0;for(d=0;d<w;d++)(64512&(v=y.charCodeAt(d)))==55296&&d+1<w&&(64512&(I=y.charCodeAt(d+1)))==56320&&(v=65536+(v-55296<<10)+(I-56320),d++),S+=v<128?1:v<2048?2:v<65536?3:4;for(l=new s.Buf8(S),d=R=0;R<S;d++)(64512&(v=y.charCodeAt(d)))==55296&&d+1<w&&(64512&(I=y.charCodeAt(d+1)))==56320&&(v=65536+(v-55296<<10)+(I-56320),d++),v<128?l[R++]=v:(v<2048?l[R++]=192|v>>>6:(v<65536?l[R++]=224|v>>>12:(l[R++]=240|v>>>18,l[R++]=128|v>>>12&63),l[R++]=128|v>>>6&63),l[R++]=128|63&v);return l},o.buf2binstring=function(y){return a(y,y.length)},o.binstring2buf=function(y){for(var l=new s.Buf8(y.length),v=0,I=l.length;v<I;v++)l[v]=y.charCodeAt(v);return l},o.buf2string=function(y,l){var v,I,d,R,w=l||y.length,S=new Array(2*w);for(v=I=0;v<w;)if((d=y[v++])<128)S[I++]=d;else if(4<(R=g[d]))S[I++]=65533,v+=R-1;else{for(d&=R===2?31:R===3?15:7;1<R&&v<w;)d=d<<6|63&y[v++],R--;1<R?S[I++]=65533:d<65536?S[I++]=d:(d-=65536,S[I++]=55296|d>>10&1023,S[I++]=56320|1023&d)}return a(S,I)},o.utf8border=function(y,l){var v;for((l=l||y.length)>y.length&&(l=y.length),v=l-1;0<=v&&(192&y[v])==128;)v--;return v<0||v===0?l:v+g[y[v]]>l?v:l}},{"./common":41}],43:[function(r,n,o){n.exports=function(s,u,i,g){for(var f=65535&s|0,a=s>>>16&65535|0,y=0;i!==0;){for(i-=y=2e3<i?2e3:i;a=a+(f=f+u[g++]|0)|0,--y;);f%=65521,a%=65521}return f|a<<16|0}},{}],44:[function(r,n,o){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,o){var s=function(){for(var u,i=[],g=0;g<256;g++){u=g;for(var f=0;f<8;f++)u=1&u?3988292384^u>>>1:u>>>1;i[g]=u}return i}();n.exports=function(u,i,g,f){var a=s,y=f+g;u^=-1;for(var l=f;l<y;l++)u=u>>>8^a[255&(u^i[l])];return-1^u}},{}],46:[function(r,n,o){var s,u=r("../utils/common"),i=r("./trees"),g=r("./adler32"),f=r("./crc32"),a=r("./messages"),y=0,l=4,v=0,I=-2,d=-1,R=4,w=2,S=8,O=9,N=286,P=30,H=19,D=2*N+1,K=15,U=3,ue=258,he=ue+U+1,q=42,Q=113,_=1,k=2,$=3,F=4;function V(T,Se){return T.msg=a[Se],Se}function j(T){return(T<<1)-(4<T?9:0)}function Z(T){for(var Se=T.length;0<=--Se;)T[Se]=0}function G(T){var Se=T.state,Ae=Se.pending;Ae>T.avail_out&&(Ae=T.avail_out),Ae!==0&&(u.arraySet(T.output,Se.pending_buf,Se.pending_out,Ae,T.next_out),T.next_out+=Ae,Se.pending_out+=Ae,T.total_out+=Ae,T.avail_out-=Ae,Se.pending-=Ae,Se.pending===0&&(Se.pending_out=0))}function Y(T,Se){i._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,Se),T.block_start=T.strstart,G(T.strm)}function ye(T,Se){T.pending_buf[T.pending++]=Se}function Ee(T,Se){T.pending_buf[T.pending++]=Se>>>8&255,T.pending_buf[T.pending++]=255&Se}function Te(T,Se){var Ae,se,ne=T.max_chain_length,ve=T.strstart,Re=T.prev_length,Pe=T.nice_match,we=T.strstart>T.w_size-he?T.strstart-(T.w_size-he):0,Fe=T.window,Ve=T.w_mask,m=T.prev,A=T.strstart+ue,h=Fe[ve+Re-1],c=Fe[ve+Re];T.prev_length>=T.good_match&&(ne>>=2),Pe>T.lookahead&&(Pe=T.lookahead);do if(Fe[(Ae=Se)+Re]===c&&Fe[Ae+Re-1]===h&&Fe[Ae]===Fe[ve]&&Fe[++Ae]===Fe[ve+1]){ve+=2,Ae++;do;while(Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&ve<A);if(se=ue-(A-ve),ve=A-ue,Re<se){if(T.match_start=Se,Pe<=(Re=se))break;h=Fe[ve+Re-1],c=Fe[ve+Re]}}while((Se=m[Se&Ve])>we&&--ne!=0);return Re<=T.lookahead?Re:T.lookahead}function ct(T){var Se,Ae,se,ne,ve,Re,Pe,we,Fe,Ve,m=T.w_size;do{if(ne=T.window_size-T.lookahead-T.strstart,T.strstart>=m+(m-he)){for(u.arraySet(T.window,T.window,m,m,0),T.match_start-=m,T.strstart-=m,T.block_start-=m,Se=Ae=T.hash_size;se=T.head[--Se],T.head[Se]=m<=se?se-m:0,--Ae;);for(Se=Ae=m;se=T.prev[--Se],T.prev[Se]=m<=se?se-m:0,--Ae;);ne+=m}if(T.strm.avail_in===0)break;if(Re=T.strm,Pe=T.window,we=T.strstart+T.lookahead,Fe=ne,Ve=void 0,Ve=Re.avail_in,Fe<Ve&&(Ve=Fe),Ae=Ve===0?0:(Re.avail_in-=Ve,u.arraySet(Pe,Re.input,Re.next_in,Ve,we),Re.state.wrap===1?Re.adler=g(Re.adler,Pe,Ve,we):Re.state.wrap===2&&(Re.adler=f(Re.adler,Pe,Ve,we)),Re.next_in+=Ve,Re.total_in+=Ve,Ve),T.lookahead+=Ae,T.lookahead+T.insert>=U)for(ve=T.strstart-T.insert,T.ins_h=T.window[ve],T.ins_h=(T.ins_h<<T.hash_shift^T.window[ve+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[ve+U-1])&T.hash_mask,T.prev[ve&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=ve,ve++,T.insert--,!(T.lookahead+T.insert<U)););}while(T.lookahead<he&&T.strm.avail_in!==0)}function ft(T,Se){for(var Ae,se;;){if(T.lookahead<he){if(ct(T),T.lookahead<he&&Se===y)return _;if(T.lookahead===0)break}if(Ae=0,T.lookahead>=U&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+U-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),Ae!==0&&T.strstart-Ae<=T.w_size-he&&(T.match_length=Te(T,Ae)),T.match_length>=U)if(se=i._tr_tally(T,T.strstart-T.match_start,T.match_length-U),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=U){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+U-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else se=i._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(se&&(Y(T,!1),T.strm.avail_out===0))return _}return T.insert=T.strstart<U-1?T.strstart:U-1,Se===l?(Y(T,!0),T.strm.avail_out===0?$:F):T.last_lit&&(Y(T,!1),T.strm.avail_out===0)?_:k}function Ze(T,Se){for(var Ae,se,ne;;){if(T.lookahead<he){if(ct(T),T.lookahead<he&&Se===y)return _;if(T.lookahead===0)break}if(Ae=0,T.lookahead>=U&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+U-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=U-1,Ae!==0&&T.prev_length<T.max_lazy_match&&T.strstart-Ae<=T.w_size-he&&(T.match_length=Te(T,Ae),T.match_length<=5&&(T.strategy===1||T.match_length===U&&4096<T.strstart-T.match_start)&&(T.match_length=U-1)),T.prev_length>=U&&T.match_length<=T.prev_length){for(ne=T.strstart+T.lookahead-U,se=i._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-U),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=ne&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+U-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=U-1,T.strstart++,se&&(Y(T,!1),T.strm.avail_out===0))return _}else if(T.match_available){if((se=i._tr_tally(T,0,T.window[T.strstart-1]))&&Y(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return _}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(se=i._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<U-1?T.strstart:U-1,Se===l?(Y(T,!0),T.strm.avail_out===0?$:F):T.last_lit&&(Y(T,!1),T.strm.avail_out===0)?_:k}function et(T,Se,Ae,se,ne){this.good_length=T,this.max_lazy=Se,this.nice_length=Ae,this.max_chain=se,this.func=ne}function Qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*D),this.dyn_dtree=new u.Buf16(2*(2*P+1)),this.bl_tree=new u.Buf16(2*(2*H+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(K+1),this.heap=new u.Buf16(2*N+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*N+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Je(T){var Se;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=w,(Se=T.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?q:Q,T.adler=Se.wrap===2?0:1,Se.last_flush=y,i._tr_init(Se),v):V(T,I)}function ht(T){var Se=Je(T);return Se===v&&function(Ae){Ae.window_size=2*Ae.w_size,Z(Ae.head),Ae.max_lazy_match=s[Ae.level].max_lazy,Ae.good_match=s[Ae.level].good_length,Ae.nice_match=s[Ae.level].nice_length,Ae.max_chain_length=s[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=U-1,Ae.match_available=0,Ae.ins_h=0}(T.state),Se}function lt(T,Se,Ae,se,ne,ve){if(!T)return I;var Re=1;if(Se===d&&(Se=6),se<0?(Re=0,se=-se):15<se&&(Re=2,se-=16),ne<1||O<ne||Ae!==S||se<8||15<se||Se<0||9<Se||ve<0||R<ve)return V(T,I);se===8&&(se=9);var Pe=new Qe;return(T.state=Pe).strm=T,Pe.wrap=Re,Pe.gzhead=null,Pe.w_bits=se,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=ne+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+U-1)/U),Pe.window=new u.Buf8(2*Pe.w_size),Pe.head=new u.Buf16(Pe.hash_size),Pe.prev=new u.Buf16(Pe.w_size),Pe.lit_bufsize=1<<ne+6,Pe.pending_buf_size=4*Pe.lit_bufsize,Pe.pending_buf=new u.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=Se,Pe.strategy=ve,Pe.method=Ae,ht(T)}s=[new et(0,0,0,0,function(T,Se){var Ae=65535;for(Ae>T.pending_buf_size-5&&(Ae=T.pending_buf_size-5);;){if(T.lookahead<=1){if(ct(T),T.lookahead===0&&Se===y)return _;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var se=T.block_start+Ae;if((T.strstart===0||T.strstart>=se)&&(T.lookahead=T.strstart-se,T.strstart=se,Y(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-he&&(Y(T,!1),T.strm.avail_out===0))return _}return T.insert=0,Se===l?(Y(T,!0),T.strm.avail_out===0?$:F):(T.strstart>T.block_start&&(Y(T,!1),T.strm.avail_out),_)}),new et(4,4,8,4,ft),new et(4,5,16,8,ft),new et(4,6,32,32,ft),new et(4,4,16,16,Ze),new et(8,16,32,32,Ze),new et(8,16,128,128,Ze),new et(8,32,128,256,Ze),new et(32,128,258,1024,Ze),new et(32,258,258,4096,Ze)],o.deflateInit=function(T,Se){return lt(T,Se,S,15,8,0)},o.deflateInit2=lt,o.deflateReset=ht,o.deflateResetKeep=Je,o.deflateSetHeader=function(T,Se){return T&&T.state?T.state.wrap!==2?I:(T.state.gzhead=Se,v):I},o.deflate=function(T,Se){var Ae,se,ne,ve;if(!T||!T.state||5<Se||Se<0)return T?V(T,I):I;if(se=T.state,!T.output||!T.input&&T.avail_in!==0||se.status===666&&Se!==l)return V(T,T.avail_out===0?-5:I);if(se.strm=T,Ae=se.last_flush,se.last_flush=Se,se.status===q)if(se.wrap===2)T.adler=0,ye(se,31),ye(se,139),ye(se,8),se.gzhead?(ye(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),ye(se,255&se.gzhead.time),ye(se,se.gzhead.time>>8&255),ye(se,se.gzhead.time>>16&255),ye(se,se.gzhead.time>>24&255),ye(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ye(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(ye(se,255&se.gzhead.extra.length),ye(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(T.adler=f(T.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(ye(se,0),ye(se,0),ye(se,0),ye(se,0),ye(se,0),ye(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ye(se,3),se.status=Q);else{var Re=S+(se.w_bits-8<<4)<<8;Re|=(2<=se.strategy||se.level<2?0:se.level<6?1:se.level===6?2:3)<<6,se.strstart!==0&&(Re|=32),Re+=31-Re%31,se.status=Q,Ee(se,Re),se.strstart!==0&&(Ee(se,T.adler>>>16),Ee(se,65535&T.adler)),T.adler=1}if(se.status===69)if(se.gzhead.extra){for(ne=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ne&&(T.adler=f(T.adler,se.pending_buf,se.pending-ne,ne)),G(T),ne=se.pending,se.pending!==se.pending_buf_size));)ye(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ne&&(T.adler=f(T.adler,se.pending_buf,se.pending-ne,ne)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(se.status===73)if(se.gzhead.name){ne=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ne&&(T.adler=f(T.adler,se.pending_buf,se.pending-ne,ne)),G(T),ne=se.pending,se.pending===se.pending_buf_size)){ve=1;break}ve=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,ye(se,ve)}while(ve!==0);se.gzhead.hcrc&&se.pending>ne&&(T.adler=f(T.adler,se.pending_buf,se.pending-ne,ne)),ve===0&&(se.gzindex=0,se.status=91)}else se.status=91;if(se.status===91)if(se.gzhead.comment){ne=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ne&&(T.adler=f(T.adler,se.pending_buf,se.pending-ne,ne)),G(T),ne=se.pending,se.pending===se.pending_buf_size)){ve=1;break}ve=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,ye(se,ve)}while(ve!==0);se.gzhead.hcrc&&se.pending>ne&&(T.adler=f(T.adler,se.pending_buf,se.pending-ne,ne)),ve===0&&(se.status=103)}else se.status=103;if(se.status===103&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&G(T),se.pending+2<=se.pending_buf_size&&(ye(se,255&T.adler),ye(se,T.adler>>8&255),T.adler=0,se.status=Q)):se.status=Q),se.pending!==0){if(G(T),T.avail_out===0)return se.last_flush=-1,v}else if(T.avail_in===0&&j(Se)<=j(Ae)&&Se!==l)return V(T,-5);if(se.status===666&&T.avail_in!==0)return V(T,-5);if(T.avail_in!==0||se.lookahead!==0||Se!==y&&se.status!==666){var Pe=se.strategy===2?function(we,Fe){for(var Ve;;){if(we.lookahead===0&&(ct(we),we.lookahead===0)){if(Fe===y)return _;break}if(we.match_length=0,Ve=i._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,Ve&&(Y(we,!1),we.strm.avail_out===0))return _}return we.insert=0,Fe===l?(Y(we,!0),we.strm.avail_out===0?$:F):we.last_lit&&(Y(we,!1),we.strm.avail_out===0)?_:k}(se,Se):se.strategy===3?function(we,Fe){for(var Ve,m,A,h,c=we.window;;){if(we.lookahead<=ue){if(ct(we),we.lookahead<=ue&&Fe===y)return _;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=U&&0<we.strstart&&(m=c[A=we.strstart-1])===c[++A]&&m===c[++A]&&m===c[++A]){h=we.strstart+ue;do;while(m===c[++A]&&m===c[++A]&&m===c[++A]&&m===c[++A]&&m===c[++A]&&m===c[++A]&&m===c[++A]&&m===c[++A]&&A<h);we.match_length=ue-(h-A),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=U?(Ve=i._tr_tally(we,1,we.match_length-U),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(Ve=i._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),Ve&&(Y(we,!1),we.strm.avail_out===0))return _}return we.insert=0,Fe===l?(Y(we,!0),we.strm.avail_out===0?$:F):we.last_lit&&(Y(we,!1),we.strm.avail_out===0)?_:k}(se,Se):s[se.level].func(se,Se);if(Pe!==$&&Pe!==F||(se.status=666),Pe===_||Pe===$)return T.avail_out===0&&(se.last_flush=-1),v;if(Pe===k&&(Se===1?i._tr_align(se):Se!==5&&(i._tr_stored_block(se,0,0,!1),Se===3&&(Z(se.head),se.lookahead===0&&(se.strstart=0,se.block_start=0,se.insert=0))),G(T),T.avail_out===0))return se.last_flush=-1,v}return Se!==l?v:se.wrap<=0?1:(se.wrap===2?(ye(se,255&T.adler),ye(se,T.adler>>8&255),ye(se,T.adler>>16&255),ye(se,T.adler>>24&255),ye(se,255&T.total_in),ye(se,T.total_in>>8&255),ye(se,T.total_in>>16&255),ye(se,T.total_in>>24&255)):(Ee(se,T.adler>>>16),Ee(se,65535&T.adler)),G(T),0<se.wrap&&(se.wrap=-se.wrap),se.pending!==0?v:1)},o.deflateEnd=function(T){var Se;return T&&T.state?(Se=T.state.status)!==q&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==Q&&Se!==666?V(T,I):(T.state=null,Se===Q?V(T,-3):v):I},o.deflateSetDictionary=function(T,Se){var Ae,se,ne,ve,Re,Pe,we,Fe,Ve=Se.length;if(!T||!T.state||(ve=(Ae=T.state).wrap)===2||ve===1&&Ae.status!==q||Ae.lookahead)return I;for(ve===1&&(T.adler=g(T.adler,Se,Ve,0)),Ae.wrap=0,Ve>=Ae.w_size&&(ve===0&&(Z(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),Fe=new u.Buf8(Ae.w_size),u.arraySet(Fe,Se,Ve-Ae.w_size,Ae.w_size,0),Se=Fe,Ve=Ae.w_size),Re=T.avail_in,Pe=T.next_in,we=T.input,T.avail_in=Ve,T.next_in=0,T.input=Se,ct(Ae);Ae.lookahead>=U;){for(se=Ae.strstart,ne=Ae.lookahead-(U-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[se+U-1])&Ae.hash_mask,Ae.prev[se&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=se,se++,--ne;);Ae.strstart=se,Ae.lookahead=U-1,ct(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=U-1,Ae.match_available=0,T.next_in=Pe,T.input=we,T.avail_in=Re,Ae.wrap=ve,v},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,o){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,o){n.exports=function(s,u){var i,g,f,a,y,l,v,I,d,R,w,S,O,N,P,H,D,K,U,ue,he,q,Q,_,k;i=s.state,g=s.next_in,_=s.input,f=g+(s.avail_in-5),a=s.next_out,k=s.output,y=a-(u-s.avail_out),l=a+(s.avail_out-257),v=i.dmax,I=i.wsize,d=i.whave,R=i.wnext,w=i.window,S=i.hold,O=i.bits,N=i.lencode,P=i.distcode,H=(1<<i.lenbits)-1,D=(1<<i.distbits)-1;e:do{O<15&&(S+=_[g++]<<O,O+=8,S+=_[g++]<<O,O+=8),K=N[S&H];t:for(;;){if(S>>>=U=K>>>24,O-=U,(U=K>>>16&255)===0)k[a++]=65535&K;else{if(!(16&U)){if(!(64&U)){K=N[(65535&K)+(S&(1<<U)-1)];continue t}if(32&U){i.mode=12;break e}s.msg="invalid literal/length code",i.mode=30;break e}ue=65535&K,(U&=15)&&(O<U&&(S+=_[g++]<<O,O+=8),ue+=S&(1<<U)-1,S>>>=U,O-=U),O<15&&(S+=_[g++]<<O,O+=8,S+=_[g++]<<O,O+=8),K=P[S&D];r:for(;;){if(S>>>=U=K>>>24,O-=U,!(16&(U=K>>>16&255))){if(!(64&U)){K=P[(65535&K)+(S&(1<<U)-1)];continue r}s.msg="invalid distance code",i.mode=30;break e}if(he=65535&K,O<(U&=15)&&(S+=_[g++]<<O,(O+=8)<U&&(S+=_[g++]<<O,O+=8)),v<(he+=S&(1<<U)-1)){s.msg="invalid distance too far back",i.mode=30;break e}if(S>>>=U,O-=U,(U=a-y)<he){if(d<(U=he-U)&&i.sane){s.msg="invalid distance too far back",i.mode=30;break e}if(Q=w,(q=0)===R){if(q+=I-U,U<ue){for(ue-=U;k[a++]=w[q++],--U;);q=a-he,Q=k}}else if(R<U){if(q+=I+R-U,(U-=R)<ue){for(ue-=U;k[a++]=w[q++],--U;);if(q=0,R<ue){for(ue-=U=R;k[a++]=w[q++],--U;);q=a-he,Q=k}}}else if(q+=R-U,U<ue){for(ue-=U;k[a++]=w[q++],--U;);q=a-he,Q=k}for(;2<ue;)k[a++]=Q[q++],k[a++]=Q[q++],k[a++]=Q[q++],ue-=3;ue&&(k[a++]=Q[q++],1<ue&&(k[a++]=Q[q++]))}else{for(q=a-he;k[a++]=k[q++],k[a++]=k[q++],k[a++]=k[q++],2<(ue-=3););ue&&(k[a++]=k[q++],1<ue&&(k[a++]=k[q++]))}break}}break}}while(g<f&&a<l);g-=ue=O>>3,S&=(1<<(O-=ue<<3))-1,s.next_in=g,s.next_out=a,s.avail_in=g<f?f-g+5:5-(g-f),s.avail_out=a<l?l-a+257:257-(a-l),i.hold=S,i.bits=O}},{}],49:[function(r,n,o){var s=r("../utils/common"),u=r("./adler32"),i=r("./crc32"),g=r("./inffast"),f=r("./inftrees"),a=1,y=2,l=0,v=-2,I=1,d=852,R=592;function w(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(q){var Q;return q&&q.state?(Q=q.state,q.total_in=q.total_out=Q.total=0,q.msg="",Q.wrap&&(q.adler=1&Q.wrap),Q.mode=I,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new s.Buf32(d),Q.distcode=Q.distdyn=new s.Buf32(R),Q.sane=1,Q.back=-1,l):v}function N(q){var Q;return q&&q.state?((Q=q.state).wsize=0,Q.whave=0,Q.wnext=0,O(q)):v}function P(q,Q){var _,k;return q&&q.state?(k=q.state,Q<0?(_=0,Q=-Q):(_=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?v:(k.window!==null&&k.wbits!==Q&&(k.window=null),k.wrap=_,k.wbits=Q,N(q))):v}function H(q,Q){var _,k;return q?(k=new S,(q.state=k).window=null,(_=P(q,Q))!==l&&(q.state=null),_):v}var D,K,U=!0;function ue(q){if(U){var Q;for(D=new s.Buf32(512),K=new s.Buf32(32),Q=0;Q<144;)q.lens[Q++]=8;for(;Q<256;)q.lens[Q++]=9;for(;Q<280;)q.lens[Q++]=7;for(;Q<288;)q.lens[Q++]=8;for(f(a,q.lens,0,288,D,0,q.work,{bits:9}),Q=0;Q<32;)q.lens[Q++]=5;f(y,q.lens,0,32,K,0,q.work,{bits:5}),U=!1}q.lencode=D,q.lenbits=9,q.distcode=K,q.distbits=5}function he(q,Q,_,k){var $,F=q.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new s.Buf8(F.wsize)),k>=F.wsize?(s.arraySet(F.window,Q,_-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(k<($=F.wsize-F.wnext)&&($=k),s.arraySet(F.window,Q,_-k,$,F.wnext),(k-=$)?(s.arraySet(F.window,Q,_-k,k,0),F.wnext=k,F.whave=F.wsize):(F.wnext+=$,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=$))),0}o.inflateReset=N,o.inflateReset2=P,o.inflateResetKeep=O,o.inflateInit=function(q){return H(q,15)},o.inflateInit2=H,o.inflate=function(q,Q){var _,k,$,F,V,j,Z,G,Y,ye,Ee,Te,ct,ft,Ze,et,Qe,Je,ht,lt,T,Se,Ae,se,ne=0,ve=new s.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!q||!q.state||!q.output||!q.input&&q.avail_in!==0)return v;(_=q.state).mode===12&&(_.mode=13),V=q.next_out,$=q.output,Z=q.avail_out,F=q.next_in,k=q.input,j=q.avail_in,G=_.hold,Y=_.bits,ye=j,Ee=Z,Se=l;e:for(;;)switch(_.mode){case I:if(_.wrap===0){_.mode=13;break}for(;Y<16;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(2&_.wrap&&G===35615){ve[_.check=0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0),Y=G=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&G)<<8)+(G>>8))%31){q.msg="incorrect header check",_.mode=30;break}if((15&G)!=8){q.msg="unknown compression method",_.mode=30;break}if(Y-=4,T=8+(15&(G>>>=4)),_.wbits===0)_.wbits=T;else if(T>_.wbits){q.msg="invalid window size",_.mode=30;break}_.dmax=1<<T,q.adler=_.check=1,_.mode=512&G?10:12,Y=G=0;break;case 2:for(;Y<16;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(_.flags=G,(255&_.flags)!=8){q.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){q.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=G>>8&1),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0)),Y=G=0,_.mode=3;case 3:for(;Y<32;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}_.head&&(_.head.time=G),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,ve[2]=G>>>16&255,ve[3]=G>>>24&255,_.check=i(_.check,ve,4,0)),Y=G=0,_.mode=4;case 4:for(;Y<16;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}_.head&&(_.head.xflags=255&G,_.head.os=G>>8),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0)),Y=G=0,_.mode=5;case 5:if(1024&_.flags){for(;Y<16;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}_.length=G,_.head&&(_.head.extra_len=G),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0)),Y=G=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(j<(Te=_.length)&&(Te=j),Te&&(_.head&&(T=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,k,F,Te,T)),512&_.flags&&(_.check=i(_.check,k,Te,F)),j-=Te,F+=Te,_.length-=Te),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(j===0)break e;for(Te=0;T=k[F+Te++],_.head&&T&&_.length<65536&&(_.head.name+=String.fromCharCode(T)),T&&Te<j;);if(512&_.flags&&(_.check=i(_.check,k,Te,F)),j-=Te,F+=Te,T)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(j===0)break e;for(Te=0;T=k[F+Te++],_.head&&T&&_.length<65536&&(_.head.comment+=String.fromCharCode(T)),T&&Te<j;);if(512&_.flags&&(_.check=i(_.check,k,Te,F)),j-=Te,F+=Te,T)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;Y<16;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(G!==(65535&_.check)){q.msg="header crc mismatch",_.mode=30;break}Y=G=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),q.adler=_.check=0,_.mode=12;break;case 10:for(;Y<32;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}q.adler=_.check=w(G),Y=G=0,_.mode=11;case 11:if(_.havedict===0)return q.next_out=V,q.avail_out=Z,q.next_in=F,q.avail_in=j,_.hold=G,_.bits=Y,2;q.adler=_.check=1,_.mode=12;case 12:if(Q===5||Q===6)break e;case 13:if(_.last){G>>>=7&Y,Y-=7&Y,_.mode=27;break}for(;Y<3;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}switch(_.last=1&G,Y-=1,3&(G>>>=1)){case 0:_.mode=14;break;case 1:if(ue(_),_.mode=20,Q!==6)break;G>>>=2,Y-=2;break e;case 2:_.mode=17;break;case 3:q.msg="invalid block type",_.mode=30}G>>>=2,Y-=2;break;case 14:for(G>>>=7&Y,Y-=7&Y;Y<32;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if((65535&G)!=(G>>>16^65535)){q.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&G,Y=G=0,_.mode=15,Q===6)break e;case 15:_.mode=16;case 16:if(Te=_.length){if(j<Te&&(Te=j),Z<Te&&(Te=Z),Te===0)break e;s.arraySet($,k,F,Te,V),j-=Te,F+=Te,Z-=Te,V+=Te,_.length-=Te;break}_.mode=12;break;case 17:for(;Y<14;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(_.nlen=257+(31&G),G>>>=5,Y-=5,_.ndist=1+(31&G),G>>>=5,Y-=5,_.ncode=4+(15&G),G>>>=4,Y-=4,286<_.nlen||30<_.ndist){q.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;Y<3;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}_.lens[Re[_.have++]]=7&G,G>>>=3,Y-=3}for(;_.have<19;)_.lens[Re[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,Ae={bits:_.lenbits},Se=f(0,_.lens,0,19,_.lencode,0,_.work,Ae),_.lenbits=Ae.bits,Se){q.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;et=(ne=_.lencode[G&(1<<_.lenbits)-1])>>>16&255,Qe=65535&ne,!((Ze=ne>>>24)<=Y);){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(Qe<16)G>>>=Ze,Y-=Ze,_.lens[_.have++]=Qe;else{if(Qe===16){for(se=Ze+2;Y<se;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(G>>>=Ze,Y-=Ze,_.have===0){q.msg="invalid bit length repeat",_.mode=30;break}T=_.lens[_.have-1],Te=3+(3&G),G>>>=2,Y-=2}else if(Qe===17){for(se=Ze+3;Y<se;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}Y-=Ze,T=0,Te=3+(7&(G>>>=Ze)),G>>>=3,Y-=3}else{for(se=Ze+7;Y<se;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}Y-=Ze,T=0,Te=11+(127&(G>>>=Ze)),G>>>=7,Y-=7}if(_.have+Te>_.nlen+_.ndist){q.msg="invalid bit length repeat",_.mode=30;break}for(;Te--;)_.lens[_.have++]=T}}if(_.mode===30)break;if(_.lens[256]===0){q.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,Ae={bits:_.lenbits},Se=f(a,_.lens,0,_.nlen,_.lencode,0,_.work,Ae),_.lenbits=Ae.bits,Se){q.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,Ae={bits:_.distbits},Se=f(y,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,Ae),_.distbits=Ae.bits,Se){q.msg="invalid distances set",_.mode=30;break}if(_.mode=20,Q===6)break e;case 20:_.mode=21;case 21:if(6<=j&&258<=Z){q.next_out=V,q.avail_out=Z,q.next_in=F,q.avail_in=j,_.hold=G,_.bits=Y,g(q,Ee),V=q.next_out,$=q.output,Z=q.avail_out,F=q.next_in,k=q.input,j=q.avail_in,G=_.hold,Y=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;et=(ne=_.lencode[G&(1<<_.lenbits)-1])>>>16&255,Qe=65535&ne,!((Ze=ne>>>24)<=Y);){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(et&&!(240&et)){for(Je=Ze,ht=et,lt=Qe;et=(ne=_.lencode[lt+((G&(1<<Je+ht)-1)>>Je)])>>>16&255,Qe=65535&ne,!(Je+(Ze=ne>>>24)<=Y);){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}G>>>=Je,Y-=Je,_.back+=Je}if(G>>>=Ze,Y-=Ze,_.back+=Ze,_.length=Qe,et===0){_.mode=26;break}if(32&et){_.back=-1,_.mode=12;break}if(64&et){q.msg="invalid literal/length code",_.mode=30;break}_.extra=15&et,_.mode=22;case 22:if(_.extra){for(se=_.extra;Y<se;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}_.length+=G&(1<<_.extra)-1,G>>>=_.extra,Y-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;et=(ne=_.distcode[G&(1<<_.distbits)-1])>>>16&255,Qe=65535&ne,!((Ze=ne>>>24)<=Y);){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(!(240&et)){for(Je=Ze,ht=et,lt=Qe;et=(ne=_.distcode[lt+((G&(1<<Je+ht)-1)>>Je)])>>>16&255,Qe=65535&ne,!(Je+(Ze=ne>>>24)<=Y);){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}G>>>=Je,Y-=Je,_.back+=Je}if(G>>>=Ze,Y-=Ze,_.back+=Ze,64&et){q.msg="invalid distance code",_.mode=30;break}_.offset=Qe,_.extra=15&et,_.mode=24;case 24:if(_.extra){for(se=_.extra;Y<se;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}_.offset+=G&(1<<_.extra)-1,G>>>=_.extra,Y-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){q.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(Z===0)break e;if(Te=Ee-Z,_.offset>Te){if((Te=_.offset-Te)>_.whave&&_.sane){q.msg="invalid distance too far back",_.mode=30;break}ct=Te>_.wnext?(Te-=_.wnext,_.wsize-Te):_.wnext-Te,Te>_.length&&(Te=_.length),ft=_.window}else ft=$,ct=V-_.offset,Te=_.length;for(Z<Te&&(Te=Z),Z-=Te,_.length-=Te;$[V++]=ft[ct++],--Te;);_.length===0&&(_.mode=21);break;case 26:if(Z===0)break e;$[V++]=_.length,Z--,_.mode=21;break;case 27:if(_.wrap){for(;Y<32;){if(j===0)break e;j--,G|=k[F++]<<Y,Y+=8}if(Ee-=Z,q.total_out+=Ee,_.total+=Ee,Ee&&(q.adler=_.check=_.flags?i(_.check,$,Ee,V-Ee):u(_.check,$,Ee,V-Ee)),Ee=Z,(_.flags?G:w(G))!==_.check){q.msg="incorrect data check",_.mode=30;break}Y=G=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;Y<32;){if(j===0)break e;j--,G+=k[F++]<<Y,Y+=8}if(G!==(4294967295&_.total)){q.msg="incorrect length check",_.mode=30;break}Y=G=0}_.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return v}return q.next_out=V,q.avail_out=Z,q.next_in=F,q.avail_in=j,_.hold=G,_.bits=Y,(_.wsize||Ee!==q.avail_out&&_.mode<30&&(_.mode<27||Q!==4))&&he(q,q.output,q.next_out,Ee-q.avail_out)?(_.mode=31,-4):(ye-=q.avail_in,Ee-=q.avail_out,q.total_in+=ye,q.total_out+=Ee,_.total+=Ee,_.wrap&&Ee&&(q.adler=_.check=_.flags?i(_.check,$,Ee,q.next_out-Ee):u(_.check,$,Ee,q.next_out-Ee)),q.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(ye==0&&Ee===0||Q===4)&&Se===l&&(Se=-5),Se)},o.inflateEnd=function(q){if(!q||!q.state)return v;var Q=q.state;return Q.window&&(Q.window=null),q.state=null,l},o.inflateGetHeader=function(q,Q){var _;return q&&q.state&&2&(_=q.state).wrap?((_.head=Q).done=!1,l):v},o.inflateSetDictionary=function(q,Q){var _,k=Q.length;return q&&q.state?(_=q.state).wrap!==0&&_.mode!==11?v:_.mode===11&&u(1,Q,k,0)!==_.check?-3:he(q,Q,k,k)?(_.mode=31,-4):(_.havedict=1,l):v},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,o){var s=r("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(a,y,l,v,I,d,R,w){var S,O,N,P,H,D,K,U,ue,he=w.bits,q=0,Q=0,_=0,k=0,$=0,F=0,V=0,j=0,Z=0,G=0,Y=null,ye=0,Ee=new s.Buf16(16),Te=new s.Buf16(16),ct=null,ft=0;for(q=0;q<=15;q++)Ee[q]=0;for(Q=0;Q<v;Q++)Ee[y[l+Q]]++;for($=he,k=15;1<=k&&Ee[k]===0;k--);if(k<$&&($=k),k===0)return I[d++]=20971520,I[d++]=20971520,w.bits=1,0;for(_=1;_<k&&Ee[_]===0;_++);for($<_&&($=_),q=j=1;q<=15;q++)if(j<<=1,(j-=Ee[q])<0)return-1;if(0<j&&(a===0||k!==1))return-1;for(Te[1]=0,q=1;q<15;q++)Te[q+1]=Te[q]+Ee[q];for(Q=0;Q<v;Q++)y[l+Q]!==0&&(R[Te[y[l+Q]]++]=Q);if(D=a===0?(Y=ct=R,19):a===1?(Y=u,ye-=257,ct=i,ft-=257,256):(Y=g,ct=f,-1),q=_,H=d,V=Q=G=0,N=-1,P=(Z=1<<(F=$))-1,a===1&&852<Z||a===2&&592<Z)return 1;for(;;){for(K=q-V,ue=R[Q]<D?(U=0,R[Q]):R[Q]>D?(U=ct[ft+R[Q]],Y[ye+R[Q]]):(U=96,0),S=1<<q-V,_=O=1<<F;I[H+(G>>V)+(O-=S)]=K<<24|U<<16|ue|0,O!==0;);for(S=1<<q-1;G&S;)S>>=1;if(S!==0?(G&=S-1,G+=S):G=0,Q++,--Ee[q]==0){if(q===k)break;q=y[l+R[Q]]}if($<q&&(G&P)!==N){for(V===0&&(V=$),H+=_,j=1<<(F=q-V);F+V<k&&!((j-=Ee[F+V])<=0);)F++,j<<=1;if(Z+=1<<F,a===1&&852<Z||a===2&&592<Z)return 1;I[N=G&P]=$<<24|F<<16|H-d|0}}return G!==0&&(I[H+G]=q-V<<24|64<<16|0),w.bits=$,0}},{"../utils/common":41}],51:[function(r,n,o){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,o){var s=r("../utils/common"),u=0,i=1;function g(ne){for(var ve=ne.length;0<=--ve;)ne[ve]=0}var f=0,a=29,y=256,l=y+1+a,v=30,I=19,d=2*l+1,R=15,w=16,S=7,O=256,N=16,P=17,H=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=new Array(2*(l+2));g(he);var q=new Array(2*v);g(q);var Q=new Array(512);g(Q);var _=new Array(256);g(_);var k=new Array(a);g(k);var $,F,V,j=new Array(v);function Z(ne,ve,Re,Pe,we){this.static_tree=ne,this.extra_bits=ve,this.extra_base=Re,this.elems=Pe,this.max_length=we,this.has_stree=ne&&ne.length}function G(ne,ve){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ve}function Y(ne){return ne<256?Q[ne]:Q[256+(ne>>>7)]}function ye(ne,ve){ne.pending_buf[ne.pending++]=255&ve,ne.pending_buf[ne.pending++]=ve>>>8&255}function Ee(ne,ve,Re){ne.bi_valid>w-Re?(ne.bi_buf|=ve<<ne.bi_valid&65535,ye(ne,ne.bi_buf),ne.bi_buf=ve>>w-ne.bi_valid,ne.bi_valid+=Re-w):(ne.bi_buf|=ve<<ne.bi_valid&65535,ne.bi_valid+=Re)}function Te(ne,ve,Re){Ee(ne,Re[2*ve],Re[2*ve+1])}function ct(ne,ve){for(var Re=0;Re|=1&ne,ne>>>=1,Re<<=1,0<--ve;);return Re>>>1}function ft(ne,ve,Re){var Pe,we,Fe=new Array(R+1),Ve=0;for(Pe=1;Pe<=R;Pe++)Fe[Pe]=Ve=Ve+Re[Pe-1]<<1;for(we=0;we<=ve;we++){var m=ne[2*we+1];m!==0&&(ne[2*we]=ct(Fe[m]++,m))}}function Ze(ne){var ve;for(ve=0;ve<l;ve++)ne.dyn_ltree[2*ve]=0;for(ve=0;ve<v;ve++)ne.dyn_dtree[2*ve]=0;for(ve=0;ve<I;ve++)ne.bl_tree[2*ve]=0;ne.dyn_ltree[2*O]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function et(ne){8<ne.bi_valid?ye(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function Qe(ne,ve,Re,Pe){var we=2*ve,Fe=2*Re;return ne[we]<ne[Fe]||ne[we]===ne[Fe]&&Pe[ve]<=Pe[Re]}function Je(ne,ve,Re){for(var Pe=ne.heap[Re],we=Re<<1;we<=ne.heap_len&&(we<ne.heap_len&&Qe(ve,ne.heap[we+1],ne.heap[we],ne.depth)&&we++,!Qe(ve,Pe,ne.heap[we],ne.depth));)ne.heap[Re]=ne.heap[we],Re=we,we<<=1;ne.heap[Re]=Pe}function ht(ne,ve,Re){var Pe,we,Fe,Ve,m=0;if(ne.last_lit!==0)for(;Pe=ne.pending_buf[ne.d_buf+2*m]<<8|ne.pending_buf[ne.d_buf+2*m+1],we=ne.pending_buf[ne.l_buf+m],m++,Pe===0?Te(ne,we,ve):(Te(ne,(Fe=_[we])+y+1,ve),(Ve=D[Fe])!==0&&Ee(ne,we-=k[Fe],Ve),Te(ne,Fe=Y(--Pe),Re),(Ve=K[Fe])!==0&&Ee(ne,Pe-=j[Fe],Ve)),m<ne.last_lit;);Te(ne,O,ve)}function lt(ne,ve){var Re,Pe,we,Fe=ve.dyn_tree,Ve=ve.stat_desc.static_tree,m=ve.stat_desc.has_stree,A=ve.stat_desc.elems,h=-1;for(ne.heap_len=0,ne.heap_max=d,Re=0;Re<A;Re++)Fe[2*Re]!==0?(ne.heap[++ne.heap_len]=h=Re,ne.depth[Re]=0):Fe[2*Re+1]=0;for(;ne.heap_len<2;)Fe[2*(we=ne.heap[++ne.heap_len]=h<2?++h:0)]=1,ne.depth[we]=0,ne.opt_len--,m&&(ne.static_len-=Ve[2*we+1]);for(ve.max_code=h,Re=ne.heap_len>>1;1<=Re;Re--)Je(ne,Fe,Re);for(we=A;Re=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],Je(ne,Fe,1),Pe=ne.heap[1],ne.heap[--ne.heap_max]=Re,ne.heap[--ne.heap_max]=Pe,Fe[2*we]=Fe[2*Re]+Fe[2*Pe],ne.depth[we]=(ne.depth[Re]>=ne.depth[Pe]?ne.depth[Re]:ne.depth[Pe])+1,Fe[2*Re+1]=Fe[2*Pe+1]=we,ne.heap[1]=we++,Je(ne,Fe,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(c,p){var B,J,ge,be,Ke,tt,rt=p.dyn_tree,wt=p.max_code,mt=p.stat_desc.static_tree,Xr=p.stat_desc.has_stree,hn=p.stat_desc.extra_bits,dn=p.stat_desc.extra_base,$r=p.stat_desc.max_length,Ir=0;for(be=0;be<=R;be++)c.bl_count[be]=0;for(rt[2*c.heap[c.heap_max]+1]=0,B=c.heap_max+1;B<d;B++)$r<(be=rt[2*rt[2*(J=c.heap[B])+1]+1]+1)&&(be=$r,Ir++),rt[2*J+1]=be,wt<J||(c.bl_count[be]++,Ke=0,dn<=J&&(Ke=hn[J-dn]),tt=rt[2*J],c.opt_len+=tt*(be+Ke),Xr&&(c.static_len+=tt*(mt[2*J+1]+Ke)));if(Ir!==0){do{for(be=$r-1;c.bl_count[be]===0;)be--;c.bl_count[be]--,c.bl_count[be+1]+=2,c.bl_count[$r]--,Ir-=2}while(0<Ir);for(be=$r;be!==0;be--)for(J=c.bl_count[be];J!==0;)wt<(ge=c.heap[--B])||(rt[2*ge+1]!==be&&(c.opt_len+=(be-rt[2*ge+1])*rt[2*ge],rt[2*ge+1]=be),J--)}}(ne,ve),ft(Fe,h,ne.bl_count)}function T(ne,ve,Re){var Pe,we,Fe=-1,Ve=ve[1],m=0,A=7,h=4;for(Ve===0&&(A=138,h=3),ve[2*(Re+1)+1]=65535,Pe=0;Pe<=Re;Pe++)we=Ve,Ve=ve[2*(Pe+1)+1],++m<A&&we===Ve||(m<h?ne.bl_tree[2*we]+=m:we!==0?(we!==Fe&&ne.bl_tree[2*we]++,ne.bl_tree[2*N]++):m<=10?ne.bl_tree[2*P]++:ne.bl_tree[2*H]++,Fe=we,h=(m=0)===Ve?(A=138,3):we===Ve?(A=6,3):(A=7,4))}function Se(ne,ve,Re){var Pe,we,Fe=-1,Ve=ve[1],m=0,A=7,h=4;for(Ve===0&&(A=138,h=3),Pe=0;Pe<=Re;Pe++)if(we=Ve,Ve=ve[2*(Pe+1)+1],!(++m<A&&we===Ve)){if(m<h)for(;Te(ne,we,ne.bl_tree),--m!=0;);else we!==0?(we!==Fe&&(Te(ne,we,ne.bl_tree),m--),Te(ne,N,ne.bl_tree),Ee(ne,m-3,2)):m<=10?(Te(ne,P,ne.bl_tree),Ee(ne,m-3,3)):(Te(ne,H,ne.bl_tree),Ee(ne,m-11,7));Fe=we,h=(m=0)===Ve?(A=138,3):we===Ve?(A=6,3):(A=7,4)}}g(j);var Ae=!1;function se(ne,ve,Re,Pe){Ee(ne,(f<<1)+(Pe?1:0),3),function(we,Fe,Ve,m){et(we),ye(we,Ve),ye(we,~Ve),s.arraySet(we.pending_buf,we.window,Fe,Ve,we.pending),we.pending+=Ve}(ne,ve,Re)}o._tr_init=function(ne){Ae||(function(){var ve,Re,Pe,we,Fe,Ve=new Array(R+1);for(we=Pe=0;we<a-1;we++)for(k[we]=Pe,ve=0;ve<1<<D[we];ve++)_[Pe++]=we;for(_[Pe-1]=we,we=Fe=0;we<16;we++)for(j[we]=Fe,ve=0;ve<1<<K[we];ve++)Q[Fe++]=we;for(Fe>>=7;we<v;we++)for(j[we]=Fe<<7,ve=0;ve<1<<K[we]-7;ve++)Q[256+Fe++]=we;for(Re=0;Re<=R;Re++)Ve[Re]=0;for(ve=0;ve<=143;)he[2*ve+1]=8,ve++,Ve[8]++;for(;ve<=255;)he[2*ve+1]=9,ve++,Ve[9]++;for(;ve<=279;)he[2*ve+1]=7,ve++,Ve[7]++;for(;ve<=287;)he[2*ve+1]=8,ve++,Ve[8]++;for(ft(he,l+1,Ve),ve=0;ve<v;ve++)q[2*ve+1]=5,q[2*ve]=ct(ve,5);$=new Z(he,D,y+1,l,R),F=new Z(q,K,0,v,R),V=new Z(new Array(0),U,0,I,S)}(),Ae=!0),ne.l_desc=new G(ne.dyn_ltree,$),ne.d_desc=new G(ne.dyn_dtree,F),ne.bl_desc=new G(ne.bl_tree,V),ne.bi_buf=0,ne.bi_valid=0,Ze(ne)},o._tr_stored_block=se,o._tr_flush_block=function(ne,ve,Re,Pe){var we,Fe,Ve=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(m){var A,h=4093624447;for(A=0;A<=31;A++,h>>>=1)if(1&h&&m.dyn_ltree[2*A]!==0)return u;if(m.dyn_ltree[18]!==0||m.dyn_ltree[20]!==0||m.dyn_ltree[26]!==0)return i;for(A=32;A<y;A++)if(m.dyn_ltree[2*A]!==0)return i;return u}(ne)),lt(ne,ne.l_desc),lt(ne,ne.d_desc),Ve=function(m){var A;for(T(m,m.dyn_ltree,m.l_desc.max_code),T(m,m.dyn_dtree,m.d_desc.max_code),lt(m,m.bl_desc),A=I-1;3<=A&&m.bl_tree[2*ue[A]+1]===0;A--);return m.opt_len+=3*(A+1)+5+5+4,A}(ne),we=ne.opt_len+3+7>>>3,(Fe=ne.static_len+3+7>>>3)<=we&&(we=Fe)):we=Fe=Re+5,Re+4<=we&&ve!==-1?se(ne,ve,Re,Pe):ne.strategy===4||Fe===we?(Ee(ne,2+(Pe?1:0),3),ht(ne,he,q)):(Ee(ne,4+(Pe?1:0),3),function(m,A,h,c){var p;for(Ee(m,A-257,5),Ee(m,h-1,5),Ee(m,c-4,4),p=0;p<c;p++)Ee(m,m.bl_tree[2*ue[p]+1],3);Se(m,m.dyn_ltree,A-1),Se(m,m.dyn_dtree,h-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Ve+1),ht(ne,ne.dyn_ltree,ne.dyn_dtree)),Ze(ne),Pe&&et(ne)},o._tr_tally=function(ne,ve,Re){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ve>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ve,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Re,ne.last_lit++,ve===0?ne.dyn_ltree[2*Re]++:(ne.matches++,ve--,ne.dyn_ltree[2*(_[Re]+y+1)]++,ne.dyn_dtree[2*Y(ve)]++),ne.last_lit===ne.lit_bufsize-1},o._tr_align=function(ne){Ee(ne,2,3),Te(ne,O,he),function(ve){ve.bi_valid===16?(ye(ve,ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0):8<=ve.bi_valid&&(ve.pending_buf[ve.pending++]=255&ve.bi_buf,ve.bi_buf>>=8,ve.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(r,n,o){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,o){(function(s){(function(u,i){if(!u.setImmediate){var g,f,a,y,l=1,v={},I=!1,d=u.document,R=Object.getPrototypeOf&&Object.getPrototypeOf(u);R=R&&R.setTimeout?R:u,g={}.toString.call(u.process)==="[object process]"?function(N){process.nextTick(function(){S(N)})}:function(){if(u.postMessage&&!u.importScripts){var N=!0,P=u.onmessage;return u.onmessage=function(){N=!1},u.postMessage("","*"),u.onmessage=P,N}}()?(y="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",O,!1):u.attachEvent("onmessage",O),function(N){u.postMessage(y+N,"*")}):u.MessageChannel?((a=new MessageChannel).port1.onmessage=function(N){S(N.data)},function(N){a.port2.postMessage(N)}):d&&"onreadystatechange"in d.createElement("script")?(f=d.documentElement,function(N){var P=d.createElement("script");P.onreadystatechange=function(){S(N),P.onreadystatechange=null,f.removeChild(P),P=null},f.appendChild(P)}):function(N){setTimeout(S,0,N)},R.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var P=new Array(arguments.length-1),H=0;H<P.length;H++)P[H]=arguments[H+1];var D={callback:N,args:P};return v[l]=D,g(l),l++},R.clearImmediate=w}function w(N){delete v[N]}function S(N){if(I)setTimeout(S,0,N);else{var P=v[N];if(P){I=!0;try{(function(H){var D=H.callback,K=H.args;switch(K.length){case 0:D();break;case 1:D(K[0]);break;case 2:D(K[0],K[1]);break;case 3:D(K[0],K[1],K[2]);break;default:D.apply(i,K)}})(P)}finally{w(N),I=!1}}}}function O(N){N.source===u&&typeof N.data=="string"&&N.data.indexOf(y)===0&&S(+N.data.slice(y.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Th);var mb=Th.exports;const Oh=vs(mb);function Hc(e,t){const r=new Oh,n=t&&r.folder(t)||r;return e.forEach(o=>{try{const s=t?`${t}/${o.nameWithExt}`:o.nameWithExt;if(!o.isDirectory&&!o.base64Content&&!o.textContent){n.file(s,"");return}o.isDirectory?n.folder(s):n.file(s,o.base64Content||btoa(o.textContent),{base64:!0})}catch(s){console.error(`Failed to add file ${o.nameWithExt} to zip archive`,s)}}),r.generateAsync({type:"blob"})}async function Nh(e,t,r){const n=await Hc(t,r);pb.saveAs(n,`${e}.zip`)}async function gb(e){const r=await new Oh().loadAsync(e),n=[];for(const o in r.files){const s=r.files[o];n.push({nameWithExt:s.name.replace(`${e.name.replace(".zip","")}/`,""),base64Content:await s.async("base64"),isDirectory:s.dir})}return n}const Lh=e=>!e.meta.initialChange&&"context"in e,vb=e=>{const[t,r]=e;return Ph(t,r)},Ph=(e,t)=>e.meta.doc&&t.meta.doc?!e.meta.doc.eq(t.meta.doc):e.value!==t.value,ec="sketch.json",yb=[ec,qc];function Bh(e){return yb.some(t=>e.path.includes(t))}function fn(e){const t=e.indexOf(":")+1;let r=e.indexOf("/sketches_v2");return r===-1&&(r=e.indexOf("/libraries_v2")),e.substring(t,r)}const bb="cannot access resources from a private space";function wb(e,t){var o,s;const r=e.cause,n=((s=(o=r.message)==null?void 0:o.detail)==null?void 0:s.toLowerCase())===bb;return t?r.status===401&&(t(r)||n):r.status===401&&n}const ss="EditorBeta_Sketch",xb="me",_b="LyoNDSovDQ12b2lkIHNldHVwKCkgew0gICAgDX0NDXZvaWQgbG9vcCgpIHsNICAgIA19DQ==";let Xn={};function Eb(){Xn={}}function Sb(e,t){return{...e,...t}}function Wc(e){Xn=Sb(Xn,e)}const Cb=new Map;function kb(e){const t=new Map(e);return Wc({codeSubjects:t}),t}function Ab(){const e=new ln().pipe(Sc((t,[r,n])=>n?Jy(t,r):e1(t,r),new Set),ei(1));return Wc({unsavedFiles$:e}),e}function Ib(){const e=new ln().pipe(Jo(()=>{t.unsubscribe()}),ei(1)),t=e.subscribe(({fileId:r,value:n,initialContext:o,isLibrary:s,lineToScroll:u})=>{const i=Sr(r).getValue(),g=s?`${n}
`+i.value:n,f=Sr(r).getValue();Kc(r,g,Lh(f)?f.context.saveCode:o.saveCode,void 0,!0,void 0,u)});return Wc({codeSubjectInjections$:e}),e}function Tn(e=Cb){let{codeSubjects:t}=Xn;return t||(t=kb(e),t)}function Sr(e){const t=Tn(),r=typeof e=="string"?t.get(e):qa;if(r===void 0)throw new Error(`Code subject with id ${e} not found`);return r}const Fh=1e3;function Rs(){let{unsavedFiles$:e}=Xn;return e||(e=Ab(),e)}function Dh(e,t){Rs().next([e,t])}function Rb(){let{codeSubjectInjections$:e}=Xn;return e||(e=Ib(),e)}function nC(e,t,r,n,o){return Sr(e).getValue().value.indexOf(t)!==-1?!1:(Rb().next({fileId:e,value:t,initialContext:r,isLibrary:n,lineToScroll:o}),!0)}function ql(e){return function(t){return t.pipe(kn(Lh),Lm(()=>Um(e)))}}function Tb(e,t=Fh){const r=e.path,n=e.scopedContent||e.content,o={fileId:r,meta:{initialChange:!0,instanceId:Mr.uniqueId(),ext:e.extension,hash:e.hash},value:n},s=new In(o),u=s.pipe(ql(t),Rm(o),Tm(),kn(vb),Qi(([,y])=>y),Jo(()=>{g.unsubscribe()})),i=Rs(),g=u.subscribe(async({context:y,value:l,meta:v})=>{i.next([r,!0]);try{const I=await y.saveCode(r,l,v.hash);if(I&&"isUnsaved"in I&&(I!=null&&I.isUnsaved))return;i.next([r,!1]),I&&"newHash"in I&&Kc(r,l,y.saveCode,void 0,!1,I==null?void 0:I.newHash)}catch(I){console.error(I)}}),a=s.pipe(ql(t),Sc((y,l)=>({isSameCode:!Ph(y,l),value:l.value,meta:{doc:l.meta.doc}}),{isSameCode:!1,value:n,meta:{}}),kn(({isSameCode:y})=>y),Jo(()=>{a.unsubscribe()})).subscribe(()=>{i.next([r,!1])});return s}function jh(e,t=Fh){const r=Tn(),n=Tb(e,t);r.set(e.path,n)}function Ob(e){Tn().forEach(r=>{const n=r.getValue().fileId;new RegExp(`^${e}/`).test(n)&&Ts(n)})}function Ts(e){Sr(e).complete(),Tn().delete(e)}function Kc(e,t,r,n,o=!1,s,u){const i=Sr(e);Rs().next([e,!0]);const f=o?Mr.uniqueId():i.getValue().meta.instanceId,a=i.getValue().meta.ext,y=s||i.getValue().meta.hash;i.next({fileId:e,value:t,meta:{initialChange:!1,instanceId:f,doc:n,ext:a,hash:y,lineToScroll:u},context:{saveCode:r}})}function iC(e,t,r,n){Kc(e,t,r,void 0,!1,n),Dh(e,!1)}async function oC(){const e=await yt();if(!e)return bt();try{const t=await Mm(e);return(t==null?void 0:t.status)==200}catch{return!1}}async function Zc(e=ss,t=_b,r=xb,n=[]){const o=await yt();if(!o)return bt();const s=nr(),u=await km({user_id:r,path:e,ino:t},o,s);return n.length>0&&await Promise.all(n.map(i=>(()=>{const g=Er(i.content,i.mimetype);return Ec({path:`${u.path}/${i.fullName}`},{data:g},o,s)})())),{owner:fn(u.path),...u}}async function Nb(e){const t=await yt();if(!t)return bt();const r=nr(),{id:n,secrets:o}=e,s=await bs({id:n},{secrets:{data:o}},t,r);return{owner:fn(s.path),...s}}async function Lb(e){const t=await yt();if(!t)return bt();const r=nr(),{id:n,...o}=e,s=await bs({id:n},o,t,r);return{owner:fn(s.path),...s}}async function Pb(e){const t=await yt();if(!t)return bt();const r=nr(),{id:n,...o}=e,s=await bs({id:n},o,t,r);return{owner:fn(s.path),...s}}async function Bb(e){const t=await yt();if(!t)return bt();const r=nr(),{id:n,...o}=e,s=await bs({id:n},o,t,r);return{owner:fn(s.path),...s}}async function Fb(e){const t=await yt();if(!t)return bt();const r=nr(),o=await Sm({id:e},t===ti?void 0:t,r);return o?{owner:fn(o.path),...o}:null}async function Db(e){const t=await yt();if(!t)return bt();const r=nr();await Bm({id:e},t,r)}async function jb(e){const t=await yt();if(!t)return bt();const r=nr();return(await Cm({user_id:"me",name_like:e},t,r)).map(s=>({owner:fn(s.path),...s}))}async function Yc(e,t,r,n,o){const s=await yt(void 0,o);if(!s)return bt();const u=r?void 0:nr(),{data:i,mimetype:g,revision:f,href:a,modifiedAt:y}=await Im(e,s===ti?void 0:s,u);if(typeof i>"u")return Promise.reject(new Error("No data to decode in retrieved file"));const l=e.substring(e.lastIndexOf(".")+1),v=$c(i,g),I=n&&v.split(`
`).slice(n.start,n.end+1).join(`
`);return{name:_c(t),fullName:t,extension:l,data:i,content:v,scopedContent:I,mimetype:g,path:e,hash:f==null?void 0:f.hash,href:a,modifiedAt:y}}async function Xc(e,t,r){const n=await yt(void 0,r);if(!n)return bt();const o=t?void 0:nr();return Am(e,n===ti?void 0:n,o)}async function Mb(e,t,r){const n=await yt();if(!n)return bt();const o=nr(),s=Er(t);return await Ec(e,{data:s,hash:r},n,o)}async function Ub(e,t,r=""){const n=await yt();if(!n)return bt();const o=nr(),s=Dm.includes(`.${t}`)?r:Er(r);return Ec(e,{data:s},n,o)}class $b extends Error{constructor(t){super(t),this.name="SketchNameConflict"}}async function Mh(e,t){const r=await yt();if(!r)return bt();const n=nr();try{await Fm({from:e,to:t},r,n)}catch(o){throw o.status===409?new $b("Sketch name already exists"):o}}async function zb(e){const t=await yt();if(!t)return bt();const r=nr();return await jm(e,t,r)}async function Uh(){const e=await yt(void 0,!0);return e?(await Om(e)).map(r=>({...r,owner:r.path&&fn(r.path)})):bt()}async function Gb(e){const t=await yt(void 0,!0);return t?Nm(e,t):bt()}async function Vb(e,t){const r=await yt(void 0,!0);if(!r)return bt();const n=t.map(o=>{if(o.fullName==="library.properties"){const s=I1.parse(o.content);s.name=e;let u="";for(const i in s)u+=`${i}=${s[i]}
`;return{nameWithExt:o.fullName,textContent:u}}return{nameWithExt:o.fullName,textContent:o.content}});try{const o=await Hc(n),{response:s}=await Df(o,r);if(!s)throw new Error("Create API returned no information about the newly created library");return s}catch(o){return console.error(o),Promise.reject(new Error("Error creating new custom library"))}}async function qb(e){const t=await yt(void 0,!0);if(!t)return bt();await Pm({id:e},t)}class Hl extends Error{constructor(t){super(t),this.name="MalformedLibrary"}}async function Hb(e){const t=await yt(void 0,!0);if(!t)return bt();const r=await gb(e),n=r.find(f=>f.nameWithExt.match(/^\/?library.properties/))||r.filter(f=>f.nameWithExt.match(/^\/?[A-Za-z0-9][A-Za-z0-9_.-]*\/$/)).map(f=>r.find(a=>a.nameWithExt.startsWith(`${f.nameWithExt}library.properties`))).find(f=>f);if(!n||!n.base64Content&&!n.textContent)throw new Hl("library does not contain a library.properties file");const o=n.nameWithExt.replace(/\/?library.properties$/,"");let s=r.filter(f=>f.nameWithExt.startsWith(o)&&!f.nameWithExt.match(/^\/?(__MACOSX\/|\.DS_Store|\.git)/));o!=="/"&&(s.forEach(f=>{f.nameWithExt=f.nameWithExt.replace(o,"")}),s=s.filter(f=>f.nameWithExt!=="/"));const u=await Hc(s),{error:i,response:g}=await Df(u,t);if(i)throw new Hl(i);if(!g)throw new Error("Create API returned no information about the newly created library");return g}async function sC(e,t,r,n){const o=await Yc(`${t}/${ec}`,ec,!1),s=JSON.parse(o.content).secrets,u=s.length?mh(s.map(({name:a})=>({name:a,value:""}))):void 0;let i=Sr(r.path).value.value,g=Er(i,r.mimetype);u&&(g=gh({...r,data:g},i,r.mimetype).data,i=void 0);const f=n.map(a=>{const y=Sr(a.path).value.value,l=Er(y,a.mimetype);return{nameWithExt:a.fullName,base64Content:l,textContent:y}});u&&f.push({nameWithExt:u.name,base64Content:u.data}),f.push({nameWithExt:o.fullName,base64Content:Er(o.content,o.mimetype)}),f.push({nameWithExt:r.fullName,base64Content:g,textContent:i}),await Nh(e,f)}var Os=(e=>(e.HTTP="http",e.HTTPS="https",e))(Os||{});async function aC(e,t,r,n=$m,o=Ns()){return zm(Et,e,t,r,o,n)}function Ns(){let{stateChangeSubject$:e}=Et;return e||(e=jf(Rt),e)}var it=(e=>(e.Config="config",e.SocketConnected="socketConnected",e.DownloadQuota="downloadQuota",e.Ports="ports",e.NetworkPorts="networkPorts",e.AgentInfo="agentInfo",e.Socket="socket",e.UploadStatus="uploadStatus",e.SerialMonitors="serialMonitors",e.PortsListQuota="portsListQuota",e.UploadQuota="uploadQuota",e))(it||{});const $h={[it.Config]:{protocolToUse:Os.HTTP,useV2:!1},[it.SocketConnected]:!1,[it.DownloadQuota]:[],[it.NetworkPorts]:[],[it.Ports]:[],[it.SerialMonitors]:[],[it.PortsListQuota]:[],[it.UploadQuota]:[],searchedForDaemon:!1,socketEventsAreSet:!1};let Et={...$h};function Wb(){Et={...$h}}function Rt(e,t=!1){Et=Mf(Et,e);const r=Ns();t||Uf(Et,r)}function cC(){const{[it.Socket]:e,[it.SocketConnected]:t,[it.PortsListQuota]:r,[it.UploadQuota]:n,socketEventsAreSet:o,uploadConcatResponseStream$:s,uploadResponseStream$:u,serialMonitorsMsgStream$:i,serialMonitorsDisconnections$:g,stateChangeSubject$:f,...a}=Et;return{...a,[it.SocketConnected]:null,[it.PortsListQuota]:[],[it.UploadQuota]:[],socketEventsAreSet:!1}}var Zo=(e=>(e.Latest="latest",e))(Zo||{}),Li=(e=>(e.Arduino="arduino",e))(Li||{});const uC=e=>!!(e.http&&e.ws),lC=e=>!!(e.https&&e.wss),fC=e=>!!e.os,Kb="127.0.0.1",Zb="localhost",Yb=`${Os.HTTP}://${Kb}`,Xb=`${Os.HTTPS}://${Zb}`,hC="bin",Wl=Number(at.AGENT_LAST_POSSIBLE_PORT),tc=Number(at.AGENT_FIRST_POSSIBLE_PORT),dC=3e4,zh=new Gm;var bf;const Qb=((bf=zh.getOS().name)==null?void 0:bf.indexOf("Windows"))!==-1,Ba=zh.getBrowser(),pC=(()=>{const e=Qb?[{toolName:"windows-drivers",toolVersion:Zo.Latest,packageName:Li.Arduino}]:[];return e.push({toolName:"bossac",toolVersion:"1.7.0",packageName:Li.Arduino},{toolName:"fwupdater",toolVersion:Zo.Latest,packageName:Li.Arduino},{toolName:"rp2040tools",toolVersion:Zo.Latest,packageName:Li.Arduino}),e})();function Jb(e,t,r){return async()=>{const n=await Vm(`${e}:${t}`,r);return n||Promise.reject()}}const ew=Wl&&tc?Array(Wl-tc+1):[],tw=Array.from(ew,(e,t)=>{var o,s,u;const r=tc+t,n=(o=Ba.name)!=null&&o.includes("Chrome")||(s=Ba.name)!=null&&s.includes("Firefox")||(u=Ba.name)!=null&&u.includes("Edge")?Yb:Xb;return Jb(n,r,at.AGENT_INFO_ENDPOINT)});function mC(){return tw.map(e=>e())}var xn=(e=>(e.Sent="sent",e.Pending="pending",e.Success="success",e.Error="error",e))(xn||{}),rc=(e=>(e.Success="Success",e.Pending="Pending",e))(rc||{});function gC(e){return!!(e.name&&e.version&&e.packager)}var Dt=(e=>(e[e.ListCommandPortsResponse=0]="ListCommandPortsResponse",e[e.ListCommandNetworkPortsResponse=1]="ListCommandNetworkPortsResponse",e[e.SerialMonitorStatusUpdate=2]="SerialMonitorStatusUpdate",e[e.SerialMonitorMessage=3]="SerialMonitorMessage",e[e.DownloadStatusResponse=4]="DownloadStatusResponse",e[e.Upload=5]="Upload",e[e.Unknown=6]="Unknown",e))(Dt||{});function vC(e){return{endpointUrl:e.url,status:e.status,http:e.http,https:e.https,ws:e.ws,wss:e.wss,updateUrl:e.update_url,version:e.version,os:e.os}}function Kl(e){const{Ports:t,Network:r}=e;return{ports:t.map(n=>({baud:n.Baud,bufferAlgorithm:n.BufferAlgorithm,deviceClass:n.DeviceClass,isOpen:n.IsOpen,isPrimary:n.IsPrimary,portName:n.Name,networkPort:n.NetworkPort,productId:n.ProductID,serialNumber:n.SerialNumber,vendorId:n.VendorID,version:n.Ver})),areNetworkPorts:r}}function rw(e){const{DownloadStatus:t,Msg:r}=e;return{status:t,message:r}}function nw(e){const{ProgrammerStatus:t,Msg:r,Flash:n}=e;return{status:t,message:r,flash:n}}function iw(e){const{Cmd:t,Port:r,Baud:n}=e;return{status:t,port:r,baudRate:n}}function ow(e){const{P:t,D:r}=e;return{port:t,data:r}}const sw={[Dt.ListCommandPortsResponse]:Kl,[Dt.ListCommandNetworkPortsResponse]:Kl,[Dt.SerialMonitorStatusUpdate]:iw,[Dt.SerialMonitorMessage]:ow,[Dt.DownloadStatusResponse]:rw,[Dt.Upload]:nw,[Dt.Unknown]:e=>e};var nc={exports:{}},aw=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,cw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Gh=function(t){var r=t,n=t.indexOf("["),o=t.indexOf("]");n!=-1&&o!=-1&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=aw.exec(t||""),u={},i=14;i--;)u[cw[i]]=s[i]||"";return n!=-1&&o!=-1&&(u.source=r,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=uw(u,u.path),u.queryKey=lw(u,u.query),u};function uw(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&n.splice(0,1),t.substr(t.length-1,1)=="/"&&n.splice(n.length-1,1),n}function lw(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,s){o&&(r[o]=s)}),r}var ic={exports:{}},oc={exports:{}},ji=1e3,Mi=ji*60,Ui=Mi*60,$i=Ui*24,fw=$i*365.25,hw=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return dw(e);if(r==="number"&&isNaN(e)===!1)return t.long?mw(e):pw(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function dw(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fw;case"days":case"day":case"d":return r*$i;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ui;case"minutes":case"minute":case"mins":case"min":case"m":return r*Mi;case"seconds":case"second":case"secs":case"sec":case"s":return r*ji;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function pw(e){return e>=$i?Math.round(e/$i)+"d":e>=Ui?Math.round(e/Ui)+"h":e>=Mi?Math.round(e/Mi)+"m":e>=ji?Math.round(e/ji)+"s":e+"ms"}function mw(e){return Uo(e,$i,"day")||Uo(e,Ui,"hour")||Uo(e,Mi,"minute")||Uo(e,ji,"second")||e+" ms"}function Uo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=g,t.disable=u,t.enable=s,t.enabled=i,t.humanize=hw,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(f){var a=0,y;for(y in f)a=(a<<5)-a+f.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(f){var a;function y(){if(y.enabled){var l=y,v=+new Date,I=v-(a||v);l.diff=I,l.prev=a,l.curr=v,a=v;for(var d=new Array(arguments.length),R=0;R<d.length;R++)d[R]=arguments[R];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var P=t.formatters[N];if(typeof P=="function"){var H=d[w];O=P.call(l,H),d.splice(w,1),w--}return O}),t.formatArgs.call(l,d);var S=y.log||t.log||console.log.bind(console);S.apply(l,d)}}return y.namespace=f,y.enabled=t.enabled(f),y.useColors=t.useColors(),y.color=r(f),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var f=t.instances.indexOf(this);return f!==-1?(t.instances.splice(f,1),!0):!1}function s(f){t.save(f),t.names=[],t.skips=[];var a,y=(typeof f=="string"?f:"").split(/[\s,]+/),l=y.length;for(a=0;a<l;a++)y[a]&&(f=y[a].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")));for(a=0;a<t.instances.length;a++){var v=t.instances[a];v.enabled=t.enabled(v.namespace)}}function u(){t.enable("")}function i(f){if(f[f.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(f))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(f))return!0;return!1}function g(f){return f instanceof Error?f.stack||f.message:f}})(oc,oc.exports);var gw=oc.exports;(function(e,t){var r={};t=e.exports=gw,t.log=s,t.formatArgs=o,t.save=u,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(f){var a=this.useColors;if(f[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+f[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var l=0,v=0;f[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(l++,I==="%c"&&(v=l))}),f.splice(v,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(f){try{f==null?t.storage.removeItem("debug"):t.storage.debug=f}catch{}}function i(){var f;try{f=t.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}t.enable(i());function g(){try{return window.localStorage}catch{}}})(ic,ic.exports);var Ls=ic.exports,vw=Gh,Zl=Ls("socket.io-client:url"),yw=bw;function bw(e,t){var r=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(Zl("protocol-less url %s",e),typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),Zl("parse %s",e),r=vw(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var n=r.host.indexOf(":")!==-1,o=n?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}var Ps={},sc={exports:{}},ac={exports:{}},zi=1e3,Gi=zi*60,Vi=Gi*60,qi=Vi*24,ww=qi*365.25,xw=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return _w(e);if(r==="number"&&isNaN(e)===!1)return t.long?Sw(e):Ew(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function _w(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ww;case"days":case"day":case"d":return r*qi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Vi;case"minutes":case"minute":case"mins":case"min":case"m":return r*Gi;case"seconds":case"second":case"secs":case"sec":case"s":return r*zi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ew(e){return e>=qi?Math.round(e/qi)+"d":e>=Vi?Math.round(e/Vi)+"h":e>=Gi?Math.round(e/Gi)+"m":e>=zi?Math.round(e/zi)+"s":e+"ms"}function Sw(e){return $o(e,qi,"day")||$o(e,Vi,"hour")||$o(e,Gi,"minute")||$o(e,zi,"second")||e+" ms"}function $o(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=g,t.disable=u,t.enable=s,t.enabled=i,t.humanize=xw,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(f){var a=0,y;for(y in f)a=(a<<5)-a+f.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(f){var a;function y(){if(y.enabled){var l=y,v=+new Date,I=v-(a||v);l.diff=I,l.prev=a,l.curr=v,a=v;for(var d=new Array(arguments.length),R=0;R<d.length;R++)d[R]=arguments[R];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var P=t.formatters[N];if(typeof P=="function"){var H=d[w];O=P.call(l,H),d.splice(w,1),w--}return O}),t.formatArgs.call(l,d);var S=y.log||t.log||console.log.bind(console);S.apply(l,d)}}return y.namespace=f,y.enabled=t.enabled(f),y.useColors=t.useColors(),y.color=r(f),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var f=t.instances.indexOf(this);return f!==-1?(t.instances.splice(f,1),!0):!1}function s(f){t.save(f),t.names=[],t.skips=[];var a,y=(typeof f=="string"?f:"").split(/[\s,]+/),l=y.length;for(a=0;a<l;a++)y[a]&&(f=y[a].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")));for(a=0;a<t.instances.length;a++){var v=t.instances[a];v.enabled=t.enabled(v.namespace)}}function u(){t.enable("")}function i(f){if(f[f.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(f))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(f))return!0;return!1}function g(f){return f instanceof Error?f.stack||f.message:f}})(ac,ac.exports);var Cw=ac.exports;(function(e,t){var r={};t=e.exports=Cw,t.log=s,t.formatArgs=o,t.save=u,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(f){var a=this.useColors;if(f[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+f[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var l=0,v=0;f[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(l++,I==="%c"&&(v=l))}),f.splice(v,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(f){try{f==null?t.storage.removeItem("debug"):t.storage.debug=f}catch{}}function i(){var f;try{f=t.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}t.enable(i());function g(){try{return window.localStorage}catch{}}})(sc,sc.exports);var kw=sc.exports,Vh={exports:{}};(function(e){e.exports=t;function t(n){if(n)return r(n)}function r(n){for(var o in t.prototype)n[o]=t.prototype[o];return n}t.prototype.on=t.prototype.addEventListener=function(n,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(o),this},t.prototype.once=function(n,o){function s(){this.off(n,s),o.apply(this,arguments)}return s.fn=o,this.on(n,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var u,i=0;i<s.length;i++)if(u=s[i],u===o||u.fn===o){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+n],this},t.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),s=this._callbacks["$"+n],u=1;u<arguments.length;u++)o[u-1]=arguments[u];if(s){s=s.slice(0);for(var u=0,i=s.length;u<i;++u)s[u].apply(this,o)}return this},t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},t.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(Vh);var ii=Vh.exports,Bs={},Aw={}.toString,qh=Array.isArray||function(e){return Aw.call(e)=="[object Array]"},Hh=Ow,Iw=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",Rw=typeof ArrayBuffer=="function",Tw=function(e){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function Ow(e){return Iw&&Buffer.isBuffer(e)||Rw&&(e instanceof ArrayBuffer||Tw(e))}var Qc=qh,Wh=Hh,Kh=Object.prototype.toString,Nw=typeof Blob=="function"||typeof Blob<"u"&&Kh.call(Blob)==="[object BlobConstructor]",Lw=typeof File=="function"||typeof File<"u"&&Kh.call(File)==="[object FileConstructor]";Bs.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=cc(r,t),n.attachments=t.length,{packet:n,buffers:t}};function cc(e,t){if(!e)return e;if(Wh(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Qc(e)){for(var n=new Array(e.length),o=0;o<e.length;o++)n[o]=cc(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){var n={};for(var s in e)n[s]=cc(e[s],t);return n}return e}Bs.reconstructPacket=function(e,t){return e.data=uc(e.data,t),e.attachments=void 0,e};function uc(e,t){if(!e)return e;if(e&&e._placeholder===!0){var r=typeof e.num=="number"&&e.num>=0&&e.num<t.length;if(r)return t[e.num];throw new Error("illegal attachments")}else if(Qc(e))for(var n=0;n<e.length;n++)e[n]=uc(e[n],t);else if(typeof e=="object")for(var o in e)e[o]=uc(e[o],t);return e}Bs.removeBlobs=function(e,t){function r(s,u,i){if(!s)return s;if(Nw&&s instanceof Blob||Lw&&s instanceof File){n++;var g=new FileReader;g.onload=function(){i?i[u]=this.result:o=this.result,--n||t(o)},g.readAsArrayBuffer(s)}else if(Qc(s))for(var f=0;f<s.length;f++)r(s[f],f,s);else if(typeof s=="object"&&!Wh(s))for(var a in s)r(s[a],a,s)}var n=0,o=e;r(o),n||t(o)};(function(e){var t=kw("socket.io-parser"),r=ii,n=Bs,o=qh,s=Hh;e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=y;function u(){}var i=e.ERROR+'"encode error"';u.prototype.encode=function(w,S){if(t("encoding packet %j",w),e.BINARY_EVENT===w.type||e.BINARY_ACK===w.type)a(w,S);else{var O=g(w);S([O])}};function g(w){var S=""+w.type;if((e.BINARY_EVENT===w.type||e.BINARY_ACK===w.type)&&(S+=w.attachments+"-"),w.nsp&&w.nsp!=="/"&&(S+=w.nsp+","),w.id!=null&&(S+=w.id),w.data!=null){var O=f(w.data);if(O!==!1)S+=O;else return i}return t("encoded %j as %s",w,S),S}function f(w){try{return JSON.stringify(w)}catch{return!1}}function a(w,S){function O(N){var P=n.deconstructPacket(N),H=g(P.packet),D=P.buffers;D.unshift(H),S(D)}n.removeBlobs(w,O)}function y(){this.reconstructor=null}r(y.prototype),y.prototype.add=function(w){var S;if(typeof w=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");S=v(w),e.BINARY_EVENT===S.type||e.BINARY_ACK===S.type?(this.reconstructor=new d(S),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",S)):this.emit("decoded",S)}else if(s(w)||w.base64)if(this.reconstructor)S=this.reconstructor.takeBinaryData(w),S&&(this.reconstructor=null,this.emit("decoded",S));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+w)};function l(w,S){switch(w){case 0:return typeof S=="object";case 1:return S===void 0;case 4:return typeof S=="string"||typeof S=="object";case 2:case 5:return o(S)&&(typeof S[0]=="string"||typeof S[0]=="number");case 3:case 6:return o(S)}}function v(w){var S=0,O={type:Number(w.charAt(0))};if(e.types[O.type]==null)return R("unknown packet type "+O.type);if(e.BINARY_EVENT===O.type||e.BINARY_ACK===O.type){for(var N=S+1;w.charAt(++S)!=="-"&&S!=w.length;);var P=w.substring(N,S);if(P!=Number(P)||w.charAt(S)!=="-")throw new Error("Illegal attachments");O.attachments=Number(P)}if(w.charAt(S+1)==="/"){for(var N=S+1;++S;){var H=w.charAt(S);if(H===","||S===w.length)break}O.nsp=w.substring(N,S)}else O.nsp="/";var D=w.charAt(S+1);if(D!==""&&Number(D)==D){for(var N=S+1;++S;){var H=w.charAt(S);if(H==null||Number(H)!=H){--S;break}if(S===w.length)break}O.id=Number(w.substring(N,S+1))}if(w.charAt(++S)){var K=I(w.substr(S));if(l(O.type,K))O.data=K;else throw new Error("invalid payload")}return t("decoded %s as %j",w,O),O}function I(w){try{return JSON.parse(w)}catch{return!1}}y.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function d(w){this.reconPack=w,this.buffers=[]}d.prototype.takeBinaryData=function(w){if(this.buffers.push(w),this.buffers.length===this.reconPack.attachments){var S=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),S}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function R(w){return{type:e.ERROR,data:"parser error: "+w}}})(Ps);var Jc={exports:{}},Fs={},lc={exports:{}};try{lc.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{lc.exports=!1}var Pw=lc.exports,eu=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),Bw=Pw,Fw=eu,tu=function(e){var t=e.xdomain,r=e.xscheme,n=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!t||Bw))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!r&&n)return new XDomainRequest}catch{}if(!t)try{return new Fw[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},ru={exports:{}},On={},Dw=Object.keys||function(t){var r=[],n=Object.prototype.hasOwnProperty;for(var o in t)n.call(t,o)&&r.push(o);return r},jw={}.toString,Mw=Array.isArray||function(e){return jw.call(e)=="[object Array]"},Uw=Mw,Zh=Object.prototype.toString,$w=typeof Blob=="function"||typeof Blob<"u"&&Zh.call(Blob)==="[object BlobConstructor]",zw=typeof File=="function"||typeof File<"u"&&Zh.call(File)==="[object FileConstructor]",Yh=Yo;function Yo(e){if(!e||typeof e!="object")return!1;if(Uw(e)){for(var t=0,r=e.length;t<r;t++)if(Yo(e[t]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||$w&&e instanceof Blob||zw&&e instanceof File)return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Yo(e.toJSON(),!0);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Yo(e[n]))return!0;return!1}var Gw=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||n===0)return new ArrayBuffer(0);for(var o=new Uint8Array(e),s=new Uint8Array(r-t),u=t,i=0;u<r;u++,i++)s[i]=o[u];return s.buffer},Vw=qw;function qw(e,t,r){var n=!1;return r=r||Hw,o.count=e,e===0?t():o;function o(s,u){if(o.count<=0)throw new Error("after called too many times");--o.count,s?(n=!0,t(s),t=r):o.count===0&&!n&&t(null,u)}}function Hw(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var rn=String.fromCharCode;function Xh(e){for(var t=[],r=0,n=e.length,o,s;r<n;)o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<n?(s=e.charCodeAt(r++),(s&64512)==56320?t.push(((o&1023)<<10)+(s&1023)+65536):(t.push(o),r--)):t.push(o);return t}function Ww(e){for(var t=e.length,r=-1,n,o="";++r<t;)n=e[r],n>65535&&(n-=65536,o+=rn(n>>>10&1023|55296),n=56320|n&1023),o+=rn(n);return o}function Qh(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Fa(e,t){return rn(e>>t&63|128)}function Kw(e,t){if(!(e&4294967168))return rn(e);var r="";return e&4294965248?e&4294901760?e&4292870144||(r=rn(e>>18&7|240),r+=Fa(e,12),r+=Fa(e,6)):(Qh(e,t)||(e=65533),r=rn(e>>12&15|224),r+=Fa(e,6)):r=rn(e>>6&31|192),r+=rn(e&63|128),r}function Zw(e,t){t=t||{};for(var r=t.strict!==!1,n=Xh(e),o=n.length,s=-1,u,i="";++s<o;)u=n[s],i+=Kw(u,r);return i}function zn(){if(on>=cs)throw Error("Invalid byte index");var e=as[on]&255;if(on++,(e&192)==128)return e&63;throw Error("Invalid continuation byte")}function Yw(e){var t,r,n,o,s;if(on>cs)throw Error("Invalid byte index");if(on==cs)return!1;if(t=as[on]&255,on++,!(t&128))return t;if((t&224)==192){if(r=zn(),s=(t&31)<<6|r,s>=128)return s;throw Error("Invalid continuation byte")}if((t&240)==224){if(r=zn(),n=zn(),s=(t&15)<<12|r<<6|n,s>=2048)return Qh(s,e)?s:65533;throw Error("Invalid continuation byte")}if((t&248)==240&&(r=zn(),n=zn(),o=zn(),s=(t&7)<<18|r<<12|n<<6|o,s>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}var as,cs,on;function Xw(e,t){t=t||{};var r=t.strict!==!1;as=Xh(e),cs=as.length,on=0;for(var n=[],o;(o=Yw(r))!==!1;)n.push(o);return Ww(n)}var Qw={version:"2.1.2",encode:Zw,decode:Xw},zo={},Yl;function Jw(){return Yl||(Yl=1,function(e){zo.encode=function(t){var r=new Uint8Array(t),n,o=r.length,s="";for(n=0;n<o;n+=3)s+=e[r[n]>>2],s+=e[(r[n]&3)<<4|r[n+1]>>4],s+=e[(r[n+1]&15)<<2|r[n+2]>>6],s+=e[r[n+2]&63];return o%3===2?s=s.substring(0,s.length-1)+"=":o%3===1&&(s=s.substring(0,s.length-2)+"=="),s},zo.decode=function(t){var r=t.length*.75,n=t.length,o,s=0,u,i,g,f;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);var a=new ArrayBuffer(r),y=new Uint8Array(a);for(o=0;o<n;o+=4)u=e.indexOf(t[o]),i=e.indexOf(t[o+1]),g=e.indexOf(t[o+2]),f=e.indexOf(t[o+3]),y[s++]=u<<2|i>>4,y[s++]=(i&15)<<4|g>>2,y[s++]=(g&3)<<6|f&63;return a}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),zo}var Da,Xl;function e2(){if(Xl)return Da;Xl=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var i=new Blob(["hi"]);return i.size===2}catch{return!1}}(),r=t&&function(){try{var i=new Blob([new Uint8Array([1,2])]);return i.size===2}catch{return!1}}(),n=e&&e.prototype.append&&e.prototype.getBlob;function o(i){return i.map(function(g){if(g.buffer instanceof ArrayBuffer){var f=g.buffer;if(g.byteLength!==f.byteLength){var a=new Uint8Array(g.byteLength);a.set(new Uint8Array(f,g.byteOffset,g.byteLength)),f=a.buffer}return f}return g})}function s(i,g){g=g||{};var f=new e;return o(i).forEach(function(a){f.append(a)}),g.type?f.getBlob(g.type):f.getBlob()}function u(i,g){return new Blob(o(i),g||{})}return typeof Blob<"u"&&(s.prototype=Blob.prototype,u.prototype=Blob.prototype),Da=function(){return t?r?Blob:u:n?s:void 0}(),Da}(function(e){var t=Dw,r=Yh,n=Gw,o=Vw,s=Qw,u;typeof ArrayBuffer<"u"&&(u=Jw());var i=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),g=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),f=i||g;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=t(a),l={type:"error",data:"parser error"},v=e2();e.encodePacket=function(N,P,H,D){typeof P=="function"&&(D=P,P=!1),typeof H=="function"&&(D=H,H=null);var K=N.data===void 0?void 0:N.data.buffer||N.data;if(typeof ArrayBuffer<"u"&&K instanceof ArrayBuffer)return d(N,P,D);if(typeof v<"u"&&K instanceof v)return w(N,P,D);if(K&&K.base64)return I(N,D);var U=a[N.type];return N.data!==void 0&&(U+=H?s.encode(String(N.data),{strict:!1}):String(N.data)),D(""+U)};function I(N,P){var H="b"+e.packets[N.type]+N.data.data;return P(H)}function d(N,P,H){if(!P)return e.encodeBase64Packet(N,H);var D=N.data,K=new Uint8Array(D),U=new Uint8Array(1+D.byteLength);U[0]=a[N.type];for(var ue=0;ue<K.length;ue++)U[ue+1]=K[ue];return H(U.buffer)}function R(N,P,H){if(!P)return e.encodeBase64Packet(N,H);var D=new FileReader;return D.onload=function(){e.encodePacket({type:N.type,data:D.result},P,!0,H)},D.readAsArrayBuffer(N.data)}function w(N,P,H){if(!P)return e.encodeBase64Packet(N,H);if(f)return R(N,P,H);var D=new Uint8Array(1);D[0]=a[N.type];var K=new v([D.buffer,N.data]);return H(K)}e.encodeBase64Packet=function(N,P){var H="b"+e.packets[N.type];if(typeof v<"u"&&N.data instanceof v){var D=new FileReader;return D.onload=function(){var q=D.result.split(",")[1];P(H+q)},D.readAsDataURL(N.data)}var K;try{K=String.fromCharCode.apply(null,new Uint8Array(N.data))}catch{for(var U=new Uint8Array(N.data),ue=new Array(U.length),he=0;he<U.length;he++)ue[he]=U[he];K=String.fromCharCode.apply(null,ue)}return H+=btoa(K),P(H)},e.decodePacket=function(N,P,H){if(N===void 0)return l;if(typeof N=="string"){if(N.charAt(0)==="b")return e.decodeBase64Packet(N.substr(1),P);if(H&&(N=S(N),N===!1))return l;var K=N.charAt(0);return Number(K)!=K||!y[K]?l:N.length>1?{type:y[K],data:N.substring(1)}:{type:y[K]}}var D=new Uint8Array(N),K=D[0],U=n(N,1);return v&&P==="blob"&&(U=new v([U])),{type:y[K],data:U}};function S(N){try{N=s.decode(N,{strict:!1})}catch{return!1}return N}e.decodeBase64Packet=function(N,P){var H=y[N.charAt(0)];if(!u)return{type:H,data:{base64:!0,data:N.substr(1)}};var D=u.decode(N.substr(1));return P==="blob"&&v&&(D=new v([D])),{type:H,data:D}},e.encodePayload=function(N,P,H){typeof P=="function"&&(H=P,P=null);var D=r(N);if(P&&D)return v&&!f?e.encodePayloadAsBlob(N,H):e.encodePayloadAsArrayBuffer(N,H);if(!N.length)return H("0:");function K(ue){return ue.length+":"+ue}function U(ue,he){e.encodePacket(ue,D?P:!1,!1,function(q){he(null,K(q))})}O(N,U,function(ue,he){return H(he.join(""))})};function O(N,P,H){for(var D=new Array(N.length),K=o(N.length,H),U=function(he,q,Q){P(q,function(_,k){D[he]=k,Q(_,D)})},ue=0;ue<N.length;ue++)U(ue,N[ue],K)}e.decodePayload=function(N,P,H){if(typeof N!="string")return e.decodePayloadAsBinary(N,P,H);typeof P=="function"&&(H=P,P=null);var D;if(N==="")return H(l,0,1);for(var K="",U,ue,he=0,q=N.length;he<q;he++){var Q=N.charAt(he);if(Q!==":"){K+=Q;continue}if(K===""||K!=(U=Number(K))||(ue=N.substr(he+1,U),K!=ue.length))return H(l,0,1);if(ue.length){if(D=e.decodePacket(ue,P,!1),l.type===D.type&&l.data===D.data)return H(l,0,1);var _=H(D,he+U,q);if(_===!1)return}he+=U,K=""}if(K!=="")return H(l,0,1)},e.encodePayloadAsArrayBuffer=function(N,P){if(!N.length)return P(new ArrayBuffer(0));function H(D,K){e.encodePacket(D,!0,!0,function(U){return K(null,U)})}O(N,H,function(D,K){var U=K.reduce(function(q,Q){var _;return typeof Q=="string"?_=Q.length:_=Q.byteLength,q+_.toString().length+_+2},0),ue=new Uint8Array(U),he=0;return K.forEach(function(q){var Q=typeof q=="string",_=q;if(Q){for(var F=new Uint8Array(q.length),k=0;k<q.length;k++)F[k]=q.charCodeAt(k);_=F.buffer}Q?ue[he++]=0:ue[he++]=1;for(var $=_.byteLength.toString(),k=0;k<$.length;k++)ue[he++]=parseInt($[k]);ue[he++]=255;for(var F=new Uint8Array(_),k=0;k<F.length;k++)ue[he++]=F[k]}),P(ue.buffer)})},e.encodePayloadAsBlob=function(N,P){function H(D,K){e.encodePacket(D,!0,!0,function(U){var ue=new Uint8Array(1);if(ue[0]=1,typeof U=="string"){for(var he=new Uint8Array(U.length),q=0;q<U.length;q++)he[q]=U.charCodeAt(q);U=he.buffer,ue[0]=0}for(var Q=U instanceof ArrayBuffer?U.byteLength:U.size,_=Q.toString(),k=new Uint8Array(_.length+1),q=0;q<_.length;q++)k[q]=parseInt(_[q]);if(k[_.length]=255,v){var $=new v([ue.buffer,k.buffer,U]);K(null,$)}})}O(N,H,function(D,K){return P(new v(K))})},e.decodePayloadAsBinary=function(N,P,H){typeof P=="function"&&(H=P,P=null);for(var D=N,K=[];D.byteLength>0;){for(var U=new Uint8Array(D),ue=U[0]===0,he="",q=1;U[q]!==255;q++){if(he.length>310)return H(l,0,1);he+=U[q]}D=n(D,2+he.length),he=parseInt(he);var Q=n(D,0,he);if(ue)try{Q=String.fromCharCode.apply(null,new Uint8Array(Q))}catch{var _=new Uint8Array(Q);Q="";for(var q=0;q<_.length;q++)Q+=String.fromCharCode(_[q])}K.push(Q),D=n(D,he)}var k=K.length;K.forEach(function($,F){H(e.decodePacket($,P,!0),F,k)})}})(On);var ja,Ql;function nu(){if(Ql)return ja;Ql=1;var e=On,t=ii;ja=r;function r(n){this.path=n.path,this.hostname=n.hostname,this.port=n.port,this.secure=n.secure,this.query=n.query,this.timestampParam=n.timestampParam,this.timestampRequests=n.timestampRequests,this.readyState="",this.agent=n.agent||!1,this.socket=n.socket,this.enablesXDR=n.enablesXDR,this.withCredentials=n.withCredentials,this.pfx=n.pfx,this.key=n.key,this.passphrase=n.passphrase,this.cert=n.cert,this.ca=n.ca,this.ciphers=n.ciphers,this.rejectUnauthorized=n.rejectUnauthorized,this.forceNode=n.forceNode,this.isReactNative=n.isReactNative,this.extraHeaders=n.extraHeaders,this.localAddress=n.localAddress}return t(r.prototype),r.prototype.onError=function(n,o){var s=new Error(n);return s.type="TransportError",s.description=o,this.emit("error",s),this},r.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},r.prototype.send=function(n){if(this.readyState==="open")this.write(n);else throw new Error("Transport not open")},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(n){var o=e.decodePacket(n,this.socket.binaryType);this.onPacket(o)},r.prototype.onPacket=function(n){this.emit("packet",n)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")},ja}var oi={};oi.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t};oi.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t};var Ds=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Jh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),us=64,ed={},Jl=0,sn=0,ef;function fc(e){var t="";do t=Jh[e%us]+t,e=Math.floor(e/us);while(e>0);return t}function t2(e){var t=0;for(sn=0;sn<e.length;sn++)t=t*us+ed[e.charAt(sn)];return t}function iu(){var e=fc(+new Date);return e!==ef?(Jl=0,ef=e):e+"."+fc(Jl++)}for(;sn<us;sn++)ed[Jh[sn]]=sn;iu.encode=fc;iu.decode=t2;var td=iu,hc={exports:{}},dc={exports:{}},Hi=1e3,Wi=Hi*60,Ki=Wi*60,Zi=Ki*24,r2=Zi*365.25,n2=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return i2(e);if(r==="number"&&isNaN(e)===!1)return t.long?s2(e):o2(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function i2(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*r2;case"days":case"day":case"d":return r*Zi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ki;case"minutes":case"minute":case"mins":case"min":case"m":return r*Wi;case"seconds":case"second":case"secs":case"sec":case"s":return r*Hi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function o2(e){return e>=Zi?Math.round(e/Zi)+"d":e>=Ki?Math.round(e/Ki)+"h":e>=Wi?Math.round(e/Wi)+"m":e>=Hi?Math.round(e/Hi)+"s":e+"ms"}function s2(e){return Go(e,Zi,"day")||Go(e,Ki,"hour")||Go(e,Wi,"minute")||Go(e,Hi,"second")||e+" ms"}function Go(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=g,t.disable=u,t.enable=s,t.enabled=i,t.humanize=n2,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(f){var a=0,y;for(y in f)a=(a<<5)-a+f.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(f){var a;function y(){if(y.enabled){var l=y,v=+new Date,I=v-(a||v);l.diff=I,l.prev=a,l.curr=v,a=v;for(var d=new Array(arguments.length),R=0;R<d.length;R++)d[R]=arguments[R];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var P=t.formatters[N];if(typeof P=="function"){var H=d[w];O=P.call(l,H),d.splice(w,1),w--}return O}),t.formatArgs.call(l,d);var S=y.log||t.log||console.log.bind(console);S.apply(l,d)}}return y.namespace=f,y.enabled=t.enabled(f),y.useColors=t.useColors(),y.color=r(f),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var f=t.instances.indexOf(this);return f!==-1?(t.instances.splice(f,1),!0):!1}function s(f){t.save(f),t.names=[],t.skips=[];var a,y=(typeof f=="string"?f:"").split(/[\s,]+/),l=y.length;for(a=0;a<l;a++)y[a]&&(f=y[a].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")));for(a=0;a<t.instances.length;a++){var v=t.instances[a];v.enabled=t.enabled(v.namespace)}}function u(){t.enable("")}function i(f){if(f[f.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(f))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(f))return!0;return!1}function g(f){return f instanceof Error?f.stack||f.message:f}})(dc,dc.exports);var a2=dc.exports;(function(e,t){var r={};t=e.exports=a2,t.log=s,t.formatArgs=o,t.save=u,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(f){var a=this.useColors;if(f[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+f[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var l=0,v=0;f[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(l++,I==="%c"&&(v=l))}),f.splice(v,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(f){try{f==null?t.storage.removeItem("debug"):t.storage.debug=f}catch{}}function i(){var f;try{f=t.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}t.enable(i());function g(){try{return window.localStorage}catch{}}})(hc,hc.exports);var js=hc.exports,rd=nu(),c2=oi,nd=On,u2=Ds,l2=td,xr=js("engine.io-client:polling"),id=Ur,f2=function(){var e=tu,t=new e({xdomain:!1});return t.responseType!=null}();function Ur(e){var t=e&&e.forceBase64;(!f2||t)&&(this.supportsBinary=!1),rd.call(this,e)}u2(Ur,rd);Ur.prototype.name="polling";Ur.prototype.doOpen=function(){this.poll()};Ur.prototype.pause=function(e){var t=this;this.readyState="pausing";function r(){xr("paused"),t.readyState="paused",e()}if(this.polling||!this.writable){var n=0;this.polling&&(xr("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){xr("pre-pause polling complete"),--n||r()})),this.writable||(xr("we are currently writing - waiting to pause"),n++,this.once("drain",function(){xr("pre-pause writing complete"),--n||r()}))}else r()};Ur.prototype.poll=function(){xr("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};Ur.prototype.onData=function(e){var t=this;xr("polling got data %s",e);var r=function(n,o,s){if(t.readyState==="opening"&&n.type==="open"&&t.onOpen(),n.type==="close")return t.onClose(),!1;t.onPacket(n)};nd.decodePayload(e,this.socket.binaryType,r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():xr('ignoring poll - transport state "%s"',this.readyState))};Ur.prototype.doClose=function(){var e=this;function t(){xr("writing close packet"),e.write([{type:"close"}])}this.readyState==="open"?(xr("transport open - closing"),t()):(xr("transport not open - deferring close"),this.once("open",t))};Ur.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};nd.encodePayload(e,this.supportsBinary,function(n){t.doWrite(n,r)})};Ur.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";this.timestampRequests!==!1&&(e[this.timestampParam]=l2()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=c2.encode(e),this.port&&(t==="https"&&Number(this.port)!==443||t==="http"&&Number(this.port)!==80)&&(r=":"+this.port),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};var h2=tu,od=id,d2=ii,p2=Ds,pc=js("engine.io-client:polling-xhr"),m2=eu;ru.exports=si;ru.exports.Request=Vt;function tf(){}function si(e){if(od.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,typeof location<"u"){var t=location.protocol==="https:",r=location.port;r||(r=t?443:80),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}p2(si,od);si.prototype.supportsBinary=!0;si.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Vt(e)};si.prototype.doWrite=function(e,t){var r=typeof e!="string"&&e!==void 0,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(s){o.onError("xhr post error",s)}),this.sendXhr=n};si.prototype.doPoll=function(){pc("xhr poll");var e=this.request(),t=this;e.on("data",function(r){t.onData(r)}),e.on("error",function(r){t.onError("xhr poll error",r)}),this.pollXhr=e};function Vt(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}d2(Vt.prototype);Vt.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new h2(e),r=this;try{pc("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}}catch{}if(this.method==="POST")try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(t.readyState===2)try{var o=t.getResponseHeader("Content-Type");(r.supportsBinary&&o==="application/octet-stream"||o==="application/octet-stream; charset=UTF-8")&&(t.responseType="arraybuffer")}catch{}t.readyState===4&&(t.status===200||t.status===1223?r.onLoad():setTimeout(function(){r.onError(typeof t.status=="number"?t.status:0)},0))},pc("xhr data %s",this.data),t.send(this.data)}catch(o){setTimeout(function(){r.onError(o)},0);return}typeof document<"u"&&(this.index=Vt.requestsCount++,Vt.requests[this.index]=this)};Vt.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};Vt.prototype.onData=function(e){this.emit("data",e),this.onSuccess()};Vt.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)};Vt.prototype.cleanup=function(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=tf:this.xhr.onreadystatechange=tf,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Vt.requests[this.index],this.xhr=null}};Vt.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch{}t==="application/octet-stream"||t==="application/octet-stream; charset=UTF-8"?e=this.xhr.response||this.xhr.responseText:e=this.xhr.responseText}catch(r){this.onError(r)}e!=null&&this.onData(e)};Vt.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};Vt.prototype.abort=function(){this.cleanup()};Vt.requestsCount=0;Vt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",rf);else if(typeof addEventListener=="function"){var g2="onpagehide"in m2?"pagehide":"unload";addEventListener(g2,rf,!1)}}function rf(){for(var e in Vt.requests)Vt.requests.hasOwnProperty(e)&&Vt.requests[e].abort()}var v2=ru.exports,ou=id,y2=Ds,nf=eu,b2=ai,w2=/\n/g,x2=/\\n/g,Vo;function _2(){}function ai(e){ou.call(this,e),this.query=this.query||{},Vo||(Vo=nf.___eio=nf.___eio||[]),this.index=Vo.length;var t=this;Vo.push(function(r){t.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=_2)},!1)}y2(ai,ou);ai.prototype.supportsBinary=!1;ai.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),ou.prototype.doClose.call(this)};ai.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(o){e.onError("jsonp poll error",o)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t;var n=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var o=document.createElement("iframe");document.body.appendChild(o),document.body.removeChild(o)},100)};ai.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,u;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=s,n.method="POST",n.setAttribute("accept-charset","utf-8"),o.name="d",n.appendChild(o),document.body.appendChild(n),this.form=n,this.area=o}this.form.action=this.uri();function i(){g(),t()}function g(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(a){r.onError("jsonp polling iframe removal error",a)}try{var f='<iframe src="javascript:0" name="'+r.iframeId+'">';u=document.createElement(f)}catch{u=document.createElement("iframe"),u.name=r.iframeId,u.src="javascript:0"}u.id=r.iframeId,r.form.appendChild(u),r.iframe=u}g(),e=e.replace(x2,`\\
`),this.area.value=e.replace(w2,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){r.iframe.readyState==="complete"&&i()}:this.iframe.onload=i};var su=nu(),E2=On,S2=oi,C2=Ds,k2=td,A2=js("engine.io-client:websocket"),ls,au;typeof WebSocket<"u"?ls=WebSocket:typeof self<"u"&&(ls=self.WebSocket||self.MozWebSocket);if(typeof window>"u")try{au=to}catch{}var Zn=ls||au,I2=yr;function yr(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=ls&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(Zn=au),su.call(this,e)}C2(yr,su);yr.prototype.name="websocket";yr.prototype.supportsBinary=!0;yr.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new Zn(e,t):new Zn(e):new Zn(e,t,r)}catch(n){return this.emit("error",n)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};yr.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}};yr.prototype.write=function(e){var t=this;this.writable=!1;for(var r=e.length,n=0,o=r;n<o;n++)(function(u){E2.encodePacket(u,t.supportsBinary,function(i){if(!t.usingBrowserWebSocket){var g={};if(u.options&&(g.compress=u.options.compress),t.perMessageDeflate){var f=typeof i=="string"?Buffer.byteLength(i):i.length;f<t.perMessageDeflate.threshold&&(g.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,g)}catch{A2("websocket closed before onclose event")}--r||s()})})(e[n]);function s(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}};yr.prototype.onClose=function(){su.prototype.onClose.call(this)};yr.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};yr.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";this.port&&(t==="wss"&&Number(this.port)!==443||t==="ws"&&Number(this.port)!==80)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=k2()),this.supportsBinary||(e.b64=1),e=S2.encode(e),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};yr.prototype.check=function(){return!!Zn&&!("__initialize"in Zn&&this.name===yr.prototype.name)};var R2=tu,T2=v2,O2=b2,N2=I2;Fs.polling=L2;Fs.websocket=N2;function L2(e){var t,r=!1,n=!1,o=e.jsonp!==!1;if(typeof location<"u"){var s=location.protocol==="https:",u=location.port;u||(u=s?443:80),r=e.hostname!==location.hostname||u!==e.port,n=e.secure!==s}if(e.xdomain=r,e.xscheme=n,t=new R2(e),"open"in t&&!e.forceJSONP)return new T2(e);if(!o)throw new Error("JSONP disabled");return new O2(e)}var P2=[].indexOf,sd=function(e,t){if(P2)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1},B2=Fs,F2=ii,Ut=js("engine.io-client:socket"),D2=sd,ad=On,of=Gh,j2=oi,M2=pt;function pt(e,t){if(!(this instanceof pt))return new pt(e,t);t=t||{},e&&typeof e=="object"&&(t=e,e=null),e?(e=of(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=of(t.host).host),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=t.query||{},typeof this.query=="string"&&(this.query=j2.decode(this.query)),this.upgrade=t.upgrade!==!1,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=t.jsonp!==!1,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=t.withCredentials!==!1,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=t.perMessageDeflate!==!1?t.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=t.rejectUnauthorized===void 0?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}pt.priorWebsocketSuccess=!1;F2(pt.prototype);pt.protocol=ad.protocol;pt.Socket=pt;pt.Transport=nu();pt.transports=Fs;pt.parser=On;pt.prototype.createTransport=function(e){Ut('creating transport "%s"',e);var t=U2(this.query);t.EIO=ad.protocol,t.transport=e;var r=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var n=new B2[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return n};function U2(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}pt.prototype.open=function(){var e;if(this.rememberUpgrade&&pt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)};pt.prototype.setTransport=function(e){Ut("setting transport %s",e.name);var t=this;this.transport&&(Ut("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(r){t.onPacket(r)}).on("error",function(r){t.onError(r)}).on("close",function(){t.onClose("transport close")})};pt.prototype.probe=function(e){Ut('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;pt.priorWebsocketSuccess=!1;function o(){if(n.onlyBinaryUpgrades){var y=!this.supportsBinary&&n.transport.supportsBinary;r=r||y}r||(Ut('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(l){if(!r)if(l.type==="pong"&&l.data==="probe"){if(Ut('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;pt.priorWebsocketSuccess=t.name==="websocket",Ut('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){r||n.readyState!=="closed"&&(Ut("changing transport and sending upgrade packet"),a(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())})}else{Ut('probe transport "%s" failed',e);var v=new Error("probe error");v.transport=t.name,n.emit("upgradeError",v)}}))}function s(){r||(r=!0,a(),t.close(),t=null)}function u(y){var l=new Error("probe error: "+y);l.transport=t.name,s(),Ut('probe transport "%s" failed because of error: %s',e,y),n.emit("upgradeError",l)}function i(){u("transport closed")}function g(){u("socket closed")}function f(y){t&&y.name!==t.name&&(Ut('"%s" works - aborting "%s"',y.name,t.name),s())}function a(){t.removeListener("open",o),t.removeListener("error",u),t.removeListener("close",i),n.removeListener("close",g),n.removeListener("upgrading",f)}t.once("open",o),t.once("error",u),t.once("close",i),this.once("close",g),this.once("upgrading",f),t.open()};pt.prototype.onOpen=function(){if(Ut("socket open"),this.readyState="open",pt.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){Ut("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}};pt.prototype.onPacket=function(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Ut('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else Ut('packet received with socket readyState "%s"',this.readyState)};pt.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};pt.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){t.readyState!=="closed"&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};pt.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){Ut("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)};pt.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})};pt.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};pt.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Ut("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};pt.prototype.write=pt.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this};pt.prototype.sendPacket=function(e,t,r,n){if(typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=null),!(this.readyState==="closing"||this.readyState==="closed")){r=r||{},r.compress=r.compress!==!1;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}};pt.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}function t(){e.onClose("forced close"),Ut("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this};pt.prototype.onError=function(e){Ut("socket error %j",e),pt.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)};pt.prototype.onClose=function(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){Ut('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}};pt.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~D2(this.transports,e[r])&&t.push(e[r]);return t};Jc.exports=M2;Jc.exports.parser=On;var $2=Jc.exports,cd={exports:{}},z2=G2;function G2(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}var ud=V2;function V2(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}var sf=[].slice,ld=function(e,t){if(typeof t=="string"&&(t=e[t]),typeof t!="function")throw new Error("bind() requires a function");var r=sf.call(arguments,2);return function(){return t.apply(e,r.concat(sf.call(arguments)))}};(function(e,t){var r=Ps,n=ii,o=z2,s=ud,u=ld,i=Ls("socket.io-client:socket"),g=oi,f=Yh;e.exports=l;var a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},y=n.prototype.emit;function l(v,I,d){this.io=v,this.nsp=I,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},d&&d.query&&(this.query=d.query),this.io.autoConnect&&this.open()}n(l.prototype),l.prototype.subEvents=function(){if(!this.subs){var v=this.io;this.subs=[s(v,"open",u(this,"onopen")),s(v,"packet",u(this,"onpacket")),s(v,"close",u(this,"onclose"))]}},l.prototype.open=l.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},l.prototype.send=function(){var v=o(arguments);return v.unshift("message"),this.emit.apply(this,v),this},l.prototype.emit=function(v){if(a.hasOwnProperty(v))return y.apply(this,arguments),this;var I=o(arguments),d={type:(this.flags.binary!==void 0?this.flags.binary:f(I))?r.BINARY_EVENT:r.EVENT,data:I};return d.options={},d.options.compress=!this.flags||this.flags.compress!==!1,typeof I[I.length-1]=="function"&&(i("emitting packet with ack id %d",this.ids),this.acks[this.ids]=I.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this.flags={},this},l.prototype.packet=function(v){v.nsp=this.nsp,this.io.packet(v)},l.prototype.onopen=function(){if(i("transport is open - connecting"),this.nsp!=="/")if(this.query){var v=typeof this.query=="object"?g.encode(this.query):this.query;i("sending connect packet with query %s",v),this.packet({type:r.CONNECT,query:v})}else this.packet({type:r.CONNECT})},l.prototype.onclose=function(v){i("close (%s)",v),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",v)},l.prototype.onpacket=function(v){var I=v.nsp===this.nsp,d=v.type===r.ERROR&&v.nsp==="/";if(!(!I&&!d))switch(v.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(v);break;case r.BINARY_EVENT:this.onevent(v);break;case r.ACK:this.onack(v);break;case r.BINARY_ACK:this.onack(v);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",v.data);break}},l.prototype.onevent=function(v){var I=v.data||[];i("emitting event %j",I),v.id!=null&&(i("attaching ack callback to event"),I.push(this.ack(v.id))),this.connected?y.apply(this,I):this.receiveBuffer.push(I)},l.prototype.ack=function(v){var I=this,d=!1;return function(){if(!d){d=!0;var R=o(arguments);i("sending ack %j",R),I.packet({type:f(R)?r.BINARY_ACK:r.ACK,id:v,data:R})}}},l.prototype.onack=function(v){var I=this.acks[v.id];typeof I=="function"?(i("calling ack %s with %j",v.id,v.data),I.apply(this,v.data),delete this.acks[v.id]):i("bad ack %s",v.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){var v;for(v=0;v<this.receiveBuffer.length;v++)y.apply(this,this.receiveBuffer[v]);for(this.receiveBuffer=[],v=0;v<this.sendBuffer.length;v++)this.packet(this.sendBuffer[v]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){i("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var v=0;v<this.subs.length;v++)this.subs[v].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(i("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(v){return this.flags.compress=v,this},l.prototype.binary=function(v){return this.flags.binary=v,this}})(cd);var fd=cd.exports,q2=ci;function ci(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ci.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ci.prototype.reset=function(){this.attempts=0};ci.prototype.setMin=function(e){this.ms=e};ci.prototype.setMax=function(e){this.max=e};ci.prototype.setJitter=function(e){this.jitter=e};var H2=$2,W2=fd,K2=ii,Z2=Ps,en=ud,Gn=ld,Kt=Ls("socket.io-client:manager"),hd=sd,Y2=q2,dd=Object.prototype.hasOwnProperty,af=vt;function vt(e,t){if(!(this instanceof vt))return new vt(e,t);e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Y2({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||Z2;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}vt.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)dd.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)};vt.prototype.updateSocketIds=function(){for(var e in this.nsps)dd.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))};vt.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};K2(vt.prototype);vt.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection};vt.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts};vt.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay};vt.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor};vt.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax};vt.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout};vt.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};vt.prototype.open=vt.prototype.connect=function(e,t){if(Kt("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Kt("opening %s",this.uri),this.engine=H2(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=en(r,"open",function(){n.onopen(),e&&e()}),s=en(r,"error",function(g){if(Kt("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",g),e){var f=new Error("Connection error");f.data=g,e(f)}else n.maybeReconnectOnOpen()});if(this._timeout!==!1){var u=this._timeout;Kt("connect attempt will timeout after %d",u),u===0&&o.destroy();var i=setTimeout(function(){Kt("connect attempt timed out after %d",u),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",u)},u);this.subs.push({destroy:function(){clearTimeout(i)}})}return this.subs.push(o),this.subs.push(s),this};vt.prototype.onopen=function(){Kt("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(en(e,"data",Gn(this,"ondata"))),this.subs.push(en(e,"ping",Gn(this,"onping"))),this.subs.push(en(e,"pong",Gn(this,"onpong"))),this.subs.push(en(e,"error",Gn(this,"onerror"))),this.subs.push(en(e,"close",Gn(this,"onclose"))),this.subs.push(en(this.decoder,"decoded",Gn(this,"ondecoded")))};vt.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};vt.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};vt.prototype.ondata=function(e){this.decoder.add(e)};vt.prototype.ondecoded=function(e){this.emit("packet",e)};vt.prototype.onerror=function(e){Kt("error",e),this.emitAll("error",e)};vt.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new W2(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",o),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&o()}function o(){~hd(n.connecting,r)||n.connecting.push(r)}return r};vt.prototype.destroy=function(e){var t=hd(this.connecting,e);~t&&this.connecting.splice(t,1),!this.connecting.length&&this.close()};vt.prototype.packet=function(e){Kt("writing packet %j",e);var t=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()}))};vt.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};vt.prototype.cleanup=function(){Kt("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};vt.prototype.close=vt.prototype.disconnect=function(){Kt("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};vt.prototype.onclose=function(e){Kt("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()};vt.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Kt("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Kt("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(Kt("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),!e.skipReconnect&&e.open(function(n){n?(Kt("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",n.data)):(Kt("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}};vt.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};(function(e,t){var r=yw,n=Ps,o=af,s=Ls("socket.io-client");e.exports=t=i;var u=t.managers={};function i(g,f){typeof g=="object"&&(f=g,g=void 0),f=f||{};var a=r(g),y=a.source,l=a.id,v=a.path,I=u[l]&&v in u[l].nsps,d=f.forceNew||f["force new connection"]||f.multiplex===!1||I,R;return d?(s("ignoring socket cache for %s",y),R=o(y,f)):(u[l]||(s("new io instance for %s",y),u[l]=o(y,f)),R=u[l]),a.query&&!f.query&&(f.query=a.query),R.socket(a.path,f)}t.protocol=n.protocol,t.connect=i,t.Manager=af,t.Socket=fd})(nc,nc.exports);var X2=nc.exports;const Q2=vs(X2);function J2(e){const t=new ln;return e({serialMonitorsMsgStream$:t}),t}function pd(e,t){let{serialMonitorsMsgStream$:r}=t;return r||(r=J2(e),r)}function md(e,t,r){pd(e,t).next(r)}function ex(e){const t=new ln;return e({serialMonitorsDisconnections$:t}),t}function gd(e,t){let{serialMonitorsDisconnections$:r}=t;return r||(r=ex(e),r)}function mc(e,t,r){gd(e,t).next(r)}function tx(e,t,r,n){const o=pd(e,t),s=r.find(g=>g.port===n),u=gd(e,t);if(!s)throw new Error(`Cannot find serial monitor with port ${n}`);const i=u.pipe(kn(g=>g===n));return qm(o.pipe(kn(g=>g.port===n),Qi(g=>g.data),Wm(i)),i.pipe(Hm(()=>_r(()=>new bd))))}function rx(e,t){return function([r,n]){if(!n[t])return!1;const o=n[t].find(s=>s.port===e);return(o==null?void 0:o.status)===Jt.OPENED}}function nx(e,t,r){return function([n,o]){var u;if(!o[t])return!1;const s=(u=o[r])==null?void 0:u.find(i=>i.portName===e);return!o[t].some(i=>i.port===e)&&!(s!=null&&s.isOpen)}}function vd(e,t,r,n,o,s){return $f(t,r,rx(n,r),o,100,s).pipe(Km(u=>{var i;if(!u||((i=u.find(g=>g.port===n))==null?void 0:i.status)!==Jt.OPENED)throw new Error("Could not open serial monitor");return Zm(Ym({type:"info",value:"ready"}),tx(e,t,u,n).pipe(Qi(g=>({type:"message",value:g}))))}))}function yd(e,t,r,n,o,s){return $f(e,t,nx(n,t,r),o,5e3,s).pipe(Qi(u=>{if(u.some(i=>i.port===n))throw new Error("Could not close serial monitor");return n}))}var Jt=(e=>(e.Open="Open",e.OpenFail="OpenFail",e.Close="Close",e))(Jt||{}),Jt=(e=>(e.NONE="none",e.OPENED="opened",e.FAILED="failed",e.CLOSED="closed",e))(Jt||{});class bd extends Error{constructor(){super("Board disconnected"),this.name="BoardDisconnectionError"}}class cu extends Error{constructor(t){super(`Serial monitor at ${t} is already open`),this.name="PortAlreadyOpenError"}}const wd=[300,1200,2400,4800,9600,19200,38400,57600,115200],yC=[...wd],bC=9600;function wC(e){return wd.includes(e)}var Ht=(e=>(e[e.NONE=0]="NONE",e[e.IN_PROG=1]="IN_PROG",e[e.DONE=2]="DONE",e[e.ERROR=3]="ERROR",e))(Ht||{});const xC=e=>!!e,xd="END",ix="COMPILE_STREAM_UPDATE";function _d(e){const t=new ln;return e({uploadResponseStream$:t}),t}function ox(e,t){let{uploadResponseStream$:r}=t;return r||(r=_d(e),r)}function Yi(e,t,r,n){ox(e,t).next({value:r,meta:n})}function sx(e,t){const r=t.pipe(Sc((n,{value:o,meta:s})=>(s==null?void 0:s.signal)===xd?"":(s==null?void 0:s.signal)===ix?o:`${n&&`${n}
`}${o||""}`,""),ei(1));return e({uploadConcatResponseStream$:r}),r}function _C(e,t){let{uploadConcatResponseStream$:r}=t;if(r)return r;let{uploadResponseStream$:n}=t;return n||(n=_d(e)),r=sx(e,n),r}function EC(e,t){const{uploadResponseStream$:r}=t;if(!r)return;Yi(e,t,"",{signal:xd}),r.complete(),e({uploadResponseStream$:void 0});const{uploadConcatResponseStream$:n}=t;n&&(n.complete(),e({uploadConcatResponseStream$:void 0}))}function ax(e){const{category:t,data:r}=e;if(t===Dt.ListCommandPortsResponse){if(!Et[it.PortsListQuota].length)return;Rt({[it.PortsListQuota]:Et[it.PortsListQuota].slice(1)}),Rt({[it.Ports]:r.ports})}if(t===Dt.ListCommandNetworkPortsResponse&&Rt({[it.NetworkPorts]:r.ports}),t===Dt.DownloadStatusResponse){const{downloadQuota:n}=Et,o=n.findIndex(u=>u.status===xn.Sent||u.status===xn.Pending);if(o===-1)return;const s=n[o];if(r.status===rc.Pending){if(s.status===xn.Pending)return;n[o]={...s,status:xn.Pending},Rt({[it.DownloadQuota]:n});return}if(r.status===rc.Success){n[o]={...s,status:xn.Success},Rt({[it.DownloadQuota]:n});return}n[o]={...s,status:xn.Error},Rt({[it.DownloadQuota]:n})}if(t===Dt.Upload){if(!Et[it.UploadQuota].length)return;if((r==null?void 0:r.flash)==="Ok"&&r.status===_n.Done){Rt({[it.UploadStatus]:Ht.DONE}),Yi(Rt,Et,r.flash);return}switch(r.status){case _n.Starting:Rt({[it.UploadStatus]:Ht.IN_PROG});break;case _n.Busy:Rt({[it.UploadStatus]:Ht.IN_PROG});break;case _n.Error:Rt({[it.UploadStatus]:Ht.ERROR});break;case _n.Killed:Rt({[it.UploadStatus]:Ht.ERROR});break;case _n.NotFound:Rt({[it.UploadStatus]:Ht.ERROR});break;default:Rt({[it.UploadStatus]:Ht.IN_PROG})}(Et[it.UploadStatus]===Ht.ERROR||Et[it.UploadStatus]===Ht.DONE)&&Rt({[it.UploadQuota]:Et[it.UploadQuota].slice(1)}),r.message&&Yi(Rt,Et,r.message)}if(t===Dt.SerialMonitorStatusUpdate){const n=Et[it.SerialMonitors],s=n.findIndex(i=>i.port===r.port)!==-1;let u;switch(r.status){case Jt.Open:case Jt.OpenFail:{const i=r.status,g={[Jt.Open]:Jt.OPENED,[Jt.OpenFail]:Jt.FAILED};s?(i===Jt.OpenFail&&mc(Rt,Et,r.port),u=n.map(f=>f.port===r.port?{...f,status:g[i]}:f)):u=[...n,{status:g[i],port:r.port,baudRate:r.baudRate}];break}case Jt.Close:s?(mc(Rt,Et,r.port),u=n.filter(i=>i.port!==r.port)):u=n;break;default:u=n}Rt({[it.SerialMonitors]:u})}t===Dt.SerialMonitorMessage&&md(Rt,Et,r)}function cx(e,t){const r=sw[t];return r(e)}function ux(e){let t=Dt.Unknown;const r=e.Ports,n=e.Network;return r&&!n&&(t=Dt.ListCommandPortsResponse),r&&n&&(t=Dt.ListCommandNetworkPortsResponse),e.DownloadStatus&&(t=Dt.DownloadStatusResponse),e.ProgrammerStatus&&(t=Dt.Upload),e.Cmd in Jt&&(t=Dt.SerialMonitorStatusUpdate),e.P&&e.D&&(t=Dt.SerialMonitorMessage),t}function lx(e){try{return JSON.parse(e)}catch{return{}}}function fx(e){const t=lx(e),r=ux(t),n=cx(t,r);ax({category:r,data:n})}function hx(){var t;const{socket:e}=Et;e&&(e.removeAllListeners(),(t=e.destroy)==null||t.call(e))}function dx(e){const{socketEventsAreSet:t}=Et;t||(e.on("connect",()=>{Rt({[it.SocketConnected]:!0})}),e.on("message",fx),e.on("error",()=>{}),e.on("disconnect",()=>{Rt({[it.SocketConnected]:!1})}),Rt({socketEventsAreSet:!0}))}function px(e){return Q2(e,{transports:["websocket"]})}function mx(e){let{socket:t}=Et;return t||(t=px(e),Rt({[it.Socket]:t}),t)}function SC(e){const t=mx(e);dx(t)}function gx(e,t=9600){return ws(()=>{const{[it.Ports]:r,[it.Socket]:n,[it.UploadStatus]:o,[it.SerialMonitors]:s}=Et;if(o===Ht.IN_PROG)return _r(()=>new Error("Could not open serial monitor, upload in progress"));if(!n)return _r(()=>new Error("Could not open serial monitor, no connection to agent"));const u=r.find(i=>i.portName===e);return u?u.isOpen?_r(()=>new cu(e)):(n.emit("command",`open ${e} ${t} timed`),vd(Rt,Et,it.SerialMonitors,e,s,Ns())):_r(()=>new Error(`Could not open serial monitor, can't find board at ${e}`))})}function vx(e){return ws(()=>{const{[it.Socket]:t,[it.SerialMonitors]:r}=Et;return t?(t.emit("command",`close ${e}`),yd(Et,it.SerialMonitors,it.Ports,e,r,Ns())):_r(()=>new Error("Could not close serial monitor, no connection to agent"))})}function yx(e,t){const{[it.Socket]:r,[it.SerialMonitors]:n}=Et;if(!r)throw new Error("Could not close serial monitor, no connection to agent");if(!n.some(({port:o})=>o===e))throw new Error(`Could not find an opened serial monitor on port ${e}`);r.emit("command",`send ${e} ${t}`)}var _n=(e=>(e.Starting="Starting",e.Busy="Busy",e.Error="Error",e.Killed="Killed",e.NotFound="Error 404 Not Found",e.Done="Done",e))(_n||{}),Ed=(e=>(e[e.Change=0]="Change",e[e.Success=1]="Success",e[e.Error=2]="Error",e))(Ed||{}),Sd=(e=>(e[e.Toast=0]="Toast",e[e.NonUI=1]="NonUI",e))(Sd||{});const bx=e=>!!(e&&e.mode===0);let Qn={};function wx(){Qn={}}function xx(e,t){return{...e,...t}}function uu(e){Qn=xx(Qn,e)}function _x(e){const t=new In(e);return uu({$notificationStream:t}),t}const Ex=null;function Cd(e=Ex){let{$notificationStream:t}=Qn;return t||(t=_x(e),t)}function Sx({id:e=Mr.uniqueId(),type:t=Ed.Change,...r}){return Cd().next({...r,id:e,type:t}),e}function Cx(e){const t=e.pipe(kn(bx),ei(1));return uu({$toastNotificationStream:t}),t}function CC(){let{$toastNotificationStream:e}=Qn;if(e)return e;const t=Cd();return e=Cx(t),e}function kx(){const e=new ln().pipe(ei(1));return uu({$toastNotificationDismissalStream:e}),e}function Ax(){let{$toastNotificationDismissalStream:e}=Qn;return e||(e=kx(),e)}function Ix(e){Ax().next({toastId:e})}let fs={};function Rx(){fs={}}function Tx(e,t){return{...e,...t}}function Ox(e){fs=Tx(fs,e)}function Nx(e){const t=new Map(e);return Ox({preferencesSubjects:t}),t}async function Lx(e){let{preferencesSubjects:t}=fs;if(t)return t;const r=await Fx();return t=Nx(r),t}async function kd(e,t){const r=await Ad(e);if(!r)throw new Error(`Preference subject with id ${e} not found`);r.next(t)}async function Ad(e){return(await Lx()).get(e)}function Px(){Object.values(es).forEach((e,t)=>{const r=Object.keys(es)[t];kd(r,e)})}function Bx(e,t,r){return r.set(e,t),t.subscribe(n=>{Xf(e,n)}),t}async function Fx(){const e=new Map,t=Object.keys(es),r=Object.values(es);return(await Cg(t)).forEach((o,s)=>{const u=t[s],i=new In(o??r[s]);Bx(u,i,e)}),e}async function Dx(e){if(!e)throw new Error("No user_id provided");const t=await yt(void 0,!0);if(!t)return bt();const r=nr();return Xm({user_id:e,header:r?{[Qm]:r}:void 0},t)}function jx(e){const t=Mx(e);return t.usage>=t.limit}function Mx(e){return{limit:e.limits.create_compilation_number_day,usage:e.usage.create_compilation_number_day_current}}function Ux(e){return e.limits.ota>0}function $x(e){var t;return(t=e.plans)==null?void 0:t.some(r=>r==="organization-member")}function zx(e){var t,r,n,o,s;return(t=e.plans)!=null&&t.includes(Br.ENTERPRISE)?Br.ENTERPRISE:(r=e.plans)!=null&&r.includes(Br.MAKER)||(n=e.plans)!=null&&n.includes(Br.MAKER_PLUS)||(o=e.plans)!=null&&o.includes(Br.CLASSROOM)||(s=e.plans)!=null&&s.includes(Br.ARDUINO)?Br.MAKER:Br.FREE}function Gx(e){return{limit:e.limits.ai_interactions_months,usage:e.usage.ai_interactions_month_current??0}}const cf={"arduino:avr:uno":{name:"Arduino Uno",flasher:"avr",avr_name:"uno",ids:[{vid:9025,pid:67},{vid:9025,pid:1},{vid:10755,pid:67},{vid:9025,pid:579}]},"arduino:megaavr:uno2018":{name:"Arduino Uno WiFi Rev2",flasher:"avr",ids:[{vid:1003,pid:8517}],avr_name:"unowifirev2"},"arduino:samd:mkrwifi1010":{name:"Arduino MKR WiFi 1010",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:84},{vid:9025,pid:32852,bootloader:!0}],use_1200bps_touch:!0},"arduino:mbed_nano:nanorp2040connect":{name:"Arduino Nano RP2040 Connect",flasher:"rp",iot_enabled:!1,supports_uf2:!0,ids:[{vid:9025,pid:94},{vid:9025,pid:32862},{vid:9025,pid:350},{vid:9025,pid:606}],use_1200bps_touch:!0},"arduino:samd:nano_33_iot":{name:"Arduino NANO 33 IoT",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:87},{vid:9025,pid:32855,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:minima":{name:"Arduino Uno R4 Minima",flasher:"dfu",iot_enabled:!1,ids:[{vid:9025,pid:105},{vid:9025,pid:873,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:unor4wifi":{name:"Arduino Uno R4 WiFi",flasher:"sam-ba-renesas",iot_enabled:!0,ids:[{vid:9025,pid:4098},{vid:9025,pid:109,bootloader:!0}]}};function Id(e){return e.map(r=>({serialNumber:"",vendorId:r.vendorId,productId:r.productId,id:r.fqbn.split(":")[2],name:cf[r.fqbn]?cf[r.fqbn].name:Nc.UNKNOWN_BOARD_NAME,portBoardId:r.name,fqbn:r.fqbn,portName:`${r.vendorId}/${r.productId}`,isOpen:r.isOpen,architecture:r.fqbn.split(":")[1]}))}function lu(){let{stateChangeSubject$:e}=$t;return e||(e=jf(Xt),e)}var St=(e=>(e.WebSerialConnected="webSerialConnected",e.Ports="ports",e.UploadStatus="uploadStatus",e.SerialMonitors="serialMonitors",e.SupportedFqbns="supportedFqbns",e))(St||{});const Rd={[St.WebSerialConnected]:!1,[St.Ports]:[],[St.SerialMonitors]:[],[St.SupportedFqbns]:[]};let $t={...Rd};function Vx(){$t={...Rd}}function Xt(e,t=!1){$t=Mf($t,e);const r=lu();t||Uf($t,r)}function kC(){const{[St.WebSerialConnected]:e,uploadConcatResponseStream$:t,uploadResponseStream$:r,serialMonitorsMsgStream$:n,serialMonitorsDisconnections$:o,stateChangeSubject$:s,...u}=$t;return{...u,[St.WebSerialConnected]:null}}function qx(e,t){return!e||!t||e.length!==t.length?!1:e.every((r,n)=>t[n].portName===r.portName&&t[n].isOpen===r.isOpen)}let an=null;function Hx(){an=null}class Wx{debug(t,r){this.shouldLogUploadMessage()&&this.uploadLog(t),console.log(t,r)}info(t,r){this.shouldLogUploadMessage()&&this.uploadLog(t),console.log(t,r)}warn(t,r){console.warn(t,r)}error(t,r){console.error(t,r)}shouldLogUploadMessage(){return console.log($t[St.UploadStatus]),$t[St.UploadStatus]===Ht.IN_PROG}uploadLog(t){t.toLowerCase().includes("checked response")||Yi(Xt,$t,t)}}function Kx(){return an=new Nc.Uploader({whiteListedOrigins:[at.APP_ORIGIN,at.WEB_IDE_URL],logger:new Wx}),an.onMessage(Zx),an}function Ms(){return an||(an=Kx(),an)}function Zx(e){var t,r;if(e.portCloseStatus==="success"){const{[St.SerialMonitors]:n}=$t,o=(t=n[0])==null?void 0:t.port,u=n.findIndex(g=>g.port===o)!==-1;let i;u?(mc(Xt,$t,o),i=n.filter(g=>g.port!==o)):i=n,Xt({[St.SerialMonitors]:i})}if(e.serialData){const{[St.SerialMonitors]:n}=$t,o=(r=n[0])==null?void 0:r.port;md(Xt,$t,{port:o,data:e.serialData})}if(e.ports&&Array.isArray(e.ports)){const n=e.ports.filter(Yx),o=$t[St.Ports],s=Id(n);qx(o,s)||Xt({[St.Ports]:s})}if(e.supportedBoards&&Xt({[St.SupportedFqbns]:Object.keys(e.supportedBoards)}),e.uploadStatus)switch(Yi(Xt,$t,e.message),e.uploadStatus){case"message":Xt({[St.UploadStatus]:Ht.IN_PROG});break;case"error":Xt({[St.UploadStatus]:Ht.ERROR});break;case"success":Xt({[St.UploadStatus]:Ht.DONE});break;default:Xt({[St.UploadStatus]:Ht.NONE})}e.err&&Xt({uploadStatus:Ht.ERROR})}function Yx(e){return e.name!==void 0&&e.vendorId!==void 0&&e.productId!==void 0&&e.fqbn!==void 0&&e.isOpen!==void 0}async function AC(){const t=await Ms().listBoards();return Id(t)}async function Xx(e,t){const r=Ms();Object.keys(r.openPorts).some(n=>n===e&&r.openPorts[n]===!0)||await r.openPort({name:e,baudrate:t})}async function Qx(e){await Ms().closePort({name:e})}function Jx(e,t){Ms().writePort({name:e,data:t})}async function IC(){const e=navigator;return e.serial?(await e.serial.requestPort()).getInfo():Promise.reject(new Error("Web Serial API is not available"))}function e_(e,t=9600){return ws(()=>{const{[St.Ports]:r,[St.UploadStatus]:n,[St.SerialMonitors]:o}=$t;if(n===Ht.IN_PROG)return _r(()=>new Error("Could not open serial monitor, upload in progress"));const s=r.find(f=>f.portName===e);if(!s)return _r(()=>new Error(`Could not open serial monitor, can't find board at ${e}`));if(s.isOpen)return _r(()=>new cu(e));const i=o.findIndex(f=>f.port===e)!==-1;let g;return i?g=o.map(f=>f.port===e?{...f}:f):g=[...o,{port:e,baudRate:t,status:Jt.OPENED}],Xx(e,9600),Xt({[St.SerialMonitors]:g}),vd(Xt,$t,St.SerialMonitors,e,o,lu())})}function t_(e){return ws(()=>{const{[St.SerialMonitors]:t}=$t;return Qx(e),yd($t,St.SerialMonitors,St.Ports,e,t,lu())})}function r_(e,t){const{[St.SerialMonitors]:r}=$t;if(!r.some(({port:n})=>n===e))throw new Error(`Could not find an opened serial monitor on port ${e}`);Jx(e,t)}let er,cn;function n_(){er=void 0,cn=void 0}function i_(e){return t=>{let r=!1;return t.pipe(zf(n=>{r=e(n)}),tg(n=>r?rg:_r(()=>n)))}}function o_(){return cn=new ln,cn}function s_(e,t,r){return er=new ln().pipe(Jo(()=>{er=void 0}),zf(({type:o,value:s})=>{o==="info"&&s==="ready"&&r()}),i_(({type:o,value:s})=>o==="info"&&s==="closing"),kn(({type:o})=>o==="message")),(zc?e_:gx)(e,t).pipe(eg({delay:(o,s)=>o instanceof bd||o instanceof cu||s>4?_r(()=>o):ng(s**2*100)})).subscribe(er),er}function RC(e,t,r,n=()=>{}){if(!(!t||!r||!(e===fl.Starting||e===fl.Active)))return er||(er=s_(t,r,n)),er}function a_(){return cn||(cn=o_()),cn}function TC(e,t){e.meta==="sent"&&t&&(zc?r_(t,e.value):yx(t,e.value)),er==null||er.next(e)}async function OC(e){e&&(er==null||er.next({type:"info",value:"closing"}),await Jm((zc?t_:vx)(e)),er=void 0)}function NC(){cn=a_(),cn.next()}const c_={userNotTargetAudience:!1,compileUsageExceeded:void 0,canUseOta:void 0,canUseGenAi:void 0,isAuthInjected:!1,aiUserPlan:void 0,genAiInteractions:void 0},Jn=Oe.createContext(c_),u_={headerless:!1,notificationElement:null,updateLogic:ig},no=Oe.createContext(u_);var Wt=(e=>(e.Sketch="Sketch",e.Example="Example",e.CustomLibrary="CustomLibrary",e.None="None",e))(Wt||{}),l_=(e=>(e.Rename="Rename",e.Download="Download",e.Delete="Delete",e.Share="Share",e.ShareToClassroom="ShareToClassroom",e))(l_||{}),f_=(e=>(e.Download="Download",e.Delete="Delete",e))(f_||{}),h_=(e=>(e.CopyToSketches="CopyToSketches",e.Download="Download",e.Share="Share",e))(h_||{});const d_="_warning_1n54v_12",bn={"title-skeleton":"_title-skeleton_1n54v_1",warning:d_,"read-only-header":"_read-only-header_1n54v_16","logo-container":"_logo-container_1n54v_26","right-item-container":"_right-item-container_1n54v_37","user-avatar":"_user-avatar_1n54v_42"},Ma=un({[Wt.Sketch]:{id:"headerTitle.sketch",defaultMessage:"Sketches",description:"Sketches"},[Wt.Example]:{id:"headerTitle.example",defaultMessage:"Example",description:"Example"},[Wt.CustomLibrary]:{id:"headerTitle.customLibrary",defaultMessage:"Library",description:"Library"}}),p_=un({signIn:{id:"header.signIn",defaultMessage:"Sign In",description:"Sign In"}}),uf={[Wt.CustomLibrary]:Ma[Wt.CustomLibrary],[Wt.Example]:Ma[Wt.Example],[Wt.Sketch]:Ma[Wt.Sketch]},m_=e=>{const{headerLogic:t}=e,{user:r,isReadOnly:n,canShareToClassroom:o,readOnlyAvatarLink:s,headerItemId:u,itemName:i,itemDataIsLoading:g,headerActions:f}=t(),{formatMessage:a}=Rn();return n?X.jsxs("div",{className:bn["read-only-header"],children:[X.jsx("div",{className:bn["logo-container"],children:X.jsx(tn.ArduinoLoop,{})}),X.jsx("div",{className:bn["right-item-container"],children:r?r.picture?X.jsx("a",{href:s,target:"_blank",rel:"noreferrer",children:X.jsx("img",{className:bn["user-avatar"],src:r.picture,alt:"User avatar",width:"36",height:"36"})}):null:r===null?X.jsx(Cc,{type:sg.Tertiary,onClick:ts,children:a(p_.signIn)}):null})]}):X.jsxs(X.Fragment,{children:[X.jsxs(eb,{asDialog:"header",children:[X.jsx(fb,{}),X.jsxs(Y1,{children:[X.jsx(rb,{}),X.jsx(Q1,{}),X.jsx(q1,{})]}),X.jsx(db,{})]}),X.jsx(Z1,{children:u===Wt.None||!f?null:g?X.jsx("div",{className:bn["title-skeleton"],children:X.jsx(og,{variant:"rounded",count:1})}):X.jsxs(H1,{children:[X.jsx(Eh,{children:u!==Wt.Sketch?a(uf[u]):X.jsx("a",{href:`${at.CLOUD_HOME_URL}/sketches`,children:a(uf[u])})}),X.jsx(W1,{}),X.jsxs(K1,{triggerContent:i,children:[u===Wt.Sketch&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:f[u].Rename,children:"Rename"}),X.jsx(br,{onClick:f[u].Download,children:"Download"}),X.jsx(br,{onClick:f[u].Share,children:"Share Sketch"}),X.jsx(br,{onClick:f[u].ShareToClassroom,disabled:!o,children:"Share to Google Classroom"}),X.jsx(br,{className:bn.warning,onClick:f[u].Delete,children:"Delete"})]}),u===Wt.CustomLibrary&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:f[u].Download,children:"Download"}),X.jsx(br,{className:bn.warning,onClick:f[u].Delete,children:"Delete"})]}),u===Wt.Example&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:f[u].CopyToSketches,children:"Save in your sketches"}),X.jsx(br,{onClick:f[u].Download,children:"Download"}),X.jsx(br,{onClick:f[u].Share,children:"Share"})]})]})]})})]})},Us=Oe.memo(m_),LC=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"})),g_="data:image/svg+xml,%3csvg%20width='15'%20height='8'%20viewBox='0%200%2015%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.5%204.97755C8.35464%206.46437%209.6849%207.28125%2011.2596%207.28125C13.0637%207.28125%2014.5312%205.80931%2014.5312%204C14.5312%202.19069%2013.0637%200.71875%2011.2596%200.71875C9.6849%200.71875%208.35464%201.53563%207.5%203.02245C6.64536%201.53563%205.3151%200.71875%203.74039%200.71875C1.93634%200.71875%200.46875%202.19069%200.46875%204C0.46875%205.80931%201.93634%207.28125%203.74039%207.28125C5.3151%207.28125%206.64536%206.46437%207.5%204.97755ZM8.25531%204.40741L8.03353%204L8.25531%203.59259C8.9447%202.32573%209.98337%201.65625%2011.2596%201.65625C12.5466%201.65625%2013.5938%202.70773%2013.5938%204C13.5938%205.29227%2012.5466%206.34375%2011.2596%206.34375C9.98337%206.34375%208.9447%205.67427%208.25531%204.40741ZM1.40625%204C1.40625%202.70773%202.45338%201.65625%203.74039%201.65625C5.01663%201.65625%206.0553%202.32573%206.74469%203.59259L6.96647%204L6.74469%204.40741C6.0553%205.67427%205.01663%206.34375%203.74039%206.34375C2.45339%206.34375%201.40625%205.29227%201.40625%204ZM11.3688%204.35175H12.0849V3.66663H11.3688V2.94565H10.684V3.66663H9.96693V4.35175H10.684V5.07273H11.3688V4.35175ZM5.013%203.66663H2.89407V4.35175H5.013V3.66663Z'%20fill='black'/%3e%3c/svg%3e",v_="data:image/svg+xml,%3csvg%20width='15'%20height='8'%20viewBox='0%200%2015%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.5%204.97755C8.35464%206.46437%209.6849%207.28125%2011.2596%207.28125C13.0637%207.28125%2014.5312%205.80931%2014.5312%204C14.5312%202.19069%2013.0637%200.71875%2011.2596%200.71875C9.6849%200.71875%208.35464%201.53563%207.5%203.02245C6.64536%201.53563%205.3151%200.71875%203.74039%200.71875C1.93634%200.71875%200.46875%202.19069%200.46875%204C0.46875%205.80931%201.93634%207.28125%203.74039%207.28125C5.3151%207.28125%206.64536%206.46437%207.5%204.97755ZM8.25531%204.40741L8.03353%204L8.25531%203.59259C8.9447%202.32573%209.98337%201.65625%2011.2596%201.65625C12.5466%201.65625%2013.5938%202.70773%2013.5938%204C13.5938%205.29227%2012.5466%206.34375%2011.2596%206.34375C9.98337%206.34375%208.9447%205.67427%208.25531%204.40741ZM1.40625%204C1.40625%202.70773%202.45338%201.65625%203.74039%201.65625C5.01663%201.65625%206.0553%202.32573%206.74469%203.59259L6.96647%204L6.74469%204.40741C6.0553%205.67427%205.01663%206.34375%203.74039%206.34375C2.45339%206.34375%201.40625%205.29227%201.40625%204ZM11.3688%204.35175H12.0849V3.66663H11.3688V2.94565H10.684V3.66663H9.96693V4.35175H10.684V5.07273H11.3688V4.35175ZM5.013%203.66663H2.89407V4.35175H5.013V3.66663Z'%20fill='white'/%3e%3c/svg%3e",y_={},Td=Oe.createContext(y_),lf=un({title:{id:"title",defaultMessage:"Cloud Editor",description:"Tab Title"},titleSuffix:{id:"title.suffix",defaultMessage:"Arduino Cloud Editor",description:"Tab Title Suffix"}}),fu=e=>{const{tabTitle:t}=e,{isDarkModeOs:r}=Oe.useContext(Td),{formatMessage:n}=Rn();return X.jsxs(jp,{children:[X.jsx("title",{children:t?`${t} — ${n(lf.titleSuffix)}`:n(lf.title)}),X.jsx("link",{rel:"icon",type:"image/svg+xml",href:r?v_:g_})]})},b_={},w_=Oe.createContext(b_);function ff({getKeyFromAction:e,action:t,successMessage:r,onFailure:n=u=>{},alwaysShowSuccessMessage:o=!1,customErrors:s}){const u=Oe.useRef(new Map),{sendSuccessNotification:i,sendErrorNotification:g}=Oe.useContext(w_),f=Oe.useCallback(async(...a)=>{const y=e(...a);try{const l=await t(...a);if(u.current.has(y)||o){const v=u.current.get(y);i(r,v)}return u.current.delete(y),l}catch(l){n(l);const v=u.current.get(y),I=l,d=s==null?void 0:s.get(I.constructor),{toastId:R}=g(()=>{f(...a)},v,d,d?{hasErrorMessage:!!I.message,errorMessage:I.message}:void 0);u.current.set(y,R)}},[e,t,o,i,r,n,g,s]);return{wrappedAction:f}}const x_={hasError:!1};class __ extends Oe.Component{constructor(t){super(t),this.state=x_}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?null:this.props.children}}const E_="_container_dbaw5_1",S_="_content_dbaw5_12",Ua={container:E_,"container-with-header":"_container-with-header_dbaw5_7",content:S_},C_="_container_1nfy1_1",k_="_content_1nfy1_8",A_="_title_1nfy1_18",I_="_message_1nfy1_23",R_="_divider_1nfy1_27",T_="_button_1nfy1_33",O_="_iconContainer_1nfy1_37",wn={container:C_,content:k_,title:A_,message:I_,divider:R_,button:T_,iconContainer:O_},Ti=un({needHelpMessage:{id:"error.needHelpMessage",defaultMessage:"{getInTouchLink} with us",description:"Help msg for error page"},getInTouchLink:{id:"error.getInTouchLink",defaultMessage:"Get in touch",description:"Link to get in touch"},helpTitle:{id:"error.helpTitle",defaultMessage:"An Error Occurred",description:"Title for error page"},helpMessage:{id:"error.helpMessage",defaultMessage:"We're not sure what happened",description:"Help msg for error page"},copyError:{id:"error.copyError",defaultMessage:"Copy Error to Clipboard",description:"CTA to copy error to clipboard"}}),N_=e=>{const{onClickCopyError:t}=e,{formatMessage:r}=Rn(),n=X.jsx(Gf,{href:at.ARDUINO_CONTACT_US_URL,target:"_blank",rel:"noreferrer",children:r(Ti.getInTouchLink)});return X.jsx("div",{className:wn.container,children:X.jsxs("div",{className:wn.content,children:[X.jsx("div",{className:wn.iconContainer,children:X.jsx(tn.StatusError,{})}),X.jsx(kc,{bold:!0,className:wn.title,children:r(Ti.helpTitle)}),X.jsx(Ac,{className:wn.message,children:r(Ti.helpMessage)}),X.jsx(Cc,{classes:{button:wn.button},onClick:t,children:r(Ti.copyError)}),X.jsx("hr",{className:wn.divider}),ni()?void 0:X.jsx(Vf,{children:r(Ti.needHelpMessage,{getInTouchLink:n})})]})})},L_=Oe.memo(N_),P_=e=>{const{onClickCopyError:t}=e,r=()=>{const{user:u}=Oe.useContext(Jn),{viewMode:i}=Gs(),g=Wt.None;return{isReadOnly:!!i,readOnlyAvatarLink:ni()?"":at.ID_URL,user:u,headerItemId:g}},n=Oe.useCallback(r,[]);let o=!1;const s=Oe.useContext(no);return s&&(o=!!s.headerless),X.jsxs("div",{className:ys(Ua.container,{[Ua["container-with-header"]]:!o}),children:[X.jsxs(__,{children:[o?null:X.jsx(fu,{}),o?null:X.jsx(Us,{headerLogic:n})]}),X.jsx("div",{className:Ua.content,children:X.jsx(L_,{onClickCopyError:t})})]})},B_=Oe.memo(P_);function Od(e){const t=Oe.useCallback(n=>{const o=e.subscribe(n);return()=>o.unsubscribe()},[e]),r=Oe.useCallback(()=>{if(e instanceof In)return e.getValue();{let n;return e.subscribe(o=>{n=o}).unsubscribe(),n}},[e]);return Oe.useSyncExternalStore(t,r)}let hf=!1;function F_(e,t){const{isIotComponent:r}=Oe.useContext(no),{viewMode:n}=Gs(),o=Oc(),s=Od(o),u=!!(n&&!s);Ug(u);const i=!!(e||!e&&t),{data:g}=ir(["auth-init"],Bg,{enabled:!i}),{data:f}=ir(["auth-token"],()=>yt(void 0,!0,u),{enabled:!i&&!!g}),a=!!(f||f===""),{data:y}=ir(["auth-check"],Dg,{enabled:a});ir(["auth-login"],ts,{enabled:a&&y===!1&&!u});const{data:l}=ir(["auth-user"],Qf,{enabled:a&&y===!0}),v=e||l||void 0,{data:I}=ir(["user-restrictions-recap",v==null?void 0:v[Pi]],()=>Dx(v==null?void 0:v[Pi]),{enabled:!!v});return ir(["analytics",v==null?void 0:v[Pi]],()=>v?Wg(v):Promise.reject(),{enabled:!!v&&!r,onSuccess:async()=>{v&&!hf&&(Zg({type:"INIT"}),hf=!0)}}),{client:g,token:f,user:u&&f===ti?null:v,isAuthInjected:i,userNotTargetAudience:!1,compileUsageExceeded:I&&jx(I),canUseOta:I&&Ux(I),canUseGenAi:!0,canShareToClassroom:I&&$x(I),aiUserPlan:I&&zx(I),genAiInteractions:I&&Gx(I)}}const hu=({profile:e,profileIsLoading:t,children:r})=>{const{client:n,isAuthInjected:o,...s}=F_(e,t);return o?X.jsx(Jn.Provider,{value:{...s,isAuthInjected:!0},children:r}):X.jsx(Oe.Suspense,{children:n?X.jsx(Jn.Provider,{value:{...s,isAuthInjected:!1},children:X.jsx(ag,{env:{API_URL:at.API_URL},authClient:n,skipRedirectCallback:!0,children:r})}):null})},{API_URL:D_,ID_URL:j_,DIGITAL_STORE_URL:M_,CLOUD_CDN_URL:U_}=at,du=({children:e})=>{const{isAuthInjected:t}=Oe.useContext(Jn);return t?X.jsx(X.Fragment,{children:e}):X.jsx($_,{children:e})},$_=({children:e})=>{var r,n;const{client:t}=Cr();return X.jsx(V1,{api:{baseurl:D_},onSpaceChange:z_(((r=t.getCustomization())==null?void 0:r.url)||at.CLOUD_HOME_URL),env:{DIGITAL_STORE_URL:ni()?"":M_,ID_URL:j_,ICON_CDN:U_,CLOUD_HOME_URL:((n=t.getCustomization())==null?void 0:n.url)||at.CLOUD_HOME_URL},storage:Ih(),children:e})},z_=e=>t=>{window.location.href=`${e}/sketches`},lr=new Mp({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),pu=e=>{const{children:t}=e;return X.jsx(Up,{client:lr,children:t})},G_={},V_=Oe.createContext(G_),df=cg.ENGLISH,mu=({children:e})=>{const[t,r]=Oe.useState(df);return X.jsx(V_.Provider,{value:{currentLocale:t,setCurrentLocale:r},children:X.jsx($p,{locale:t,defaultLocale:df,children:e})})},PC=function(){const e=Oe.useCallback((r,n)=>{kd(r,n)},[]),t=Oe.useCallback(()=>{Px()},[]);return{setPreference:e,restorePreferences:t}};function pf(e){const[t,r]=Oe.useState(qa);Oe.useEffect(()=>{(async()=>{const o=await Ad(e);r(o||qa)})()},[e,t]);const n=Od(t);return t instanceof In?n:void 0}const q_="_themeContainer_17qd2_1",H_={themeContainer:q_},gu=e=>{const{children:t}=e,r=zp("(prefers-color-scheme:dark)"),n=pf(hl.Theme),s=pf(hl.AutoTheme)?r?ya.DarkTheme:ya.LightTheme:n??ya.LightTheme,[u,i]=Oe.useState(String(s));return X.jsx(Td.Provider,{value:{theme:u,setTheme:i,isDarkModeOs:r},children:X.jsx("div",{className:ys(u,H_.themeContainer),children:t})})},W_=new Rf,K_=({profile:e,profileIsLoading:t,children:r})=>X.jsx(Tf,{location:W_,routes:[],children:X.jsx(pu,{children:X.jsx(mu,{children:X.jsx(hu,{profile:e,profileIsLoading:t,children:X.jsx(du,{children:X.jsx(gu,{children:X.jsx(wc,{children:r})})})})})})}),Z_=e=>{const{errorMsg:t,errorInfo:r,profile:n,profileIsLoading:o}=e,[s,u]=Gp(),i=Oe.useCallback(()=>{const g=`Error message: ${t}
Stack: ${r.componentStack}`;u(g)},[u,r.componentStack,t]);return X.jsx(K_,{profile:n,profileIsLoading:o,children:X.jsx(B_,{onClickCopyError:i})})},Y_={hasError:!1,errorMsg:void 0,errorInfo:void 0};class Nd extends Oe.Component{constructor(t){super(t),this.state=Y_}componentDidCatch(t,r){this.setState({hasError:!0,errorInfo:r,errorMsg:t.message})}render(){return this.state.hasError?X.jsx(Z_,{errorInfo:this.state.errorInfo,errorMsg:this.state.errorMsg,profile:this.context.profile,profileIsLoading:this.context.profileIsLoading}):this.props.children}}sl(Nd,"contextType",no);const X_="_container_1nf32_1",Q_="_content_1nf32_13",$a={container:X_,"container-with-header":"_container-with-header_1nf32_10",content:Q_},Oi=un({needHelpMessage:{id:"notFound.needHelpMessage",defaultMessage:"Need help? {getInTouchLink} with us",description:"Help msg for error page"},getInTouchLink:{id:"notFound.getInTouchLink",defaultMessage:"Get in touch",description:"Link to get in touch"},helpTitle:{id:"notFound.helpTitle",defaultMessage:"{type} not found",description:"Title for error page"},helpMessage:{id:"notFound.helpMessage",defaultMessage:"Unfortunately, we can’t find the {type} that you are looking for",description:"Help msg for error page"},goToSketches:{id:"notFound.goToSketches",defaultMessage:"Go to sketches",description:"CTA to go to sketch list"}}),J_="_container_17g8x_1",eE="_content_17g8x_8",tE="_title_17g8x_18",rE="_message_17g8x_23",nE="_divider_17g8x_27",iE="_button_17g8x_33",Vn={container:J_,content:eE,title:tE,message:rE,divider:nE,button:iE},oE=e=>{const{type:t}=e,{formatMessage:r}=Rn(),n=X.jsx(Gf,{href:at.ARDUINO_CONTACT_US_URL,target:"_blank",rel:"noreferrer",children:r(Oi.getInTouchLink)}),o=()=>{window.location.href=`${at.CLOUD_HOME_URL}/sketches`};return X.jsx("div",{className:Vn.container,children:X.jsxs("div",{className:Vn.content,children:[X.jsx(tn.NotFoundPageImage,{}),X.jsx(kc,{bold:!0,className:Vn.title,children:r(Oi.helpTitle,{type:t})}),X.jsx(Ac,{className:Vn.message,children:r(Oi.helpMessage,{type:t})}),X.jsx(Cc,{classes:{button:Vn.button},onClick:o,children:r(Oi.goToSketches)}),X.jsx("hr",{className:Vn.divider}),ni()?null:X.jsx(Vf,{children:r(Oi.needHelpMessage,{getInTouchLink:n})})]})})},sE=e=>{const{notFoundType:t}=e,r=()=>{const{user:u}=Oe.useContext(Jn),{viewMode:i}=Gs(),g=Wt.None;return{isReadOnly:!!i,readOnlyAvatarLink:ni()?"":at.ID_URL,user:u,headerItemId:g}},n=Oe.useCallback(r,[]);let o=!1;const s=Oe.useContext(no);return s&&(o=!!s.headerless),X.jsxs("div",{className:ys($a.container,{[$a["container-with-header"]]:!o}),children:[o?null:X.jsx(fu,{}),o?null:X.jsx(Us,{headerLogic:n}),X.jsx("div",{className:$a.content,children:X.jsx(oE,{type:t})})]})},aE=({profile:e,profileIsLoading:t,children:r})=>X.jsx(pu,{children:X.jsx(mu,{children:X.jsx(hu,{profile:e,profileIsLoading:t,children:X.jsx(du,{children:X.jsx(gu,{children:X.jsx(wc,{children:r})})})})})}),za=e=>{const{notFoundType:t,profile:r,profileIsLoading:n}=e;return X.jsx(aE,{profile:r,profileIsLoading:n,children:X.jsx(sE,{notFoundType:t})})};function cE(){const e=Object.assign(Oe.lazy(()=>Ni(()=>import("./MainPage-CKMBo09N.js").then(r=>r.j),__vite__mapDeps([0,1,2,3,4,5,6,7]))),{preload:async()=>{await Ni(()=>import("./MainPage-CKMBo09N.js").then(r=>r.j),__vite__mapDeps([0,1,2,3,4,5,6,7]))}}),t=Object.assign(Oe.lazy(()=>Ni(()=>import("./SerialMonitorPage-7OziDrzl.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),{preload:async()=>{await Ni(()=>import("./SerialMonitorPage-7OziDrzl.js"),__vite__mapDeps([8,1,2,3,4,5,6]))}});return{MainPage:e,SerialMonitorPage:t}}function uE(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function lE(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,r){return String.fromCharCode(parseInt(r,16))}))}const fE="nav",Ld="eid",Pd="lid",BC="ui",vu="slid",Bd="clid",gc="createExample",vc="createSketch",Fd="sketchID",hE="optIn",dE="bypassIotRedirect",pE="view-mode",mE="scope",gE="highlight",vE="hide-numbers",yE=["preview","embed","snippet"];function bE(e){return yE.includes(e)}function wE(e){const[t,r]=e.replaceAll("L","").split("-");return!isNaN(Number(t))&&!isNaN(Number(r))}function xE(e){const[t,r]=e.replaceAll("L","").split("-").map(Number);return{start:t,end:r}}function _E(e){return e.split(",").every(t=>{const[r,n]=t.replaceAll("L","").split("-");return n?!isNaN(Number(r))&&!isNaN(Number(n)):!isNaN(Number(r))})}function EE(e){return[...new Set(e.split(",").flatMap(t=>{const[r,n]=t.replaceAll("L","").split("-").map(Number);return n?Array.from({length:n-r+1},(o,s)=>r+s):[r]}))]}var SE=(e=>(e.Fullscreen="fs",e))(SE||{});const CE={parseSearch:qp(e=>JSON.parse(uE(e))),stringifySearch:Vp(e=>lE(JSON.stringify(e)))},kE=new Rf(CE),{MainPage:$s,SerialMonitorPage:AE}=cE(),Dd="monitor",jd="examples",Md="libraries",zs="notfound",Ud="redirect",IE=[Dd,jd,Md,zs,Ud],ui="/",RE=Dd,yu=`${ui}${jd}`,bu=`${ui}${Md}`,$d=`${ui}${zs}`,zd=`${yu}/${zs}`,Gd=`${bu}/${zs}`,TE=`${ui}${Ud}`,OE={Sketch:$d,Example:zd,Library:Gd},NE=X.jsx(Hp,{to:ui,from:{pathname:at.ROUTING_BASE_URL},fromCurrent:!1}),LE={element:NE},PE=e=>({path:RE,element:X.jsx(AE,{...e})}),BE=e=>({path:`:${Fd}`,element:X.jsx($s,{...e})}),FE=e=>({path:yu,element:X.jsx($s,{...e})}),DE=e=>({path:bu,element:X.jsx($s,{...e})}),jE=e=>({path:TE,element:X.jsx($s,{...e})}),ME=e=>[{path:Gd,element:X.jsx(za,{...e,notFoundType:"Library"})},{path:$d,element:X.jsx(za,{...e,notFoundType:"Sketch"})},{path:zd,element:X.jsx(za,{...e,notFoundType:"Example"})}],UE=(e,t)=>[...ME(e),PE(t),jE(e),FE(e),DE(e),BE(e),LE],$E=UE(),zE=e=>{const{location:t,routes:r,renderOutletContextProvider:n}=e,o=X.jsx(Nd,{children:X.jsx(Wp,{})});return X.jsx(Tf,{location:t||kE,basepath:at.ROUTING_BASE_URL,routes:r||$E,children:n?n(o):o})};var yc=(e=>(e[e.DeviceAssociation=0]="DeviceAssociation",e[e.DeleteFile=1]="DeleteFile",e[e.RenameSketch=2]="RenameSketch",e[e.DeleteSketch=3]="DeleteSketch",e[e.DeleteLibrary=4]="DeleteLibrary",e[e.MobileWarning=5]="MobileWarning",e[e.DeleteSecret=6]="DeleteSecret",e[e.FlavourConfig=7]="FlavourConfig",e[e.ShareSketch=8]="ShareSketch",e[e.ShareToClassroom=9]="ShareToClassroom",e[e.GenAIPolicyTerms=10]="GenAIPolicyTerms",e))(yc||{}),GE=(e=>(e[e.Upload=0]="Upload",e[e.Identify=1]="Identify",e))(GE||{});const hs=un({noAgentAdvisoryTitle:{id:"toolbar.agent-down-title",defaultMessage:"No Cloud Agent Connection",description:"Title for advisory given to user when create agent is not detected"},noAgentAdvisoryMessage:{id:"toolbar.agent-down",defaultMessage:"To upload a Sketch via USB port, make sure the Cloud Agent is installed and running on this computer.",description:"Advisory given to user when create agent is not detected"},uploadNotAvailableAdvisoryTitle:{id:"toolbar.generic-upload-unavailable-title",defaultMessage:"Upload Unavailable",description:"Title for advisory given to user when upload is not available"},noDeviceAdvisoryTitle:{id:"toolbar.no-device-upload-unavailable-title",defaultMessage:"Device not found",description:"Title for advisory given to user when upload is not available because no device/port is selected"},noDeviceAdvisoryMessage:{id:"toolbar.no-device-upload-unavailable",defaultMessage:"To upload your sketch, plug a device.",description:"Advisory given to user when upload is not available because no device/port is selected"},successfulCreation:{id:"create-file-success",defaultMessage:"File successfully created",description:"Advisory given to user when file is created"},successfulSketchRename:{id:"rename-sketch-success",defaultMessage:"Sketch successfully renamed",description:"Advisory given to user when file is renamed"},sketchNameAlreadyExists:{id:"rename-sketch-conflict",defaultMessage:"Sketch name already exists",description:"Advisory given when to user when selected sketch name already exists"},successfulRename:{id:"rename-file-success",defaultMessage:"File successfully renamed",description:"Advisory given to user when file is renamed"},successfulDeletion:{id:"delete-file-success",defaultMessage:"File successfully deleted",description:"Advisory given to user when file is deleted"},exampleModificationAdvisory:{id:"example-mod-advisory",defaultMessage:"Examples cannot be modified, you can make a copy and do your changes there.",description:"Advisory given to user when example is modified"},exampleModificationCopy:{id:"example-mod-advisory-action",defaultMessage:"COPY IN YOUR SKETCHES",description:"Action given to user when example is modified"},successfulLibraryInclude:{id:"include-library-success",defaultMessage:"Library included",description:"Advisory given to user when library is included"},libraryAlreadyIncluded:{id:"include-library-already-included",defaultMessage:"Library already included",description:"Advisory given to user when library is already included"},errorFixedInCode:{id:"error-fixed-in-code",defaultMessage:"Error fixed in code",description:"Advisory given to user when error is fixed in code"},fixAlreadyIncluded:{id:"fix-already-included",defaultMessage:"Fix already included",description:"Advisory given to user when fix is already included"},portOfflineAdvisoryTitle:{id:"port-offline-title",defaultMessage:"Port Offline",description:"Title for advisory given to user when port is offline"},portOfflineAdvisoryMessage:{id:"port-offline",defaultMessage:"Your device is not online, check it is powered on, and connected to the relevant network",description:"Advisory given to user when port is offline"},compileLimitExceededAdvisoryTitle:{id:"compile-limit-exceeded-title",defaultMessage:"Plan limits reached",description:"Title for advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisory:{id:"compile-limit-exceeded",defaultMessage:"You have used up your available {messageBold}. Upgrade your plan for unlimited compilations.",description:"Advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisoryWOUpgrade:{id:"compile-limit-exceeded",defaultMessage:"You have used up your available {messageBold}",description:"Advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisoryBold:{id:"compile-limit-exceeded-bold",defaultMessage:"25 daily compilations",description:"Bold message shown in compile limit exceeded advisory"},compileLimitExceededUpgrade:{id:"compile-limit-exceeded-action",defaultMessage:"Upgrade plan",description:"Action given to user when compile limit is exceeded"},libraryUploadSuccess:{id:"library-upload-success",defaultMessage:"Library uploaded successfully",description:"Advisory given to user when library is uploaded"},libraryMalformedError:{id:"library-malformed-error",defaultMessage:"{hasErrorMessage, select, true {Selected file is not a valid library: {errorMessage}} other {Selected file is not a valid library}}",description:"Advisory given to user when library is malformed"},libraryDownloadStart:{id:"library-download-start",defaultMessage:'Preparing "{name}.zip" library, download will start shortly...',description:"Advisory given to user when library download starts"},readOnlyOpenInEditor:{id:"read-only-open-in-editor",defaultMessage:"Open in editor",description:"Action given to user when file is read-only"},readOnlyAddToSketches:{id:"read-only-add-to-sketches",defaultMessage:"Add to sketches",description:"Action given to user when file is read-only"},readOnlyDownloadAction:{id:"read-only-download",defaultMessage:"Download",description:"Action given to user when file is read-only"},sketchDataNotCompliantAdvisoryTitle:{id:"sketch-data-not-compliant-title",defaultMessage:"Sketch Data Incomplete",description:"Title for advisory given to user when sketch data is not compliant"},sketchDataNotCompliantAdvisoryMessage:{id:"sketch-data-not-compliant",defaultMessage:"Data in this sketch is either loading, or not compliant with our Cloud CLI, if this message persists please see our:",description:"Advisory given to user when sketch data is not compliant"},sketchDataNotCompliantReferenceLink:{id:"sketch-data-not-compliant-reference-link",defaultMessage:"Arduino Sketch Specification",description:"Link to the Arduino Sketch Specification"},iotWebSerialWrongDevice:{id:"iot-web-serial-wrong-device",defaultMessage:"Selected board doesn't match the device associated with this Thing",description:"Advisory given to user when user selects a different board from the associated Thing one using the Chrome web serial selector"},otaBlockedAdvisoryTitle:{id:"ota-blocked-title",defaultMessage:"Upgrade for OTA upload",description:"Title for advisory given to user when OTA is blocked"},otaBlockedAdvisoryMessage:{id:"ota-blocked",defaultMessage:"OTA upload is not available with your current plan",description:"Advisory given to user when OTA is blocked"},otaBlockedAdvisoryMessageWOPlan:{id:"ota-blocked",defaultMessage:"OTA upload is not available",description:"Advisory given to user when OTA is blocked"},otaIncompatibleTitle:{id:"ota-incompatible-title",defaultMessage:"OTA upload not supported",description:"Title for advisory given to user when OTA is not supported for current device"},otaIncompatibleMessage:{id:"ota-incompatible",defaultMessage:"Upload Over-The-Air is not supported by this device. Please connect the device via USB.",description:"Advisory given to user when OTA is not supported for current device"},portBusyAdvisoryTitle:{id:"port-busy-title",defaultMessage:"Port Busy",description:"Title for advisory given to user when port is busy"},portBusyAdvisoryMessage:{id:"port-busy",defaultMessage:"The selected port is busy, please wait a few moments",description:"Advisory given to user when port is busy"},shareSketchWarning:{id:"share-sketch-warning",defaultMessage:"The Sketch is now public. People outside your space with the link can view it.",description:"Warning shown when user tries to share a sketch"},shareSketchUndo:{id:"share-sketch-undo",defaultMessage:"Undo",description:"Action given to user when sketch is shared"},shareToClassroomTitle:{id:"share-to-classroom-title",defaultMessage:"Arduino Sketch - {title}",description:"Title shown in the title of sketch shared to classroom"},shareToClassroomContent:{id:"share-to-classroom-content",defaultMessage:"Hi! This is the sketch that I’ve made for you. Copy it in your sketchbook or download it.",description:"Text shown in the content of sketch shared to classroom"},couldNotCheckOtaTitle:{id:"could-not-check-ota-title",defaultMessage:"OTA Status unknown",description:"Title shown when OTA compatibility check fails"},couldNotCheckOta:{id:"could-not-check-ota",defaultMessage:"An Over-The-Air upload may be in progress",description:"Advisory given to user when OTA compatibility check fails"},noDeviceAssociatedTitle:{id:"no-device-associated-title",defaultMessage:"No device associated",description:"Title shown when no device is associated"},noDeviceAssociated:{id:"no-device-associated",defaultMessage:"We could not find a device associated with this sketch, you can associate a device from the setup tab",description:"Advisory given to user when no device is associated"},notificationPreVerifyInterrupt:{id:"pre-verify-interrupt",defaultMessage:"Verification requirements not meet, please retry",description:"Warning given to the user when pre-verification is interrupted"}}),VE=un({[nn.exceedsLimit]:{id:"fileNameExceedsLimit",defaultMessage:"Character limit reached.",description:"Character limit reached."},[nn.hasInvalidCharacters]:{id:"fileNameContainsInvalidCharacters",defaultMessage:"Spaces, punctuations and special characters are not allowed.",description:"Spaces, punctuations and special characters are not allowed."},[nn.alreadyExists]:{id:"fileNameAlreadyExists",defaultMessage:"Name already in use, please choose another one.",description:"Name already in use, please choose another one."},[nn.emptyName]:{id:"fileNameEmpty",defaultMessage:"Name cannot be empty.",description:"Name cannot be empty."}}),qE=[3,10,25],Vd={fileId:Mr.uniqueId(),fileName:"Sketch Secrets",fileFullName:"Sketch Secrets",fileExtension:"secrets",Icon:ds("secrets"),tags:[],isMetadataReadOnly:!0};function FC(e){return e==null?void 0:e.find(t=>t.name===ss)}function HE(e){const{href:t}=e;if(!t)return!1;const r=t.split("/");return r.pop()===`${r.pop()}.ino`}function DC(e){return e==null?void 0:e.find(HE)}function mf(e){return{data:e.data,name:e.fullName}}function jC({fqbn:e,sketchData:t,mainInoData:r,isVerboseOutput:n,filesData:o,isIot:s=!1}){let u=!1;const i=Sr(r.path).value.value,g=Er(Sr(r.path).value.value,r.mimetype),f=o?o.filter(v=>typeof v.data<"u").map(qd).map(mf):[];t.secrets&&(f.push(mh(t.secrets)),u=!0);const a=mf({...r,data:g}),y={included_libs:t.libraries||[]},l={fqbn:e,sketch:{name:t.name,files:f,...y,ino:u?gh(a,i,r.mimetype):a},hasSecretsIncludeInjected:u,verbose:n};return s&&(l.ota=!0),l}function WE(e,t){const r=Er(Sr(e.path).value.value,e.mimetype),n=t?t.map(qd):[];return{exampleIno:{...e,data:r},exampleFiles:n}}function qd(e){const t=e.path,r=Sr(t).value.value,n=Er(r,e.mimetype);return{...e,data:n,content:r}}function Xo(e,t=!1,r=!1,n=[]){return{fileId:e.path,fileFullName:e.fullName,fileName:e.name,fileExtension:e.extension,Icon:ds(e.extension),tags:n,isNotCreated:e.isNotCreated,isFixed:r,isMetadataReadOnly:t}}function ds(e){switch(e){case"ino":case"cpp":case"c":case"pde":return tn.FileTypeIno;case"h":return tn.FileTypeHeader;case"txt":case"adoc":case"md":case"asciidoc":case"asc":return tn.FileTypeText;case"png":case"jpg":case"svg":return tn.FileTypeImage;case"secrets":return tn.FileTypeSecrets;default:return}}function MC(e){return{exceedsLimit:fh(e),hasInvalidCharacters:hh(e)}}function UC(e,t){const r=t.slice(0,lh),n=new RegExp(r,"d"),o=e.filter(u=>u.fileName.match(n)).map(u=>u.fileName);if(o.length===0)return r;function s(u,i=0){const g=`${r}-${i}`;return u.indexOf(g)===-1?g:s(u,i+1)}return s(o)}const KE=e=>e.name.toLowerCase().includes("readme"),ZE=e=>(t=>"fullName"in t)(e)?e.fullName==="library.properties":e.name==="library.properties";function Hd(e){const t=e==null?void 0:e.find(KE);if(t)return t;if(!t)return e==null?void 0:e.find(ZE)}function $C(e){return`${at.CLOUD_HOME_URL}/things/${e}/setup`}function zC(e,t){var n;return!!(t&&((n=e.path)!=null&&n.includes(`${t[ug]}/libraries_v2`)))}function GC(e,t){return e===Br.FREE||e===Br.MAKER&&qE.includes(t)}const VC=e=>{const t=/T(\d{2}:\d{2}:\d{2})(?:\.\d+)?Z/,r=e==null?void 0:e.match(t);return r?`[${r[1]}]`:""},YE=e=>{const t=new Date(e),r=new Date;return Math.abs(t.getTime()-r.getTime())};var XE=(e=>(e.GET_SKETCH_BY_ID_QUERY_KEY="get-sketch-by-id",e.CREATE_DEFAULT_KEY_QUERY_KEY="create-default-sketch",e.GET_SKETCHES_QUERY_KEY="get-sketches",e))(XE||{});const qC={"get-sketch-by-id":(e,t)=>({...e,...t}),"create-default-sketch":(e,t)=>({...e,...t}),"get-sketches":(e,t,r)=>e.map(n=>n.id===(t==null?void 0:t.id)?{...t,...r}:n)},HC=function(e,t){const{data:r,isLoading:n,isError:o}=ir(["get-sketch-by-id",t],()=>t?Fb(t):Promise.reject("Tried to obtain a sketch by ID without providing a specific sketch ID"),{refetchOnWindowFocus:!1,enabled:e});return{data:r,isLoading:n,isError:o}},QE=function(e,t,r,n){const{data:o,isLoading:s,refetch:u}=ir(["get-sketches",t],()=>jb(n),{refetchOnWindowFocus:!1,enabled:e,cacheTime:r});return{refetch:u,sketchesData:o,getSketchesIsLoading:s}},WC=function(){const{data:e,isLoading:t,mutate:r}=tr({mutationFn:Zc});return{create:r,isLoading:t,createdSketch:e}},KC=function(){const{isLoading:e,mutateAsync:t}=tr({mutationFn:Db});return{isLoading:e,deleteSketchMutate:t}},ZC=function(){const{isLoading:e,mutateAsync:t}=tr({mutationFn:r=>Mh(r.from,r.to)});return{renameSketchMutate:t,isLoading:e}},JE=function(e){const t=Nf(),r=Oe.useRef(0),n=Oe.useCallback(i=>{const g=`${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}/${i}`;i&&t({to:g,search:{[Ld]:void 0,[vu]:void 0,[vc]:void 0,[gc]:void 0,[Bd]:void 0},replace:!0})},[t]),{data:o,isLoading:s,mutate:u}=tr({mutationFn:i=>i?Zc(i.sketchName,i.sketchContent,void 0,i.files??[]):Promise.reject("Content undefined"),onSuccess:async i=>{e==null||e(i),n(i.id)},onError:(i,g)=>{if(r.current=r.current+1,r.current>1){t({search:{[vc]:void 0,[gc]:void 0}});return}u({...g,sketchName:`${(g==null?void 0:g.sketchName)||"Existing_Sketch_Copy"}_${new Date().valueOf()}`})}});return{create:u,isLoading:s,createdSketch:o}},YC=function(e){const[t,r]=Oe.useState(ss),n=Oe.useRef(0),{data:o}=ir(["create-default-sketch",t],()=>Zc(t),{onError:()=>{n.current===0&&r(`${ss}_${new Date().valueOf()}`),n.current=n.current+1},refetchOnWindowFocus:!1,enabled:e});return{createdSketch:o}};function XC(){lr.invalidateQueries(["get-sketch-by-id"],{})}function QC(e){e.forEach(t=>{lr.invalidateQueries(["get-file-content",t]),lr.invalidateQueries(["get-batch-file-content",t])})}const JC=function(e,t,r,n,o,s){const{data:u}=ir(["get-file-content",n,s,String(t)],()=>n&&o?Yc(n,o,t,s):Promise.reject(new Error("Tried to get file without path or sketch name")),{onSuccess:i=>{jh(i),Dh(i.path,!1)},onError:i=>{if(Tc&&i&&i.cause.status===401){const g=r==null?void 0:r(i);if(g!=null&&g.errorIsManaged)return;Gg(!0)}},refetchOnWindowFocus:!1,enabled:e});return{fileData:u}};async function ps(e,t,r,n,o){if(e.type==="file")return[{...e,contents:await Yc(e.path,e.name,t,n===e.path?r:void 0,o)}];if(e.type==="folder"||e.type==="sketch"){const s=await Xc(e.path,t),u=await Promise.all(s.filter(i=>!Bh(i)).map(i=>ps(i,t)));return[e,...u.flat()]}else return[]}const qo="get-batch-file-content",ek=function(e,t,r,n,o,s,u,i=!1,g,f,a=!1){const[y,l]=Oe.useState({items:[],fetchCount:0,fetchComplete:!1});Oe.useEffect(()=>{l({items:[],fetchCount:0,fetchComplete:!1})},[o,r]),Oe.useEffect(()=>{const U=s||[];l(ue=>{const he=ue.items.filter(q=>{const Q=U.map(_=>_.path).includes(q.path);return!Q&&[...Tn().keys()].includes(q.path)&&Ts(q.path),Q});return{...ue,...he}})},[s]);const[v,I]=Oe.useState(!1),{renameSketchFileMutate:d,isLoading:R}=rS(r),{createSketchFileMutate:w}=tS(e,r),{deleteFileQuery:S,isDeleting:O}=eS(r),N=Of({queries:(s??[]).map(U=>({queryKey:f===U.path?[qo,U.path,g,String(t)]:[qo,U.path,String(t)],queryFn:()=>ps(U,t,g,f,a),onSuccess:ue=>{var q,Q;const he=new Map;for(const _ of ue)if(_.contents&&_.type==="file"){let k;if(i){const $=(q=_.contents)==null?void 0:q.path.replace((u??"")+"/","");k={..._.contents,name:(Q=_.contents)!=null&&Q.extension?$.replace(`.${_.contents.extension}`,""):$,fullName:$}}else k=_.contents;he.set(_.path,k),jh(k)}l(_=>({items:_.items.filter($=>!he.has($.path)).concat(Array.from(he.values())),fetchCount:_.fetchComplete?_.fetchCount:_.fetchCount+1,fetchComplete:_.fetchComplete?_.fetchComplete:_.fetchCount+1===(s==null?void 0:s.length)}))},onError:n,refetchOnWindowFocus:!1,enabled:e}))}),P=U=>{const ue=U?U.map(he=>[qo,he]):[qo];lr.invalidateQueries(ue)},H=Oe.useCallback(async(U,ue)=>{function he(q,Q){l(_=>{const k=_.items.map($=>{if(Q!==void 0&&$.path===q){$.path=Q;const F=Q.split("/").pop()??"";$.fullName=F,$.name=F.split(".")[0]}return $});return{..._,items:k}})}he(U,ue),I(U===o);try{await d({from:U,to:ue})}catch(q){throw he(ue,U),q}},[o,d]),D=Oe.useCallback(async(U,ue,he,q)=>{const Q={fullName:`${ue}.${he}`,name:ue,data:"",path:U,href:"",content:"",extension:he??"",mimetype:"",isNotCreated:!0};l(_=>({..._,items:_.items.concat(Q)}));try{return await w({filePath:{path:U},extension:he,code:q})}catch(_){throw l(k=>({...k,items:k.items.filter($=>$.path!==U)})),_}},[w]),K=Oe.useCallback(async U=>{const ue=y.items.findIndex(q=>q.path===U),he=y.items[ue];l(q=>({...q,items:q.items.filter(Q=>Q.path!==U)}));try{return await S(U)}catch(q){throw q.cause!==404&&l(_=>{const k=[..._.items.slice(0,ue),he,..._.items.slice(ue)];return{..._,items:k}}),q}},[S,y]);return{filesContents:y.items.length>0?y.items:void 0,refreshFileContents:P,deleteFile:K,fileIsDeleting:O,renameSketchFile:H,addSketchFile:D,mainInoIsRenaming:R&&v,isLoading:y.items.length>0?N.some(U=>U.isLoading):!0,allContentsRetrieved:y.fetchComplete}},tk=function(e,t,r,n,o,s=!1){const u=Kp(),{data:i,isLoading:g,isError:f,refetch:a}=ir(e,()=>o?Xc(o,r,s):Promise.reject(new Error("Tried to obtain sketch files without providing a valid sketch path")),{onError:n,refetchOnWindowFocus:!1,enabled:t}),y=Oe.useCallback(()=>{u.invalidateQueries(e)},[e,u]);return{filesList:i,getFilesIsLoading:g,getFilesIsError:f,refetch:a,invalidateFilesList:y}},rk=function(e){const{mutateAsync:t}=tr({mutationFn:r=>e&&typeof r<"u"&&typeof r.code<"u"&&typeof r.fileId<"u"?Mb({path:r.fileId},r.code,r.hash):Promise.reject(new Error("Tried to save sketch without auth, path, sketch name, hash,  or content"))});return{saveSketchFileQuery:t}},eS=function(e){const{mutateAsync:t,isLoading:r}=tr({mutationFn:n=>typeof n<"u"?zb({path:n}):Promise.reject(new Error("Tried to delete sketch without path")),onSuccess:(n,o)=>{o&&Ts(o),lr.invalidateQueries({queryKey:e,exact:!0})}});return{deleteFileQuery:t,isDeleting:r}},tS=function(e,t){const{data:r,isLoading:n,mutateAsync:o}=tr({mutationFn:s=>e?Ub(s.filePath,s.extension,s.code):Promise.reject(),onSuccess:()=>{lr.invalidateQueries({queryKey:t,exact:!0})}});return{createdSketchFile:r,isLoading:n,createSketchFileMutate:o}},rS=function(e){const{mutateAsync:t,isLoading:r}=tr({mutationFn:n=>typeof n<"u"&&typeof n.from<"u"&&typeof n.to<"u"?Mh(n.from,n.to):Promise.reject(new Error("Tried to rename sketch without path or sketch name")),onSuccess:(n,o)=>{o.from&&Ts(o.from),lr.invalidateQueries({queryKey:e,exact:!0})}});return{renameSketchFileMutate:t,isLoading:r}},nk=function(){const{mutateAsync:e,isLoading:t,isError:r}=tr({mutationFn:Nb});return{mutateSketchWithSecrets:e,isError:r,isLoading:t}},ik=function(){const{mutateAsync:e,isLoading:t}=tr({mutationFn:Lb});return{mutateSketchWithDevice:e,isLoading:t}},ok=function(){const{mutateAsync:e,isLoading:t}=tr({mutationFn:Pb});return{mutateSketchVisibility:e,isLoading:t}},sk=function(){const{mutateAsync:e,isLoading:t}=tr({mutationFn:Bb});return{mutateSketchWithLibraries:e,isLoading:t}};function gf(e){if(!e)throw new Error("Tried to get custom library code without path");return["get-custom-library-code",e]}const ak=function(e,t=!1){const[r,n]=Oe.useState(),{data:o,isLoading:s}=ir(["get-custom-libraries"],Uh,{refetchOnWindowFocus:!1,enabled:e,staleTime:1/0,onSuccess(u){for(const i of u)lr.invalidateQueries(gf(i.path))}});return Of({queries:(r??[]).map(u=>({queryKey:gf(u.path),queryFn:()=>Gb({id:u.id}),enabled:t,staleTime:1/0,onSuccess:({code:i})=>{n(g=>g==null?void 0:g.map(f=>f.id===u.id?{...f,code:i}:f))},refetchOnWindowFocus:!1}))}),Oe.useEffect(()=>{n(o)},[o]),{customLibraries:r,customLibrariesAreLoading:s}};function Wd(e){return e?!("version"in e)&&!("downloadUrl"in e):!1}function Kd(){lr.invalidateQueries(["get-custom-libraries"])}const ck=function(e,t){const r=Nf(),{mutateAsync:n}=tr({mutationFn(o){return t?e?Vb(e,o):Promise.reject("Tried to save library without library name"):Promise.resolve(null)},onSuccess:o=>{Wd(o)&&(r({search:{[Pd]:o.id,[vu]:void 0,[fE]:lg.Libraries},replace:!0}),Kd())}});return{saveLibraryQuery:n}},uk=function(){const{isLoading:e,mutateAsync:t}=tr({mutationFn:qb});return{isLoading:e,deleteCustomLibraryMutate:t}},lk=()=>{const{mutateAsync:e,isLoading:t}=tr({mutationFn:Hb,onSuccess:r=>{Wd(r)&&Kd()}});return{importLibraryQuery:e,isLoading:t}};async function fk(e){const t=(await Uh()).find(o=>o.id===e);if(!t)throw new Error("Library not found");let r;try{r=await ps({path:t.path,name:t.name,type:"folder"},!1)}catch(o){wb(o)&&(r=await ps({path:t.path,name:t.name,type:"folder"},!0))}if(!r)throw new Error("Failed to retrieve library files");const n=r.map(o=>({...o,path:o.path.replace(t.path,"")}));Nh(t.name,n.map(o=>{var s;return{nameWithExt:o.path.replace(/\//,""),base64Content:(s=o.contents)==null?void 0:s.data,isDirectory:o.type==="folder"||o.type==="sketch"}}),t.name)}const vf=12e4,hk=function(e,t,r,n,o,s){const[u,i]=Oe.useState(!1),g=Oe.useRef(0),f=Oe.useRef(void 0),a=()=>{f.current&&clearTimeout(f.current),f.current=window.setTimeout(()=>{i(!1)},vf)};return ir(["retrieve-files-hash-poll",n,s,o],()=>n?Xc(n,!1):Promise.reject("No sketch path while polling the file hash."),{refetchOnWindowFocus:!1,enabled:e,refetchInterval:3e3,refetchIntervalInBackground:!0,onSuccess(y){var R,w,S,O,N;const l=y==null?void 0:y.filter(P=>!Bh(P)),v=Tn();if(v.size===0)return;let I=!1;for(const P of l.keys()){const H=l[P],D=(R=v.get(H.path))==null?void 0:R.getValue();if(!D)continue;const K=!!D.meta.hash&&!!((w=H.revision)!=null&&w.hash)&&D.meta.hash!==((S=H.revision)==null?void 0:S.hash);if(K&&(lr.invalidateQueries(["get-file-content",H.path],{exact:!1}),lr.invalidateQueries(["get-batch-file-content",H.path],{exact:!1})),I=K||!!((O=H.revision)!=null&&O.username)&&s!==((N=H.revision)==null?void 0:N.username)&&!!H.modifiedAt&&YE(H.modifiedAt)<vf,I)break}(l.filter(P=>!v.has(P.path)).length||v.size!==l.length)&&(I=!0,t()),I&&(i(!0),r(),a()),g.current=0},onError(y){if(!n)throw new Error("Missing sketchPath");y.cause.path===n&&y.cause.status===404&&g.current===0&&(g.current=g.current+1,i(!0),a(),lr.invalidateQueries(["get-sketch-by-id"],{exact:!1}),Ob(n))}}),Oe.useEffect(()=>{let y;return f.current&&(y=f.current),()=>{clearTimeout(y)}},[]),{isConcurrent:u}};function dk(e){const t=[];return e.forEach(r=>{const n=t;if(r.type==="folder"&&n.push({name:r.name,path:r.path,examplesNumber:r.children??0}),r.type==="sketch"&&n.push({name:r.name,path:r.path,folder:r.name,ino:{path:`${r.path}/${r.name}.ino`,name:`${r.name}.ino`},types:[]}),r.type==="file"&&r.name.split(".").pop()==="ino"){const o=e==null?void 0:e.filter(u=>u.type==="file"&&u.name!==r.name),s=r.path.slice(0,r.path.lastIndexOf("/"));n.push({name:r.name,path:s,folder:s.split("/").pop()??"",ino:{path:r.path,name:r.name},types:[],files:o.length>0?o:void 0})}}),t}const nS=function(e){const t=e?`${e.name}_copy-`:void 0,{refetch:r}=QE(!1,"get-sketches-for-created-sketch-name",0,t);return{getProposedSketchName:Oe.useCallback(async()=>{if(!t)return;const{data:o}=await r();if(!o)return;const s=o.filter(f=>f.name.startsWith(t)),u=s.length+1;let i=`${t}${s.length+1}`;const g=f=>s.some(a=>a.name===f);if(g(i))for(let f=u;f<100&&(i=`${t}${f}`,!!g(i));f++)f===99&&(i=`${t}${new Date().valueOf()}`);return i},[t,r])}};let Zd=!1;const Ga="compilationId";function iS(){Zd=!1}const pk=function(){const e=sessionStorage.getItem(Ga),t=Oe.useCallback((u,i,g="verify")=>{Zd=!0,sessionStorage.setItem(Ga,`${u}|${g}|${i}`)},[]),r=Oe.useCallback(()=>{sessionStorage.removeItem(Ga)},[]),[n,o,s]=Oe.useMemo(()=>{if(!e)return[null,null,null];const[u,i,g]=e.split("|");return[u,i,g]},[e]);return{deleteCompilationData:r,setCompilationData:t,id:n,type:o,fqbn:s}},mk="arduino",gk=["arduino:mbed_nano:nanorp2040connect"],vk=["esp32:esp32:nano_nora"],oS=function(e){const t=Oe.useRef(!1),{create:r}=JE(),{formatMessage:n}=Rn(),{getProposedSketchName:o}=nS(e);return{send:Oe.useCallback((u,i)=>{if(!t.current){t.current=!0;const g=Mr.uniqueId();Sx({message:n(hs.exampleModificationAdvisory),mode:Sd.Toast,modeOptions:{toastId:g,toastType:fg.Persistent,onUnmount:()=>{t.current=!1},toastActions:[{id:Mr.uniqueId(),label:n(hs.exampleModificationCopy),handler:async()=>{const{exampleIno:f,exampleFiles:a}=WE(u,i),y=await o();r({sketchName:y,sketchContent:f.data,files:a}),Ix(g)}}]}})}},[r,n,o])}};var sS=(e=>(e.SKETCH_UPDATE="sketch-update",e.SKETCH_DELETE="sketch-delete",e))(sS||{});const Gs=function(){var S;const e=Zp()||{},{params:{[Fd]:t}={}}=e,{value:r,sketchId:n}=cS(),o=!!t&&t!=="/"||!!n,u=(S=Xi().pathname)==null?void 0:S.split("/"),i=u==null?void 0:u.indexOf(at.ROUTING_BASE_URL),g=i!==void 0?u==null?void 0:u[i+1]:void 0,f=g&&IE.includes(g)?void 0:g,a=new URLSearchParams(window.location.search),y=a.get(pE),l=y&&bE(y)?y:void 0,v=l&&l!=="preview"?a.get(mE):void 0,I=Oe.useMemo(()=>v&&wE(v)?xE(v):void 0,[v]),d=l&&l!=="preview"?a.get(gE):void 0,R=Oe.useMemo(()=>d&&_E(d)?EE(d).filter(O=>!I||O>=I.start&&O<=I.end):void 0,[d,I]),w=a.get(vE);return{isSketchQueried:o,sketchID:o?r&&n?n:t:void 0,sketchIDIsLoading:r&&n?!n:!!(f&&f!==t),libraryID:a.get(Pd)||void 0,sourceLibraryID:a.get(vu)||void 0,customLibraryID:a.get(Bd)||void 0,exampleID:a.get(Ld)||void 0,createExampleParam:!!a.get(gc),createSketchParam:!!a.get(vc),bypassOptIn:!!a.get(hE),bypassIotRedirect:!!a.get(dE),viewMode:l,scope:I,highlight:R&&R.length>0?R:void 0,hideNumbers:typeof w=="string"&&w!=="false"}},aS=function(e,t,r,n=!1){const[o,s]=Oe.useState(t);return Oe.useEffect(()=>{s(u=>{if(!((u==null?void 0:u.fileId)!==void 0&&(r==null?void 0:r.map(g=>g.path).includes(u.fileId))))if(e){if(e&&!n&&r){const g=Hd(r);if(g)return Xo(g)}return}else return t;return u.isNotCreated&&Tn().has(u.fileId)?{...u,isNotCreated:!1}:u})},[r,t,e,n]),{selectedFile:o,setSelectedFile:s}},yk=function(e,t,r,n,o=!0,s=!1){const[u,i]=Oe.useState([]),[g,f]=Oe.useState(!1),[a,y]=Oe.useState(void 0),v=a??t?Vd:void 0,I=Yp(Rs());Xp("beforeunload",U=>{(I??new Set).size!==0&&U.preventDefault()});const d=Oe.useMemo(()=>r&&Xo(r,!0,!0,["Main"]),[r]),R=Oe.useMemo(()=>{if(e&&!o&&n){const U=Hd(n);if(U)return Xo(U,!0,!0,["Main"])}},[n,e,o]),{selectedFile:w,setSelectedFile:S}=aS(e,d,n,o),O=Oe.useMemo(()=>n!==void 0?n.map(U=>Xo(U)).filter(U=>e?U.fileId!==(R==null?void 0:R.fileId):!0):[],[n,e,R==null?void 0:R.fileId]),N=Oe.useMemo(()=>[e?R:d,...Mr.sortBy(O,U=>U.fileName.toLowerCase()),v].filter(U=>!!U),[d,e,O,R,v]);Oe.useEffect(()=>{g||(s&&u.length===N.length&&f(!0),i(N))},[u,N,s,g]),Oe.useEffect(()=>{var ue;if(o)return;if((d==null?void 0:d.fileId)!==((ue=u[0])==null?void 0:ue.fileId)){f(!1);return}const U=u.filter(he=>!!N.find(q=>q.fileId===he.fileId));u.length!==U.length&&i(U)},[N,u,i,o,d==null?void 0:d.fileId]);const P=Oe.useCallback(U=>y(U),[]),H=Oe.useCallback(U=>{const ue=u.find(he=>he.fileId===(U==null?void 0:U.fileId));U&&!ue&&i(he=>[...he,U]),S(U)},[u,S]),D=Oe.useCallback(U=>{const ue=N.find(he=>he.fileId===U);ue&&i(he=>[...he,ue])},[N]),K=Oe.useCallback(U=>{if(U===((d==null?void 0:d.fileId)||(R==null?void 0:R.fileId)))return;const ue=u.findIndex(he=>he.fileId===U);S(u[ue-1]||0),i(he=>he.filter(q=>q.fileId!==U))},[d==null?void 0:d.fileId,R==null?void 0:R.fileId,S,u]);return{mainInoFile:d,otherFiles:O,tabs:u,explorerFiles:N,selectedFile:w,unsavedFileIds:I,setSelectedFile:H,setShowSecretsTab:P,openFileTab:D,closeFileTab:K}},bk=function(e){Oe.useEffect(()=>{if(!e)return;const t=new URL(e,ui);if(!window.open(t))throw new Error("New sketch could not be opened in new window")},[e])},wk=function(...e){const[t,r,n,o,s,u,i,g,f,a,y]=e,{formatMessage:l}=Rn(),v=Oe.useRef(),I=uS(),{send:d}=oS(a),R=Oe.useCallback(()=>I&&a?(d(a,y),{bypassDefault:!0}):{bypassDefault:I},[y,a,I,d]),w=Oe.useCallback((he,q,Q)=>{const _=[],k=(F,V)=>{const j=l(VE[F]);_.push({id:F,message:j,type:V})},$=n.some(F=>F.fileFullName!==`${he}.${Q}`&&F.fileName===q&&F.fileExtension===Q);return q===""&&k(nn.emptyName,"error"),$&&k(nn.alreadyExists,"error"),fh(q)&&k(nn.exceedsLimit,"warning"),hh(q)&&k(nn.hasInvalidCharacters,"warning"),_},[n,l]),S=Oe.useCallback(async(he,q,Q)=>{if(!o||!o.fileFullName)return;const _={fileId:he,fileName:q,fileFullName:`${q}.${Q}`,fileExtension:Q,Icon:ds(Q),isNotCreated:!0,tags:[]};v.current=o,s(_),await r(o==null?void 0:o.fileId,he)},[r,o,s]),{wrappedAction:O}=ff({action:S,getKeyFromAction:he=>`rename-${he}`,successMessage:hs.successfulRename,onFailure(){v.current&&s(v.current)}}),N=Oe.useMemo(()=>({[ba.Close]:i,[ba.DeleteFile]:(he,q,Q)=>{f(!0),g({id:yc.DeleteFile,data:{file:{fileId:he,fileExtension:Q,fileFullName:q,tags:[]}}})},[ba.Rename]:O}),[i,O,f,g]),P=Oe.useCallback(async(he,q,Q,_)=>{const k={fileId:he,fileName:q,fileFullName:`${q}.${Q}`,fileExtension:Q,Icon:ds(Q),isNotCreated:!0,tags:[]};s(k),await t(he,q,Q,_)},[t,s]),H=Qp(o),{wrappedAction:D}=ff({action:P,getKeyFromAction:he=>`add-file-${he}`,successMessage:hs.successfulCreation,onFailure(){H&&s(H)}}),K=Oe.useCallback(()=>{u(!0),s(Vd)},[u,s]),U=Oe.useMemo(()=>({[Ai.AddSketchFile]:D,[Ai.AddHeaderFile]:D,[Ai.AddTextFile]:D,[Ai.AddSecretsTab]:K,[Ai.ImportFile]:D}),[D,K]);return{fileExplorerMenuHandlers:Oe.useMemo(()=>({[dl.Rename]:O,[dl.Delete]:(he,q,Q)=>{f(!0),g({id:yc.DeleteFile,data:{file:{fileId:he,fileExtension:Q,fileFullName:q,tags:[]}}})}}),[O,g,f]),tabMenuHandlers:N,newTabMenuHandlers:U,onClickTabsBarAction:R,validateFileName:w}},cS=()=>{var n,o,s;const e=Xi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}/`,r=((n=e.href)==null?void 0:n.replace(t,"").split("/").length)===2;return{value:r,username:r&&((o=e.href)==null?void 0:o.replace(t,"").split("/")[0])||"",sketchId:r&&((s=e.href)==null?void 0:s.replace(t,"").split("/")[1])||""}},uS=()=>{var r;const e=Xi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${yu}`;return!!((r=e.href)!=null&&r.startsWith(t))},xk=()=>{var r;const e=Xi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${bu}`;return!!((r=e.href)!=null&&r.startsWith(t))},_k=()=>{var r,n,o;const e=Xi(),t=s=>`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${OE[s]}`;return!!((r=e.href)!=null&&r.startsWith(t("Sketch")))||!!((n=e.href)!=null&&n.startsWith(t("Example")))||!!((o=e.href)!=null&&o.startsWith(t("Library")))},lS="_container_dbaw5_1",fS="_content_dbaw5_12",Va={container:lS,"container-with-header":"_container-with-header_dbaw5_7",content:fS},yf=un({offlineTitle:{id:"error.offlineTitle",defaultMessage:"You're offline",description:"Title for offline page"},offlineMessage:{id:"error.offlineMessage",defaultMessage:"Check your connection and try again",description:"Message for offline page"}}),hS="_container_1t0wg_1",dS="_content_1t0wg_8",pS="_title_1t0wg_17",mS="_message_1t0wg_22",Ho={container:hS,content:dS,title:pS,message:mS},gS=()=>{const{formatMessage:e}=Rn();return X.jsx("div",{className:Ho.container,children:X.jsxs("div",{className:Ho.content,children:[X.jsx(kc,{bold:!0,className:Ho.title,children:e(yf.offlineTitle)}),X.jsx(Ac,{className:Ho.message,children:e(yf.offlineMessage)})]})})},vS=Oe.memo(gS),yS=()=>{const e=()=>{const{user:o}=Oe.useContext(Jn),{viewMode:s}=Gs(),u=Wt.None;return{isReadOnly:!!s,readOnlyAvatarLink:ni()?"":at.ID_URL,user:o,headerItemId:u}},t=Oe.useCallback(e,[]);let r=!1;const n=Oe.useContext(no);return n&&(r=!!n.headerless),X.jsxs("div",{className:ys(Va.container,{[Va["container-with-header"]]:!r}),children:[r?null:X.jsx(fu,{}),r?null:X.jsx(Us,{headerLogic:t}),X.jsx("div",{className:Va.content,children:X.jsx(vS,{})})]})},bS=({profile:e,profileIsLoading:t,children:r})=>X.jsx(pu,{children:X.jsx(mu,{children:X.jsx(hu,{profile:e,profileIsLoading:t,children:X.jsx(du,{children:X.jsx(gu,{children:X.jsx(wc,{children:r})})})})})}),wS=e=>{const{profile:t,profileIsLoading:r}=e;return X.jsx(bS,{profile:t,profileIsLoading:r,children:X.jsx(yS,{})})},xS=()=>X.jsx(wS,{}),Yd={selectedPort:void 0,prevSelectedPort:void 0};let ms=null,gs=null;function _S(){ms=null,gs=null}function ES(){return ms=new In(Yd),ms}function io(){let e=ms;return e||(e=ES()),e}function Ek(){return io().getValue().selectedPort}function Sk(){return io().getValue().prevSelectedPort}function Ck(e){const t=io();t.next({prevSelectedPort:t.getValue().selectedPort,selectedPort:e})}function kk(){io().next(Yd)}function SS(){return gs=io().pipe(Qi(t=>t.selectedPort),hg(),ei(1)),gs}function Ak(){let e=gs;return e||(e=SS()),e}function CS(){hx(),Wb(),Hx(),Vx(),n_(),c1(),iS(),$g(),_S(),Rx(),wx(),Eb()}const kS=({location:e,routes:t,renderOutletContextProvider:r})=>(Oe.useEffect(()=>()=>CS(),[]),X.jsx(zE,{location:e,routes:t,renderOutletContextProvider:r})),AS=()=>X.jsx(kS,{});window.Buffer=Ic.Buffer;window.process=Yf;at.MODE!=="production"&&Ni(()=>import("./index-CIyCl6CS.js").then(e=>e.i),__vite__mapDeps([9,1,2])).then(e=>{e.default(Lf,Pf,1e3)});Pf.createRoot(document.getElementById("root")).render(X.jsx(Lf.StrictMode,{children:window.navigator.onLine?X.jsx(AS,{}):X.jsx(xS,{})}));export{HS as $,it as A,uS as B,xk as C,hC as D,lr as E,Xf as F,LS as G,fE as H,Sx as I,Sd as J,Yi as K,Xt as L,KS as M,Ed as N,QS as O,XS as P,jh as Q,tC as R,rC as S,Td as T,Ht as U,Nh as V,St as W,pk as X,zS as Y,Zd as Z,qS as _,Ns as a,ff as a$,VS as a0,US as a1,Jn as a2,JS as a3,eC as a4,ZS as a5,$S as a6,GS as a7,YS as a8,ix as a9,nC as aA,Sr as aB,Rb as aC,Lh as aD,Dh as aE,no as aF,OE as aG,pE as aH,PS as aI,BS as aJ,gE as aK,Lg as aL,ui as aM,_k as aN,ak as aO,vu as aP,Pd as aQ,ck as aR,wb as aS,tk as aT,Hd as aU,ek as aV,Wd as aW,fk as aX,bu as aY,Hl as aZ,lk as a_,VC as aa,jC as ab,XC as ac,QC as ad,ni as ae,Ix as af,hs as ag,pf as ah,ik as ai,Ck as aj,Ek as ak,DS as al,zc as am,Ak as an,Sk as ao,kk as ap,mk as aq,gk as ar,vk as as,_S as at,Kc as au,oS as av,Rs as aw,Kd as ax,iC as ay,Xo as az,MS as b,OC as b$,zC as b0,uk as b1,KC as b2,ZC as b3,Ob as b4,$b as b5,jS as b6,MC as b7,sS as b8,JE as b9,wk as bA,WC as bB,bk as bC,ok as bD,$C as bE,ds as bF,UC as bG,nk as bH,hk as bI,sk as bJ,mE as bK,vE as bL,vc as bM,fu as bN,w_ as bO,EC as bP,WS as bQ,_C as bR,IC as bS,AC as bT,pu as bU,mu as bV,hu as bW,du as bX,gu as bY,SC as bZ,NC as b_,dk as ba,nS as bb,yu as bc,gc as bd,Bd as be,Ld as bf,BC as bg,SE as bh,l_ as bi,sC as bj,f_ as bk,h_ as bl,Wt as bm,HC as bn,QE as bo,FC as bp,YC as bq,XE as br,qC as bs,DC as bt,JC as bu,Bh as bv,ss as bw,cS as bx,yk as by,rk as bz,oC as c,bC as c0,wC as c1,TC as c2,yC as c3,RC as c4,a_ as c5,dC as c6,xn as c7,pC as c8,fC as c9,Os as ca,lC as cb,uC as cc,mC as cd,vC as ce,Zb as cf,Kb as cg,t_ as ch,vx as ci,RE as cj,kC as ck,cC as cl,GC as cm,PC as cn,LC as co,Et as d,xC as e,Pg as f,yt as g,FS as h,gC as i,t1 as j,nr as k,aC as l,Ky as m,bt as n,lu as o,Ms as p,yc as q,Qf as r,Rt as s,GE as t,CC as u,Od as v,$t as w,Ax as x,Zg as y,Gs as z};
