function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MainPage-QBXWPM_a.js","assets/b-split-aSYh1ZhA.js","assets/b-split-Luue7qqd.css","assets/c-split-CLBVkUGM.js","assets/a-split-C0tR3eNA.js","assets/c-split-CkxAtPOk.css","assets/hotjar-DYhvLwYa.js","assets/MainPage-BMW7wlPB.css","assets/SerialMonitorPage-CBDKNhDt.js","assets/index-YAZ3_vuD.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var op=Object.defineProperty;var sp=(e,t,r)=>t in e?op(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var il=(e,t,r)=>(sp(e,typeof t!="symbol"?t+"":t,r),r);import{i as gs,au as ap,r as Oe,av as cp,aw as up,ax as lp,ay as fp,az as hp,aA as dp,k as X,aB as pp,aC as mp,aD as gp,aE as vp,aF as yp,aG as yf,aH as bf,aI as wf,aJ as xf,aK as _f,aL as ol,aM as bp,aN as vc,aO as Ef,aP as Sf,aQ as Cf,aR as kf,aS as wp,aT as xp,aU as _p,aV as sl,aW as Ep,aX as Vn,aY as ma,aZ as Sp,Y as Cp,a_ as kp,a$ as Ap,b0 as Ip,b1 as Rp,b2 as Tp,b3 as Op,b4 as Np,b5 as Pp,b6 as Lp,b7 as Bp,j as Hr,y as un,b8 as Dp,l as vs,b9 as er,ba as Fp,bb as jp,bc as Mp,t as Up,bd as Af,be as If,bf as yc,H as $p,bg as zp,bh as Gp,bi as qp,bj as Vp,bk as rr,bl as Rf,bm as Tf,bn as Of,bo as Hp,bp as Qi,bq as Wp,E as Kp,X as Nf,br as Pf}from"./b-split-aSYh1ZhA.js";import{d as Jo,C as at,a as Yp,g as Zp,c as Xp,s as Qp,b as Jp,A as al,l as em,e as tm,B as In,U as Bi,f as rm,h as bc,i as cl,u as Lf,j as nm,k as Mr,m as im,n as om,o as sm,p as am,q as Bf,t as wc,r as cm,v as um,w as lm,x as Ii,y as fm,z as hm,D as dm,E as pm,F as mm,G as gm,H as vm,I as ym,J as bm,K as Cr,N as qa,R as Bo,L as wm,M as xm,O as _m,P as xc,Q as Em,S as Sm,T as Cm,V as km,W as kn,X as Ji,Y as es,Z as _c,_ as Am,$ as Im,a0 as ln,a1 as ei,a2 as Rm,a3 as ys,a4 as Tm,a5 as Om,a6 as Nm,a7 as Pm,a8 as Lm,a9 as Bm,aa as Df,ab as Dm,ac as Fm,ad as Ff,ae as jm,af as jf,ag as Mf,ah as Mm,ai as Um,aj as $m,ak as zm,al as Gm,am as _r,an as Uf,ao as qm,ap as Vm,aq as Hm,ar as bs,as as ts,at as Br,au as Wm,av as Km,aw as ul,ax as Ym,ay as $f,az as Zm,aA as Xm,aB as Qm,aC as Jm,aD as eg,aE as Rn,aF as tg,aG as tn,aH as Ec,aI as rg,aJ as zf,aK as Sc,aL as Cc,aM as Gf,aN as ng,aO as ig,aP as ll,aQ as ga,aR as Pi,aS as nn,aT as og,aU as sg,aV as ag,aW as cg}from"./c-split-CLBVkUGM.js";import"./a-split-C0tR3eNA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var kc={},ws={};ws.byteLength=fg;ws.toByteArray=dg;ws.fromByteArray=gg;var jr=[],gr=[],ug=typeof Uint8Array<"u"?Uint8Array:Array,va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var jn=0,lg=va.length;jn<lg;++jn)jr[jn]=va[jn],gr[va.charCodeAt(jn)]=jn;gr[45]=62;gr[95]=63;function qf(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function fg(e){var t=qf(e),r=t[0],n=t[1];return(r+n)*3/4-n}function hg(e,t,r){return(t+r)*3/4-r}function dg(e){var t,r=qf(e),n=r[0],o=r[1],s=new ug(hg(e,n,o)),f=0,i=o>0?n-4:n,v;for(v=0;v<i;v+=4)t=gr[e.charCodeAt(v)]<<18|gr[e.charCodeAt(v+1)]<<12|gr[e.charCodeAt(v+2)]<<6|gr[e.charCodeAt(v+3)],s[f++]=t>>16&255,s[f++]=t>>8&255,s[f++]=t&255;return o===2&&(t=gr[e.charCodeAt(v)]<<2|gr[e.charCodeAt(v+1)]>>4,s[f++]=t&255),o===1&&(t=gr[e.charCodeAt(v)]<<10|gr[e.charCodeAt(v+1)]<<4|gr[e.charCodeAt(v+2)]>>2,s[f++]=t>>8&255,s[f++]=t&255),s}function pg(e){return jr[e>>18&63]+jr[e>>12&63]+jr[e>>6&63]+jr[e&63]}function mg(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),o.push(pg(n));return o.join("")}function gg(e){for(var t,r=e.length,n=r%3,o=[],s=16383,f=0,i=r-n;f<i;f+=s)o.push(mg(e,f,f+s>i?i:f+s));return n===1?(t=e[r-1],o.push(jr[t>>2]+jr[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(jr[t>>10]+jr[t>>4&63]+jr[t<<2&63]+"=")),o.join("")}var Ac={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ac.read=function(e,t,r,n,o){var s,f,i=o*8-n-1,v=(1<<i)-1,l=v>>1,a=-7,y=r?o-1:0,u=r?-1:1,g=e[t+y];for(y+=u,s=g&(1<<-a)-1,g>>=-a,a+=i;a>0;s=s*256+e[t+y],y+=u,a-=8);for(f=s&(1<<-a)-1,s>>=-a,a+=n;a>0;f=f*256+e[t+y],y+=u,a-=8);if(s===0)s=1-l;else{if(s===v)return f?NaN:(g?-1:1)*(1/0);f=f+Math.pow(2,n),s=s-l}return(g?-1:1)*f*Math.pow(2,s-n)};Ac.write=function(e,t,r,n,o,s){var f,i,v,l=s*8-o-1,a=(1<<l)-1,y=a>>1,u=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,I=n?1:-1,d=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,f=a):(f=Math.floor(Math.log(t)/Math.LN2),t*(v=Math.pow(2,-f))<1&&(f--,v*=2),f+y>=1?t+=u/v:t+=u*Math.pow(2,1-y),t*v>=2&&(f++,v/=2),f+y>=a?(i=0,f=a):f+y>=1?(i=(t*v-1)*Math.pow(2,o),f=f+y):(i=t*Math.pow(2,y-1)*Math.pow(2,o),f=0));o>=8;e[r+g]=i&255,g+=I,i/=256,o-=8);for(f=f<<o|i,l+=o;l>0;e[r+g]=f&255,g+=I,f/=256,l-=8);e[r+g-I]|=d*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ws,r=Ac,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=C,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=s(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const h=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(h,c),h.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function f(h){if(h>o)throw new RangeError('The value "'+h+'" is invalid for option "size"');const c=new Uint8Array(h);return Object.setPrototypeOf(c,i.prototype),c}function i(h,c,p){if(typeof h=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(h)}return v(h,c,p)}i.poolSize=8192;function v(h,c,p){if(typeof h=="string")return u(h,c);if(ArrayBuffer.isView(h))return I(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(we(h,ArrayBuffer)||h&&we(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(h,SharedArrayBuffer)||h&&we(h.buffer,SharedArrayBuffer)))return d(h,c,p);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=h.valueOf&&h.valueOf();if(j!=null&&j!==h)return i.from(j,c,p);const Q=A(h);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return i.from(h[Symbol.toPrimitive]("string"),c,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}i.from=function(h,c,p){return v(h,c,p)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function l(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function a(h,c,p){return l(h),h<=0?f(h):c!==void 0?typeof p=="string"?f(h).fill(c,p):f(h).fill(c):f(h)}i.alloc=function(h,c,p){return a(h,c,p)};function y(h){return l(h),f(h<0?0:w(h)|0)}i.allocUnsafe=function(h){return y(h)},i.allocUnsafeSlow=function(h){return y(h)};function u(h,c){if((typeof c!="string"||c==="")&&(c="utf8"),!i.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const p=O(h,c)|0;let j=f(p);const Q=j.write(h,c);return Q!==p&&(j=j.slice(0,Q)),j}function g(h){const c=h.length<0?0:w(h.length)|0,p=f(c);for(let j=0;j<c;j+=1)p[j]=h[j]&255;return p}function I(h){if(we(h,Uint8Array)){const c=new Uint8Array(h);return d(c.buffer,c.byteOffset,c.byteLength)}return g(h)}function d(h,c,p){if(c<0||h.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<c+(p||0))throw new RangeError('"length" is outside of buffer bounds');let j;return c===void 0&&p===void 0?j=new Uint8Array(h):p===void 0?j=new Uint8Array(h,c):j=new Uint8Array(h,c,p),Object.setPrototypeOf(j,i.prototype),j}function A(h){if(i.isBuffer(h)){const c=w(h.length)|0,p=f(c);return p.length===0||h.copy(p,0,0,c),p}if(h.length!==void 0)return typeof h.length!="number"||De(h.length)?f(0):g(h);if(h.type==="Buffer"&&Array.isArray(h.data))return g(h.data)}function w(h){if(h>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return h|0}function C(h){return+h!=h&&(h=0),i.alloc(+h)}i.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==i.prototype},i.compare=function(c,p){if(we(c,Uint8Array)&&(c=i.from(c,c.offset,c.byteLength)),we(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),!i.isBuffer(c)||!i.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===p)return 0;let j=c.length,Q=p.length;for(let ge=0,be=Math.min(j,Q);ge<be;++ge)if(c[ge]!==p[ge]){j=c[ge],Q=p[ge];break}return j<Q?-1:Q<j?1:0},i.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(c,p){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return i.alloc(0);let j;if(p===void 0)for(p=0,j=0;j<c.length;++j)p+=c[j].length;const Q=i.allocUnsafe(p);let ge=0;for(j=0;j<c.length;++j){let be=c[j];if(we(be,Uint8Array))ge+be.length>Q.length?(i.isBuffer(be)||(be=i.from(be)),be.copy(Q,ge)):Uint8Array.prototype.set.call(Q,be,ge);else if(i.isBuffer(be))be.copy(Q,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=be.length}return Q};function O(h,c){if(i.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||we(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const p=h.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&p===0)return 0;let Q=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return se(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Re(h).length;default:if(Q)return j?-1:se(h).length;c=(""+c).toLowerCase(),Q=!0}}i.byteLength=O;function N(h,c,p){let j=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,c>>>=0,p<=c))return"";for(h||(h="utf8");;)switch(h){case"hex":return F(this,c,p);case"utf8":case"utf-8":return _(this,c,p);case"ascii":return P(this,c,p);case"latin1":case"binary":return $(this,c,p);case"base64":return ee(this,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,c,p);default:if(j)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),j=!0}}i.prototype._isBuffer=!0;function D(h,c,p){const j=h[c];h[c]=h[p],h[p]=j}i.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<c;p+=2)D(this,p,p+1);return this},i.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<c;p+=4)D(this,p,p+3),D(this,p+1,p+2);return this},i.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<c;p+=8)D(this,p,p+7),D(this,p+1,p+6),D(this,p+2,p+5),D(this,p+3,p+4);return this},i.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?_(this,0,c):N.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(c){if(!i.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:i.compare(this,c)===0},i.prototype.inspect=function(){let c="";const p=e.INSPECT_MAX_BYTES;return c=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(c+=" ... "),"<Buffer "+c+">"},n&&(i.prototype[n]=i.prototype.inspect),i.prototype.compare=function(c,p,j,Q,ge){if(we(c,Uint8Array)&&(c=i.from(c,c.offset,c.byteLength)),!i.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(p===void 0&&(p=0),j===void 0&&(j=c?c.length:0),Q===void 0&&(Q=0),ge===void 0&&(ge=this.length),p<0||j>c.length||Q<0||ge>this.length)throw new RangeError("out of range index");if(Q>=ge&&p>=j)return 0;if(Q>=ge)return-1;if(p>=j)return 1;if(p>>>=0,j>>>=0,Q>>>=0,ge>>>=0,this===c)return 0;let be=ge-Q,Ke=j-p;const tt=Math.min(be,Ke),rt=this.slice(Q,ge),wt=c.slice(p,j);for(let mt=0;mt<tt;++mt)if(rt[mt]!==wt[mt]){be=rt[mt],Ke=wt[mt];break}return be<Ke?-1:Ke<be?1:0};function W(h,c,p,j,Q){if(h.length===0)return-1;if(typeof p=="string"?(j=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,De(p)&&(p=Q?0:h.length-1),p<0&&(p=h.length+p),p>=h.length){if(Q)return-1;p=h.length-1}else if(p<0)if(Q)p=0;else return-1;if(typeof c=="string"&&(c=i.from(c,j)),i.isBuffer(c))return c.length===0?-1:M(h,c,p,j,Q);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(h,c,p):Uint8Array.prototype.lastIndexOf.call(h,c,p):M(h,[c],p,j,Q);throw new TypeError("val must be string, number or Buffer")}function M(h,c,p,j,Q){let ge=1,be=h.length,Ke=c.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(h.length<2||c.length<2)return-1;ge=2,be/=2,Ke/=2,p/=2}function tt(wt,mt){return ge===1?wt[mt]:wt.readUInt16BE(mt*ge)}let rt;if(Q){let wt=-1;for(rt=p;rt<be;rt++)if(tt(h,rt)===tt(c,wt===-1?0:rt-wt)){if(wt===-1&&(wt=rt),rt-wt+1===Ke)return wt*ge}else wt!==-1&&(rt-=rt-wt),wt=-1}else for(p+Ke>be&&(p=be-Ke),rt=p;rt>=0;rt--){let wt=!0;for(let mt=0;mt<Ke;mt++)if(tt(h,rt+mt)!==tt(c,mt)){wt=!1;break}if(wt)return rt}return-1}i.prototype.includes=function(c,p,j){return this.indexOf(c,p,j)!==-1},i.prototype.indexOf=function(c,p,j){return W(this,c,p,j,!0)},i.prototype.lastIndexOf=function(c,p,j){return W(this,c,p,j,!1)};function V(h,c,p,j){p=Number(p)||0;const Q=h.length-p;j?(j=Number(j),j>Q&&(j=Q)):j=Q;const ge=c.length;j>ge/2&&(j=ge/2);let be;for(be=0;be<j;++be){const Ke=parseInt(c.substr(be*2,2),16);if(De(Ke))return be;h[p+be]=Ke}return be}function G(h,c,p,j){return Le(se(c,h.length-p),h,p,j)}function ae(h,c,p,j){return Le(ne(c),h,p,j)}function pe(h,c,p,j){return Le(Re(c),h,p,j)}function H(h,c,p,j){return Le(ve(c,h.length-p),h,p,j)}i.prototype.write=function(c,p,j,Q){if(p===void 0)Q="utf8",j=this.length,p=0;else if(j===void 0&&typeof p=="string")Q=p,j=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(j)?(j=j>>>0,Q===void 0&&(Q="utf8")):(Q=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ge=this.length-p;if((j===void 0||j>ge)&&(j=ge),c.length>0&&(j<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let be=!1;for(;;)switch(Q){case"hex":return V(this,c,p,j);case"utf8":case"utf-8":return G(this,c,p,j);case"ascii":case"latin1":case"binary":return ae(this,c,p,j);case"base64":return pe(this,c,p,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,c,p,j);default:if(be)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),be=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(h,c,p){return c===0&&p===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(c,p))}function _(h,c,p){p=Math.min(h.length,p);const j=[];let Q=c;for(;Q<p;){const ge=h[Q];let be=null,Ke=ge>239?4:ge>223?3:ge>191?2:1;if(Q+Ke<=p){let tt,rt,wt,mt;switch(Ke){case 1:ge<128&&(be=ge);break;case 2:tt=h[Q+1],(tt&192)===128&&(mt=(ge&31)<<6|tt&63,mt>127&&(be=mt));break;case 3:tt=h[Q+1],rt=h[Q+2],(tt&192)===128&&(rt&192)===128&&(mt=(ge&15)<<12|(tt&63)<<6|rt&63,mt>2047&&(mt<55296||mt>57343)&&(be=mt));break;case 4:tt=h[Q+1],rt=h[Q+2],wt=h[Q+3],(tt&192)===128&&(rt&192)===128&&(wt&192)===128&&(mt=(ge&15)<<18|(tt&63)<<12|(rt&63)<<6|wt&63,mt>65535&&mt<1114112&&(be=mt))}}be===null?(be=65533,Ke=1):be>65535&&(be-=65536,j.push(be>>>10&1023|55296),be=56320|be&1023),j.push(be),Q+=Ke}return L(j)}const S=4096;function L(h){const c=h.length;if(c<=S)return String.fromCharCode.apply(String,h);let p="",j=0;for(;j<c;)p+=String.fromCharCode.apply(String,h.slice(j,j+=S));return p}function P(h,c,p){let j="";p=Math.min(h.length,p);for(let Q=c;Q<p;++Q)j+=String.fromCharCode(h[Q]&127);return j}function $(h,c,p){let j="";p=Math.min(h.length,p);for(let Q=c;Q<p;++Q)j+=String.fromCharCode(h[Q]);return j}function F(h,c,p){const j=h.length;(!c||c<0)&&(c=0),(!p||p<0||p>j)&&(p=j);let Q="";for(let ge=c;ge<p;++ge)Q+=qe[h[ge]];return Q}function Y(h,c,p){const j=h.slice(c,p);let Q="";for(let ge=0;ge<j.length-1;ge+=2)Q+=String.fromCharCode(j[ge]+j[ge+1]*256);return Q}i.prototype.slice=function(c,p){const j=this.length;c=~~c,p=p===void 0?j:~~p,c<0?(c+=j,c<0&&(c=0)):c>j&&(c=j),p<0?(p+=j,p<0&&(p=0)):p>j&&(p=j),p<c&&(p=c);const Q=this.subarray(c,p);return Object.setPrototypeOf(Q,i.prototype),Q};function q(h,c,p){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+c>p)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(c,p,j){c=c>>>0,p=p>>>0,j||q(c,p,this.length);let Q=this[c],ge=1,be=0;for(;++be<p&&(ge*=256);)Q+=this[c+be]*ge;return Q},i.prototype.readUintBE=i.prototype.readUIntBE=function(c,p,j){c=c>>>0,p=p>>>0,j||q(c,p,this.length);let Q=this[c+--p],ge=1;for(;p>0&&(ge*=256);)Q+=this[c+--p]*ge;return Q},i.prototype.readUint8=i.prototype.readUInt8=function(c,p){return c=c>>>0,p||q(c,1,this.length),this[c]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(c,p){return c=c>>>0,p||q(c,2,this.length),this[c]|this[c+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(c,p){return c=c>>>0,p||q(c,2,this.length),this[c]<<8|this[c+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(c,p){return c=c>>>0,p||q(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(c,p){return c=c>>>0,p||q(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},i.prototype.readBigUInt64LE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],j=this[c+7];(p===void 0||j===void 0)&&T(c,this.length-8);const Q=p+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,ge=this[++c]+this[++c]*2**8+this[++c]*2**16+j*2**24;return BigInt(Q)+(BigInt(ge)<<BigInt(32))}),i.prototype.readBigUInt64BE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],j=this[c+7];(p===void 0||j===void 0)&&T(c,this.length-8);const Q=p*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],ge=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+j;return(BigInt(Q)<<BigInt(32))+BigInt(ge)}),i.prototype.readIntLE=function(c,p,j){c=c>>>0,p=p>>>0,j||q(c,p,this.length);let Q=this[c],ge=1,be=0;for(;++be<p&&(ge*=256);)Q+=this[c+be]*ge;return ge*=128,Q>=ge&&(Q-=Math.pow(2,8*p)),Q},i.prototype.readIntBE=function(c,p,j){c=c>>>0,p=p>>>0,j||q(c,p,this.length);let Q=p,ge=1,be=this[c+--Q];for(;Q>0&&(ge*=256);)be+=this[c+--Q]*ge;return ge*=128,be>=ge&&(be-=Math.pow(2,8*p)),be},i.prototype.readInt8=function(c,p){return c=c>>>0,p||q(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},i.prototype.readInt16LE=function(c,p){c=c>>>0,p||q(c,2,this.length);const j=this[c]|this[c+1]<<8;return j&32768?j|4294901760:j},i.prototype.readInt16BE=function(c,p){c=c>>>0,p||q(c,2,this.length);const j=this[c+1]|this[c]<<8;return j&32768?j|4294901760:j},i.prototype.readInt32LE=function(c,p){return c=c>>>0,p||q(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},i.prototype.readInt32BE=function(c,p){return c=c>>>0,p||q(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},i.prototype.readBigInt64LE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],j=this[c+7];(p===void 0||j===void 0)&&T(c,this.length-8);const Q=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(j<<24);return(BigInt(Q)<<BigInt(32))+BigInt(p+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),i.prototype.readBigInt64BE=m(function(c){c=c>>>0,lt(c,"offset");const p=this[c],j=this[c+7];(p===void 0||j===void 0)&&T(c,this.length-8);const Q=(p<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(Q)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+j)}),i.prototype.readFloatLE=function(c,p){return c=c>>>0,p||q(c,4,this.length),r.read(this,c,!0,23,4)},i.prototype.readFloatBE=function(c,p){return c=c>>>0,p||q(c,4,this.length),r.read(this,c,!1,23,4)},i.prototype.readDoubleLE=function(c,p){return c=c>>>0,p||q(c,8,this.length),r.read(this,c,!0,52,8)},i.prototype.readDoubleBE=function(c,p){return c=c>>>0,p||q(c,8,this.length),r.read(this,c,!1,52,8)};function Z(h,c,p,j,Q,ge){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>Q||c<ge)throw new RangeError('"value" argument is out of bounds');if(p+j>h.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(c,p,j,Q){if(c=+c,p=p>>>0,j=j>>>0,!Q){const Ke=Math.pow(2,8*j)-1;Z(this,c,p,j,Ke,0)}let ge=1,be=0;for(this[p]=c&255;++be<j&&(ge*=256);)this[p+be]=c/ge&255;return p+j},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(c,p,j,Q){if(c=+c,p=p>>>0,j=j>>>0,!Q){const Ke=Math.pow(2,8*j)-1;Z(this,c,p,j,Ke,0)}let ge=j-1,be=1;for(this[p+ge]=c&255;--ge>=0&&(be*=256);)this[p+ge]=c/be&255;return p+j},i.prototype.writeUint8=i.prototype.writeUInt8=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,1,255,0),this[p]=c&255,p+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,2,65535,0),this[p]=c&255,this[p+1]=c>>>8,p+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,2,65535,0),this[p]=c>>>8,this[p+1]=c&255,p+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,4,4294967295,0),this[p+3]=c>>>24,this[p+2]=c>>>16,this[p+1]=c>>>8,this[p]=c&255,p+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,4,4294967295,0),this[p]=c>>>24,this[p+1]=c>>>16,this[p+2]=c>>>8,this[p+3]=c&255,p+4};function ye(h,c,p,j,Q){ht(c,j,Q,h,p,7);let ge=Number(c&BigInt(4294967295));h[p++]=ge,ge=ge>>8,h[p++]=ge,ge=ge>>8,h[p++]=ge,ge=ge>>8,h[p++]=ge;let be=Number(c>>BigInt(32)&BigInt(4294967295));return h[p++]=be,be=be>>8,h[p++]=be,be=be>>8,h[p++]=be,be=be>>8,h[p++]=be,p}function Ee(h,c,p,j,Q){ht(c,j,Q,h,p,7);let ge=Number(c&BigInt(4294967295));h[p+7]=ge,ge=ge>>8,h[p+6]=ge,ge=ge>>8,h[p+5]=ge,ge=ge>>8,h[p+4]=ge;let be=Number(c>>BigInt(32)&BigInt(4294967295));return h[p+3]=be,be=be>>8,h[p+2]=be,be=be>>8,h[p+1]=be,be=be>>8,h[p]=be,p+8}i.prototype.writeBigUInt64LE=m(function(c,p=0){return ye(this,c,p,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=m(function(c,p=0){return Ee(this,c,p,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(c,p,j,Q){if(c=+c,p=p>>>0,!Q){const tt=Math.pow(2,8*j-1);Z(this,c,p,j,tt-1,-tt)}let ge=0,be=1,Ke=0;for(this[p]=c&255;++ge<j&&(be*=256);)c<0&&Ke===0&&this[p+ge-1]!==0&&(Ke=1),this[p+ge]=(c/be>>0)-Ke&255;return p+j},i.prototype.writeIntBE=function(c,p,j,Q){if(c=+c,p=p>>>0,!Q){const tt=Math.pow(2,8*j-1);Z(this,c,p,j,tt-1,-tt)}let ge=j-1,be=1,Ke=0;for(this[p+ge]=c&255;--ge>=0&&(be*=256);)c<0&&Ke===0&&this[p+ge+1]!==0&&(Ke=1),this[p+ge]=(c/be>>0)-Ke&255;return p+j},i.prototype.writeInt8=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,1,127,-128),c<0&&(c=255+c+1),this[p]=c&255,p+1},i.prototype.writeInt16LE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,2,32767,-32768),this[p]=c&255,this[p+1]=c>>>8,p+2},i.prototype.writeInt16BE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,2,32767,-32768),this[p]=c>>>8,this[p+1]=c&255,p+2},i.prototype.writeInt32LE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,4,2147483647,-2147483648),this[p]=c&255,this[p+1]=c>>>8,this[p+2]=c>>>16,this[p+3]=c>>>24,p+4},i.prototype.writeInt32BE=function(c,p,j){return c=+c,p=p>>>0,j||Z(this,c,p,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[p]=c>>>24,this[p+1]=c>>>16,this[p+2]=c>>>8,this[p+3]=c&255,p+4},i.prototype.writeBigInt64LE=m(function(c,p=0){return ye(this,c,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=m(function(c,p=0){return Ee(this,c,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(h,c,p,j,Q,ge){if(p+j>h.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ct(h,c,p,j,Q){return c=+c,p=p>>>0,Q||Te(h,c,p,4),r.write(h,c,p,j,23,4),p+4}i.prototype.writeFloatLE=function(c,p,j){return ct(this,c,p,!0,j)},i.prototype.writeFloatBE=function(c,p,j){return ct(this,c,p,!1,j)};function ft(h,c,p,j,Q){return c=+c,p=p>>>0,Q||Te(h,c,p,8),r.write(h,c,p,j,52,8),p+8}i.prototype.writeDoubleLE=function(c,p,j){return ft(this,c,p,!0,j)},i.prototype.writeDoubleBE=function(c,p,j){return ft(this,c,p,!1,j)},i.prototype.copy=function(c,p,j,Q){if(!i.isBuffer(c))throw new TypeError("argument should be a Buffer");if(j||(j=0),!Q&&Q!==0&&(Q=this.length),p>=c.length&&(p=c.length),p||(p=0),Q>0&&Q<j&&(Q=j),Q===j||c.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),c.length-p<Q-j&&(Q=c.length-p+j);const ge=Q-j;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,j,Q):Uint8Array.prototype.set.call(c,this.subarray(j,Q),p),ge},i.prototype.fill=function(c,p,j,Q){if(typeof c=="string"){if(typeof p=="string"?(Q=p,p=0,j=this.length):typeof j=="string"&&(Q=j,j=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!i.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(c.length===1){const be=c.charCodeAt(0);(Q==="utf8"&&be<128||Q==="latin1")&&(c=be)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(p<0||this.length<p||this.length<j)throw new RangeError("Out of range index");if(j<=p)return this;p=p>>>0,j=j===void 0?this.length:j>>>0,c||(c=0);let ge;if(typeof c=="number")for(ge=p;ge<j;++ge)this[ge]=c;else{const be=i.isBuffer(c)?c:i.from(c,Q),Ke=be.length;if(Ke===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(ge=0;ge<j-p;++ge)this[ge+p]=be[ge%Ke]}return this};const Ye={};function et(h,c,p){Ye[h]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}et("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),et("ERR_INVALID_ARG_TYPE",function(h,c){return`The "${h}" argument must be of type number. Received type ${typeof c}`},TypeError),et("ERR_OUT_OF_RANGE",function(h,c,p){let j=`The value of "${h}" is out of range.`,Q=p;return Number.isInteger(p)&&Math.abs(p)>2**32?Q=Qe(String(p)):typeof p=="bigint"&&(Q=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(Q=Qe(Q)),Q+="n"),j+=` It must be ${c}. Received ${Q}`,j},RangeError);function Qe(h){let c="",p=h.length;const j=h[0]==="-"?1:0;for(;p>=j+4;p-=3)c=`_${h.slice(p-3,p)}${c}`;return`${h.slice(0,p)}${c}`}function Je(h,c,p){lt(c,"offset"),(h[c]===void 0||h[c+p]===void 0)&&T(c,h.length-(p+1))}function ht(h,c,p,j,Q,ge){if(h>p||h<c){const be=typeof c=="bigint"?"n":"";let Ke;throw c===0||c===BigInt(0)?Ke=`>= 0${be} and < 2${be} ** ${(ge+1)*8}${be}`:Ke=`>= -(2${be} ** ${(ge+1)*8-1}${be}) and < 2 ** ${(ge+1)*8-1}${be}`,new Ye.ERR_OUT_OF_RANGE("value",Ke,h)}Je(j,Q,ge)}function lt(h,c){if(typeof h!="number")throw new Ye.ERR_INVALID_ARG_TYPE(c,"number",h)}function T(h,c,p){throw Math.floor(h)!==h?(lt(h,p),new Ye.ERR_OUT_OF_RANGE("offset","an integer",h)):c<0?new Ye.ERR_BUFFER_OUT_OF_BOUNDS:new Ye.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,h)}const Se=/[^+/0-9A-Za-z-_]/g;function Ae(h){if(h=h.split("=")[0],h=h.trim().replace(Se,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function se(h,c){c=c||1/0;let p;const j=h.length;let Q=null;const ge=[];for(let be=0;be<j;++be){if(p=h.charCodeAt(be),p>55295&&p<57344){if(!Q){if(p>56319){(c-=3)>-1&&ge.push(239,191,189);continue}else if(be+1===j){(c-=3)>-1&&ge.push(239,191,189);continue}Q=p;continue}if(p<56320){(c-=3)>-1&&ge.push(239,191,189),Q=p;continue}p=(Q-55296<<10|p-56320)+65536}else Q&&(c-=3)>-1&&ge.push(239,191,189);if(Q=null,p<128){if((c-=1)<0)break;ge.push(p)}else if(p<2048){if((c-=2)<0)break;ge.push(p>>6|192,p&63|128)}else if(p<65536){if((c-=3)<0)break;ge.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((c-=4)<0)break;ge.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return ge}function ne(h){const c=[];for(let p=0;p<h.length;++p)c.push(h.charCodeAt(p)&255);return c}function ve(h,c){let p,j,Q;const ge=[];for(let be=0;be<h.length&&!((c-=2)<0);++be)p=h.charCodeAt(be),j=p>>8,Q=p%256,ge.push(Q),ge.push(j);return ge}function Re(h){return t.toByteArray(Ae(h))}function Le(h,c,p,j){let Q;for(Q=0;Q<j&&!(Q+p>=c.length||Q>=h.length);++Q)c[Q+p]=h[Q];return Q}function we(h,c){return h instanceof c||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===c.name}function De(h){return h!==h}const qe=function(){const h="0123456789abcdef",c=new Array(256);for(let p=0;p<16;++p){const j=p*16;for(let Q=0;Q<16;++Q)c[j+Q]=h[p]+h[Q]}return c}();function m(h){return typeof BigInt>"u"?R:h}function R(){throw new Error("BigInt not supported")}})(kc);var Vf={exports:{}},jt=Vf.exports={},Dr,Fr;function Va(){throw new Error("setTimeout has not been defined")}function Ha(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Dr=setTimeout:Dr=Va}catch{Dr=Va}try{typeof clearTimeout=="function"?Fr=clearTimeout:Fr=Ha}catch{Fr=Ha}})();function Hf(e){if(Dr===setTimeout)return setTimeout(e,0);if((Dr===Va||!Dr)&&setTimeout)return Dr=setTimeout,setTimeout(e,0);try{return Dr(e,0)}catch{try{return Dr.call(null,e,0)}catch{return Dr.call(this,e,0)}}}function vg(e){if(Fr===clearTimeout)return clearTimeout(e);if((Fr===Ha||!Fr)&&clearTimeout)return Fr=clearTimeout,clearTimeout(e);try{return Fr(e)}catch{try{return Fr.call(null,e)}catch{return Fr.call(this,e)}}}var Wr=[],Hn=!1,Sn,Yo=-1;function yg(){!Hn||!Sn||(Hn=!1,Sn.length?Wr=Sn.concat(Wr):Yo=-1,Wr.length&&Wf())}function Wf(){if(!Hn){var e=Hf(yg);Hn=!0;for(var t=Wr.length;t;){for(Sn=Wr,Wr=[];++Yo<t;)Sn&&Sn[Yo].run();Yo=-1,t=Wr.length}Sn=null,Hn=!1,vg(e)}}jt.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Wr.push(new Kf(e,t)),Wr.length===1&&!Hn&&Hf(Wf)};function Kf(e,t){this.fun=e,this.array=t}Kf.prototype.run=function(){this.fun.apply(null,this.array)};jt.title="browser";jt.browser=!0;jt.env={};jt.argv=[];jt.version="";jt.versions={};function Kr(){}jt.on=Kr;jt.addListener=Kr;jt.once=Kr;jt.off=Kr;jt.removeListener=Kr;jt.removeAllListeners=Kr;jt.emit=Kr;jt.prependListener=Kr;jt.prependOnceListener=Kr;jt.listeners=function(e){return[]};jt.binding=function(e){throw new Error("process.binding is not supported")};jt.cwd=function(){return"/"};jt.chdir=function(e){throw new Error("process.chdir is not supported")};jt.umask=function(){return 0};var bg=Vf.exports;const Yf=gs(bg);window.Buffer=kc.Buffer;window.process=Yf;function ti(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function wg(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=ti(r);return(o,s)=>n.then(f=>s(f.transaction(t,o).objectStore(t)))}let ya;function eo(){return ya||(ya=wg("keyval-store","keyval")),ya}function xg(e,t=eo()){return t("readonly",r=>ti(r.get(e)))}function Zf(e,t,r=eo()){return r("readwrite",n=>(n.put(t,e),ti(n.transaction)))}function _g(e,t=eo()){return t("readonly",r=>Promise.all(e.map(n=>ti(r.get(n)))))}function fl(e,t,r=eo()){return r("readwrite",n=>new Promise((o,s)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),o(ti(n.transaction))}catch(f){s(f)}}}))}function RS(e,t=eo()){return t("readwrite",r=>(r.delete(e),ti(r.transaction)))}const{APP_URL:Eg,CLOUD_HOME_URL:Sg}=at,Cg=`${Eg}/redirect`,kg=`${Sg}/sketches`;function hl(e){return Jo.customKey?e.replace("https://",`https://${Jo.customKey}.`):e}const xs={domain:at.AUTH_URL,clientId:at.AUTH_ID,authorizationParams:{redirect_uri:hl(Cg),logout_uri:hl(kg),audience:at.AUTH_AUDIENCE,scope:at.AUTH_SCOPE,state:Ig()},cacheLocation:"memory"},Ag=5;function Ig(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function bt(){return Promise.reject(new Error("User not authorized to perform request"))}`${xs.authorizationParams.client_id}`;const Rg=`auth0.${xs.authorizationParams.client_id}.is.authenticated=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,Tg="authRedirectTo",ri="token-placeholder";let or=null,Og=null;async function Ng(){return or||(or=await Pg()),or}async function Pg(){var r;const e=await Xp(xs,Ag),t=(r=e.getCustomization())==null?void 0:r.url;return t&&Qp({CLOUD_HOME_URL:t,APP_ORIGIN:t,NEW_WINDOW_ORIGIN:t,SERIAL_MONITOR_PARENT_ORIGIN:t}),or=e,e}async function rs(){if(!or)throw new Error("Cannot login when auth client not initialized");const{state:e,...t}=xs.authorizationParams;await Zf(Tg,{previousState:e,redirectTo:window.location.pathname+window.location.search}),em(or,{...t,appState:{previousState:e}})}async function TS(){if(!or)throw new Error("Cannot get auth state when Auth client not initialized");return tm(or)}async function Lg(){if(!or)throw new Error("Can not authenticate when Auth client not initialized");return Yp(or)}function Bg(){document.cookie=Rg}async function Xf(){if(!or)throw new Error("Cannot get user when Auth client not initialized");return Zp(or)}async function Dg(e,t=!1){if(!or)throw new Error("Cannot get token when Auth client not initialized");try{return await Jp(or,e)}catch(r){if(t)return ri;switch(r.error){case al.LoginRequired:Bg(),rs();break;case al.InteractionRequired:rs();break}throw r}}let Ic=!1;function Fg(e){Ic=e}let ns=null;function jg(){ns=null}function Mg(){return ns=new In(!1),ns}function Rc(){return ns||Mg()}function Ug(e){Rc().next(e)}function yt(e,t=!1,r=!1){return!t&&Ic&&!Rc().getValue()?Promise.resolve(ri):Dg(e,r)}let Wa=!1,Qf=!1;async function $g(){await bc(`https://www.googletagmanager.com/gtm.js?id=${at.GTM_ID}`,"gtm-script"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.start":new Date().getTime(),event:"gtm.js"}),window.dataLayer.push({event:"pageMetaData",page:{type:"content",title:"Arduino Cloud Editor",path:window.location.pathname,environment:"%VITE_HF_CDN_ENV%",region:"global",brand:"arduino",language:"EN"}})}async function zg(){const e=window.analytics||[];if(window.analytics=e,!e.initialize){if(e.invoked){console.error("Segment snippet included twice.");return}return e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=t=>()=>{const r=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(t)>-1){const n=document.querySelector("link[rel='canonical']");r.push({__t:"bpc",c:n&&n.getAttribute("href")||void 0,p:window.location.pathname,u:window.location.href,s:window.location.search,t:document.title,r:document.referrer})}return r.unshift(t),e.push(r),e},e.methods.forEach(t=>{const r=e.methods[t];e[r]=e.factory(r)}),e._writeKey=at.SEGMENT_TOKEN,e._cdn="https://evs.aayinltcs.arduino.cc",e.SNIPPET_VERSION="5.2.0",e.load=async t=>{await bc(at.SEGMENT_SCRIPT,"segment-script"),e._loadOptions=t},e.load(e._writeKey)}}async function Gg(e){rm(`${at.HF_CDN_URL}/cookieSolution.css`),await bc(`${at.HF_CDN_URL}/cookieSolution.js`,"cookieSolution");const t=e[cl]===void 0?!1:!e[cl];window.arduinoCookieSolution.initCookieConsent(t)}async function qg(e){if(at.MODE==="development")return!1;Qf=!0;const t=4;async function r(n,o=0,s=1e3){return new Promise((f,i)=>{o>10&&i(),n()?f():setTimeout(()=>r(n,o+1).then(f),s)})}await Gg(e),await $g(),await zg(),r(()=>{var n,o,s,f;return!!((n=window.analytics)!=null&&n.page)&&!!window._iub&&((f=(s=(o=window._iub)==null?void 0:o.cs)==null?void 0:s.consent)==null?void 0:f.purposes[t])}).then(()=>window.analytics.page()).catch(()=>console.warn("Page not triggered!")),r(()=>{var n;return!!((n=window.analytics)!=null&&n.identify)&&!!window._iub}).then(()=>{var o,s,f;const n=(f=(s=(o=window._iub)==null?void 0:o.cs)==null?void 0:s.consent)==null?void 0:f.purposes[t];window.analytics.identify(e[Bi],{email:e.email},{integrations:{All:!1,"Segment.io":n,ProfitWell:n}})}).catch(()=>console.warn("Profitwell not triggered!"));try{await r(()=>{var n,o;return!!((n=window.analytics)!=null&&n.track)&&!!((o=window.analytics)!=null&&o.identify)}),Wa=!0}catch{console.warn("Analytics could not be initialized")}return Wa}function Vg(e){switch(e){case"INIT":return{event:"web_editor_initiate"};case"COMPILE":return{event:"web_editor_compile"};case"UPLOAD":return{event:"web_editor_upload"};case"SKETCH_MOD":return{event:"editor_sketch_interaction"};case"BOARD_CHANGE":return{event:"editor_board_selection"};case"EXAMPLE_SELECT":return{event:"editor_examples"};case"LIBRARY_SELECT":return{event:"editor_libraries"};case"LIBRARY_FAVORITE":return{event:"editor_libraries",action:"add to favorites"};case"REFERENCE_VIEW":return{event:"editor_reference",action:"view_reference"};case"GEN_AI_INTERACTION":return{event:"ai_interaction"};default:return{}}}async function Hg({type:e,payload:t=void 0}){if(!Qf||at.MODE==="development")return;if(!Wa){console.error("Tried to emit event before analytics was initialized");return}let r=Og;if(!r)try{r=await Xf()}catch{console.error("Error retrieving user profile for event emission");return}if(!r){console.error("Tried to emit event without a user profile");return}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({...Vg(e),...t,site_area:"editor",user_id:r[Bi]})}catch{console.error(`Error tracking event [${e}] with args [${t}]`)}}var Jf={exports:{}};(function(e,t){var r={};/*!
 * 
 *   @bcmi-labs/arduino-chromeos-uploader v1.2.12
 *   https://www.github.com/bcmi-labs/arduino-chromeos-uploader
 *
 *   Copyright (c) Arduino (https://www.arduino.cc) and project contributors.
 *
 *   This source code is licensed under the UNLICENSED license found in the
 *   LICENSE.md file in the root directory of this source tree.
 *
 */(function(n,o){e.exports=o()})(self,()=>(()=>{var n={195:function(i,v,l){i=l.nmd(i),function(a){function y(z,te){te|=0;for(var ue=Math.max(z.length-te,0),me=Array(ue),Ie=0;Ie<ue;Ie++)me[Ie]=z[te+Ie];return me}var u=function(z){var te=y(arguments,1);return function(){var ue=y(arguments);return z.apply(null,te.concat(ue))}},g=function(z){return function(){var te=y(arguments),ue=te.pop();z.call(this,te,ue)}};function I(z){var te=typeof z;return z!=null&&(te=="object"||te=="function")}var d=typeof setImmediate=="function"&&setImmediate,A=typeof process=="object"&&typeof process.nextTick=="function";function w(z){setTimeout(z,0)}function C(z){return function(te){var ue=y(arguments,1);z(function(){te.apply(null,ue)})}}var O=C(d?setImmediate:A?process.nextTick:w);function N(z){return g(function(te,ue){var me;try{me=z.apply(this,te)}catch(Ie){return ue(Ie)}I(me)&&typeof me.then=="function"?me.then(function(Ie){D(ue,null,Ie)},function(Ie){D(ue,Ie.message?Ie:new Error(Ie))}):ue(null,me)})}function D(z,te,ue){try{z(te,ue)}catch(me){O(W,me)}}function W(z){throw z}var M=typeof Symbol=="function";function V(z){return M&&z[Symbol.toStringTag]==="AsyncFunction"}function G(z){return V(z)?N(z):z}function ae(z){return function(te){var ue=y(arguments,1),me=g(function(Ie,ke){var Ne=this;return z(te,function(je,ze){G(je).apply(Ne,Ie.concat(ze))},ke)});return ue.length?me.apply(this,ue):me}}var pe=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g,H=typeof self=="object"&&self&&self.Object===Object&&self,ee=pe||H||Function("return this")(),_=ee.Symbol,S=Object.prototype,L=S.hasOwnProperty,P=S.toString,$=_?_.toStringTag:void 0;function F(z){var te=L.call(z,$),ue=z[$];try{z[$]=void 0;var me=!0}catch{}var Ie=P.call(z);return me&&(te?z[$]=ue:delete z[$]),Ie}var Y=Object.prototype.toString;function q(z){return Y.call(z)}var Z="[object Null]",ye="[object Undefined]",Ee=_?_.toStringTag:void 0;function Te(z){return z==null?z===void 0?ye:Z:Ee&&Ee in Object(z)?F(z):q(z)}var ct="[object AsyncFunction]",ft="[object Function]",Ye="[object GeneratorFunction]",et="[object Proxy]";function Qe(z){if(!I(z))return!1;var te=Te(z);return te==ft||te==Ye||te==ct||te==et}var Je=9007199254740991;function ht(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=Je}function lt(z){return z!=null&&ht(z.length)&&!Qe(z)}var T={};function Se(){}function Ae(z){return function(){if(z!==null){var te=z;z=null,te.apply(this,arguments)}}}var se=typeof Symbol=="function"&&Symbol.iterator,ne=function(z){return se&&z[se]&&z[se]()};function ve(z,te){for(var ue=-1,me=Array(z);++ue<z;)me[ue]=te(ue);return me}function Re(z){return z!=null&&typeof z=="object"}var Le="[object Arguments]";function we(z){return Re(z)&&Te(z)==Le}var De=Object.prototype,qe=De.hasOwnProperty,m=De.propertyIsEnumerable,R=we(function(){return arguments}())?we:function(z){return Re(z)&&qe.call(z,"callee")&&!m.call(z,"callee")},h=Array.isArray;function c(){return!1}var p=typeof a=="object"&&a&&!a.nodeType&&a,j=p&&i&&!i.nodeType&&i,Q=j&&j.exports===p?ee.Buffer:void 0,ge=(Q?Q.isBuffer:void 0)||c,be=9007199254740991,Ke=/^(?:0|[1-9]\d*)$/;function tt(z,te){var ue=typeof z;return!!(te=te??be)&&(ue=="number"||ue!="symbol"&&Ke.test(z))&&z>-1&&z%1==0&&z<te}var rt="[object Arguments]",wt="[object Array]",mt="[object Boolean]",Xr="[object Date]",hn="[object Error]",dn="[object Function]",$r="[object Map]",Ir="[object Number]",zs="[object Object]",Gs="[object RegExp]",On="[object Set]",qs="[object String]",fr="[object WeakMap]",Vs="[object ArrayBuffer]",Hs="[object DataView]",hi="[object Float64Array]",so="[object Int8Array]",ao="[object Int16Array]",co="[object Int32Array]",Ws="[object Uint8Array]",Ks="[object Uint8ClampedArray]",uo="[object Uint16Array]",Ys="[object Uint32Array]",xt={};function pn(z){return Re(z)&&ht(z.length)&&!!xt[Te(z)]}function lo(z){return function(te){return z(te)}}xt["[object Float32Array]"]=xt[hi]=xt[so]=xt[ao]=xt[co]=xt[Ws]=xt[Ks]=xt[uo]=xt[Ys]=!0,xt[rt]=xt[wt]=xt[Vs]=xt[mt]=xt[Hs]=xt[Xr]=xt[hn]=xt[dn]=xt[$r]=xt[Ir]=xt[zs]=xt[Gs]=xt[On]=xt[qs]=xt[fr]=!1;var di=typeof a=="object"&&a&&!a.nodeType&&a,mn=di&&i&&!i.nodeType&&i,pi=mn&&mn.exports===di&&pe.process,fo=function(){try{var z=mn&&mn.require&&mn.require("util").types;return z||pi&&pi.binding&&pi.binding("util")}catch{}}(),gn=fo&&fo.isTypedArray,vn=gn?lo(gn):pn,ho=Object.prototype.hasOwnProperty;function po(z,te){var ue=h(z),me=!ue&&R(z),Ie=!ue&&!me&&ge(z),ke=!ue&&!me&&!Ie&&vn(z),Ne=ue||me||Ie||ke,je=Ne?ve(z.length,String):[],ze=je.length;for(var nt in z)!ho.call(z,nt)||Ne&&(nt=="length"||Ie&&(nt=="offset"||nt=="parent")||ke&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||tt(nt,ze))||je.push(nt);return je}var Zs=Object.prototype;function mi(z){var te=z&&z.constructor;return z===(typeof te=="function"&&te.prototype||Zs)}function Xs(z,te){return function(ue){return z(te(ue))}}var Qs=Xs(Object.keys,Object),Nn=Object.prototype.hasOwnProperty;function Js(z){if(!mi(z))return Qs(z);var te=[];for(var ue in Object(z))Nn.call(z,ue)&&ue!="constructor"&&te.push(ue);return te}function Rr(z){return lt(z)?po(z):Js(z)}function Yt(z){var te=-1,ue=z.length;return function(){return++te<ue?{value:z[te],key:te}:null}}function mo(z){var te=-1;return function(){var ue=z.next();return ue.done?null:(te++,{value:ue.value,key:te})}}function ea(z){var te=Rr(z),ue=-1,me=te.length;return function Ie(){var ke=te[++ue];return ke==="__proto__"?Ie():ue<me?{value:z[ke],key:ke}:null}}function gi(z){if(lt(z))return Yt(z);var te=ne(z);return te?mo(te):ea(z)}function Nt(z){return function(){if(z===null)throw new Error("Callback was already called.");var te=z;z=null,te.apply(this,arguments)}}function Pn(z){return function(te,ue,me){if(me=Ae(me||Se),z<=0||!te)return me(null);var Ie=gi(te),ke=!1,Ne=0,je=!1;function ze(He,st){if(Ne-=1,He)ke=!0,me(He);else{if(st===T||ke&&Ne<=0)return ke=!0,me(null);je||nt()}}function nt(){for(je=!0;Ne<z&&!ke;){var He=Ie();if(He===null)return ke=!0,void(Ne<=0&&me(null));Ne+=1,ue(He.value,He.key,Nt(ze))}je=!1}nt()}}function Tr(z,te,ue,me){Pn(te)(z,G(ue),me)}function Mt(z,te){return function(ue,me,Ie){return z(ue,te,me,Ie)}}function ta(z,te,ue){ue=Ae(ue||Se);var me=0,Ie=0,ke=z.length;function Ne(je,ze){je?ue(je):++Ie!==ke&&ze!==T||ue(null)}for(ke===0&&ue(null);me<ke;me++)te(z[me],me,Nt(Ne))}var vi=Mt(Tr,1/0),_t=function(z,te,ue){(lt(z)?ta:vi)(z,G(te),ue)};function zr(z){return function(te,ue,me){return z(_t,te,G(ue),me)}}function hr(z,te,ue,me){me=me||Se,te=te||[];var Ie=[],ke=0,Ne=G(ue);z(te,function(je,ze,nt){var He=ke++;Ne(je,function(st,Bt){Ie[He]=Bt,nt(st)})},function(je){me(je,Ie)})}var dr=zr(hr),yi=ae(dr);function pr(z){return function(te,ue,me,Ie){return z(Pn(ue),te,G(me),Ie)}}var Or=pr(hr),Gr=Mt(Or,1),bi=ae(Gr);function Ln(z,te){for(var ue=-1,me=z==null?0:z.length;++ue<me&&te(z[ue],ue,z)!==!1;);return z}function ra(z){return function(te,ue,me){for(var Ie=-1,ke=Object(te),Ne=me(te),je=Ne.length;je--;){var ze=Ne[++Ie];if(ue(ke[ze],ze,ke)===!1)break}return te}}var na=ra();function Qr(z,te){return z&&na(z,te,Rr)}function go(z,te,ue,me){for(var Ie=z.length,ke=ue+-1;++ke<Ie;)if(te(z[ke],ke,z))return ke;return-1}function vo(z){return z!=z}function ia(z,te,ue){for(var me=ue-1,Ie=z.length;++me<Ie;)if(z[me]===te)return me;return-1}function yn(z,te,ue){return te==te?ia(z,te,ue):go(z,vo,ue)}var wi=function(z,te,ue){typeof te=="function"&&(ue=te,te=null),ue=Ae(ue||Se);var me=Rr(z).length;if(!me)return ue(null);te||(te=me);var Ie={},ke=0,Ne=!1,je=Object.create(null),ze=[],nt=[],He={};function st(Dt,Lt){ze.push(function(){mr(Dt,Lt)})}function Bt(){if(ze.length===0&&ke===0)return ue(null,Ie);for(;ze.length&&ke<te;)ze.shift()()}function cr(Dt,Lt){var ur=je[Dt];ur||(ur=je[Dt]=[]),ur.push(Lt)}function Nr(Dt){Ln(je[Dt]||[],function(Lt){Lt()}),Bt()}function mr(Dt,Lt){if(!Ne){var ur=Nt(function(Fn,da){if(ke--,arguments.length>2&&(da=y(arguments,1)),Fn){var pa={};Qr(Ie,function(np,ip){pa[ip]=np}),pa[Dt]=da,Ne=!0,je=Object.create(null),ue(Fn,pa)}else Ie[Dt]=da,Nr(Dt)});ke++;var Jr=G(Lt[Lt.length-1]);Lt.length>1?Jr(Ie,ur):Jr(ur)}}function Pr(){for(var Dt=0;nt.length;)Dt++,Ln(rp(nt.pop()),function(Lt){--He[Lt]==0&&nt.push(Lt)});if(Dt!==me)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function rp(Dt){var Lt=[];return Qr(z,function(ur,Jr){h(ur)&&yn(ur,Dt,0)>=0&&Lt.push(Jr)}),Lt}Qr(z,function(Dt,Lt){if(!h(Dt))return st(Lt,[Dt]),void nt.push(Lt);var ur=Dt.slice(0,Dt.length-1),Jr=ur.length;if(Jr===0)return st(Lt,Dt),void nt.push(Lt);He[Lt]=Jr,Ln(ur,function(Fn){if(!z[Fn])throw new Error("async.auto task `"+Lt+"` has a non-existent dependency `"+Fn+"` in "+ur.join(", "));cr(Fn,function(){--Jr==0&&st(Lt,Dt)})})}),Pr(),Bt()};function ar(z,te){for(var ue=-1,me=z==null?0:z.length,Ie=Array(me);++ue<me;)Ie[ue]=te(z[ue],ue,z);return Ie}var oa="[object Symbol]";function Bn(z){return typeof z=="symbol"||Re(z)&&Te(z)==oa}var B=_?_.prototype:void 0,b=B?B.toString:void 0;function E(z){if(typeof z=="string")return z;if(h(z))return ar(z,E)+"";if(Bn(z))return b?b.call(z):"";var te=z+"";return te=="0"&&1/z==-1/0?"-0":te}function U(z,te,ue){var me=-1,Ie=z.length;te<0&&(te=-te>Ie?0:Ie+te),(ue=ue>Ie?Ie:ue)<0&&(ue+=Ie),Ie=te>ue?0:ue-te>>>0,te>>>=0;for(var ke=Array(Ie);++me<Ie;)ke[me]=z[me+te];return ke}function K(z,te,ue){var me=z.length;return ue=ue===void 0?me:ue,!te&&ue>=me?z:U(z,te,ue)}function le(z,te){for(var ue=z.length;ue--&&yn(te,z[ue],0)>-1;);return ue}function he(z,te){for(var ue=-1,me=z.length;++ue<me&&yn(te,z[ue],0)>-1;);return ue}function oe(z){return z.split("")}var fe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function ie(z){return fe.test(z)}var ce="\\ud800-\\udfff",Pe="["+ce+"]",Fe="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ce="\\ud83c[\\udffb-\\udfff]",Ue="[^"+ce+"]",xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Ze="(?:"+Fe+"|"+Ce+")?",Ct="[\\ufe0e\\ufe0f]?",ot="(?:\\u200d(?:"+[Ue,xe,Ge].join("|")+")"+Ct+Ze+")*",ut=Ct+Ze+ot,Zt="(?:"+[Ue+Fe+"?",Fe,xe,Ge,Pe].join("|")+")",Tt=RegExp(Ce+"(?="+Ce+")|"+Zt+ut,"g");function Ot(z){return z.match(Tt)||[]}function At(z){return ie(z)?Ot(z):oe(z)}function zt(z){return z==null?"":E(z)}var k=/^\s+|\s+$/g;function x(z,te,ue){if((z=zt(z))&&te===void 0)return z.replace(k,"");if(!z||!(te=E(te)))return z;var me=At(z),Ie=At(te);return K(me,he(me,Ie),le(me,Ie)+1).join("")}var re=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,de=/,/,J=/(=.+)?(\s*)$/,Be=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function Me(z){return z=(z=(z=(z=z.toString().replace(Be,"")).match(re)[2].replace(" ",""))?z.split(de):[]).map(function(te){return x(te.replace(J,""))})}function Ve(z,te){var ue={};Qr(z,function(me,Ie){var ke,Ne=V(me),je=!Ne&&me.length===1||Ne&&me.length===0;if(h(me))ke=me.slice(0,-1),me=me[me.length-1],ue[Ie]=ke.concat(ke.length>0?ze:me);else if(je)ue[Ie]=me;else{if(ke=Me(me),me.length===0&&!Ne&&ke.length===0)throw new Error("autoInject task functions require explicit parameters.");Ne||ke.pop(),ue[Ie]=ke.concat(ze)}function ze(nt,He){var st=ar(ke,function(Bt){return nt[Bt]});st.push(He),G(me).apply(null,st)}}),wi(ue,te)}function We(){this.head=this.tail=null,this.length=0}function _e(z,te){z.length=1,z.head=z.tail=te}function $e(z,te,ue){if(te==null)te=1;else if(te===0)throw new Error("Concurrency must not be zero");var me=G(z),Ie=0,ke=[],Ne=!1;function je(st,Bt,cr){if(cr!=null&&typeof cr!="function")throw new Error("task callback must be a function");if(He.started=!0,h(st)||(st=[st]),st.length===0&&He.idle())return O(function(){He.drain()});for(var Nr=0,mr=st.length;Nr<mr;Nr++){var Pr={data:st[Nr],callback:cr||Se};Bt?He._tasks.unshift(Pr):He._tasks.push(Pr)}Ne||(Ne=!0,O(function(){Ne=!1,He.process()}))}function ze(st){return function(Bt){Ie-=1;for(var cr=0,Nr=st.length;cr<Nr;cr++){var mr=st[cr],Pr=yn(ke,mr,0);Pr===0?ke.shift():Pr>0&&ke.splice(Pr,1),mr.callback.apply(mr,arguments),Bt!=null&&He.error(Bt,mr.data)}Ie<=He.concurrency-He.buffer&&He.unsaturated(),He.idle()&&He.drain(),He.process()}}var nt=!1,He={_tasks:new We,concurrency:te,payload:ue,saturated:Se,unsaturated:Se,buffer:te/4,empty:Se,drain:Se,error:Se,started:!1,paused:!1,push:function(st,Bt){je(st,!1,Bt)},kill:function(){He.drain=Se,He._tasks.empty()},unshift:function(st,Bt){je(st,!0,Bt)},remove:function(st){He._tasks.remove(st)},process:function(){if(!nt){for(nt=!0;!He.paused&&Ie<He.concurrency&&He._tasks.length;){var st=[],Bt=[],cr=He._tasks.length;He.payload&&(cr=Math.min(cr,He.payload));for(var Nr=0;Nr<cr;Nr++){var mr=He._tasks.shift();st.push(mr),ke.push(mr),Bt.push(mr.data)}Ie+=1,He._tasks.length===0&&He.empty(),Ie===He.concurrency&&He.saturated();var Pr=Nt(ze(st));me(Bt,Pr)}nt=!1}},length:function(){return He._tasks.length},running:function(){return Ie},workersList:function(){return ke},idle:function(){return He._tasks.length+Ie===0},pause:function(){He.paused=!0},resume:function(){He.paused!==!1&&(He.paused=!1,O(He.process))}};return He}function Xe(z,te){return $e(z,1,te)}We.prototype.removeLink=function(z){return z.prev?z.prev.next=z.next:this.head=z.next,z.next?z.next.prev=z.prev:this.tail=z.prev,z.prev=z.next=null,this.length-=1,z},We.prototype.empty=function(){for(;this.head;)this.shift();return this},We.prototype.insertAfter=function(z,te){te.prev=z,te.next=z.next,z.next?z.next.prev=te:this.tail=te,z.next=te,this.length+=1},We.prototype.insertBefore=function(z,te){te.prev=z.prev,te.next=z,z.prev?z.prev.next=te:this.head=te,z.prev=te,this.length+=1},We.prototype.unshift=function(z){this.head?this.insertBefore(this.head,z):_e(this,z)},We.prototype.push=function(z){this.tail?this.insertAfter(this.tail,z):_e(this,z)},We.prototype.shift=function(){return this.head&&this.removeLink(this.head)},We.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},We.prototype.toArray=function(){for(var z=Array(this.length),te=this.head,ue=0;ue<this.length;ue++)z[ue]=te.data,te=te.next;return z},We.prototype.remove=function(z){for(var te=this.head;te;){var ue=te.next;z(te)&&this.removeLink(te),te=ue}return this};var Pt=Mt(Tr,1);function It(z,te,ue,me){me=Ae(me||Se);var Ie=G(ue);Pt(z,function(ke,Ne,je){Ie(te,ke,function(ze,nt){te=nt,je(ze)})},function(ke){me(ke,te)})}function kt(){var z=ar(arguments,G);return function(){var te=y(arguments),ue=this,me=te[te.length-1];typeof me=="function"?te.pop():me=Se,It(z,te,function(Ie,ke,Ne){ke.apply(ue,Ie.concat(function(je){var ze=y(arguments,1);Ne(je,ze)}))},function(Ie,ke){me.apply(ue,[Ie].concat(ke))})}}var dt=function(){return kt.apply(null,y(arguments).reverse())},Yd=Array.prototype.concat,yo=function(z,te,ue,me){me=me||Se;var Ie=G(ue);Or(z,te,function(ke,Ne){Ie(ke,function(je){return je?Ne(je):Ne(null,y(arguments,1))})},function(ke,Ne){for(var je=[],ze=0;ze<Ne.length;ze++)Ne[ze]&&(je=Yd.apply(je,Ne[ze]));return me(ke,je)})},yu=Mt(yo,1/0),bu=Mt(yo,1),wu=function(){var z=y(arguments),te=[null].concat(z);return function(){return arguments[arguments.length-1].apply(this,te)}};function xi(z){return z}function Dn(z,te){return function(ue,me,Ie,ke){ke=ke||Se;var Ne,je=!1;ue(me,function(ze,nt,He){Ie(ze,function(st,Bt){st?He(st):z(Bt)&&!Ne?(je=!0,Ne=te(!0,ze),He(null,T)):He()})},function(ze){ze?ke(ze):ke(null,je?Ne:te(!1))})}}function xu(z,te){return te}var bo=zr(Dn(xi,xu)),_i=pr(Dn(xi,xu)),wo=Mt(_i,1);function _u(z){return function(te){var ue=y(arguments,1);ue.push(function(me){var Ie=y(arguments,1);typeof console=="object"&&(me?console.error&&console.error(me):console[z]&&Ln(Ie,function(ke){console[z](ke)}))}),G(te).apply(null,ue)}}var Eu=_u("dir");function Su(z,te,ue){ue=Nt(ue||Se);var me=G(z),Ie=G(te);function ke(je){if(je)return ue(je);var ze=y(arguments,1);ze.push(Ne),Ie.apply(this,ze)}function Ne(je,ze){return je?ue(je):ze?void me(ke):ue(null)}Ne(null,!0)}function sa(z,te,ue){ue=Nt(ue||Se);var me=G(z),Ie=function(ke){if(ke)return ue(ke);var Ne=y(arguments,1);if(te.apply(this,Ne))return me(Ie);ue.apply(null,[null].concat(Ne))};me(Ie)}function Cu(z,te,ue){sa(z,function(){return!te.apply(this,arguments)},ue)}function ku(z,te,ue){ue=Nt(ue||Se);var me=G(te),Ie=G(z);function ke(je){if(je)return ue(je);Ie(Ne)}function Ne(je,ze){return je?ue(je):ze?void me(ke):ue(null)}Ie(Ne)}function Au(z){return function(te,ue,me){return z(te,me)}}function xo(z,te,ue){_t(z,Au(G(te)),ue)}function Ei(z,te,ue,me){Pn(te)(z,Au(G(ue)),me)}var Si=Mt(Ei,1);function aa(z){return V(z)?z:g(function(te,ue){var me=!0;te.push(function(){var Ie=arguments;me?O(function(){ue.apply(null,Ie)}):ue.apply(null,Ie)}),z.apply(this,te),me=!1})}function _o(z){return!z}var Eo=zr(Dn(_o,_o)),Ci=pr(Dn(_o,_o)),So=Mt(Ci,1);function Iu(z){return function(te){return te==null?void 0:te[z]}}function Zd(z,te,ue,me){var Ie=new Array(te.length);z(te,function(ke,Ne,je){ue(ke,function(ze,nt){Ie[Ne]=!!nt,je(ze)})},function(ke){if(ke)return me(ke);for(var Ne=[],je=0;je<te.length;je++)Ie[je]&&Ne.push(te[je]);me(null,Ne)})}function Xd(z,te,ue,me){var Ie=[];z(te,function(ke,Ne,je){ue(ke,function(ze,nt){ze?je(ze):(nt&&Ie.push({index:Ne,value:ke}),je())})},function(ke){ke?me(ke):me(null,ar(Ie.sort(function(Ne,je){return Ne.index-je.index}),Iu("value")))})}function ca(z,te,ue,me){(lt(te)?Zd:Xd)(z,te,G(ue),me||Se)}var Co=zr(ca),ki=pr(ca),ko=Mt(ki,1);function Ru(z,te){var ue=Nt(te||Se),me=G(aa(z));function Ie(ke){if(ke)return ue(ke);me(Ie)}Ie()}var Ao=function(z,te,ue,me){me=me||Se;var Ie=G(ue);Or(z,te,function(ke,Ne){Ie(ke,function(je,ze){return je?Ne(je):Ne(null,{key:ze,val:ke})})},function(ke,Ne){for(var je={},ze=Object.prototype.hasOwnProperty,nt=0;nt<Ne.length;nt++)if(Ne[nt]){var He=Ne[nt].key,st=Ne[nt].val;ze.call(je,He)?je[He].push(st):je[He]=[st]}return me(ke,je)})},Tu=Mt(Ao,1/0),Ou=Mt(Ao,1),Nu=_u("log");function Io(z,te,ue,me){me=Ae(me||Se);var Ie={},ke=G(ue);Tr(z,te,function(Ne,je,ze){ke(Ne,je,function(nt,He){if(nt)return ze(nt);Ie[je]=He,ze()})},function(Ne){me(Ne,Ie)})}var Pu=Mt(Io,1/0),Lu=Mt(Io,1);function Bu(z,te){return te in z}function Du(z,te){var ue=Object.create(null),me=Object.create(null);te=te||xi;var Ie=G(z),ke=g(function(Ne,je){var ze=te.apply(null,Ne);Bu(ue,ze)?O(function(){je.apply(null,ue[ze])}):Bu(me,ze)?me[ze].push(je):(me[ze]=[je],Ie.apply(null,Ne.concat(function(){var nt=y(arguments);ue[ze]=nt;var He=me[ze];delete me[ze];for(var st=0,Bt=He.length;st<Bt;st++)He[st].apply(null,nt)})))});return ke.memo=ue,ke.unmemoized=z,ke}var Fu=C(A?process.nextTick:d?setImmediate:w);function ua(z,te,ue){ue=ue||Se;var me=lt(te)?[]:{};z(te,function(Ie,ke,Ne){G(Ie)(function(je,ze){arguments.length>2&&(ze=y(arguments,1)),me[ke]=ze,Ne(je)})},function(Ie){ue(Ie,me)})}function ju(z,te){ua(_t,z,te)}function Mu(z,te,ue){ua(Pn(te),z,ue)}var la=function(z,te){var ue=G(z);return $e(function(me,Ie){ue(me[0],Ie)},te,1)},Uu=function(z,te){var ue=la(z,te);return ue.push=function(me,Ie,ke){if(ke==null&&(ke=Se),typeof ke!="function")throw new Error("task callback must be a function");if(ue.started=!0,h(me)||(me=[me]),me.length===0)return O(function(){ue.drain()});Ie=Ie||0;for(var Ne=ue._tasks.head;Ne&&Ie>=Ne.priority;)Ne=Ne.next;for(var je=0,ze=me.length;je<ze;je++){var nt={data:me[je],priority:Ie,callback:ke};Ne?ue._tasks.insertBefore(Ne,nt):ue._tasks.push(nt)}O(ue.process)},delete ue.unshift,ue};function $u(z,te){if(te=Ae(te||Se),!h(z))return te(new TypeError("First argument to race must be an array of functions"));if(!z.length)return te();for(var ue=0,me=z.length;ue<me;ue++)G(z[ue])(te)}function Ro(z,te,ue,me){It(y(z).reverse(),te,ue,me)}function To(z){var te=G(z);return g(function(ue,me){return ue.push(function(Ie,ke){var Ne;Ie?me(null,{error:Ie}):(Ne=arguments.length<=2?ke:y(arguments,1),me(null,{value:Ne}))}),te.apply(this,ue)})}function zu(z){var te;return h(z)?te=ar(z,To):(te={},Qr(z,function(ue,me){te[me]=To.call(this,ue)})),te}function Gu(z,te,ue,me){ca(z,te,function(Ie,ke){ue(Ie,function(Ne,je){ke(Ne,!je)})},me)}var qu=zr(Gu),fa=pr(Gu),Vu=Mt(fa,1);function Hu(z){return function(){return z}}function Oo(z,te,ue){var me=5,Ie=0,ke={times:me,intervalFunc:Hu(Ie)};function Ne(He,st){if(typeof st=="object")He.times=+st.times||me,He.intervalFunc=typeof st.interval=="function"?st.interval:Hu(+st.interval||Ie),He.errorFilter=st.errorFilter;else{if(typeof st!="number"&&typeof st!="string")throw new Error("Invalid arguments for async.retry");He.times=+st||me}}if(arguments.length<3&&typeof z=="function"?(ue=te||Se,te=z):(Ne(ke,z),ue=ue||Se),typeof te!="function")throw new Error("Invalid arguments for async.retry");var je=G(te),ze=1;function nt(){je(function(He){He&&ze++<ke.times&&(typeof ke.errorFilter!="function"||ke.errorFilter(He))?setTimeout(nt,ke.intervalFunc(ze)):ue.apply(null,arguments)})}nt()}var Wu=function(z,te){te||(te=z,z=null);var ue=G(te);return g(function(me,Ie){function ke(Ne){ue.apply(null,me.concat(Ne))}z?Oo(z,ke,Ie):Oo(ke,Ie)})};function Ku(z,te){ua(Pt,z,te)}var No=zr(Dn(Boolean,xi)),Ai=pr(Dn(Boolean,xi)),Po=Mt(Ai,1);function Yu(z,te,ue){var me=G(te);function Ie(ke,Ne){var je=ke.criteria,ze=Ne.criteria;return je<ze?-1:je>ze?1:0}dr(z,function(ke,Ne){me(ke,function(je,ze){if(je)return Ne(je);Ne(null,{value:ke,criteria:ze})})},function(ke,Ne){if(ke)return ue(ke);ue(null,ar(Ne.sort(Ie),Iu("value")))})}function Zu(z,te,ue){var me=G(z);return g(function(Ie,ke){var Ne,je=!1;function ze(){var nt=z.name||"anonymous",He=new Error('Callback function "'+nt+'" timed out.');He.code="ETIMEDOUT",ue&&(He.info=ue),je=!0,ke(He)}Ie.push(function(){je||(ke.apply(null,arguments),clearTimeout(Ne))}),Ne=setTimeout(ze,te),me.apply(null,Ie)})}var Qd=Math.ceil,Jd=Math.max;function ep(z,te,ue,me){for(var Ie=-1,ke=Jd(Qd((te-z)/ue),0),Ne=Array(ke);ke--;)Ne[++Ie]=z,z+=ue;return Ne}function Lo(z,te,ue,me){var Ie=G(ue);Or(ep(0,z,1),te,Ie,me)}var Xu=Mt(Lo,1/0),Qu=Mt(Lo,1);function Ju(z,te,ue,me){arguments.length<=3&&(me=ue,ue=te,te=h(z)?[]:{}),me=Ae(me||Se);var Ie=G(ue);_t(z,function(ke,Ne,je){Ie(te,ke,Ne,je)},function(ke){me(ke,te)})}function el(z,te){var ue,me=null;te=te||Se,Si(z,function(Ie,ke){G(Ie)(function(Ne,je){ue=arguments.length>2?y(arguments,1):je,me=Ne,ke(!Ne)})},function(){te(me,ue)})}function tl(z){return function(){return(z.unmemoized||z).apply(null,arguments)}}function ha(z,te,ue){ue=Nt(ue||Se);var me=G(te);if(!z())return ue(null);var Ie=function(ke){if(ke)return ue(ke);if(z())return me(Ie);var Ne=y(arguments,1);ue.apply(null,[null].concat(Ne))};me(Ie)}function rl(z,te,ue){ha(function(){return!z.apply(this,arguments)},te,ue)}var nl=function(z,te){if(te=Ae(te||Se),!h(z))return te(new Error("First argument to waterfall must be an array of functions"));if(!z.length)return te();var ue=0;function me(ke){var Ne=G(z[ue++]);ke.push(Nt(Ie)),Ne.apply(null,ke)}function Ie(ke){if(ke||ue===z.length)return te.apply(null,arguments);me(y(arguments,1))}me([])},tp={apply:u,applyEach:yi,applyEachSeries:bi,asyncify:N,auto:wi,autoInject:Ve,cargo:Xe,compose:dt,concat:yu,concatLimit:yo,concatSeries:bu,constant:wu,detect:bo,detectLimit:_i,detectSeries:wo,dir:Eu,doDuring:Su,doUntil:Cu,doWhilst:sa,during:ku,each:xo,eachLimit:Ei,eachOf:_t,eachOfLimit:Tr,eachOfSeries:Pt,eachSeries:Si,ensureAsync:aa,every:Eo,everyLimit:Ci,everySeries:So,filter:Co,filterLimit:ki,filterSeries:ko,forever:Ru,groupBy:Tu,groupByLimit:Ao,groupBySeries:Ou,log:Nu,map:dr,mapLimit:Or,mapSeries:Gr,mapValues:Pu,mapValuesLimit:Io,mapValuesSeries:Lu,memoize:Du,nextTick:Fu,parallel:ju,parallelLimit:Mu,priorityQueue:Uu,queue:la,race:$u,reduce:It,reduceRight:Ro,reflect:To,reflectAll:zu,reject:qu,rejectLimit:fa,rejectSeries:Vu,retry:Oo,retryable:Wu,seq:kt,series:Ku,setImmediate:O,some:No,someLimit:Ai,someSeries:Po,sortBy:Yu,timeout:Zu,times:Xu,timesLimit:Lo,timesSeries:Qu,transform:Ju,tryEach:el,unmemoize:tl,until:rl,waterfall:nl,whilst:ha,all:Eo,allLimit:Ci,allSeries:So,any:No,anyLimit:Ai,anySeries:Po,find:bo,findLimit:_i,findSeries:wo,forEach:xo,forEachSeries:Si,forEachLimit:Ei,forEachOf:_t,forEachOfSeries:Pt,forEachOfLimit:Tr,inject:It,foldl:It,foldr:Ro,select:Co,selectLimit:ki,selectSeries:ko,wrapSync:N};a.default=tp,a.apply=u,a.applyEach=yi,a.applyEachSeries=bi,a.asyncify=N,a.auto=wi,a.autoInject=Ve,a.cargo=Xe,a.compose=dt,a.concat=yu,a.concatLimit=yo,a.concatSeries=bu,a.constant=wu,a.detect=bo,a.detectLimit=_i,a.detectSeries=wo,a.dir=Eu,a.doDuring=Su,a.doUntil=Cu,a.doWhilst=sa,a.during=ku,a.each=xo,a.eachLimit=Ei,a.eachOf=_t,a.eachOfLimit=Tr,a.eachOfSeries=Pt,a.eachSeries=Si,a.ensureAsync=aa,a.every=Eo,a.everyLimit=Ci,a.everySeries=So,a.filter=Co,a.filterLimit=ki,a.filterSeries=ko,a.forever=Ru,a.groupBy=Tu,a.groupByLimit=Ao,a.groupBySeries=Ou,a.log=Nu,a.map=dr,a.mapLimit=Or,a.mapSeries=Gr,a.mapValues=Pu,a.mapValuesLimit=Io,a.mapValuesSeries=Lu,a.memoize=Du,a.nextTick=Fu,a.parallel=ju,a.parallelLimit=Mu,a.priorityQueue=Uu,a.queue=la,a.race=$u,a.reduce=It,a.reduceRight=Ro,a.reflect=To,a.reflectAll=zu,a.reject=qu,a.rejectLimit=fa,a.rejectSeries=Vu,a.retry=Oo,a.retryable=Wu,a.seq=kt,a.series=Ku,a.setImmediate=O,a.some=No,a.someLimit=Ai,a.someSeries=Po,a.sortBy=Yu,a.timeout=Zu,a.times=Xu,a.timesLimit=Lo,a.timesSeries=Qu,a.transform=Ju,a.tryEach=el,a.unmemoize=tl,a.until=rl,a.waterfall=nl,a.whilst=ha,a.all=Eo,a.allLimit=Ci,a.allSeries=So,a.any=No,a.anyLimit=Ai,a.anySeries=Po,a.find=bo,a.findLimit=_i,a.findSeries=wo,a.forEach=xo,a.forEachSeries=Si,a.forEachLimit=Ei,a.forEachOf=_t,a.forEachOfSeries=Pt,a.forEachOfLimit=Tr,a.inject=It,a.foldl=It,a.foldr=Ro,a.select=Co,a.selectLimit=ki,a.selectSeries=ko,a.wrapSync=N,Object.defineProperty(a,"__esModule",{value:!0})}(v)},664:i=>{i.exports=function(v,l){for(var a=0;a++<l;)v*=2;return v}},911:(i,v,l)=>{var a=l(346),y=l(664);i.exports=function(u){if(!arguments.length)throw new SyntaxError("must supply a polling function");if(!a(u,"function"))throw new TypeError("poll must be a function");return function(){var g,I,d=1/0,A=!1,w=1e3,C=null,O=0;function N(){var W=u(D);u.length===0&&D(W)}function D(W){var M=w,V=I;O+=1,W||O>=d?I&&(I=null,V(!!W)):(A&&(A===!0?M=y(M,O):M+=O*A),C=setTimeout(N,M))}return g=function(W){if(C&&(clearTimeout(C),C=null,I&&I(!1),I=null,O=0),arguments.length){if(!a(W,"function"))throw new TypeError("done callback must be a function");I=W}C=setTimeout(N,w)},g.ask=function(W){if(C)throw new SyntaxError("can not set ask limit during polling");if(!a(W,"number"))throw new TypeError("ask limit must be a number");return d=W,g},g.every=function(W){if(C)throw new SyntaxError("can not set timeout during polling");if(!a(W,"number"))throw new TypeError("timout must be a number");return w=W,g},g.incr=function(W){if(C)throw new SyntexError("can not set increment during polling");if(!arguments.length||a(W,"boolean"))A=!!W;else{if(!a(W,"number"))throw new TypeError("increment must be a boolean or number");A=W}return g},g}()}},742:(i,v)=>{v.byteLength=function(w){var C=d(w),O=C[0],N=C[1];return 3*(O+N)/4-N},v.toByteArray=function(w){var C,O,N=d(w),D=N[0],W=N[1],M=new y(function(ae,pe,H){return 3*(pe+H)/4-H}(0,D,W)),V=0,G=W>0?D-4:D;for(O=0;O<G;O+=4)C=a[w.charCodeAt(O)]<<18|a[w.charCodeAt(O+1)]<<12|a[w.charCodeAt(O+2)]<<6|a[w.charCodeAt(O+3)],M[V++]=C>>16&255,M[V++]=C>>8&255,M[V++]=255&C;return W===2&&(C=a[w.charCodeAt(O)]<<2|a[w.charCodeAt(O+1)]>>4,M[V++]=255&C),W===1&&(C=a[w.charCodeAt(O)]<<10|a[w.charCodeAt(O+1)]<<4|a[w.charCodeAt(O+2)]>>2,M[V++]=C>>8&255,M[V++]=255&C),M},v.fromByteArray=function(w){for(var C,O=w.length,N=O%3,D=[],W=16383,M=0,V=O-N;M<V;M+=W)D.push(A(w,M,M+W>V?V:M+W));return N===1?(C=w[O-1],D.push(l[C>>2]+l[C<<4&63]+"==")):N===2&&(C=(w[O-2]<<8)+w[O-1],D.push(l[C>>10]+l[C>>4&63]+l[C<<2&63]+"=")),D.join("")};for(var l=[],a=[],y=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,I=u.length;g<I;++g)l[g]=u[g],a[u.charCodeAt(g)]=g;function d(w){var C=w.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=w.indexOf("=");return O===-1&&(O=C),[O,O===C?0:4-O%4]}function A(w,C,O){for(var N,D,W=[],M=C;M<O;M+=3)N=(w[M]<<16&16711680)+(w[M+1]<<8&65280)+(255&w[M+2]),W.push(l[(D=N)>>18&63]+l[D>>12&63]+l[D>>6&63]+l[63&D]);return W.join("")}a[45]=62,a[95]=63},764:(i,v,l)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const a=l(742),y=l(645),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;v.lW=d,v.h2=50;const g=2147483647;function I(m){if(m>g)throw new RangeError('The value "'+m+'" is invalid for option "size"');const R=new Uint8Array(m);return Object.setPrototypeOf(R,d.prototype),R}function d(m,R,h){if(typeof m=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(m)}return A(m,R,h)}function A(m,R,h){if(typeof m=="string")return function(j,Q){if(typeof Q=="string"&&Q!==""||(Q="utf8"),!d.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ge=0|W(j,Q);let be=I(ge);const Ke=be.write(j,Q);return Ke!==ge&&(be=be.slice(0,Ke)),be}(m,R);if(ArrayBuffer.isView(m))return function(j){if(Re(j,Uint8Array)){const Q=new Uint8Array(j);return N(Q.buffer,Q.byteOffset,Q.byteLength)}return O(j)}(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Re(m,ArrayBuffer)||m&&Re(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(m,SharedArrayBuffer)||m&&Re(m.buffer,SharedArrayBuffer)))return N(m,R,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const c=m.valueOf&&m.valueOf();if(c!=null&&c!==m)return d.from(c,R,h);const p=function(j){if(d.isBuffer(j)){const Q=0|D(j.length),ge=I(Q);return ge.length===0||j.copy(ge,0,0,Q),ge}if(j.length!==void 0)return typeof j.length!="number"||Le(j.length)?I(0):O(j);if(j.type==="Buffer"&&Array.isArray(j.data))return O(j.data)}(m);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return d.from(m[Symbol.toPrimitive]("string"),R,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}function w(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function C(m){return w(m),I(m<0?0:0|D(m))}function O(m){const R=m.length<0?0:0|D(m.length),h=I(R);for(let c=0;c<R;c+=1)h[c]=255&m[c];return h}function N(m,R,h){if(R<0||m.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<R+(h||0))throw new RangeError('"length" is outside of buffer bounds');let c;return c=R===void 0&&h===void 0?new Uint8Array(m):h===void 0?new Uint8Array(m,R):new Uint8Array(m,R,h),Object.setPrototypeOf(c,d.prototype),c}function D(m){if(m>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|m}function W(m,R){if(d.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||Re(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&h===0)return 0;let p=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return se(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return ne(m).length;default:if(p)return c?-1:se(m).length;R=(""+R).toLowerCase(),p=!0}}function M(m,R,h){let c=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0)<=(R>>>=0))return"";for(m||(m="utf8");;)switch(m){case"hex":return q(this,R,h);case"utf8":case"utf-8":return P(this,R,h);case"ascii":return F(this,R,h);case"latin1":case"binary":return Y(this,R,h);case"base64":return L(this,R,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,R,h);default:if(c)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),c=!0}}function V(m,R,h){const c=m[R];m[R]=m[h],m[h]=c}function G(m,R,h,c,p){if(m.length===0)return-1;if(typeof h=="string"?(c=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),Le(h=+h)&&(h=p?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(p)return-1;h=m.length-1}else if(h<0){if(!p)return-1;h=0}if(typeof R=="string"&&(R=d.from(R,c)),d.isBuffer(R))return R.length===0?-1:ae(m,R,h,c,p);if(typeof R=="number")return R&=255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(m,R,h):Uint8Array.prototype.lastIndexOf.call(m,R,h):ae(m,[R],h,c,p);throw new TypeError("val must be string, number or Buffer")}function ae(m,R,h,c,p){let j,Q=1,ge=m.length,be=R.length;if(c!==void 0&&((c=String(c).toLowerCase())==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(m.length<2||R.length<2)return-1;Q=2,ge/=2,be/=2,h/=2}function Ke(tt,rt){return Q===1?tt[rt]:tt.readUInt16BE(rt*Q)}if(p){let tt=-1;for(j=h;j<ge;j++)if(Ke(m,j)===Ke(R,tt===-1?0:j-tt)){if(tt===-1&&(tt=j),j-tt+1===be)return tt*Q}else tt!==-1&&(j-=j-tt),tt=-1}else for(h+be>ge&&(h=ge-be),j=h;j>=0;j--){let tt=!0;for(let rt=0;rt<be;rt++)if(Ke(m,j+rt)!==Ke(R,rt)){tt=!1;break}if(tt)return j}return-1}function pe(m,R,h,c){h=Number(h)||0;const p=m.length-h;c?(c=Number(c))>p&&(c=p):c=p;const j=R.length;let Q;for(c>j/2&&(c=j/2),Q=0;Q<c;++Q){const ge=parseInt(R.substr(2*Q,2),16);if(Le(ge))return Q;m[h+Q]=ge}return Q}function H(m,R,h,c){return ve(se(R,m.length-h),m,h,c)}function ee(m,R,h,c){return ve(function(p){const j=[];for(let Q=0;Q<p.length;++Q)j.push(255&p.charCodeAt(Q));return j}(R),m,h,c)}function _(m,R,h,c){return ve(ne(R),m,h,c)}function S(m,R,h,c){return ve(function(p,j){let Q,ge,be;const Ke=[];for(let tt=0;tt<p.length&&!((j-=2)<0);++tt)Q=p.charCodeAt(tt),ge=Q>>8,be=Q%256,Ke.push(be),Ke.push(ge);return Ke}(R,m.length-h),m,h,c)}function L(m,R,h){return R===0&&h===m.length?a.fromByteArray(m):a.fromByteArray(m.slice(R,h))}function P(m,R,h){h=Math.min(m.length,h);const c=[];let p=R;for(;p<h;){const j=m[p];let Q=null,ge=j>239?4:j>223?3:j>191?2:1;if(p+ge<=h){let be,Ke,tt,rt;switch(ge){case 1:j<128&&(Q=j);break;case 2:be=m[p+1],(192&be)==128&&(rt=(31&j)<<6|63&be,rt>127&&(Q=rt));break;case 3:be=m[p+1],Ke=m[p+2],(192&be)==128&&(192&Ke)==128&&(rt=(15&j)<<12|(63&be)<<6|63&Ke,rt>2047&&(rt<55296||rt>57343)&&(Q=rt));break;case 4:be=m[p+1],Ke=m[p+2],tt=m[p+3],(192&be)==128&&(192&Ke)==128&&(192&tt)==128&&(rt=(15&j)<<18|(63&be)<<12|(63&Ke)<<6|63&tt,rt>65535&&rt<1114112&&(Q=rt))}}Q===null?(Q=65533,ge=1):Q>65535&&(Q-=65536,c.push(Q>>>10&1023|55296),Q=56320|1023&Q),c.push(Q),p+=ge}return function(j){const Q=j.length;if(Q<=$)return String.fromCharCode.apply(String,j);let ge="",be=0;for(;be<Q;)ge+=String.fromCharCode.apply(String,j.slice(be,be+=$));return ge}(c)}d.TYPED_ARRAY_SUPPORT=function(){try{const m=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(m,R),m.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(m,R,h){return A(m,R,h)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(m,R,h){return function(c,p,j){return w(c),c<=0?I(c):p!==void 0?typeof j=="string"?I(c).fill(p,j):I(c).fill(p):I(c)}(m,R,h)},d.allocUnsafe=function(m){return C(m)},d.allocUnsafeSlow=function(m){return C(m)},d.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==d.prototype},d.compare=function(m,R){if(Re(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength)),Re(R,Uint8Array)&&(R=d.from(R,R.offset,R.byteLength)),!d.isBuffer(m)||!d.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===R)return 0;let h=m.length,c=R.length;for(let p=0,j=Math.min(h,c);p<j;++p)if(m[p]!==R[p]){h=m[p],c=R[p];break}return h<c?-1:c<h?1:0},d.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(m,R){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return d.alloc(0);let h;if(R===void 0)for(R=0,h=0;h<m.length;++h)R+=m[h].length;const c=d.allocUnsafe(R);let p=0;for(h=0;h<m.length;++h){let j=m[h];if(Re(j,Uint8Array))p+j.length>c.length?(d.isBuffer(j)||(j=d.from(j)),j.copy(c,p)):Uint8Array.prototype.set.call(c,j,p);else{if(!d.isBuffer(j))throw new TypeError('"list" argument must be an Array of Buffers');j.copy(c,p)}p+=j.length}return c},d.byteLength=W,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const m=this.length;if(m%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<m;R+=2)V(this,R,R+1);return this},d.prototype.swap32=function(){const m=this.length;if(m%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<m;R+=4)V(this,R,R+3),V(this,R+1,R+2);return this},d.prototype.swap64=function(){const m=this.length;if(m%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<m;R+=8)V(this,R,R+7),V(this,R+1,R+6),V(this,R+2,R+5),V(this,R+3,R+4);return this},d.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?P(this,0,m):M.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(m){if(!d.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m||d.compare(this,m)===0},d.prototype.inspect=function(){let m="";const R=v.h2;return m=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(m+=" ... "),"<Buffer "+m+">"},u&&(d.prototype[u]=d.prototype.inspect),d.prototype.compare=function(m,R,h,c,p){if(Re(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength)),!d.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(R===void 0&&(R=0),h===void 0&&(h=m?m.length:0),c===void 0&&(c=0),p===void 0&&(p=this.length),R<0||h>m.length||c<0||p>this.length)throw new RangeError("out of range index");if(c>=p&&R>=h)return 0;if(c>=p)return-1;if(R>=h)return 1;if(this===m)return 0;let j=(p>>>=0)-(c>>>=0),Q=(h>>>=0)-(R>>>=0);const ge=Math.min(j,Q),be=this.slice(c,p),Ke=m.slice(R,h);for(let tt=0;tt<ge;++tt)if(be[tt]!==Ke[tt]){j=be[tt],Q=Ke[tt];break}return j<Q?-1:Q<j?1:0},d.prototype.includes=function(m,R,h){return this.indexOf(m,R,h)!==-1},d.prototype.indexOf=function(m,R,h){return G(this,m,R,h,!0)},d.prototype.lastIndexOf=function(m,R,h){return G(this,m,R,h,!1)},d.prototype.write=function(m,R,h,c){if(R===void 0)c="utf8",h=this.length,R=0;else if(h===void 0&&typeof R=="string")c=R,h=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R>>>=0,isFinite(h)?(h>>>=0,c===void 0&&(c="utf8")):(c=h,h=void 0)}const p=this.length-R;if((h===void 0||h>p)&&(h=p),m.length>0&&(h<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let j=!1;for(;;)switch(c){case"hex":return pe(this,m,R,h);case"utf8":case"utf-8":return H(this,m,R,h);case"ascii":case"latin1":case"binary":return ee(this,m,R,h);case"base64":return _(this,m,R,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,m,R,h);default:if(j)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),j=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const $=4096;function F(m,R,h){let c="";h=Math.min(m.length,h);for(let p=R;p<h;++p)c+=String.fromCharCode(127&m[p]);return c}function Y(m,R,h){let c="";h=Math.min(m.length,h);for(let p=R;p<h;++p)c+=String.fromCharCode(m[p]);return c}function q(m,R,h){const c=m.length;(!R||R<0)&&(R=0),(!h||h<0||h>c)&&(h=c);let p="";for(let j=R;j<h;++j)p+=we[m[j]];return p}function Z(m,R,h){const c=m.slice(R,h);let p="";for(let j=0;j<c.length-1;j+=2)p+=String.fromCharCode(c[j]+256*c[j+1]);return p}function ye(m,R,h){if(m%1!=0||m<0)throw new RangeError("offset is not uint");if(m+R>h)throw new RangeError("Trying to access beyond buffer length")}function Ee(m,R,h,c,p,j){if(!d.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>p||R<j)throw new RangeError('"value" argument is out of bounds');if(h+c>m.length)throw new RangeError("Index out of range")}function Te(m,R,h,c,p){lt(R,c,p,m,h,7);let j=Number(R&BigInt(4294967295));m[h++]=j,j>>=8,m[h++]=j,j>>=8,m[h++]=j,j>>=8,m[h++]=j;let Q=Number(R>>BigInt(32)&BigInt(4294967295));return m[h++]=Q,Q>>=8,m[h++]=Q,Q>>=8,m[h++]=Q,Q>>=8,m[h++]=Q,h}function ct(m,R,h,c,p){lt(R,c,p,m,h,7);let j=Number(R&BigInt(4294967295));m[h+7]=j,j>>=8,m[h+6]=j,j>>=8,m[h+5]=j,j>>=8,m[h+4]=j;let Q=Number(R>>BigInt(32)&BigInt(4294967295));return m[h+3]=Q,Q>>=8,m[h+2]=Q,Q>>=8,m[h+1]=Q,Q>>=8,m[h]=Q,h+8}function ft(m,R,h,c,p,j){if(h+c>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Ye(m,R,h,c,p){return R=+R,h>>>=0,p||ft(m,0,h,4),y.write(m,R,h,c,23,4),h+4}function et(m,R,h,c,p){return R=+R,h>>>=0,p||ft(m,0,h,8),y.write(m,R,h,c,52,8),h+8}d.prototype.slice=function(m,R){const h=this.length;(m=~~m)<0?(m+=h)<0&&(m=0):m>h&&(m=h),(R=R===void 0?h:~~R)<0?(R+=h)<0&&(R=0):R>h&&(R=h),R<m&&(R=m);const c=this.subarray(m,R);return Object.setPrototypeOf(c,d.prototype),c},d.prototype.readUintLE=d.prototype.readUIntLE=function(m,R,h){m>>>=0,R>>>=0,h||ye(m,R,this.length);let c=this[m],p=1,j=0;for(;++j<R&&(p*=256);)c+=this[m+j]*p;return c},d.prototype.readUintBE=d.prototype.readUIntBE=function(m,R,h){m>>>=0,R>>>=0,h||ye(m,R,this.length);let c=this[m+--R],p=1;for(;R>0&&(p*=256);)c+=this[m+--R]*p;return c},d.prototype.readUint8=d.prototype.readUInt8=function(m,R){return m>>>=0,R||ye(m,1,this.length),this[m]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(m,R){return m>>>=0,R||ye(m,2,this.length),this[m]|this[m+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(m,R){return m>>>=0,R||ye(m,2,this.length),this[m]<<8|this[m+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(m,R){return m>>>=0,R||ye(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+16777216*this[m+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(m,R){return m>>>=0,R||ye(m,4,this.length),16777216*this[m]+(this[m+1]<<16|this[m+2]<<8|this[m+3])},d.prototype.readBigUInt64LE=De(function(m){T(m>>>=0,"offset");const R=this[m],h=this[m+7];R!==void 0&&h!==void 0||Se(m,this.length-8);const c=R+256*this[++m]+65536*this[++m]+this[++m]*2**24,p=this[++m]+256*this[++m]+65536*this[++m]+h*2**24;return BigInt(c)+(BigInt(p)<<BigInt(32))}),d.prototype.readBigUInt64BE=De(function(m){T(m>>>=0,"offset");const R=this[m],h=this[m+7];R!==void 0&&h!==void 0||Se(m,this.length-8);const c=R*2**24+65536*this[++m]+256*this[++m]+this[++m],p=this[++m]*2**24+65536*this[++m]+256*this[++m]+h;return(BigInt(c)<<BigInt(32))+BigInt(p)}),d.prototype.readIntLE=function(m,R,h){m>>>=0,R>>>=0,h||ye(m,R,this.length);let c=this[m],p=1,j=0;for(;++j<R&&(p*=256);)c+=this[m+j]*p;return p*=128,c>=p&&(c-=Math.pow(2,8*R)),c},d.prototype.readIntBE=function(m,R,h){m>>>=0,R>>>=0,h||ye(m,R,this.length);let c=R,p=1,j=this[m+--c];for(;c>0&&(p*=256);)j+=this[m+--c]*p;return p*=128,j>=p&&(j-=Math.pow(2,8*R)),j},d.prototype.readInt8=function(m,R){return m>>>=0,R||ye(m,1,this.length),128&this[m]?-1*(255-this[m]+1):this[m]},d.prototype.readInt16LE=function(m,R){m>>>=0,R||ye(m,2,this.length);const h=this[m]|this[m+1]<<8;return 32768&h?4294901760|h:h},d.prototype.readInt16BE=function(m,R){m>>>=0,R||ye(m,2,this.length);const h=this[m+1]|this[m]<<8;return 32768&h?4294901760|h:h},d.prototype.readInt32LE=function(m,R){return m>>>=0,R||ye(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},d.prototype.readInt32BE=function(m,R){return m>>>=0,R||ye(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},d.prototype.readBigInt64LE=De(function(m){T(m>>>=0,"offset");const R=this[m],h=this[m+7];R!==void 0&&h!==void 0||Se(m,this.length-8);const c=this[m+4]+256*this[m+5]+65536*this[m+6]+(h<<24);return(BigInt(c)<<BigInt(32))+BigInt(R+256*this[++m]+65536*this[++m]+this[++m]*16777216)}),d.prototype.readBigInt64BE=De(function(m){T(m>>>=0,"offset");const R=this[m],h=this[m+7];R!==void 0&&h!==void 0||Se(m,this.length-8);const c=(R<<24)+65536*this[++m]+256*this[++m]+this[++m];return(BigInt(c)<<BigInt(32))+BigInt(this[++m]*16777216+65536*this[++m]+256*this[++m]+h)}),d.prototype.readFloatLE=function(m,R){return m>>>=0,R||ye(m,4,this.length),y.read(this,m,!0,23,4)},d.prototype.readFloatBE=function(m,R){return m>>>=0,R||ye(m,4,this.length),y.read(this,m,!1,23,4)},d.prototype.readDoubleLE=function(m,R){return m>>>=0,R||ye(m,8,this.length),y.read(this,m,!0,52,8)},d.prototype.readDoubleBE=function(m,R){return m>>>=0,R||ye(m,8,this.length),y.read(this,m,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(m,R,h,c){m=+m,R>>>=0,h>>>=0,!c&&Ee(this,m,R,h,Math.pow(2,8*h)-1,0);let p=1,j=0;for(this[R]=255&m;++j<h&&(p*=256);)this[R+j]=m/p&255;return R+h},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(m,R,h,c){m=+m,R>>>=0,h>>>=0,!c&&Ee(this,m,R,h,Math.pow(2,8*h)-1,0);let p=h-1,j=1;for(this[R+p]=255&m;--p>=0&&(j*=256);)this[R+p]=m/j&255;return R+h},d.prototype.writeUint8=d.prototype.writeUInt8=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,1,255,0),this[R]=255&m,R+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,2,65535,0),this[R]=255&m,this[R+1]=m>>>8,R+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,2,65535,0),this[R]=m>>>8,this[R+1]=255&m,R+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,4,4294967295,0),this[R+3]=m>>>24,this[R+2]=m>>>16,this[R+1]=m>>>8,this[R]=255&m,R+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,4,4294967295,0),this[R]=m>>>24,this[R+1]=m>>>16,this[R+2]=m>>>8,this[R+3]=255&m,R+4},d.prototype.writeBigUInt64LE=De(function(m,R=0){return Te(this,m,R,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=De(function(m,R=0){return ct(this,m,R,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(m,R,h,c){if(m=+m,R>>>=0,!c){const ge=Math.pow(2,8*h-1);Ee(this,m,R,h,ge-1,-ge)}let p=0,j=1,Q=0;for(this[R]=255&m;++p<h&&(j*=256);)m<0&&Q===0&&this[R+p-1]!==0&&(Q=1),this[R+p]=(m/j>>0)-Q&255;return R+h},d.prototype.writeIntBE=function(m,R,h,c){if(m=+m,R>>>=0,!c){const ge=Math.pow(2,8*h-1);Ee(this,m,R,h,ge-1,-ge)}let p=h-1,j=1,Q=0;for(this[R+p]=255&m;--p>=0&&(j*=256);)m<0&&Q===0&&this[R+p+1]!==0&&(Q=1),this[R+p]=(m/j>>0)-Q&255;return R+h},d.prototype.writeInt8=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,1,127,-128),m<0&&(m=255+m+1),this[R]=255&m,R+1},d.prototype.writeInt16LE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,2,32767,-32768),this[R]=255&m,this[R+1]=m>>>8,R+2},d.prototype.writeInt16BE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,2,32767,-32768),this[R]=m>>>8,this[R+1]=255&m,R+2},d.prototype.writeInt32LE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,4,2147483647,-2147483648),this[R]=255&m,this[R+1]=m>>>8,this[R+2]=m>>>16,this[R+3]=m>>>24,R+4},d.prototype.writeInt32BE=function(m,R,h){return m=+m,R>>>=0,h||Ee(this,m,R,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[R]=m>>>24,this[R+1]=m>>>16,this[R+2]=m>>>8,this[R+3]=255&m,R+4},d.prototype.writeBigInt64LE=De(function(m,R=0){return Te(this,m,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=De(function(m,R=0){return ct(this,m,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(m,R,h){return Ye(this,m,R,!0,h)},d.prototype.writeFloatBE=function(m,R,h){return Ye(this,m,R,!1,h)},d.prototype.writeDoubleLE=function(m,R,h){return et(this,m,R,!0,h)},d.prototype.writeDoubleBE=function(m,R,h){return et(this,m,R,!1,h)},d.prototype.copy=function(m,R,h,c){if(!d.isBuffer(m))throw new TypeError("argument should be a Buffer");if(h||(h=0),c||c===0||(c=this.length),R>=m.length&&(R=m.length),R||(R=0),c>0&&c<h&&(c=h),c===h||m.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),m.length-R<c-h&&(c=m.length-R+h);const p=c-h;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,h,c):Uint8Array.prototype.set.call(m,this.subarray(h,c),R),p},d.prototype.fill=function(m,R,h,c){if(typeof m=="string"){if(typeof R=="string"?(c=R,R=0,h=this.length):typeof h=="string"&&(c=h,h=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!d.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(m.length===1){const j=m.charCodeAt(0);(c==="utf8"&&j<128||c==="latin1")&&(m=j)}}else typeof m=="number"?m&=255:typeof m=="boolean"&&(m=Number(m));if(R<0||this.length<R||this.length<h)throw new RangeError("Out of range index");if(h<=R)return this;let p;if(R>>>=0,h=h===void 0?this.length:h>>>0,m||(m=0),typeof m=="number")for(p=R;p<h;++p)this[p]=m;else{const j=d.isBuffer(m)?m:d.from(m,c),Q=j.length;if(Q===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(p=0;p<h-R;++p)this[p+R]=j[p%Q]}return this};const Qe={};function Je(m,R,h){Qe[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}function ht(m){let R="",h=m.length;const c=m[0]==="-"?1:0;for(;h>=c+4;h-=3)R=`_${m.slice(h-3,h)}${R}`;return`${m.slice(0,h)}${R}`}function lt(m,R,h,c,p,j){if(m>h||m<R){const Q=typeof R=="bigint"?"n":"";let ge;throw ge=R===0||R===BigInt(0)?`>= 0${Q} and < 2${Q} ** ${8*(j+1)}${Q}`:`>= -(2${Q} ** ${8*(j+1)-1}${Q}) and < 2 ** ${8*(j+1)-1}${Q}`,new Qe.ERR_OUT_OF_RANGE("value",ge,m)}(function(Q,ge,be){T(ge,"offset"),Q[ge]!==void 0&&Q[ge+be]!==void 0||Se(ge,Q.length-(be+1))})(c,p,j)}function T(m,R){if(typeof m!="number")throw new Qe.ERR_INVALID_ARG_TYPE(R,"number",m)}function Se(m,R,h){throw Math.floor(m)!==m?(T(m,h),new Qe.ERR_OUT_OF_RANGE("offset","an integer",m)):R<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,m)}Je("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Je("ERR_INVALID_ARG_TYPE",function(m,R){return`The "${m}" argument must be of type number. Received type ${typeof R}`},TypeError),Je("ERR_OUT_OF_RANGE",function(m,R,h){let c=`The value of "${m}" is out of range.`,p=h;return Number.isInteger(h)&&Math.abs(h)>4294967296?p=ht(String(h)):typeof h=="bigint"&&(p=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(p=ht(p)),p+="n"),c+=` It must be ${R}. Received ${p}`,c},RangeError);const Ae=/[^+/0-9A-Za-z-_]/g;function se(m,R){let h;R=R||1/0;const c=m.length;let p=null;const j=[];for(let Q=0;Q<c;++Q){if(h=m.charCodeAt(Q),h>55295&&h<57344){if(!p){if(h>56319){(R-=3)>-1&&j.push(239,191,189);continue}if(Q+1===c){(R-=3)>-1&&j.push(239,191,189);continue}p=h;continue}if(h<56320){(R-=3)>-1&&j.push(239,191,189),p=h;continue}h=65536+(p-55296<<10|h-56320)}else p&&(R-=3)>-1&&j.push(239,191,189);if(p=null,h<128){if((R-=1)<0)break;j.push(h)}else if(h<2048){if((R-=2)<0)break;j.push(h>>6|192,63&h|128)}else if(h<65536){if((R-=3)<0)break;j.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;j.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return j}function ne(m){return a.toByteArray(function(R){if((R=(R=R.split("=")[0]).trim().replace(Ae,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(m))}function ve(m,R,h,c){let p;for(p=0;p<c&&!(p+h>=R.length||p>=m.length);++p)R[p+h]=m[p];return p}function Re(m,R){return m instanceof R||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===R.name}function Le(m){return m!=m}const we=function(){const m="0123456789abcdef",R=new Array(256);for(let h=0;h<16;++h){const c=16*h;for(let p=0;p<16;++p)R[c+p]=m[h]+m[p]}return R}();function De(m){return typeof BigInt>"u"?qe:m}function qe(){throw new Error("BigInt not supported")}},517:(i,v,l)=>{var a={};i.exports=a,a.themes={};var y=l(947),u=a.styles=l(784),g=Object.defineProperties,I=new RegExp(/[\r\n]+/g);a.supportsColor=l(561).supportsColor,a.enabled===void 0&&(a.enabled=a.supportsColor()!==!1),a.enable=function(){a.enabled=!0},a.disable=function(){a.enabled=!1},a.stripColors=a.strip=function(M){return(""+M).replace(/\x1B\[\d+m/g,"")},a.stylize=function(M,V){if(!a.enabled)return M+"";var G=u[V];return!G&&V in a?a[V](M):G.open+M+G.close};var d=/[|\\{}()[\]^$+*?.]/g;function A(M){var V=function G(){return N.apply(G,arguments)};return V._styles=M,V.__proto__=O,V}var w,C=(w={},u.grey=u.gray,Object.keys(u).forEach(function(M){u[M].closeRe=new RegExp(function(V){if(typeof V!="string")throw new TypeError("Expected a string");return V.replace(d,"\\$&")}(u[M].close),"g"),w[M]={get:function(){return A(this._styles.concat(M))}}}),w),O=g(function(){},C);function N(){var M=Array.prototype.slice.call(arguments),V=M.map(function(ee){return ee!=null&&ee.constructor===String?ee:y.inspect(ee)}).join(" ");if(!a.enabled||!V)return V;for(var G=V.indexOf(`
`)!=-1,ae=this._styles,pe=ae.length;pe--;){var H=u[ae[pe]];V=H.open+V.replace(H.closeRe,H.open)+H.close,G&&(V=V.replace(I,function(ee){return H.close+ee+H.open}))}return V}a.setTheme=function(M){if(typeof M!="string")for(var V in M)(function(G){a[G]=function(ae){if(typeof M[G]=="object"){var pe=ae;for(var H in M[G])pe=a[M[G][H]](pe);return pe}return a[M[G]](ae)}})(V);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var D=function(M,V){var G=V.split("");return(G=G.map(M)).join("")};for(var W in a.trap=l(117),a.zalgo=l(492),a.maps={},a.maps.america=l(260)(a),a.maps.zebra=l(270)(a),a.maps.rainbow=l(920)(a),a.maps.random=l(449)(a),a.maps)(function(M){a[M]=function(V){return D(a.maps[M],V)}})(W);g(a,function(){var M={};return Object.keys(C).forEach(function(V){M[V]={get:function(){return A([V])}}}),M}())},117:i=>{i.exports=function(v,l){var a="";v=(v=v||"Run the trap, drop the bass").split("");var y={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return v.forEach(function(u){u=u.toLowerCase();var g=y[u]||[" "],I=Math.floor(Math.random()*g.length);a+=y[u]!==void 0?y[u][I]:u}),a}},492:i=>{i.exports=function(v,l){v=v||"   he is here   ";var a={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},y=[].concat(a.up,a.down,a.mid);function u(I){return Math.floor(Math.random()*I)}function g(I){var d=!1;return y.filter(function(A){d=A===I}),d}return function(I,d){var A,w,C="";for(w in(d=d||{}).up=d.up===void 0||d.up,d.mid=d.mid===void 0||d.mid,d.down=d.down===void 0||d.down,d.size=d.size!==void 0?d.size:"maxi",I=I.split(""))if(!g(w)){switch(C+=I[w],A={up:0,down:0,mid:0},d.size){case"mini":A.up=u(8),A.mid=u(2),A.down=u(8);break;case"maxi":A.up=u(16)+3,A.mid=u(4)+1,A.down=u(64)+3;break;default:A.up=u(8)+1,A.mid=u(6)/2,A.down=u(8)+1}var O=["up","mid","down"];for(var N in O)for(var D=O[N],W=0;W<=A[D];W++)d[D]&&(C+=a[D][u(a[D].length)])}return C}(v,l)}},883:(i,v,l)=>{var a=l(517);i.exports=function(){var y=function(u,g){String.prototype.__defineGetter__(u,g)};y("strip",function(){return a.strip(this)}),y("stripColors",function(){return a.strip(this)}),y("trap",function(){return a.trap(this)}),y("zalgo",function(){return a.zalgo(this)}),y("zebra",function(){return a.zebra(this)}),y("rainbow",function(){return a.rainbow(this)}),y("random",function(){return a.random(this)}),y("america",function(){return a.america(this)}),Object.keys(a.styles).forEach(function(u){y(u,function(){return a.stylize(this,u)})}),a.setTheme=function(u){typeof u!="string"?function(g){var I=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(g).forEach(function(d){if(I.indexOf(d)!==-1)console.log("warn: ".red+("String.prototype"+d).magenta+" is probably something you don't want to override.  Ignoring style name");else if(typeof g[d]=="string")a[d]=a[g[d]],y(d,function(){return a[d](this)});else{var A=function(w){for(var C=w||this,O=0;O<g[d].length;O++)C=a[g[d][O]](C);return C};y(d,A),a[d]=function(w){return A(w)}}})}(u):console.log("colors.setTheme now only accepts an object, not a string. If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")}}},196:(i,v,l)=>{var a=l(517);i.exports=a,l(883)()},260:i=>{i.exports=function(v){return function(l,a,y){if(l===" ")return l;switch(a%3){case 0:return v.red(l);case 1:return v.white(l);case 2:return v.blue(l)}}}},920:i=>{i.exports=function(v){var l=["red","yellow","green","blue","magenta"];return function(a,y,u){return a===" "?a:v[l[y++%l.length]](a)}}},449:i=>{i.exports=function(v){var l=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(a,y,u){return a===" "?a:v[l[Math.round(Math.random()*(l.length-2))]](a)}}},270:i=>{i.exports=function(v){return function(l,a,y){return a%2==0?l:v.inverse(l)}}},784:i=>{var v={};i.exports=v;var l={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(l).forEach(function(a){var y=l[a],u=v[a]=[];u.open="\x1B["+y[0]+"m",u.close="\x1B["+y[1]+"m"})},340:i=>{i.exports=function(v,l){var a=(l=l||process.argv).indexOf("--"),y=/^-{1,2}/.test(v)?"":"--",u=l.indexOf(y+v);return u!==-1&&(a===-1||u<a)}},561:(i,v,l)=>{var a=l(987),y=l(340),u=r,g=void 0;function I(d){var A=function(w){if(g===!1)return 0;if(y("color=16m")||y("color=full")||y("color=truecolor"))return 3;if(y("color=256"))return 2;if(w&&!w.isTTY&&g!==!0)return 0;var C=g?1:0;if(process.platform==="win32"){var O=a.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(O[0])>=10&&Number(O[2])>=10586?Number(O[2])>=14931?3:2:1}if("CI"in u)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(D){return D in u})||u.CI_NAME==="codeship"?1:C;if("TEAMCITY_VERSION"in u)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(u.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in u){var N=parseInt((u.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(u.TERM_PROGRAM){case"iTerm.app":return N>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(u.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(u.TERM)||"COLORTERM"in u?1:C}(d);return function(w){return w!==0&&{level:w,hasBasic:!0,has256:w>=2,has16m:w>=3}}(A)}y("no-color")||y("no-colors")||y("color=false")?g=!1:(y("color")||y("colors")||y("color=true")||y("color=always"))&&(g=!0),"FORCE_COLOR"in u&&(g=u.FORCE_COLOR.length===0||parseInt(u.FORCE_COLOR,10)!==0),i.exports={supportsColor:I,stdout:I(process.stdout),stderr:I(process.stderr)}},187:i=>{var v,l=typeof Reflect=="object"?Reflect:null,a=l&&typeof l.apply=="function"?l.apply:function(M,V,G){return Function.prototype.apply.call(M,V,G)};v=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:function(M){return Object.getOwnPropertyNames(M)};var y=Number.isNaN||function(M){return M!=M};function u(){u.init.call(this)}i.exports=u,i.exports.once=function(M,V){return new Promise(function(G,ae){function pe(ee){M.removeListener(V,H),ae(ee)}function H(){typeof M.removeListener=="function"&&M.removeListener("error",pe),G([].slice.call(arguments))}W(M,V,H,{once:!0}),V!=="error"&&function(ee,_,S){typeof ee.on=="function"&&W(ee,"error",_,S)}(M,pe,{once:!0})})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var g=10;function I(M){if(typeof M!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof M)}function d(M){return M._maxListeners===void 0?u.defaultMaxListeners:M._maxListeners}function A(M,V,G,ae){var pe,H,ee,_;if(I(G),(H=M._events)===void 0?(H=M._events=Object.create(null),M._eventsCount=0):(H.newListener!==void 0&&(M.emit("newListener",V,G.listener?G.listener:G),H=M._events),ee=H[V]),ee===void 0)ee=H[V]=G,++M._eventsCount;else if(typeof ee=="function"?ee=H[V]=ae?[G,ee]:[ee,G]:ae?ee.unshift(G):ee.push(G),(pe=d(M))>0&&ee.length>pe&&!ee.warned){ee.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+ee.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=M,S.type=V,S.count=ee.length,_=S,console&&console.warn&&console.warn(_)}return M}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(M,V,G){var ae={fired:!1,wrapFn:void 0,target:M,type:V,listener:G},pe=w.bind(ae);return pe.listener=G,ae.wrapFn=pe,pe}function O(M,V,G){var ae=M._events;if(ae===void 0)return[];var pe=ae[V];return pe===void 0?[]:typeof pe=="function"?G?[pe.listener||pe]:[pe]:G?function(H){for(var ee=new Array(H.length),_=0;_<ee.length;++_)ee[_]=H[_].listener||H[_];return ee}(pe):D(pe,pe.length)}function N(M){var V=this._events;if(V!==void 0){var G=V[M];if(typeof G=="function")return 1;if(G!==void 0)return G.length}return 0}function D(M,V){for(var G=new Array(V),ae=0;ae<V;++ae)G[ae]=M[ae];return G}function W(M,V,G,ae){if(typeof M.on=="function")ae.once?M.once(V,G):M.on(V,G);else{if(typeof M.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof M);M.addEventListener(V,function pe(H){ae.once&&M.removeEventListener(V,pe),G(H)})}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(M){if(typeof M!="number"||M<0||y(M))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+M+".");g=M}}),u.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||y(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this},u.prototype.getMaxListeners=function(){return d(this)},u.prototype.emit=function(M){for(var V=[],G=1;G<arguments.length;G++)V.push(arguments[G]);var ae=M==="error",pe=this._events;if(pe!==void 0)ae=ae&&pe.error===void 0;else if(!ae)return!1;if(ae){var H;if(V.length>0&&(H=V[0]),H instanceof Error)throw H;var ee=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw ee.context=H,ee}var _=pe[M];if(_===void 0)return!1;if(typeof _=="function")a(_,this,V);else{var S=_.length,L=D(_,S);for(G=0;G<S;++G)a(L[G],this,V)}return!0},u.prototype.addListener=function(M,V){return A(this,M,V,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(M,V){return A(this,M,V,!0)},u.prototype.once=function(M,V){return I(V),this.on(M,C(this,M,V)),this},u.prototype.prependOnceListener=function(M,V){return I(V),this.prependListener(M,C(this,M,V)),this},u.prototype.removeListener=function(M,V){var G,ae,pe,H,ee;if(I(V),(ae=this._events)===void 0)return this;if((G=ae[M])===void 0)return this;if(G===V||G.listener===V)--this._eventsCount==0?this._events=Object.create(null):(delete ae[M],ae.removeListener&&this.emit("removeListener",M,G.listener||V));else if(typeof G!="function"){for(pe=-1,H=G.length-1;H>=0;H--)if(G[H]===V||G[H].listener===V){ee=G[H].listener,pe=H;break}if(pe<0)return this;pe===0?G.shift():function(_,S){for(;S+1<_.length;S++)_[S]=_[S+1];_.pop()}(G,pe),G.length===1&&(ae[M]=G[0]),ae.removeListener!==void 0&&this.emit("removeListener",M,ee||V)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(M){var V,G,ae;if((G=this._events)===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[M]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete G[M]),this;if(arguments.length===0){var pe,H=Object.keys(G);for(ae=0;ae<H.length;++ae)(pe=H[ae])!=="removeListener"&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(V=G[M])=="function")this.removeListener(M,V);else if(V!==void 0)for(ae=V.length-1;ae>=0;ae--)this.removeListener(M,V[ae]);return this},u.prototype.listeners=function(M){return O(this,M,!0)},u.prototype.rawListeners=function(M){return O(this,M,!1)},u.listenerCount=function(M,V){return typeof M.listenerCount=="function"?M.listenerCount(V):N.call(M,V)},u.prototype.listenerCount=N,u.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},645:(i,v)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */v.read=function(l,a,y,u,g){var I,d,A=8*g-u-1,w=(1<<A)-1,C=w>>1,O=-7,N=y?g-1:0,D=y?-1:1,W=l[a+N];for(N+=D,I=W&(1<<-O)-1,W>>=-O,O+=A;O>0;I=256*I+l[a+N],N+=D,O-=8);for(d=I&(1<<-O)-1,I>>=-O,O+=u;O>0;d=256*d+l[a+N],N+=D,O-=8);if(I===0)I=1-C;else{if(I===w)return d?NaN:1/0*(W?-1:1);d+=Math.pow(2,u),I-=C}return(W?-1:1)*d*Math.pow(2,I-u)},v.write=function(l,a,y,u,g,I){var d,A,w,C=8*I-g-1,O=(1<<C)-1,N=O>>1,D=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=u?0:I-1,M=u?1:-1,V=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(A=isNaN(a)?1:0,d=O):(d=Math.floor(Math.log(a)/Math.LN2),a*(w=Math.pow(2,-d))<1&&(d--,w*=2),(a+=d+N>=1?D/w:D*Math.pow(2,1-N))*w>=2&&(d++,w/=2),d+N>=O?(A=0,d=O):d+N>=1?(A=(a*w-1)*Math.pow(2,g),d+=N):(A=a*Math.pow(2,N-1)*Math.pow(2,g),d=0));g>=8;l[y+W]=255&A,W+=M,A/=256,g-=8);for(d=d<<g|A,C+=g;C>0;l[y+W]=255&d,W+=M,d/=256,C-=8);l[y+W-M]|=128*V}},717:i=>{typeof Object.create=="function"?i.exports=function(v,l){l&&(v.super_=l,v.prototype=Object.create(l.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(v,l){if(l){v.super_=l;var a=function(){};a.prototype=l.prototype,v.prototype=new a,v.prototype.constructor=v}}},620:(i,v)=>{v.parse=function(l,a){l instanceof Buffer&&(l=l.toString("ascii"));for(var y=Buffer.alloc(a||8192),u=0,g=0,I=null,d=null,A=0,w=0;w+11<=l.length;){if(l.charAt(w++)!=":")throw new Error("Line "+(A+1)+" does not start with a colon (:).");A++;var C=parseInt(l.substr(w,2),16);w+=2;var O=parseInt(l.substr(w,4),16);w+=4;var N=parseInt(l.substr(w,2),16);w+=2;var D=l.substr(w,2*C),W=Buffer.from(D,"hex");w+=2*C;var M=parseInt(l.substr(w,2),16);w+=2;for(var V=C+(O>>8)+O+N&255,G=0;G<C;G++)V=V+W[G]&255;if(M!=(V=256-V&255))throw new Error("Invalid checksum on line "+A+": got "+M+", but expected "+V);switch(N){case 0:var ae=g+O;if(ae+C>=y.length){var pe=Buffer.alloc(2*(ae+C));y.copy(pe,0,0,u),y=pe}ae>u&&y.fill(255,u,ae),W.copy(y,ae),u=Math.max(u,ae+C);break;case 1:if(C!=0)throw new Error("Invalid EOF record on line "+A+".");return{data:y.slice(0,u),startSegmentAddress:I,startLinearAddress:d};case 2:if(C!=2||O!=0)throw new Error("Invalid extended segment address record on line "+A+".");g=parseInt(D,16)<<4;break;case 3:if(C!=4||O!=0)throw new Error("Invalid start segment address record on line "+A+".");I=parseInt(D,16);break;case 4:if(C!=2||O!=0)throw new Error("Invalid extended linear address record on line "+A+".");g=parseInt(D,16)<<16;break;case 5:if(C!=4||O!=0)throw new Error("Invalid start linear address record on line "+A+".");d=parseInt(D,16);break;default:throw new Error("Invalid record type ("+N+") on line "+A)}l.charAt(w)=="\r"&&w++,l.charAt(w)==`
`&&w++}throw new Error("Unexpected end of input: missing or invalid EOF record.")}},346:i=>{i.exports=function(v,l){function a(u){return typeof v=="object"&&v!==null}function y(u){return u.name.toLowerCase()}switch(arguments.length===2&&l===void 0?l="undefined":Number.isNaN(l)&&(l="NaN"),l){case"boolean":case"function":case"string":return typeof v===l;case"number":return typeof v===l&&!isNaN(v);case Number:if(isNaN(v))return!1;case String:case Boolean:return typeof v===y(l);case Object:case"object":return a();case"array":return Array.isArray(v);case"regex":case"regexp":return v instanceof RegExp;case"date":return v instanceof Date;case"null":case null:return v===null;case"undefined":return v===void 0;case"NaN":return Number.isNaN(v);case"arguments":return!!a()&&(typeof v.callee=="function"||/arguments/i.test(v.toString()));default:return typeof l=="function"?v instanceof l:v}}},777:(i,v,l)=>{var a=l(190),y=l(5),u=l(269),g=200,I=100,d=25,A=32,w=0,C=83,O=3;function N(D){if(!(this instanceof N))return new N(D);var W=this;W.parser=y(D),W.constants=W.parser.constants,W.serialPort=D}N.prototype.sync=function(D,W){var M=this,V=1,G=Buffer.from([1]);(function ae(){V+=1,M.parser.send(G,function(pe,H){var ee;if(!pe){var _=H.message;_[0]!==u.CMD_SIGN_ON?(pe=new Error("command response was not CMD_SIGN_ON. "+_[0])).code="E_CMD_ERROR":_[1]!==u.STATUS_CMD_OK?(pe=new Error("command status was not ok. "+_[1])).code="E_CMD_STATUS":(_[2],(ee=_.slice(3)+"").length)}if(pe&&V<=D)return ae();W(pe,ee)})})()},N.prototype.reset=function(D,W,M){var V=this;a.series([function(G){V.serialPort.set({rts:!0,dtr:!0},function(ae){ae?G(ae):G()})},function(G){setTimeout(G,D)},function(G){V.serialPort.set({rts:!1,dtr:!1},function(ae){ae?G(ae):G()})},function(G){setTimeout(G,W)}],function(G){M(G)})},N.prototype.verifySignature=function(D,W){this.getSignature(function(M,V){D.equals(V)?W():W(new Error("signature doesnt match. Found: "+V.toString("hex"),M))})},N.prototype.getSignature=function(D){var W=this,M=Buffer.alloc(3);a.series([function(V){var G=Buffer.from([29,4,4,0,48,0,0,0]);W.parser.send(G,function(ae,pe){if(pe&&pe.message&&pe.message.length>=6){var H=pe.message[5];M.writeUInt8(H,0)}V(ae)})},function(V){var G=Buffer.from([29,4,4,0,48,0,1,0]);W.parser.send(G,function(ae,pe){if(pe&&pe.message&&pe.message.length>=6){var H=pe.message[5];M.writeUInt8(H,1)}V(ae)})},function(V){var G=Buffer.from([29,4,4,0,48,0,2,0]);W.parser.send(G,function(ae,pe){if(pe&&pe.message&&pe.message.length>=6){var H=pe.message[5];M.writeUInt8(H,2)}V(ae)})}],function(V){D(V,M)})},N.prototype.enterProgrammingMode=function(D,W){var M=this,V=Array.prototype.slice.call(arguments);typeof(W=V.pop())!="function"&&(W=null),(D=typeof D!="function"&&D||{}).timeout=D.timeout||g,D.stabDelay=D.stabDelay||I,D.cmdexeDelay=D.cmdexeDelay||d,D.synchLoops=D.synchLoops||A,D.byteDelay=D.byteDelay||w,D.pollValue=D.pollValue||C,D.pollIndex=D.pollIndex||O;var G=172,ae=83,pe=0,H=0,ee=Buffer.from([16,D.timeout,D.stabDelay,D.cmdexeDelay,D.synchLoops,D.byteDelay,D.pollValue,D.pollIndex,G,ae,pe,H]);M.parser.send(ee,function(_,S){W(_)})},N.prototype.loadAddress=function(D,W){msb=D>>24&255|128,xsb=D>>16&255,ysb=D>>8&255,lsb=255&D;var M=Buffer.from([6,msb,xsb,ysb,lsb]);this.parser.send(M,function(V,G){W(V)})},N.prototype.loadPage=function(D,W){var M=D.length>>8,V=255&D.length,G=Buffer.from([19,M,V,193,10,64,76,32,0,0]);G=Buffer.concat([G,D]),this.parser.send(G,function(ae,pe){W(ae)})},N.prototype.upload=function(D,W,M){var V,G,ae=0,pe=this;a.whilst(function(){return ae<D.length},function(H){a.series([function(ee){G=ae>>1,ee()},function(ee){pe.loadAddress(G,ee)},function(ee){V=D.slice(ae,D.length>W?ae+W:D.length-1),ee()},function(ee){pe.loadPage(V,ee)},function(ee){ae+=V.length,setTimeout(ee,4)}],function(ee){H(ee)})},function(H){M(H)})},N.prototype.exitProgrammingMode=function(D){var W=Buffer.from([17,1,1]);this.parser.send(W,function(M,V){D(M)})},N.prototype.verify=function(D,W){W()},N.prototype.bootload=function(D,W,M){M()},i.exports=N},269:i=>{i.exports.MESSAGE_START=27,i.exports.TOKEN=14,i.exports.CMD_SIGN_ON=1,i.exports.CMD_SET_PARAMETER=2,i.exports.CMD_GET_PARAMETER=3,i.exports.CMD_SET_DEVICE_PARAMETERS=4,i.exports.CMD_OSCCAL=5,i.exports.CMD_LOAD_ADDRESS=6,i.exports.CMD_FIRMWARE_UPGRADE=7,i.exports.CMD_ENTER_PROGMODE_ISP=16,i.exports.CMD_LEAVE_PROGMODE_ISP=17,i.exports.CMD_CHIP_ERASE_ISP=18,i.exports.CMD_PROGRAM_FLASH_ISP=19,i.exports.CMD_READ_FLASH_ISP=20,i.exports.CMD_PROGRAM_EEPROM_ISP=21,i.exports.CMD_READ_EEPROM_ISP=22,i.exports.CMD_PROGRAM_FUSE_ISP=23,i.exports.CMD_READ_FUSE_ISP=24,i.exports.CMD_PROGRAM_LOCK_ISP=25,i.exports.CMD_READ_LOCK_ISP=26,i.exports.CMD_READ_SIGNATURE_ISP=27,i.exports.CMD_READ_OSCCAL_ISP=28,i.exports.CMD_SPI_MULTI=29,i.exports.CMD_ENTER_PROGMODE_PP=32,i.exports.CMD_LEAVE_PROGMODE_PP=33,i.exports.CMD_CHIP_ERASE_PP=34,i.exports.CMD_PROGRAM_FLASH_PP=35,i.exports.CMD_READ_FLASH_PP=36,i.exports.CMD_PROGRAM_EEPROM_PP=37,i.exports.CMD_READ_EEPROM_PP=38,i.exports.CMD_PROGRAM_FUSE_PP=39,i.exports.CMD_READ_FUSE_PP=40,i.exports.CMD_PROGRAM_LOCK_PP=41,i.exports.CMD_READ_LOCK_PP=42,i.exports.CMD_READ_SIGNATURE_PP=43,i.exports.CMD_READ_OSCCAL_PP=44,i.exports.CMD_SET_CONTROL_STACK=45,i.exports.CMD_ENTER_PROGMODE_HVSP=48,i.exports.CMD_LEAVE_PROGMODE_HVSP=49,i.exports.CMD_CHIP_ERASE_HVSP=50,i.exports.CMD_PROGRAM_FLASH_HVSP=51,i.exports.CMD_READ_FLASH_HVSP=52,i.exports.CMD_PROGRAM_EEPROM_HVSP=53,i.exports.CMD_READ_EEPROM_HVSP=54,i.exports.CMD_PROGRAM_FUSE_HVSP=55,i.exports.CMD_READ_FUSE_HVSP=56,i.exports.CMD_PROGRAM_LOCK_HVSP=57,i.exports.CMD_READ_LOCK_HVSP=58,i.exports.CMD_READ_SIGNATURE_HVSP=59,i.exports.CMD_READ_OSCCAL_HVSP=60,i.exports.STATUS_CMD_OK=0,i.exports.STATUS_CMD_TOUT=128,i.exports.STATUS_RDY_BSY_TOUT=129,i.exports.STATUS_SET_PARAM_MISSING=130,i.exports.STATUS_CMD_FAILED=192,i.exports.STATUS_CKSUM_ERROR=193,i.exports.STATUS_CMD_UNKNOWN=201,i.exports.STATUS_BUILD_NUMBER_LOW=128,i.exports.STATUS_BUILD_NUMBER_HIGH=129,i.exports.STATUS_HW_VER=144,i.exports.STATUS_SW_MAJOR=145,i.exports.STATUS_SW_MINOR=146,i.exports.STATUS_VTARGET=148,i.exports.STATUS_VADJUST=149,i.exports.STATUS_OSC_PSCALE=150,i.exports.STATUS_OSC_CMATCH=151,i.exports.STATUS_SCK_DURATION=152,i.exports.STATUS_TOPCARD_DETECT=154,i.exports.STATUS_STATUS=156,i.exports.STATUS_DATA=157,i.exports.STATUS_RESET_POLARITY=158,i.exports.STATUS_CONTROLLER_INIT=159,i.exports.ANSWER_CKSUM_ERROR=176},5:(i,v,l)=>{var a=l(269),y=l(187).EventEmitter;i.exports=function(u){var g,I,d=(g=new y,I={constants:a,port:u,boundOpen:!1,closed:!1,_inc:-1,_queue:[],_current:!1,states:["Start","GetSequenceNumber","GetMessageSize1","GetMessageSize2","GetToken","GetData","GetChecksum","Done"],state:0,pkt:!1,send:function(C,O){if(this.closed)return setImmediate(function(){var V=new Error("this parser is closed.");V.code="E_CLOSED",O(V)});Buffer.isBuffer(C)||(C=Buffer.from(C));var N=this._commandTimeout(C[0]),D=Buffer.from([0,0]);D.writeUInt16BE(C.length,0);var W=Buffer.concat([Buffer.from([a.MESSAGE_START,this._seq(),D[0],D[1],a.TOKEN]),C]),M=this.checksum(W);this._queue.push({buf:Buffer.concat([W,Buffer.from([M])]),seq:this._inc,cb:O,timeout:N}),this._send()},checksum:function(C){for(var O=0,N=0;N<C.length;++N)O^=C[N];return O},_seq:function(){return this._inc++,this._inc>255&&(this._inc=0),this._inc},_commandTimeout:function(C){if(timeout=1e3,C===a.CMD_SIGN_ON)timeout=200;else for(var O=Object.keys(a),N=0;N<O.length;++N)if(a[O[N]]===C){(O[N].indexOf("CMD_READ")>-1||O[N].indexOf("PROGRAM_FLASH")>-1||O[N].indexOf("EEPROM")>-1)&&(timeout=5e3);break}return timeout},_send:function(){if(this.closed)return!1;if(!this._current&&this._queue.length)if(typeof u.isOpen=="function"?u.isOpen():u.isOpen){var C=this._queue.shift(),O=this._current={timeout:!1,seq:C.seq,cb:C.cb};this._current,this.state=0,N=this,this.port.write(C.buf),this.port.drain(function(){if(O!==N._current)return N.emit("log","current was no longer the current message after drain callback");O.timeout=setTimeout(function(){var D=new Error("stk500 timeout. "+C.timeout+"ms");D.code="E_TIMEOUT",N._resolveCurrent(D)},C.timeout)}),this.emit("rawinput",C.buf)}else{var N=this;this.boundOpen||u.once("open",function(){N._send()})}},_handle:function(C){var O=this._current;if(this.emit("raw",C),!O)return this.emit("log","notice","dropping data","data");for(var N=0;N<C.length;++N)this._stateMachine(C.readUInt8(N))},_pkt:function(){return{seq:-1,len:[],raw:[],message:[],checksum:0}},_stateMachine:function(C){var O=this.pkt;switch(this.state){case 0:if(O=this.pkt=this._pkt(),C!==27)return this.emit("log","parser","Invalid header byte expected 27 got: "+C);++this.state;break;case 1:if(C!==this._current.seq)return this.state=0,this.emit("log","parser","Invalid sequence number. back to start. got: "+C);O.seq=C,++this.state;break;case 2:O.len.push(C),++this.state;break;case 3:O.len.push(C),O.len=O.len[0]<<8|O.len[1],++this.state;break;case 4:if(C!==14)return this.state=0,O.error=new Error("Invalid message token byte. got: "+C),O.error.code="E_PARSE",this.emit("log","parser",this.pkt.error);++this.state,O.len||++this.state;break;case 5:O.len===0&&C===a.STATUS_CKSUM_ERROR&&(O.error=new Error("send checksum error"),O.error.code="E_STATUS_CKSUM"),O.message.push(C),--O.len==0&&++this.state;break;case 6:O.checksum=this.checksum(O.raw),O.checksum=O.checksum===C,O.checksum||(O.error=new Error("recv cecksum didn't match"),O.error.code="E_RECV_CKSUM"),O.message=Buffer.from(O.message),this.emit("data",O),this.state++,O.len=O.message.length,delete O.raw,this._resolveCurrent(!!O.error&&O.error,O)}O.raw&&O.raw.push(C)},_resolveCurrent:function(C,O){var N=this._current;this._current=!1;var D=!1;if((C.code=="E_PARSE"||C.code=="E_TIMEOUT"||this.closed)&&(D=this.queue,this.queue=[]),clearTimeout(N.timeout),N.cb(C,O),D){var W=C;for(this.closed||((W=new Error("a call queued before this call errored leaving the protocol in an upredictable state. timidly refusing to run queued commands.")).code="E_DEPENDENT",W.prev_code=C.code);D.lenth;)D.shift()(C)}this._send()}},Object.keys(I).forEach(function(C){g[C]=I[C]}),g);return u.on("data",A).once("error",w).once("close",w),d;function A(C){d._handle(C)}function w(C){d.closed=!0,u.removeListener("data",A),C||((C=new Error("serial closed.")).code="E_CLOSED"),d._current&&d._resolveCurrent(C),this.emit("closed")}}},190:(i,v)=>{var l;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){var a,y,u={};function g(S){var L=!1;return function(){if(L)throw new Error("Callback was already called.");L=!0,S.apply(a,arguments)}}(a=this)!=null&&(y=a.async),u.noConflict=function(){return a.async=y,u};var I=Object.prototype.toString,d=Array.isArray||function(S){return I.call(S)==="[object Array]"},A=function(S,L){for(var P=0;P<S.length;P+=1)L(S[P],P,S)},w=function(S,L){if(S.map)return S.map(L);var P=[];return A(S,function($,F,Y){P.push(L($,F,Y))}),P},C=function(S){if(Object.keys)return Object.keys(S);var L=[];for(var P in S)S.hasOwnProperty(P)&&L.push(P);return L};typeof process<"u"&&process.nextTick?(u.nextTick=process.nextTick,typeof setImmediate<"u"?u.setImmediate=function(S){setImmediate(S)}:u.setImmediate=u.nextTick):typeof setImmediate=="function"?(u.nextTick=function(S){setImmediate(S)},u.setImmediate=u.nextTick):(u.nextTick=function(S){setTimeout(S,0)},u.setImmediate=u.nextTick),u.each=function(S,L,P){if(P=P||function(){},!S.length)return P();var $=0;function F(Y){Y?(P(Y),P=function(){}):($+=1)>=S.length&&P()}A(S,function(Y){L(Y,g(F))})},u.forEach=u.each,u.eachSeries=function(S,L,P){if(P=P||function(){},!S.length)return P();var $=0,F=function(){L(S[$],function(Y){Y?(P(Y),P=function(){}):($+=1)>=S.length?P():F()})};F()},u.forEachSeries=u.eachSeries,u.eachLimit=function(S,L,P,$){O(L).apply(null,[S,P,$])},u.forEachLimit=u.eachLimit;var O=function(S){return function(L,P,$){if($=$||function(){},!L.length||S<=0)return $();var F=0,Y=0,q=0;(function Z(){if(F>=L.length)return $();for(;q<S&&Y<L.length;)q+=1,P(L[(Y+=1)-1],function(ye){ye?($(ye),$=function(){}):(q-=1,(F+=1)>=L.length?$():Z())})})()}},N=function(S){return function(){var L=Array.prototype.slice.call(arguments);return S.apply(null,[u.each].concat(L))}},D=function(S){return function(){var L=Array.prototype.slice.call(arguments);return S.apply(null,[u.eachSeries].concat(L))}},W=function(S,L,P,$){if(L=w(L,function(Y,q){return{index:q,value:Y}}),$){var F=[];S(L,function(Y,q){P(Y.value,function(Z,ye){F[Y.index]=ye,q(Z)})},function(Y){$(Y,F)})}else S(L,function(Y,q){P(Y.value,function(Z){q(Z)})})};u.map=N(W),u.mapSeries=D(W),u.mapLimit=function(S,L,P,$){return M(L)(S,P,$)};var M=function(S){return function(L,P){return function(){var $=Array.prototype.slice.call(arguments);return P.apply(null,[O(L)].concat($))}}(S,W)};u.reduce=function(S,L,P,$){u.eachSeries(S,function(F,Y){P(L,F,function(q,Z){L=Z,Y(q)})},function(F){$(F,L)})},u.inject=u.reduce,u.foldl=u.reduce,u.reduceRight=function(S,L,P,$){var F=w(S,function(Y){return Y}).reverse();u.reduce(F,L,P,$)},u.foldr=u.reduceRight;var V=function(S,L,P,$){var F=[];S(L=w(L,function(Y,q){return{index:q,value:Y}}),function(Y,q){P(Y.value,function(Z){Z&&F.push(Y),q()})},function(Y){$(w(F.sort(function(q,Z){return q.index-Z.index}),function(q){return q.value}))})};u.filter=N(V),u.filterSeries=D(V),u.select=u.filter,u.selectSeries=u.filterSeries;var G=function(S,L,P,$){var F=[];S(L=w(L,function(Y,q){return{index:q,value:Y}}),function(Y,q){P(Y.value,function(Z){Z||F.push(Y),q()})},function(Y){$(w(F.sort(function(q,Z){return q.index-Z.index}),function(q){return q.value}))})};u.reject=N(G),u.rejectSeries=D(G);var ae=function(S,L,P,$){S(L,function(F,Y){P(F,function(q){q?($(F),$=function(){}):Y()})},function(F){$()})};u.detect=N(ae),u.detectSeries=D(ae),u.some=function(S,L,P){u.each(S,function($,F){L($,function(Y){Y&&(P(!0),P=function(){}),F()})},function($){P(!1)})},u.any=u.some,u.every=function(S,L,P){u.each(S,function($,F){L($,function(Y){Y||(P(!1),P=function(){}),F()})},function($){P(!0)})},u.all=u.every,u.sortBy=function(S,L,P){u.map(S,function($,F){L($,function(Y,q){Y?F(Y):F(null,{value:$,criteria:q})})},function($,F){if($)return P($);P(null,w(F.sort(function(Y,q){var Z=Y.criteria,ye=q.criteria;return Z<ye?-1:Z>ye?1:0}),function(Y){return Y.value}))})},u.auto=function(S,L){L=L||function(){};var P=C(S),$=P.length;if(!$)return L();var F={},Y=[],q=function(ye){Y.unshift(ye)},Z=function(){$--,A(Y.slice(0),function(ye){ye()})};q(function(){if(!$){var ye=L;L=function(){},ye(null,F)}}),A(P,function(ye){var Ee=d(S[ye])?S[ye]:[S[ye]],Te=function(et){var Qe=Array.prototype.slice.call(arguments,1);if(Qe.length<=1&&(Qe=Qe[0]),et){var Je={};A(C(F),function(ht){Je[ht]=F[ht]}),Je[ye]=Qe,L(et,Je),L=function(){}}else F[ye]=Qe,u.setImmediate(Z)},ct=Ee.slice(0,Math.abs(Ee.length-1))||[],ft=function(){return Qe=function(ht,lt){return ht&&F.hasOwnProperty(lt)},Je=!0,((et=ct).reduce?et.reduce(Qe,Je):(A(et,function(ht,lt,T){Je=Qe(Je,ht,lt,T)}),Je))&&!F.hasOwnProperty(ye);var et,Qe,Je};if(ft())Ee[Ee.length-1](Te,F);else{var Ye=function(){ft()&&(function(et){for(var Qe=0;Qe<Y.length;Qe+=1)if(Y[Qe]===et)return void Y.splice(Qe,1)}(Ye),Ee[Ee.length-1](Te,F))};q(Ye)}})},u.retry=function(S,L,P){var $=[];typeof S=="function"&&(P=L,L=S,S=5),S=parseInt(S,10)||5;var F=function(Y,q){for(var Z=function(ye,Ee){return function(Te){ye(function(ct,ft){Te(!ct||Ee,{err:ct,result:ft})},q)}};S;)$.push(Z(L,!(S-=1)));u.series($,function(ye,Ee){Ee=Ee[Ee.length-1],(Y||P)(Ee.err,Ee.result)})};return P?F():F},u.waterfall=function(S,L){if(L=L||function(){},!d(S)){var P=new Error("First argument to waterfall must be an array of functions");return L(P)}if(!S.length)return L();var $=function(F){return function(Y){if(Y)L.apply(null,arguments),L=function(){};else{var q=Array.prototype.slice.call(arguments,1),Z=F.next();Z?q.push($(Z)):q.push(L),u.setImmediate(function(){F.apply(null,q)})}}};$(u.iterator(S))()};var pe=function(S,L,P){if(P=P||function(){},d(L))S.map(L,function(F,Y){F&&F(function(q){var Z=Array.prototype.slice.call(arguments,1);Z.length<=1&&(Z=Z[0]),Y.call(null,q,Z)})},P);else{var $={};S.each(C(L),function(F,Y){L[F](function(q){var Z=Array.prototype.slice.call(arguments,1);Z.length<=1&&(Z=Z[0]),$[F]=Z,Y(q)})},function(F){P(F,$)})}};u.parallel=function(S,L){pe({map:u.map,each:u.each},S,L)},u.parallelLimit=function(S,L,P){pe({map:M(L),each:O(L)},S,P)},u.series=function(S,L){if(L=L||function(){},d(S))u.mapSeries(S,function($,F){$&&$(function(Y){var q=Array.prototype.slice.call(arguments,1);q.length<=1&&(q=q[0]),F.call(null,Y,q)})},L);else{var P={};u.eachSeries(C(S),function($,F){S[$](function(Y){var q=Array.prototype.slice.call(arguments,1);q.length<=1&&(q=q[0]),P[$]=q,F(Y)})},function($){L($,P)})}},u.iterator=function(S){var L=function(P){var $=function(){return S.length&&S[P].apply(null,arguments),$.next()};return $.next=function(){return P<S.length-1?L(P+1):null},$};return L(0)},u.apply=function(S){var L=Array.prototype.slice.call(arguments,1);return function(){return S.apply(null,L.concat(Array.prototype.slice.call(arguments)))}};var H=function(S,L,P,$){var F=[];S(L,function(Y,q){P(Y,function(Z,ye){F=F.concat(ye||[]),q(Z)})},function(Y){$(Y,F)})};u.concat=N(H),u.concatSeries=D(H),u.whilst=function(S,L,P){S()?L(function($){if($)return P($);u.whilst(S,L,P)}):P()},u.doWhilst=function(S,L,P){S(function($){if($)return P($);var F=Array.prototype.slice.call(arguments,1);L.apply(null,F)?u.doWhilst(S,L,P):P()})},u.until=function(S,L,P){S()?P():L(function($){if($)return P($);u.until(S,L,P)})},u.doUntil=function(S,L,P){S(function($){if($)return P($);var F=Array.prototype.slice.call(arguments,1);L.apply(null,F)?P():u.doUntil(S,L,P)})},u.queue=function(S,L){function P(Y,q,Z,ye){if(Y.started||(Y.started=!0),d(q)||(q=[q]),q.length==0)return u.setImmediate(function(){Y.drain&&Y.drain()});A(q,function(Ee){var Te={data:Ee,callback:typeof ye=="function"?ye:null};Z?Y.tasks.unshift(Te):Y.tasks.push(Te),Y.saturated&&Y.tasks.length===Y.concurrency&&Y.saturated(),u.setImmediate(Y.process)})}L===void 0&&(L=1);var $=0,F={tasks:[],concurrency:L,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(Y,q){P(F,Y,!1,q)},kill:function(){F.drain=null,F.tasks=[]},unshift:function(Y,q){P(F,Y,!0,q)},process:function(){if(!F.paused&&$<F.concurrency&&F.tasks.length){var Y=F.tasks.shift();F.empty&&F.tasks.length===0&&F.empty(),$+=1;var q=g(function(){$-=1,Y.callback&&Y.callback.apply(Y,arguments),F.drain&&F.tasks.length+$===0&&F.drain(),F.process()});S(Y.data,q)}},length:function(){return F.tasks.length},running:function(){return $},idle:function(){return F.tasks.length+$===0},pause:function(){F.paused!==!0&&(F.paused=!0)},resume:function(){if(F.paused!==!1){F.paused=!1;for(var Y=1;Y<=F.concurrency;Y++)u.setImmediate(F.process)}}};return F},u.priorityQueue=function(S,L){function P(F,Y){return F.priority-Y.priority}var $=u.queue(S,L);return $.push=function(F,Y,q){(function(Z,ye,Ee,Te){if(Z.started||(Z.started=!0),d(ye)||(ye=[ye]),ye.length==0)return u.setImmediate(function(){Z.drain&&Z.drain()});A(ye,function(ct){var ft={data:ct,priority:Ee,callback:typeof Te=="function"?Te:null};Z.tasks.splice(function(Ye,et,Qe){for(var Je=-1,ht=Ye.length-1;Je<ht;){var lt=Je+(ht-Je+1>>>1);Qe(et,Ye[lt])>=0?Je=lt:ht=lt-1}return Je}(Z.tasks,ft,P)+1,0,ft),Z.saturated&&Z.tasks.length===Z.concurrency&&Z.saturated(),u.setImmediate(Z.process)})})($,F,Y,q)},delete $.unshift,$},u.cargo=function(S,L){var P=!1,$=[],F={tasks:$,payload:L,saturated:null,empty:null,drain:null,drained:!0,push:function(Y,q){d(Y)||(Y=[Y]),A(Y,function(Z){$.push({data:Z,callback:typeof q=="function"?q:null}),F.drained=!1,F.saturated&&$.length===L&&F.saturated()}),u.setImmediate(F.process)},process:function Y(){if(!P){if($.length===0)return F.drain&&!F.drained&&F.drain(),void(F.drained=!0);var q=typeof L=="number"?$.splice(0,L):$.splice(0,$.length),Z=w(q,function(ye){return ye.data});F.empty&&F.empty(),P=!0,S(Z,function(){P=!1;var ye=arguments;A(q,function(Ee){Ee.callback&&Ee.callback.apply(null,ye)}),Y()})}},length:function(){return $.length},running:function(){return P}};return F};var ee=function(S){return function(L){var P=Array.prototype.slice.call(arguments,1);L.apply(null,P.concat([function($){var F=Array.prototype.slice.call(arguments,1);typeof console<"u"&&($?console.error&&console.error($):console[S]&&A(F,function(Y){console[S](Y)}))}]))}};u.log=ee("log"),u.dir=ee("dir"),u.memoize=function(S,L){var P={},$={};L=L||function(Y){return Y};var F=function(){var Y=Array.prototype.slice.call(arguments),q=Y.pop(),Z=L.apply(null,Y);Z in P?u.nextTick(function(){q.apply(null,P[Z])}):Z in $?$[Z].push(q):($[Z]=[q],S.apply(null,Y.concat([function(){P[Z]=arguments;var ye=$[Z];delete $[Z];for(var Ee=0,Te=ye.length;Ee<Te;Ee++)ye[Ee].apply(null,arguments)}])))};return F.memo=P,F.unmemoized=S,F},u.unmemoize=function(S){return function(){return(S.unmemoized||S).apply(null,arguments)}},u.times=function(S,L,P){for(var $=[],F=0;F<S;F++)$.push(F);return u.map($,L,P)},u.timesSeries=function(S,L,P){for(var $=[],F=0;F<S;F++)$.push(F);return u.mapSeries($,L,P)},u.seq=function(){var S=arguments;return function(){var L=this,P=Array.prototype.slice.call(arguments),$=P.pop();u.reduce(S,P,function(F,Y,q){Y.apply(L,F.concat([function(){var Z=arguments[0],ye=Array.prototype.slice.call(arguments,1);q(Z,ye)}]))},function(F,Y){$.apply(L,[F].concat(Y))})}},u.compose=function(){return u.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(S,L){var P=function(){var F=this,Y=Array.prototype.slice.call(arguments),q=Y.pop();return S(L,function(Z,ye){Z.apply(F,Y.concat([ye]))},q)};if(arguments.length>2){var $=Array.prototype.slice.call(arguments,2);return P.apply(this,$)}return P};u.applyEach=N(_),u.applyEachSeries=D(_),u.forever=function(S,L){(function P($){if($){if(L)return L($);throw $}S(P)})()},i.exports?i.exports=u:(l=(function(){return u}).apply(v,[]))===void 0||(i.exports=l)})()},668:(i,v)=>{var l;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){var a,y,u={};function g(S){var L=!1;return function(){if(L)throw new Error("Callback was already called.");L=!0,S.apply(a,arguments)}}(a=this)!=null&&(y=a.async),u.noConflict=function(){return a.async=y,u};var I=Object.prototype.toString,d=Array.isArray||function(S){return I.call(S)==="[object Array]"},A=function(S,L){for(var P=0;P<S.length;P+=1)L(S[P],P,S)},w=function(S,L){if(S.map)return S.map(L);var P=[];return A(S,function($,F,Y){P.push(L($,F,Y))}),P},C=function(S){if(Object.keys)return Object.keys(S);var L=[];for(var P in S)S.hasOwnProperty(P)&&L.push(P);return L};typeof process<"u"&&process.nextTick?(u.nextTick=process.nextTick,typeof setImmediate<"u"?u.setImmediate=function(S){setImmediate(S)}:u.setImmediate=u.nextTick):typeof setImmediate=="function"?(u.nextTick=function(S){setImmediate(S)},u.setImmediate=u.nextTick):(u.nextTick=function(S){setTimeout(S,0)},u.setImmediate=u.nextTick),u.each=function(S,L,P){if(P=P||function(){},!S.length)return P();var $=0;function F(Y){Y?(P(Y),P=function(){}):($+=1)>=S.length&&P()}A(S,function(Y){L(Y,g(F))})},u.forEach=u.each,u.eachSeries=function(S,L,P){if(P=P||function(){},!S.length)return P();var $=0,F=function(){L(S[$],function(Y){Y?(P(Y),P=function(){}):($+=1)>=S.length?P():F()})};F()},u.forEachSeries=u.eachSeries,u.eachLimit=function(S,L,P,$){O(L).apply(null,[S,P,$])},u.forEachLimit=u.eachLimit;var O=function(S){return function(L,P,$){if($=$||function(){},!L.length||S<=0)return $();var F=0,Y=0,q=0;(function Z(){if(F>=L.length)return $();for(;q<S&&Y<L.length;)q+=1,P(L[(Y+=1)-1],function(ye){ye?($(ye),$=function(){}):(q-=1,(F+=1)>=L.length?$():Z())})})()}},N=function(S){return function(){var L=Array.prototype.slice.call(arguments);return S.apply(null,[u.each].concat(L))}},D=function(S){return function(){var L=Array.prototype.slice.call(arguments);return S.apply(null,[u.eachSeries].concat(L))}},W=function(S,L,P,$){if(L=w(L,function(Y,q){return{index:q,value:Y}}),$){var F=[];S(L,function(Y,q){P(Y.value,function(Z,ye){F[Y.index]=ye,q(Z)})},function(Y){$(Y,F)})}else S(L,function(Y,q){P(Y.value,function(Z){q(Z)})})};u.map=N(W),u.mapSeries=D(W),u.mapLimit=function(S,L,P,$){return M(L)(S,P,$)};var M=function(S){return function(L,P){return function(){var $=Array.prototype.slice.call(arguments);return P.apply(null,[O(L)].concat($))}}(S,W)};u.reduce=function(S,L,P,$){u.eachSeries(S,function(F,Y){P(L,F,function(q,Z){L=Z,Y(q)})},function(F){$(F,L)})},u.inject=u.reduce,u.foldl=u.reduce,u.reduceRight=function(S,L,P,$){var F=w(S,function(Y){return Y}).reverse();u.reduce(F,L,P,$)},u.foldr=u.reduceRight;var V=function(S,L,P,$){var F=[];S(L=w(L,function(Y,q){return{index:q,value:Y}}),function(Y,q){P(Y.value,function(Z){Z&&F.push(Y),q()})},function(Y){$(w(F.sort(function(q,Z){return q.index-Z.index}),function(q){return q.value}))})};u.filter=N(V),u.filterSeries=D(V),u.select=u.filter,u.selectSeries=u.filterSeries;var G=function(S,L,P,$){var F=[];S(L=w(L,function(Y,q){return{index:q,value:Y}}),function(Y,q){P(Y.value,function(Z){Z||F.push(Y),q()})},function(Y){$(w(F.sort(function(q,Z){return q.index-Z.index}),function(q){return q.value}))})};u.reject=N(G),u.rejectSeries=D(G);var ae=function(S,L,P,$){S(L,function(F,Y){P(F,function(q){q?($(F),$=function(){}):Y()})},function(F){$()})};u.detect=N(ae),u.detectSeries=D(ae),u.some=function(S,L,P){u.each(S,function($,F){L($,function(Y){Y&&(P(!0),P=function(){}),F()})},function($){P(!1)})},u.any=u.some,u.every=function(S,L,P){u.each(S,function($,F){L($,function(Y){Y||(P(!1),P=function(){}),F()})},function($){P(!0)})},u.all=u.every,u.sortBy=function(S,L,P){u.map(S,function($,F){L($,function(Y,q){Y?F(Y):F(null,{value:$,criteria:q})})},function($,F){if($)return P($);P(null,w(F.sort(function(Y,q){var Z=Y.criteria,ye=q.criteria;return Z<ye?-1:Z>ye?1:0}),function(Y){return Y.value}))})},u.auto=function(S,L){L=L||function(){};var P=C(S),$=P.length;if(!$)return L();var F={},Y=[],q=function(ye){Y.unshift(ye)},Z=function(){$--,A(Y.slice(0),function(ye){ye()})};q(function(){if(!$){var ye=L;L=function(){},ye(null,F)}}),A(P,function(ye){var Ee=d(S[ye])?S[ye]:[S[ye]],Te=function(et){var Qe=Array.prototype.slice.call(arguments,1);if(Qe.length<=1&&(Qe=Qe[0]),et){var Je={};A(C(F),function(ht){Je[ht]=F[ht]}),Je[ye]=Qe,L(et,Je),L=function(){}}else F[ye]=Qe,u.setImmediate(Z)},ct=Ee.slice(0,Math.abs(Ee.length-1))||[],ft=function(){return Qe=function(ht,lt){return ht&&F.hasOwnProperty(lt)},Je=!0,((et=ct).reduce?et.reduce(Qe,Je):(A(et,function(ht,lt,T){Je=Qe(Je,ht,lt,T)}),Je))&&!F.hasOwnProperty(ye);var et,Qe,Je};if(ft())Ee[Ee.length-1](Te,F);else{var Ye=function(){ft()&&(function(et){for(var Qe=0;Qe<Y.length;Qe+=1)if(Y[Qe]===et)return void Y.splice(Qe,1)}(Ye),Ee[Ee.length-1](Te,F))};q(Ye)}})},u.retry=function(S,L,P){var $=[];typeof S=="function"&&(P=L,L=S,S=5),S=parseInt(S,10)||5;var F=function(Y,q){for(var Z=function(ye,Ee){return function(Te){ye(function(ct,ft){Te(!ct||Ee,{err:ct,result:ft})},q)}};S;)$.push(Z(L,!(S-=1)));u.series($,function(ye,Ee){Ee=Ee[Ee.length-1],(Y||P)(Ee.err,Ee.result)})};return P?F():F},u.waterfall=function(S,L){if(L=L||function(){},!d(S)){var P=new Error("First argument to waterfall must be an array of functions");return L(P)}if(!S.length)return L();var $=function(F){return function(Y){if(Y)L.apply(null,arguments),L=function(){};else{var q=Array.prototype.slice.call(arguments,1),Z=F.next();Z?q.push($(Z)):q.push(L),u.setImmediate(function(){F.apply(null,q)})}}};$(u.iterator(S))()};var pe=function(S,L,P){if(P=P||function(){},d(L))S.map(L,function(F,Y){F&&F(function(q){var Z=Array.prototype.slice.call(arguments,1);Z.length<=1&&(Z=Z[0]),Y.call(null,q,Z)})},P);else{var $={};S.each(C(L),function(F,Y){L[F](function(q){var Z=Array.prototype.slice.call(arguments,1);Z.length<=1&&(Z=Z[0]),$[F]=Z,Y(q)})},function(F){P(F,$)})}};u.parallel=function(S,L){pe({map:u.map,each:u.each},S,L)},u.parallelLimit=function(S,L,P){pe({map:M(L),each:O(L)},S,P)},u.series=function(S,L){if(L=L||function(){},d(S))u.mapSeries(S,function($,F){$&&$(function(Y){var q=Array.prototype.slice.call(arguments,1);q.length<=1&&(q=q[0]),F.call(null,Y,q)})},L);else{var P={};u.eachSeries(C(S),function($,F){S[$](function(Y){var q=Array.prototype.slice.call(arguments,1);q.length<=1&&(q=q[0]),P[$]=q,F(Y)})},function($){L($,P)})}},u.iterator=function(S){var L=function(P){var $=function(){return S.length&&S[P].apply(null,arguments),$.next()};return $.next=function(){return P<S.length-1?L(P+1):null},$};return L(0)},u.apply=function(S){var L=Array.prototype.slice.call(arguments,1);return function(){return S.apply(null,L.concat(Array.prototype.slice.call(arguments)))}};var H=function(S,L,P,$){var F=[];S(L,function(Y,q){P(Y,function(Z,ye){F=F.concat(ye||[]),q(Z)})},function(Y){$(Y,F)})};u.concat=N(H),u.concatSeries=D(H),u.whilst=function(S,L,P){S()?L(function($){if($)return P($);u.whilst(S,L,P)}):P()},u.doWhilst=function(S,L,P){S(function($){if($)return P($);var F=Array.prototype.slice.call(arguments,1);L.apply(null,F)?u.doWhilst(S,L,P):P()})},u.until=function(S,L,P){S()?P():L(function($){if($)return P($);u.until(S,L,P)})},u.doUntil=function(S,L,P){S(function($){if($)return P($);var F=Array.prototype.slice.call(arguments,1);L.apply(null,F)?P():u.doUntil(S,L,P)})},u.queue=function(S,L){function P(Y,q,Z,ye){if(Y.started||(Y.started=!0),d(q)||(q=[q]),q.length==0)return u.setImmediate(function(){Y.drain&&Y.drain()});A(q,function(Ee){var Te={data:Ee,callback:typeof ye=="function"?ye:null};Z?Y.tasks.unshift(Te):Y.tasks.push(Te),Y.saturated&&Y.tasks.length===Y.concurrency&&Y.saturated(),u.setImmediate(Y.process)})}L===void 0&&(L=1);var $=0,F={tasks:[],concurrency:L,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(Y,q){P(F,Y,!1,q)},kill:function(){F.drain=null,F.tasks=[]},unshift:function(Y,q){P(F,Y,!0,q)},process:function(){if(!F.paused&&$<F.concurrency&&F.tasks.length){var Y=F.tasks.shift();F.empty&&F.tasks.length===0&&F.empty(),$+=1;var q=g(function(){$-=1,Y.callback&&Y.callback.apply(Y,arguments),F.drain&&F.tasks.length+$===0&&F.drain(),F.process()});S(Y.data,q)}},length:function(){return F.tasks.length},running:function(){return $},idle:function(){return F.tasks.length+$===0},pause:function(){F.paused!==!0&&(F.paused=!0)},resume:function(){if(F.paused!==!1){F.paused=!1;for(var Y=1;Y<=F.concurrency;Y++)u.setImmediate(F.process)}}};return F},u.priorityQueue=function(S,L){function P(F,Y){return F.priority-Y.priority}var $=u.queue(S,L);return $.push=function(F,Y,q){(function(Z,ye,Ee,Te){if(Z.started||(Z.started=!0),d(ye)||(ye=[ye]),ye.length==0)return u.setImmediate(function(){Z.drain&&Z.drain()});A(ye,function(ct){var ft={data:ct,priority:Ee,callback:typeof Te=="function"?Te:null};Z.tasks.splice(function(Ye,et,Qe){for(var Je=-1,ht=Ye.length-1;Je<ht;){var lt=Je+(ht-Je+1>>>1);Qe(et,Ye[lt])>=0?Je=lt:ht=lt-1}return Je}(Z.tasks,ft,P)+1,0,ft),Z.saturated&&Z.tasks.length===Z.concurrency&&Z.saturated(),u.setImmediate(Z.process)})})($,F,Y,q)},delete $.unshift,$},u.cargo=function(S,L){var P=!1,$=[],F={tasks:$,payload:L,saturated:null,empty:null,drain:null,drained:!0,push:function(Y,q){d(Y)||(Y=[Y]),A(Y,function(Z){$.push({data:Z,callback:typeof q=="function"?q:null}),F.drained=!1,F.saturated&&$.length===L&&F.saturated()}),u.setImmediate(F.process)},process:function Y(){if(!P){if($.length===0)return F.drain&&!F.drained&&F.drain(),void(F.drained=!0);var q=typeof L=="number"?$.splice(0,L):$.splice(0,$.length),Z=w(q,function(ye){return ye.data});F.empty&&F.empty(),P=!0,S(Z,function(){P=!1;var ye=arguments;A(q,function(Ee){Ee.callback&&Ee.callback.apply(null,ye)}),Y()})}},length:function(){return $.length},running:function(){return P}};return F};var ee=function(S){return function(L){var P=Array.prototype.slice.call(arguments,1);L.apply(null,P.concat([function($){var F=Array.prototype.slice.call(arguments,1);typeof console<"u"&&($?console.error&&console.error($):console[S]&&A(F,function(Y){console[S](Y)}))}]))}};u.log=ee("log"),u.dir=ee("dir"),u.memoize=function(S,L){var P={},$={};L=L||function(Y){return Y};var F=function(){var Y=Array.prototype.slice.call(arguments),q=Y.pop(),Z=L.apply(null,Y);Z in P?u.nextTick(function(){q.apply(null,P[Z])}):Z in $?$[Z].push(q):($[Z]=[q],S.apply(null,Y.concat([function(){P[Z]=arguments;var ye=$[Z];delete $[Z];for(var Ee=0,Te=ye.length;Ee<Te;Ee++)ye[Ee].apply(null,arguments)}])))};return F.memo=P,F.unmemoized=S,F},u.unmemoize=function(S){return function(){return(S.unmemoized||S).apply(null,arguments)}},u.times=function(S,L,P){for(var $=[],F=0;F<S;F++)$.push(F);return u.map($,L,P)},u.timesSeries=function(S,L,P){for(var $=[],F=0;F<S;F++)$.push(F);return u.mapSeries($,L,P)},u.seq=function(){var S=arguments;return function(){var L=this,P=Array.prototype.slice.call(arguments),$=P.pop();u.reduce(S,P,function(F,Y,q){Y.apply(L,F.concat([function(){var Z=arguments[0],ye=Array.prototype.slice.call(arguments,1);q(Z,ye)}]))},function(F,Y){$.apply(L,[F].concat(Y))})}},u.compose=function(){return u.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(S,L){var P=function(){var F=this,Y=Array.prototype.slice.call(arguments),q=Y.pop();return S(L,function(Z,ye){Z.apply(F,Y.concat([ye]))},q)};if(arguments.length>2){var $=Array.prototype.slice.call(arguments,2);return P.apply(this,$)}return P};u.applyEach=N(_),u.applyEachSeries=D(_),u.forever=function(S,L){(function P($){if($){if(L)return L($);throw $}S(P)})()},i.exports?i.exports=u:(l=(function(){return u}).apply(v,[]))===void 0||(i.exports=l)})()},987:()=>{},947:()=>{},479:(i,v,l)=>{var a=l(668),y=l(204),u=l(177),g=function(I){this.opts=I||{},this.quiet=this.opts.quiet||!1,this.quiet?this.log=function(){}:typeof window=="object"?this.log=console.log.bind(window):this.log=console.log};g.prototype.sync=function(I,d,A,w){this.log("sync");var C=this,O=1,N={cmd:[y.Cmnd_STK_GET_SYNC],responseData:y.OK_RESPONSE,timeout:A};(function D(){O+=1,u(I,N,function(W,M){if(W&&O<=d)return W&&C.log(W),C.log("failed attempt again",O),D();C.log("sync complete",W,M,O),w(W,M)})})()},g.prototype.verifySignature=function(I,d,A,w){this.log("verify signature");var C=this;match=Buffer.concat([Buffer.from([y.Resp_STK_INSYNC]),d,Buffer.from([y.Resp_STK_OK])]);var O={cmd:[y.Cmnd_STK_READ_SIGN],responseLength:match.length,timeout:A};u(I,O,function(N,D){D?C.log("confirm signature",N,D,D.toString("hex")):C.log("confirm signature",N,"no data"),w(N,D)})},g.prototype.getSignature=function(I,d,A){this.log("get signature");var w={cmd:[y.Cmnd_STK_READ_SIGN],responseLength:5,timeout:d};u(I,w,function(C,O){this.log("getSignature",C,O),A(C,O)})},g.prototype.setOptions=function(I,d,A,w){this.log("set device");var C=this,O={cmd:[y.Cmnd_STK_SET_DEVICE,d.devicecode||0,d.revision||0,d.progtype||0,d.parmode||0,d.polling||0,d.selftimed||0,d.lockbytes||0,d.fusebytes||0,d.flashpollval1||0,d.flashpollval2||0,d.eeprompollval1||0,d.eeprompollval2||0,d.pagesizehigh||0,d.pagesizelow||0,d.eepromsizehigh||0,d.eepromsizelow||0,d.flashsize4||0,d.flashsize3||0,d.flashsize2||0,d.flashsize1||0],responseData:y.OK_RESPONSE,timeout:A};u(I,O,function(N,D){if(C.log("setOptions",N,D),N)return w(N);w()})},g.prototype.enterProgrammingMode=function(I,d,A){this.log("send enter programming mode");var w=this,C={cmd:[y.Cmnd_STK_ENTER_PROGMODE],responseData:y.OK_RESPONSE,timeout:d};u(I,C,function(O,N){w.log("sent enter programming mode",O,N),A(O,N)})},g.prototype.loadAddress=function(I,d,A,w){this.log("load address");var C=this,O=255&d,N=d>>8&255,D={cmd:[y.Cmnd_STK_LOAD_ADDRESS,O,N],responseData:y.OK_RESPONSE,timeout:A};u(I,D,function(W,M){C.log("loaded address",W,M),w(W,M)})},g.prototype.loadPage=function(I,d,A,w){this.log("load page");var C=this,O=255&d.length,N=d.length>>8,D={cmd:Buffer.concat([Buffer.from([y.Cmnd_STK_PROG_PAGE,N,O,70]),d,Buffer.from([y.Sync_CRC_EOP])]),responseData:y.OK_RESPONSE,timeout:A};u(I,D,function(W,M){C.log("loaded page",W,M),w(W,M)})},g.prototype.upload=function(){var I,d,A,w,C,O;this.log("program"),arguments.length===6?(I=arguments[0],d=arguments[1],A=arguments[2],w=arguments[3],C=arguments[4],O=arguments[5]):(I=arguments[0],d=arguments[1],A=arguments[2],w=arguments[3],C=void 0,O=arguments[4]);var N,D,W=0,M=this;a.whilst(function(){return W<d.length},function(V){M.log("program page"),a.series([function(G){D=C?W:W>>1,G()},function(G){M.loadAddress(I,D,w,G)},function(G){N=d.slice(W,d.length>A?W+A:d.length-1),G()},function(G){M.loadPage(I,N,w,G)},function(G){M.log("programmed page"),W+=N.length,setTimeout(G,4)}],function(G){M.log("page done"),V(G)})},function(V){M.log("upload done"),O(V)})},g.prototype.exitProgrammingMode=function(I,d,A){this.log("send leave programming mode");var w=this,C={cmd:[y.Cmnd_STK_LEAVE_PROGMODE],responseData:y.OK_RESPONSE,timeout:d};u(I,C,function(O,N){w.log("sent leave programming mode",O,N),A(O,N)})},g.prototype.verify=function(I,d,A,w,C){this.log("verify");var O,N,D=0,W=this;a.whilst(function(){return D<d.length},function(M){W.log("verify page"),a.series([function(V){N=D>>1,V()},function(V){W.loadAddress(I,N,w,V)},function(V){O=d.slice(D,d.length>A?D+A:d.length-1),V()},function(V){W.verifyPage(I,O,A,w,V)},function(V){W.log("verified page"),D+=O.length,setTimeout(V,4)}],function(V){W.log("verify done"),M(V)})},function(M){W.log("verify done"),C(M)})},g.prototype.verifyPage=function(I,d,A,w,C){this.log("verify page");var O=this;match=Buffer.concat([Buffer.from([y.Resp_STK_INSYNC]),d,Buffer.from([y.Resp_STK_OK])]);var N=d.length>=A?A:d.length,D={cmd:[y.Cmnd_STK_READ_PAGE,N>>8&255,255&N,70],responseLength:match.length,timeout:w};u(I,D,function(W,M){O.log("confirm page",W,M,M.toString("hex")),C(W,M)})},g.prototype.bootload=function(I,d,A,w){var C={pagesizehigh:A.pagesizehigh<<8&255,pagesizelow:255&A.pagesizelow};a.series([this.sync.bind(this,I,3,A.timeout),this.sync.bind(this,I,3,A.timeout),this.sync.bind(this,I,3,A.timeout),this.verifySignature.bind(this,I,A.signature,A.timeout),this.setOptions.bind(this,I,C,A.timeout),this.enterProgrammingMode.bind(this,I,A.timeout),this.upload.bind(this,I,d,A.pageSize,A.timeout,A.dontShiftPageAddr),this.verify.bind(this,I,d,A.pageSize,A.timeout),this.exitProgrammingMode.bind(this,I,A.timeout)],function(O){return w(O)})},i.exports=g},950:(i,v,l)=>{var a=[l(204).Resp_STK_INSYNC];i.exports=function(y,u,g,I){var d=Buffer.alloc(0),A=!1,w=null,C=function(N){for(var D=0;!A&&D<N.length;){var W=N[D];a.indexOf(W)!==-1&&(N=N.slice(D,N.length-D),A=!0),D++}if(A&&(d=Buffer.concat([d,N])),d.length>g)return O(new Error("buffer overflow "+d.length+" > "+g));d.length==g&&O()},O=function(N){w&&clearTimeout(w),y.removeListener("data",C),I(N,d)};u&&u>0&&(w=setTimeout(function(){w=null,O(new Error("receiveData timeout after "+u+"ms"))},u)),y.on("data",C)}},177:(i,v,l)=>{var a=l(950),y=l(204);i.exports=function(u,g,I){var d,A=g.timeout||0,w=(y.Resp_STK_INSYNC,y.Resp_STK_NOSYNC,null),C=0;g.responseData&&g.responseData.length>0&&(w=g.responseData),w&&(C=w.length),g.responseLength&&(C=g.responseLength);var O=g.cmd;O instanceof Array&&(O=Buffer.from(O.concat(y.Sync_CRC_EOP))),u.write(O,function(N){if(N)return d=new Error("Sending "+O.toString("hex")+": "+N.message),I(d);a(u,A,C,function(D,W){return D?(d=new Error("Sending "+O.toString("hex")+": "+D.message),I(d)):w&&!W.equals(w)?(d=new Error(O+" response mismatch: "+W.toString("hex")+", "+w.toString("hex")),I(d)):void I(null,W)})})}},204:i=>{i.exports={Cmnd_STK_GET_SYNC:48,Cmnd_STK_SET_DEVICE:66,Cmnd_STK_ENTER_PROGMODE:80,Cmnd_STK_LOAD_ADDRESS:85,Cmnd_STK_PROG_PAGE:100,Cmnd_STK_LEAVE_PROGMODE:81,Cmnd_STK_READ_SIGN:117,Sync_CRC_EOP:32,Resp_STK_OK:16,Resp_STK_INSYNC:20,Resp_STK_NOSYNC:21,Cmnd_STK_READ_PAGE:116,OK_RESPONSE:Buffer.from([20,16])}}},o={};function s(i){var v=o[i];if(v!==void 0)return v.exports;var l=o[i]={id:i,loaded:!1,exports:{}};return n[i].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.d=(i,v)=>{for(var l in v)s.o(v,l)&&!s.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:v[l]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(i,v)=>Object.prototype.hasOwnProperty.call(i,v),s.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.nmd=i=>(i.paths=[],i.children||(i.children=[]),i);var f={};return(()=>{s.r(f),s.d(f,{UNKNOWN_BOARD_FQBN:()=>I,UNKNOWN_BOARD_NAME:()=>d,Uploader:()=>Bn});class i{constructor(){this.logger=window.console}debug(b,E){this.log("debug",b,E)}info(b,E){this.log("info",b,E)}warn(b,E){this.log("warn",b,E)}error(b,E){this.log("error",b,E)}log(b,E,U){this.logger[b](E,U?Object.assign({},U):"")}}const v={"arduino:avr:uno":{name:"Arduino Uno",flasher:"avr",avr_name:"uno",ids:[{vid:9025,pid:67},{vid:9025,pid:1},{vid:10755,pid:67},{vid:9025,pid:579}]},"arduino:megaavr:uno2018":{name:"Arduino Uno WiFi Rev2",flasher:"avr",ids:[{vid:1003,pid:8517}],avr_name:"unowifirev2"},"arduino:samd:mkrwifi1010":{name:"Arduino MKR WiFi 1010",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:84},{vid:9025,pid:32852,bootloader:!0}],use_1200bps_touch:!0},"arduino:mbed_nano:nanorp2040connect":{name:"Arduino Nano RP2040 Connect",flasher:"rp",iot_enabled:!1,supports_uf2:!0,ids:[{vid:9025,pid:94},{vid:9025,pid:32862},{vid:9025,pid:350},{vid:9025,pid:606}],use_1200bps_touch:!0},"arduino:samd:nano_33_iot":{name:"Arduino NANO 33 IoT",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:87},{vid:9025,pid:32855,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:minima":{name:"Arduino Uno R4 Minima",flasher:"dfu",iot_enabled:!1,ids:[{vid:9025,pid:105},{vid:9025,pid:873,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:unor4wifi":{name:"Arduino Uno R4 WiFi",flasher:"sam-ba-renesas",iot_enabled:!0,ids:[{vid:9025,pid:4098},{vid:9025,pid:109,bootloader:!0}]}},l=`
  .confirm-dialog {
    max-width: 45em;
    padding: 2rem;
    width: 60vw;
    box-shadow: 2px 2px 8px #888888;
    position: absolute;
    float: left;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .confirm-dialog::backdrop {
    background-color: rgba(0, 0, 0, 0.3);
  }

  .confirm-dialog .header-image {
    margin: 0 auto;
    display: block;
    width: 100%;
  }

  .additional-warning-container {
    padding: 20px;
    background-color: #fbedb7;
    border-radius: 3px;
    margin-top: 30px;
    margin-left: 16px;
  }

  .additional-warning-container::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' id='warning-mono'%3E%3Cpath d='M8.897 2.556c1.72-3.222 4.486-3.222 6.186 0l8.221 15.474c1.72 3.222.139 5.83-3.498 5.83H4.194c-3.637 0-5.218-2.608-3.498-5.83zm1.443 2.648v10.632h3.537V5.204zm0 12.747v3.538h3.537V17.95z' fill='%23374146'%3E%3C/path%3E%3C/svg%3E");
    margin-left: -36px;
    margin-top: -36px;
    background-color: #fbedb7;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    padding: 12px;
    display: block;
  }

  .additional-warning {
    font-size: 14px;
  }
  `;class a{constructor(){this.dialog=void 0,this.positiveButton=void 0,this.negativeButton=void 0,this.parent=void 0,this.titleText="Confirm",this.questionText="Are you sure?",this.positiveButtonText="Yes",this.negativeButtonText="No",this.css=l,this.headerImageSrc=void 0,this.additionalWarning=void 0,this.dialog=void 0,this.positiveButton=void 0,this.negativeButton=void 0,this.parent=document.body}static From(b){const E=new a;return E.customize(b),E.createDialog(),E.createStyle(),E.appendDialog(),E}confirm(){return new Promise((b,E)=>{var U,K,le;(!this.dialog||!this.positiveButton)&&E(new Error("Something went wrong upon dialog creation")),(U=this.dialog)===null||U===void 0||U.showModal(),(K=this.positiveButton)===null||K===void 0||K.addEventListener("click",()=>{b(!0),this.destroy()}),(le=this.negativeButton)===null||le===void 0||le.addEventListener("click",()=>{b(!1),this.destroy()})})}customize(b){b&&(b.css&&(this.css=b.css),b.titleText&&(this.titleText=b.titleText),b.negativeButtonText&&(this.negativeButtonText=b.negativeButtonText),b.positiveButtonText&&(this.positiveButtonText=b.positiveButtonText),b.questionText&&(this.questionText=b.questionText),b.headerImageSrc&&(this.headerImageSrc=b.headerImageSrc),b.additionalWarning&&(this.additionalWarning=b.additionalWarning))}createStyle(){const b=document.createElement("style");b.innerHTML=`${l} ${this.css}`,document.getElementsByTagName("head")[0].appendChild(b)}createDialog(){if(this.dialog=document.createElement("dialog"),this.dialog.classList.add("confirm-dialog"),this.headerImageSrc){const K=document.createElement("div");K.classList.add("header-image-container");const le=document.createElement("img");le.classList.add("header-image"),le.src=this.headerImageSrc,K.appendChild(le),this.dialog.appendChild(K)}const b=document.createElement("div");b.classList.add("title"),b.innerHTML=this.titleText,this.dialog.appendChild(b);const E=document.createElement("div");if(E.classList.add("question"),E.innerHTML=this.questionText,this.dialog.appendChild(E),this.additionalWarning){const K=document.createElement("div");K.classList.add("additional-warning-container");const le=document.createElement("div");le.classList.add("additional-warning"),le.innerHTML=this.additionalWarning,K.appendChild(le),this.dialog.appendChild(K)}const U=document.createElement("div");U.classList.add("button-group"),this.dialog.appendChild(U),this.positiveButton=document.createElement("button"),this.positiveButton.type="button",this.positiveButton.classList.add("true-button"),this.positiveButton.textContent=this.positiveButtonText,U.appendChild(this.positiveButton)}appendDialog(){var b;(b=this.parent)===null||b===void 0||b.appendChild(this.dialog)}destroy(){var b;(b=this.parent)===null||b===void 0||b.removeChild(this.dialog),delete this.dialog}}function y(B){if(!B||B<0)throw new Error("Provided parameter should be a positive integer");return`0x${Math.round(B).toString(16).padStart(4,"0").toUpperCase()}`}function u({vid:B,pid:b}){if(typeof B!="number"||typeof b!="number")throw new Error("VendorID (vid) and ProductID (pid) must be integer");return`${y(B)}/${y(b)}`}var g=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};const I="unknown",d="Unknown";function A({vid:B,pid:b}){var E;return g(this,void 0,void 0,function*(){return(E=yield navigator.serial.getPorts())===null||E===void 0?void 0:E.find(U=>{const{usbVendorId:K,usbProductId:le}=U.getInfo();return le===b&&K===B})})}function w({vid:B,pid:b}){var E;return g(this,void 0,void 0,function*(){return(E=yield navigator.usb.getDevices())===null||E===void 0?void 0:E.find(U=>{const{productId:K,vendorId:le}=U;return K===b&&le===B})})}function C(B){let b=v[B];if(!b){const E=B.indexOf(":mode=");E!==-1&&(b=v[B.substring(0,E)])}return b}function O(B){return g(this,void 0,void 0,function*(){const b=C(B);for(let E=0;E<b.ids.length;E+=1){const{vid:U,pid:K}=b.ids[E],le=yield w({vid:U,pid:K});if(le)return le}})}function N(B){return g(this,void 0,void 0,function*(){if(yield a.From(B).confirm())return yield navigator.serial.requestPort();throw new Error("Permission denied")})}function D(B){return Uint8Array.from(Buffer.from(B,"base64"))}var W=[{name:"uno",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x0043","0x7523","0x0001","0xea60","0x6015"],productPage:"https://store.arduino.cc/arduino-uno-rev3",protocol:"stk500v1"},{name:"unowifirev2",baud:57600,signature:Buffer.from([30,150,81]),pageSize:128,numPages:256,timeout:400,productId:["0x2145"],productPage:"https://store.arduino.cc/arduino-uno-wifi-rev2",protocol:"stk500v1",dontShiftPageAddr:!0},{name:"micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0037","0x8037","0x0036","0x0237"],productPage:"https://store.arduino.cc/arduino-micro",protocol:"avr109"},{name:"imuduino",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8037","0x8036"],productPage:"https://www.kickstarter.com/projects/1265095814/imuduino-wireless-3d-motion-html-js-apps-arduino-p?lang=de",protocol:"avr109"},{name:"leonardo",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://store.arduino.cc/leonardo",protocol:"avr109"},{name:"arduboy",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://arduboy.com/",protocol:"avr109"},{name:"feather",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x800c","0x000c"],productPage:"https://www.adafruit.com/feather",protocol:"avr109"},{name:"little-bits",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036"],productPage:"https://littlebits.com/collections/bits-and-accessories/products/arduino-bit",protocol:"avr109"},{name:"blend-micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x2404"],productPage:"https://redbear.cc/product/retired/blend-micro.html",protocol:"avr109"},{name:"nano",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"https://web.archive.org/web/20150813095112/https://www.arduino.cc/en/Main/ArduinoBoardNano",protocol:"stk500v1"},{name:"nano (new bootloader)",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"https://store.arduino.cc/arduino-nano",protocol:"stk500v1"},{name:"duemilanove168",baud:19200,signature:Buffer.from([30,148,6]),pageSize:128,numPages:128,timeout:400,productId:["0x6001"],productPage:"https://www.arduino.cc/en/Main/arduinoBoardDuemilanove",protocol:"stk500v1"},{name:"duemilanove328",baud:57600,signature:Buffer.from([30,149,20]),pageSize:128,numPages:256,timeout:400,productId:["0x6001"],productPage:"https://www.arduino.cc/en/Main/arduinoBoardDuemilanove",protocol:"stk500v1"},{name:"tinyduino",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6015"],productPage:"https://tinycircuits.com/pages/tinyduino-overview",protocol:"stk500v1",aliases:["tinduino"]},{name:"mega",baud:115200,signature:Buffer.from([30,152,1]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x0042","0x6001","0x0010","0x7523"],productPage:"https://store.arduino.cc/mega-2560-r3",protocol:"stk500v2"},{name:"adk",baud:115200,signature:Buffer.from([30,152,1]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x0044","0x6001","0x003F"],productPage:"https://store.arduino.cc/arduino-mega-adk-rev3",protocol:"stk500v2"},{name:"sf-pro-micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x9206","0x9205","0x0036"],productPage:"https://www.sparkfun.com/products/12640",protocol:"avr109"},{name:"pro-mini",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productPage:"https://store.arduino.cc/arduino-pro-mini",protocol:"stk500v1"},{name:"qduino",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x516d","0x514d"],productPage:"https://www.sparkfun.com/products/13614",protocol:"avr109"},{name:"pinoccio",baud:115200,signature:Buffer.from([30,168,2]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x6051"],productPage:"https://www.mouser.de/new/crowd-supply/crowd-supply-pinoccio-microcontroller/",protocol:"stk500v2"},{name:"lilypad-usb",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x9207","0x9208","0x1B4F"],productPage:"https://www.sparkfun.com/products/12049",protocol:"avr109"},{name:"yun",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0041","0x8041"],productPage:"https://store.arduino.cc/arduino-yun",protocol:"avr109"},{name:"esplora",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x003C","0x803C"],productPage:"https://store.arduino.cc/arduino-esplora",protocol:"avr109"},{name:"circuit-playground-classic",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0011","0x8011"],productPage:"https://www.adafruit.com/product/3000",protocol:"avr109"},{name:"zumjunior",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0xEA60"],productPage:"https://store-de.bq.com/de/zum-kit-junior",protocol:"stk500v1"},{name:"zumcore2",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0xEA60"],productPage:"https://www.bq.com/de/zum-core-2-0",protocol:"stk500v1"},{name:"bqZum",baud:19200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"http://diwo.bq.com/zum-bt-328-especificaciones-tecnicas/",protocol:"stk500v1"},{name:"xprov4",baud:115200,signature:Buffer.from([30,149,22]),pageSize:128,numPages:256,timeout:400,productId:["0x0043","0x7523","0x0001","0xea60"],productPage:"http://www.spark-concepts.com/cnc-xpro-v4-controller/",protocol:"stk500v1"}];const M=function(){for(var B={},b=0;b<W.length;b++){var E=W[b];B[E.name]=E;var U=E.aliases;if(Array.isArray(U))for(var K=0;K<U.length;K++)B[U[K]]=E}return B}();var V=s(764),G=s(187);function ae(B){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ae(B)}function pe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pe=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,U=typeof Symbol=="function"?Symbol:{},K=U.iterator||"@@iterator",le=U.asyncIterator||"@@asyncIterator",he=U.toStringTag||"@@toStringTag";function oe(k,x,re){return Object.defineProperty(k,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{oe({},"")}catch{oe=function(x,re,de){return x[re]=de}}function fe(k,x,re,de){var J=x&&x.prototype instanceof Pe?x:Pe,Be=Object.create(J.prototype),Me=new Ot(de||[]);return Be._invoke=function(Ve,We,_e){var $e="suspendedStart";return function(Xe,Pt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Pt;return zt()}for(_e.method=Xe,_e.arg=Pt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ce)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(Ve,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ce)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(k,re,Me),Be}function ie(k,x,re){try{return{type:"normal",arg:k.call(x,re)}}catch(de){return{type:"throw",arg:de}}}B.wrap=fe;var ce={};function Pe(){}function Fe(){}function Ce(){}var Ue={};oe(Ue,K,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,K)&&(Ue=Ge);var Ze=Ce.prototype=Pe.prototype=Object.create(Ue);function Ct(k){["next","throw","return"].forEach(function(x){oe(k,x,function(re){return this._invoke(x,re)})})}function ot(k,x){function re(J,Be,Me,Ve){var We=ie(k[J],k,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&ae($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,Ve)},function(Xe){re("throw",Xe,Me,Ve)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,Ve)})}Ve(We.arg)}var de;this._invoke=function(J,Be){function Me(){return new x(function(Ve,We){re(J,Be,Ve,We)})}return de=de?de.then(Me,Me):Me()}}function ut(k,x){var re=k.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(k.iterator.return&&(x.method="return",x.arg=void 0,ut(k,x),x.method==="throw"))return ce;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ce}var de=ie(re,k.iterator,x.arg);if(de.type==="throw")return x.method="throw",x.arg=de.arg,x.delegate=null,ce;var J=de.arg;return J?J.done?(x[k.resultName]=J.value,x.next=k.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ce):J:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ce)}function Zt(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function Tt(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function Ot(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Zt,this),this.reset(!0)}function At(k){if(k){var x=k[K];if(x)return x.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var re=-1,de=function J(){for(;++re<k.length;)if(E.call(k,re))return J.value=k[re],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return Fe.prototype=Ce,oe(Ze,"constructor",Ce),oe(Ce,"constructor",Fe),Fe.displayName=oe(Ce,he,"GeneratorFunction"),B.isGeneratorFunction=function(k){var x=typeof k=="function"&&k.constructor;return!!x&&(x===Fe||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Ce):(k.__proto__=Ce,oe(k,he,"GeneratorFunction")),k.prototype=Object.create(Ze),k},B.awrap=function(k){return{__await:k}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),B.AsyncIterator=ot,B.async=function(k,x,re,de,J){J===void 0&&(J=Promise);var Be=new ot(fe(k,x,re,de),J);return B.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ze),oe(Ze,he,"Generator"),oe(Ze,K,function(){return this}),oe(Ze,"toString",function(){return"[object Generator]"}),B.keys=function(k){var x=[];for(var re in k)x.push(re);return x.reverse(),function de(){for(;x.length;){var J=x.pop();if(J in k)return de.value=J,de.done=!1,de}return de.done=!0,de}},B.values=At,Ot.prototype={constructor:Ot,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!k)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function re(We,_e){return Be.type="throw",Be.arg=k,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],Be=J.completion;if(J.tryLoc==="root")return re("end");if(J.tryLoc<=this.prev){var Me=E.call(J,"catchLoc"),Ve=E.call(J,"finallyLoc");if(Me&&Ve){if(this.prev<J.catchLoc)return re(J.catchLoc,!0);if(this.prev<J.finallyLoc)return re(J.finallyLoc)}else if(Me){if(this.prev<J.catchLoc)return re(J.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return re(J.finallyLoc)}}}},abrupt:function(k,x){for(var re=this.tryEntries.length-1;re>=0;--re){var de=this.tryEntries[re];if(de.tryLoc<=this.prev&&E.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=x&&x<=J.finallyLoc&&(J=null);var Be=J?J.completion:{};return Be.type=k,Be.arg=x,J?(this.method="next",this.next=J.finallyLoc,ce):this.complete(Be)},complete:function(k,x){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&x&&(this.next=x),ce},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===k)return this.complete(re.completion,re.afterLoc),Tt(re),ce}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===k){var de=re.completion;if(de.type==="throw"){var J=de.arg;Tt(re)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,re){return this.delegate={iterator:At(k),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ce}},B}function H(B,b,E,U,K,le,he){try{var oe=B[le](he),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(U,K)}function ee(B){return function(){var b=this,E=arguments;return new Promise(function(U,K){var le=B.apply(b,E);function he(fe){H(le,U,K,he,oe,"next",fe)}function oe(fe){H(le,U,K,he,oe,"throw",fe)}he(void 0)})}}function _(B,b){for(var E=0;E<b.length;E++){var U=b[E];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}function S(B,b){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,U){return E.__proto__=U,E},S(B,b)}function L(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,U=$(B);if(b){var K=$(this).constructor;E=Reflect.construct(U,arguments,K)}else E=U.apply(this,arguments);return P(this,E)}}function P(B,b){if(b&&(ae(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function $(B){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},$(B)}const F=function(B){(function(Fe,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function");Fe.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:Fe,writable:!0,configurable:!0}}),Object.defineProperty(Fe,"prototype",{writable:!1}),Ce&&S(Fe,Ce)})(Pe,B);var b,E,U,K,le,he,oe,fe,ie,ce=L(Pe);function Pe(Fe,Ce){var Ue;return function(xe,Ge){if(!(xe instanceof Ge))throw new TypeError("Cannot call a class as a function")}(this,Pe),(Ue=ce.call(this,Ce)).port=Fe||null,Ue.options=Ce||{},Ue.browser=!0,Ue.path=Ue.options.path,Ue.isOpen=!1,Ue.writer=null,Ue.reader=null,Ue.isUpdating=!1,Ue.pausePromise=Promise.resolve(),Ue.closeReadPromise=null,Ue.pauseResolve=function(xe){},Ue.closeReadResolve=function(xe){},Ue.baudRate=Ue.options.baudRate,Ue.requestOptions=Ue.options.requestOptions||{},Ue.vid=null,Ue.pid=null,Ue.encoder=new TextEncoder,Ue.className="USBSerialPort",Ue.options.autoOpen&&Ue.open(),Ue}return b=Pe,E=[{key:"_getPort",value:(ie=ee(pe().mark(function Fe(){return pe().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!this.port||this.options.forceRequest){Ce.next=2;break}return Ce.abrupt("return",this.port);case 2:return Ce.abrupt("return",window.navigator.serial.requestPort(this.requestOptions));case 3:case"end":return Ce.stop()}},Fe,this)})),function(){return ie.apply(this,arguments)})},{key:"open",value:function(Fe){var Ce=this;return new Promise(function(Ue,xe){Ce._getPort().then(function(Ge){if(Ce.port=Ge,Ce.vid=Ge.getInfo().usbVendorId,Ce.pid=Ge.getInfo().usbProductId,!Ce.isOpen)return Ce.port.open({baudRate:Ce.baudRate||57600})}).then(function(){Ce.writer=Ce.port.writable.getWriter()}).then(function(){Ce.reader=Ce.port.readable.getReader()}).then(ee(pe().mark(function Ge(){var Ze,Ct;return pe().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:Ce.isUpdating||Ce.emit("open"),Ce.isOpen=!0,Fe&&Fe(null),Ue(null);case 4:if(!Ce.port.readable.locked){ot.next=23;break}return ot.prev=5,ot.next=8,Ce.pausePromise;case 8:return ot.next=10,Ce.reader.read();case 10:if(Ze=ot.sent,Ct=Ze.value,!Ze.done&&!Ce.closeReadPromise){ot.next=15;break}return ot.abrupt("break",23);case 15:Ce.emit("data",V.lW.from(Ct)),ot.next=21;break;case 18:ot.prev=18,ot.t0=ot.catch(5),console.error(ot.t0);case 21:ot.next=4;break;case 23:Ce.closeReadResolve();case 24:case"end":return ot.stop()}},Ge,null,[[5,18]])}))).catch(function(Ge){Fe&&Fe(Ge),xe(Ge)})})}},{key:"forget",value:(fe=ee(pe().mark(function Fe(){return pe().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",this.port.forget());case 1:case"end":return Ce.stop()}},Fe,this)})),function(){return fe.apply(this,arguments)})},{key:"close",value:(oe=ee(pe().mark(function Fe(Ce){var Ue=this;return pe().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(this.isOpen){xe.next=3;break}return Ce&&Ce(null),xe.abrupt("return");case 3:if(!this.port.readable.locked){xe.next=17;break}return this.closeReadPromise=new Promise(function(Ge){Ue.closeReadResolve=Ge}),this.pauseResolve(),xe.prev=6,xe.next=9,this.reader.cancel();case 9:xe.next=14;break;case 11:xe.prev=11,xe.t0=xe.catch(6),console.error(xe.t0);case 14:return xe.next=16,this.closeReadPromise;case 16:this.closeReadPromise=null;case 17:return xe.prev=17,xe.next=20,this.reader.releaseLock();case 20:return xe.next=22,this.writer.releaseLock();case 22:return xe.next=24,this.port.close();case 24:this.isUpdating||this.emit("close"),this.isOpen=!1,xe.next=35;break;case 28:if(xe.prev=28,xe.t1=xe.catch(17),!Ce){xe.next=34;break}Ce(xe.t1),xe.next=35;break;case 34:throw xe.t1;case 35:Ce&&Ce(null);case 36:case"end":return xe.stop()}},Fe,this,[[6,11],[17,28]])})),function(Fe){return oe.apply(this,arguments)})},{key:"set",value:(he=ee(pe().mark(function Fe(){var Ce,Ue,xe,Ge=arguments;return pe().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Ce=Ge.length>0&&Ge[0]!==void 0?Ge[0]:{},Ue=Ge.length>1?Ge[1]:void 0,Ze.prev=2,xe={},Object.prototype.hasOwnProperty.call(Ce,"dtr")&&(xe.dataTerminalReady=Ce.dtr),Object.prototype.hasOwnProperty.call(Ce,"rts")&&(xe.requestToSend=Ce.rts),Object.prototype.hasOwnProperty.call(Ce,"brk")&&(xe.break=Ce.brk),!(Object.keys(xe).length>0)){Ze.next=10;break}return Ze.next=10,this.port.setSignals(xe);case 10:Ze.next=18;break;case 12:if(Ze.prev=12,Ze.t0=Ze.catch(2),!Ue){Ze.next=17;break}return Ue(Ze.t0),Ze.abrupt("return");case 17:throw Ze.t0;case 18:Ue&&Ue(null);case 19:case"end":return Ze.stop()}},Fe,this,[[2,12]])})),function(){return he.apply(this,arguments)})},{key:"get",value:(le=ee(pe().mark(function Fe(Ce){var Ue,xe;return pe().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ue={},Ge.prev=1,Ge.next=4,this.port.getSignals();case 4:xe=Ge.sent,Object.prototype.hasOwnProperty.call(xe,"dataCarrierDetect")&&(Ue.dcd=xe.dataCarrierDetect),Object.prototype.hasOwnProperty.call(xe,"clearToSend")&&(Ue.cts=xe.clearToSend),Object.prototype.hasOwnProperty.call(xe,"dataSetReady")&&(Ue.dsr=xe.dataSetReady),Ge.next=15;break;case 10:if(Ge.prev=10,Ge.t0=Ge.catch(1),!Ce){Ge.next=14;break}return Ge.abrupt("return",Ce(Ge.t0));case 14:throw Ge.t0;case 15:if(!Ce){Ge.next=17;break}return Ge.abrupt("return",Ce(Ue));case 17:return Ge.abrupt("return",Ue);case 18:case"end":return Ge.stop()}},Fe,this,[[1,10]])})),function(Fe){return le.apply(this,arguments)})},{key:"writeText",value:function(Fe,Ce){return this.write(this.encoder.encode(Fe),Ce)}},{key:"write",value:function(Fe,Ce){this.writer.write(Fe),Ce&&Ce(null)}},{key:"read",value:(K=ee(pe().mark(function Fe(Ce){var Ue;return pe().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,this.reader.read();case 3:Ue=xe.sent,xe.next=12;break;case 6:if(xe.prev=6,xe.t0=xe.catch(0),!Ce){xe.next=11;break}return Ce(xe.t0),xe.abrupt("return");case 11:throw xe.t0;case 12:Ce&&Ce(null,Ue);case 13:case"end":return xe.stop()}},Fe,this,[[0,6]])})),function(Fe){return K.apply(this,arguments)})},{key:"update",value:(U=ee(pe().mark(function Fe(Ce,Ue){return pe().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(xe.prev=0,!Object.prototype.hasOwnProperty.call(Ce,"baudRate")||this.baudRate===Ce.baudRate){xe.next=13;break}if(!this.isOpen){xe.next=12;break}return this.isUpdating=!0,xe.next=6,this.close();case 6:return this.baudRate=Ce.baudRate,xe.next=9,this.open();case 9:this.isUpdating=!1,xe.next=13;break;case 12:this.baudRate=Ce.baudRate;case 13:xe.next=21;break;case 15:if(xe.prev=15,xe.t0=xe.catch(0),!Ue){xe.next=20;break}return Ue(xe.t0),xe.abrupt("return");case 20:throw xe.t0;case 21:Ue&&Ue(null);case 22:case"end":return xe.stop()}},Fe,this,[[0,15]])})),function(Fe,Ce){return U.apply(this,arguments)})},{key:"pause",value:function(){var Fe=this;this.pausePromise=new Promise(function(Ce){Fe.pauseResolve=Ce})}},{key:"resume",value:function(){this.pauseResolve()}},{key:"flush",value:function(Fe){console.warn("flush method is a NOP right now"),Fe&&Fe(null)}},{key:"drain",value:function(Fe){console.warn("drain method is a NOP right now"),Fe&&Fe(null)}}],E&&_(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),Pe}(G.EventEmitter);function Y(B){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},Y(B)}function q(B,b){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,U){return E.__proto__=U,E},q(B,b)}function Z(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,U=Ee(B);if(b){var K=Ee(this).constructor;E=Reflect.construct(U,arguments,K)}else E=U.apply(this,arguments);return ye(this,E)}}function ye(B,b){if(b&&(Y(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function Ee(B){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Ee(B)}const Te=function(B){(function(K,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(le&&le.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),Object.defineProperty(K,"prototype",{writable:!1}),le&&q(K,le)})(U,B);var b,E=Z(U);function U(K,le){var he;return function(oe,fe){if(!(oe instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,U),(he=E.call(this,K,le)).className="AvrUSBSerialPort",he}return b=U,Object.defineProperty(b,"prototype",{writable:!1}),b}(F);var ct=s(195),ft=s(911),Ye=function(B){if(this.options=B,this.debug=this.options.debug?console.log.bind(console):function(){},this.board=this.options.board,this.board.protocol==="avr109")throw new Error("Sorry, we currently don't support ".concat(this.board.name," or other avr109 boards in webserial. Please see https://github.com/noopkat/avrgirl-arduino/issues/204#issuecomment-703284131 for further details"))};Ye.prototype._init=function(B){this._setUpSerial(function(b){return B(b)})},Ye.prototype._setUpSerial=function(B){if(!this.options.serialPort)return this.serialPort=new Te(this.options.port,{baudRate:this.board.baud,autoOpen:!1}),this.serialPort.on("open",function(){}),B(null);this.serialPort=this.options.serialPort,this.serialPort.update({baudRate:this.board.baud},function(b){return B(b)})},Ye.prototype._sniffPort=function(B){var b=this.board.productId.map(function(E){return parseInt(E,16)});this._listPorts(function(E,U){var K=U.filter(function(le){return b.indexOf(parseInt(le._standardPid,16))!==-1});return B(null,K)})},Ye.prototype._setDTR=function(B,b,E){var U={rts:!1,dtr:B};this.serialPort.set(U,function(K){if(K)return E(K);setTimeout(function(){E(K)},b)})},Ye.prototype._pollForPort=function(B){var b=this,E=ft(function(U){var K=!1;b._sniffPort(function(le,he){he.length&&(b.options.port=he[0].comName,K=!0),U(K)})});E.every(100).ask(15),E(function(U){if(!U)return B(new Error("could not reconnect after resetting board."));b.debug("found port on",b.options.port),b._setUpSerial(function(K){return B(K)})})},Ye.prototype._pollForOpen=function(B){var b=this,E=ft(function(U){b.serialPort.open(function(K){U(!K)})});E.every(200).ask(10),E(function(U){var K;U||(K=new Error("could not open board on "+b.serialPort.path)),B(K)})},Ye.prototype._cycleDTR=function(B){var b=this;ct.series([b._setDTR.bind(b,!0,250),b._setDTR.bind(b,!1,50)],function(E){return B(E)})},Ye.prototype._listPorts=function(B){var b=[];Serialport.list(function(E,U){if(E)return B(E);for(var K=0;K<U.length;K+=1){var le;if(U[K].productId)le=U[K].productId;else if(U[K].pnpId)try{le="0x"+/PID_\d*/.exec(U[K].pnpId)[0].substr(4)}catch{le=""}else le="";U[K]._standardPid=le,b.push(U[K])}return B(null,b)})};const et=Ye;var Qe=s(479),Je=s(196),ht=s(620),lt={_parseHex:function(B){try{var b=Buffer.from(B);return ht.parse(b).data}catch(E){return E}},_hexStringToByte:function(B){return Buffer.from([parseInt(B,16)])}};const T=lt;var Se=function(B){this.debug=B.debug,this.megaDebug=B.megaDebug,this.board=B.board,this.connection=B.connection,this.chip=new B.protocol({quiet:!this.megaDebug})};Se.prototype._reset=function(B){var b=this;b.connection._setDTR(!1,250,function(E){return E||b.debug("reset complete."),B(E)})};const Ae=Se;var se=s(717),ne=function(B){B.protocol=Qe,Ae.call(this,B)};se(ne,Ae),ne.prototype._upload=function(B,b){var E=this;this.serialPort=this.connection.serialPort;var U=T._parseHex(B);if(!Buffer.isBuffer(U))return b(U);E.serialPort.open(function(K){if(K)return b(K);E.debug("connected"),E._reset(function(le){if(le)return b(le);E.debug("flashing, please wait..."),E.chip.bootload(E.serialPort,U,E.board,function(he){var oe=he?Je.red:Je.green;return E.debug(oe("flash complete.")),E.serialPort.close(),b(he)})})})},ne.prototype._reset=function(B){var b=this;b.connection._setDTR(!1,250,function(E){if(E)return B(E);b.connection._setDTR(!0,50,function(U){return b.debug("reset complete."),B(U)})})};const ve=ne;var Re=s(777),Le=function(B){B.protocol=function(){return Re},Ae.call(this,B)};se(Le,Ae),Le.prototype._upload=function(B,b){var E=this;E.serialPort=E.connection.serialPort;var U=T._parseHex(B);if(!Buffer.isBuffer(U))return b(U);E.serialPort.open(function(K){if(K)return b(K);E.debug("connected");var le=E.chip(E.serialPort);ct.series([E._reset.bind(E),le.sync.bind(le,5),le.verifySignature.bind(le,E.board.signature),le.enterProgrammingMode.bind(le,E.board),function(he){E.debug("flashing, please wait..."),he(null)},le.upload.bind(le,U,E.board.pageSize),le.exitProgrammingMode.bind(le)],function(he){var oe=he?Je.red:Je.green;return E.debug(oe("flash complete.")),E.serialPort.close(),b(he)})})};function we(B){return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},we(B)}const De=function(B,b,E){var U=function(K){if(K=K||{},this.options={board:K.board||"uno",serialPort:K.serialPort||null,debug:K.debug||!1,megaDebug:K.megaDebug||!1,port:K.port||"",manualReset:K.manualReset||!1,disableVerify:K.disableVerify||!1},this.options.debug===!0?this.debug=this.options.debug=console.log.bind(console):typeof this.options.debug=="function"?this.debug=this.options.debug=this.options.debug:this.debug=this.options.debug=function(){},we(this.options.board)==="object"){var le=Object.getOwnPropertyNames(this.options.board);le.length===1&&le[0]==="name"&&(this.options.board=this.options.board.name)}if(typeof this.options.board=="string"&&(this.options.board=B[this.options.board]),this.options.board&&!this.options.board.manualReset&&(this.options.board.manualReset=this.options.manualReset),this.options.board&&!this.options.board.disableVerify&&(this.options.board.disableVerify=this.options.disableVerify),this.connection=new b(this.options),this.options.board){var he=E[this.options.board.protocol]||function(){};this.protocol=new he({board:this.options.board,connection:this.connection,debug:this.debug,megaDebug:this.options.megaDebug})}G.call(this)};return se(U,G),U.prototype._validateBoard=function(K){if(we(this.options.board)!=="object")return K(new Error('"'+this.options.board+'" is not a supported board type.'));if(this.protocol.chip)return this.options.port||this.options.board.name!=="pro-mini"?K(null):K(new Error("using a pro-mini, please specify the port in your options."));var le="not a supported programming protocol: "+this.options.board.protocol;return K(new Error(le))},U.prototype.flash=function(K,le){var he=this;he._validateBoard(function(oe){if(oe)return le(oe);he.connection._init(function(fe){if(fe)return le(fe);he.protocol._upload(K,le)})})},U.prototype.listPorts=U.listPorts=U.prototype.list=U.list=function(K){return b.prototype._listPorts(K)},U.listKnownBoards=function(){return Object.keys(B).filter(function(K){var le=B[K].aliases;return!le||!~le.indexOf(K)})},U.prototype.tools=T,U},qe=De(M,et,{stk500v1:ve,stk500v2:Le});var m=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};const R=()=>{};function h(B){return new Promise(b=>{setTimeout(b,B)})}var c=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};class p{constructor({logger:b,serialPort:E}){this.logger=b,this.usbSerialPort=new F(E,{baudRate:1200})}call(){return c(this,void 0,void 0,function*(){this.logger.debug("Starting CDC reset"),yield this.usbSerialPort.open(),this.logger.debug("Opening port"),yield h(500),yield this.usbSerialPort.close(),this.logger.debug("Port closed"),yield h(2e3)})}}var j=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};function Q(B){const b=`000000000${B.toString(16)}`;return b.substring(b.length-8)}function ge(B){return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ge(B)}function be(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */be=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,U=typeof Symbol=="function"?Symbol:{},K=U.iterator||"@@iterator",le=U.asyncIterator||"@@asyncIterator",he=U.toStringTag||"@@toStringTag";function oe(k,x,re){return Object.defineProperty(k,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{oe({},"")}catch{oe=function(x,re,de){return x[re]=de}}function fe(k,x,re,de){var J=x&&x.prototype instanceof Pe?x:Pe,Be=Object.create(J.prototype),Me=new Ot(de||[]);return Be._invoke=function(Ve,We,_e){var $e="suspendedStart";return function(Xe,Pt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Pt;return zt()}for(_e.method=Xe,_e.arg=Pt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ce)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(Ve,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ce)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(k,re,Me),Be}function ie(k,x,re){try{return{type:"normal",arg:k.call(x,re)}}catch(de){return{type:"throw",arg:de}}}B.wrap=fe;var ce={};function Pe(){}function Fe(){}function Ce(){}var Ue={};oe(Ue,K,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,K)&&(Ue=Ge);var Ze=Ce.prototype=Pe.prototype=Object.create(Ue);function Ct(k){["next","throw","return"].forEach(function(x){oe(k,x,function(re){return this._invoke(x,re)})})}function ot(k,x){function re(J,Be,Me,Ve){var We=ie(k[J],k,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&ge($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,Ve)},function(Xe){re("throw",Xe,Me,Ve)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,Ve)})}Ve(We.arg)}var de;this._invoke=function(J,Be){function Me(){return new x(function(Ve,We){re(J,Be,Ve,We)})}return de=de?de.then(Me,Me):Me()}}function ut(k,x){var re=k.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(k.iterator.return&&(x.method="return",x.arg=void 0,ut(k,x),x.method==="throw"))return ce;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ce}var de=ie(re,k.iterator,x.arg);if(de.type==="throw")return x.method="throw",x.arg=de.arg,x.delegate=null,ce;var J=de.arg;return J?J.done?(x[k.resultName]=J.value,x.next=k.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ce):J:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ce)}function Zt(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function Tt(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function Ot(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Zt,this),this.reset(!0)}function At(k){if(k){var x=k[K];if(x)return x.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var re=-1,de=function J(){for(;++re<k.length;)if(E.call(k,re))return J.value=k[re],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return Fe.prototype=Ce,oe(Ze,"constructor",Ce),oe(Ce,"constructor",Fe),Fe.displayName=oe(Ce,he,"GeneratorFunction"),B.isGeneratorFunction=function(k){var x=typeof k=="function"&&k.constructor;return!!x&&(x===Fe||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Ce):(k.__proto__=Ce,oe(k,he,"GeneratorFunction")),k.prototype=Object.create(Ze),k},B.awrap=function(k){return{__await:k}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),B.AsyncIterator=ot,B.async=function(k,x,re,de,J){J===void 0&&(J=Promise);var Be=new ot(fe(k,x,re,de),J);return B.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ze),oe(Ze,he,"Generator"),oe(Ze,K,function(){return this}),oe(Ze,"toString",function(){return"[object Generator]"}),B.keys=function(k){var x=[];for(var re in k)x.push(re);return x.reverse(),function de(){for(;x.length;){var J=x.pop();if(J in k)return de.value=J,de.done=!1,de}return de.done=!0,de}},B.values=At,Ot.prototype={constructor:Ot,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!k)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function re(We,_e){return Be.type="throw",Be.arg=k,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],Be=J.completion;if(J.tryLoc==="root")return re("end");if(J.tryLoc<=this.prev){var Me=E.call(J,"catchLoc"),Ve=E.call(J,"finallyLoc");if(Me&&Ve){if(this.prev<J.catchLoc)return re(J.catchLoc,!0);if(this.prev<J.finallyLoc)return re(J.finallyLoc)}else if(Me){if(this.prev<J.catchLoc)return re(J.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return re(J.finallyLoc)}}}},abrupt:function(k,x){for(var re=this.tryEntries.length-1;re>=0;--re){var de=this.tryEntries[re];if(de.tryLoc<=this.prev&&E.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=x&&x<=J.finallyLoc&&(J=null);var Be=J?J.completion:{};return Be.type=k,Be.arg=x,J?(this.method="next",this.next=J.finallyLoc,ce):this.complete(Be)},complete:function(k,x){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&x&&(this.next=x),ce},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===k)return this.complete(re.completion,re.afterLoc),Tt(re),ce}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===k){var de=re.completion;if(de.type==="throw"){var J=de.arg;Tt(re)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,re){return this.delegate={iterator:At(k),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ce}},B}function Ke(B,b,E,U,K,le,he){try{var oe=B[le](he),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(U,K)}function tt(B){return function(){var b=this,E=arguments;return new Promise(function(U,K){var le=B.apply(b,E);function he(fe){Ke(le,U,K,he,oe,"next",fe)}function oe(fe){Ke(le,U,K,he,oe,"throw",fe)}he(void 0)})}}function rt(B,b){if(!(B instanceof b))throw new TypeError("Cannot call a class as a function")}function wt(B,b){for(var E=0;E<b.length;E++){var U=b[E];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}var mt=function(){function B(le){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new TextDecoder;rt(this,B),this.reader=le,this.decoder=he,this.buffer=[],this.index=0}var b,E,U,K;return b=B,E=[{key:"startReading",value:(K=tt(be().mark(function le(){var he,oe,fe;return be().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=1,ie.next=4,this.reader.read();case 4:if(he=ie.sent,oe=he.value,!he.done){ie.next=11;break}return this.reader.releaseLock(),console.debug("Reader done"),ie.abrupt("break",20);case 11:oe&&(fe=this.decoder.decode(oe),this.buffer.push(fe),console.debug("Received Value: ".concat(fe))),ie.next=18;break;case 14:return ie.prev=14,ie.t0=ie.catch(1),console.warn("An error occurred while reading;",ie.t0),ie.abrupt("break",20);case 18:ie.next=0;break;case 20:case"end":return ie.stop()}},le,this,[[1,14]])})),function(){return K.apply(this,arguments)})},{key:"timedRead",value:(U=tt(be().mark(function le(he,oe){var fe,ie;return be().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:fe=!0,ie="",setTimeout(function(){fe=!1},oe);case 3:if(!fe){ce.next=10;break}return this.index<this.buffer.length&&(ie+=this.buffer[this.index],this.index+=1),ie.length>=he&&(fe=!1),ce.next=8,h(0);case 8:ce.next=3;break;case 10:return ce.abrupt("return",ie);case 11:case"end":return ce.stop()}},le,this)})),function(le,he){return U.apply(this,arguments)})},{key:"cancel",value:function(){return this.reader.cancel()}}],E&&wt(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),B}();function Xr(B){return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},Xr(B)}function hn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */hn=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,U=typeof Symbol=="function"?Symbol:{},K=U.iterator||"@@iterator",le=U.asyncIterator||"@@asyncIterator",he=U.toStringTag||"@@toStringTag";function oe(k,x,re){return Object.defineProperty(k,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{oe({},"")}catch{oe=function(x,re,de){return x[re]=de}}function fe(k,x,re,de){var J=x&&x.prototype instanceof Pe?x:Pe,Be=Object.create(J.prototype),Me=new Ot(de||[]);return Be._invoke=function(Ve,We,_e){var $e="suspendedStart";return function(Xe,Pt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Pt;return zt()}for(_e.method=Xe,_e.arg=Pt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ce)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(Ve,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ce)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(k,re,Me),Be}function ie(k,x,re){try{return{type:"normal",arg:k.call(x,re)}}catch(de){return{type:"throw",arg:de}}}B.wrap=fe;var ce={};function Pe(){}function Fe(){}function Ce(){}var Ue={};oe(Ue,K,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,K)&&(Ue=Ge);var Ze=Ce.prototype=Pe.prototype=Object.create(Ue);function Ct(k){["next","throw","return"].forEach(function(x){oe(k,x,function(re){return this._invoke(x,re)})})}function ot(k,x){function re(J,Be,Me,Ve){var We=ie(k[J],k,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&Xr($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,Ve)},function(Xe){re("throw",Xe,Me,Ve)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,Ve)})}Ve(We.arg)}var de;this._invoke=function(J,Be){function Me(){return new x(function(Ve,We){re(J,Be,Ve,We)})}return de=de?de.then(Me,Me):Me()}}function ut(k,x){var re=k.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(k.iterator.return&&(x.method="return",x.arg=void 0,ut(k,x),x.method==="throw"))return ce;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ce}var de=ie(re,k.iterator,x.arg);if(de.type==="throw")return x.method="throw",x.arg=de.arg,x.delegate=null,ce;var J=de.arg;return J?J.done?(x[k.resultName]=J.value,x.next=k.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ce):J:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ce)}function Zt(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function Tt(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function Ot(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Zt,this),this.reset(!0)}function At(k){if(k){var x=k[K];if(x)return x.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var re=-1,de=function J(){for(;++re<k.length;)if(E.call(k,re))return J.value=k[re],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return Fe.prototype=Ce,oe(Ze,"constructor",Ce),oe(Ce,"constructor",Fe),Fe.displayName=oe(Ce,he,"GeneratorFunction"),B.isGeneratorFunction=function(k){var x=typeof k=="function"&&k.constructor;return!!x&&(x===Fe||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Ce):(k.__proto__=Ce,oe(k,he,"GeneratorFunction")),k.prototype=Object.create(Ze),k},B.awrap=function(k){return{__await:k}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),B.AsyncIterator=ot,B.async=function(k,x,re,de,J){J===void 0&&(J=Promise);var Be=new ot(fe(k,x,re,de),J);return B.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ze),oe(Ze,he,"Generator"),oe(Ze,K,function(){return this}),oe(Ze,"toString",function(){return"[object Generator]"}),B.keys=function(k){var x=[];for(var re in k)x.push(re);return x.reverse(),function de(){for(;x.length;){var J=x.pop();if(J in k)return de.value=J,de.done=!1,de}return de.done=!0,de}},B.values=At,Ot.prototype={constructor:Ot,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!k)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function re(We,_e){return Be.type="throw",Be.arg=k,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],Be=J.completion;if(J.tryLoc==="root")return re("end");if(J.tryLoc<=this.prev){var Me=E.call(J,"catchLoc"),Ve=E.call(J,"finallyLoc");if(Me&&Ve){if(this.prev<J.catchLoc)return re(J.catchLoc,!0);if(this.prev<J.finallyLoc)return re(J.finallyLoc)}else if(Me){if(this.prev<J.catchLoc)return re(J.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return re(J.finallyLoc)}}}},abrupt:function(k,x){for(var re=this.tryEntries.length-1;re>=0;--re){var de=this.tryEntries[re];if(de.tryLoc<=this.prev&&E.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=x&&x<=J.finallyLoc&&(J=null);var Be=J?J.completion:{};return Be.type=k,Be.arg=x,J?(this.method="next",this.next=J.finallyLoc,ce):this.complete(Be)},complete:function(k,x){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&x&&(this.next=x),ce},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===k)return this.complete(re.completion,re.afterLoc),Tt(re),ce}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===k){var de=re.completion;if(de.type==="throw"){var J=de.arg;Tt(re)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,re){return this.delegate={iterator:At(k),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ce}},B}function dn(B,b,E,U,K,le,he){try{var oe=B[le](he),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(U,K)}function $r(B,b){for(var E=0;E<b.length;E++){var U=b[E];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}function Ir(B,b){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,U){return E.__proto__=U,E},Ir(B,b)}function zs(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,U=On(B);if(b){var K=On(this).constructor;E=Reflect.construct(U,arguments,K)}else E=U.apply(this,arguments);return Gs(this,E)}}function Gs(B,b){if(b&&(Xr(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function On(B){return On=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},On(B)}var qs=function(B){(function(oe,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(fe&&fe.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),fe&&Ir(oe,fe)})(he,B);var b,E,U,K,le=zs(he);function he(oe,fe){var ie;return function(ce,Pe){if(!(ce instanceof Pe))throw new TypeError("Cannot call a class as a function")}(this,he),(ie=le.call(this,oe,fe)).className="SambaUSBSerialPort",ie}return b=he,E=[{key:"open",value:(U=hn().mark(function oe(){var fe;return hn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._getPort();case 3:if(this.port=ie.sent,!this.isOpen){ie.next=6;break}return ie.abrupt("return");case 6:return ie.next=8,this.port.open(this.requestOptions||{baudRate:this.baudRate||57600});case 8:return ie.next=10,this.port.writable.getWriter();case 10:this.writer=ie.sent,this.reader=new mt(this.port.readable.getReader()),(fe=this.reader)===null||fe===void 0||fe.startReading(),this.isOpen=!0;case 14:return ie.prev=14,this.isOpen=!1,ie.finish(14);case 17:case"end":return ie.stop()}},oe,this,[[0,,14,17]])}),K=function(){var oe=this,fe=arguments;return new Promise(function(ie,ce){var Pe=U.apply(oe,fe);function Fe(Ue){dn(Pe,ie,ce,Fe,Ce,"next",Ue)}function Ce(Ue){dn(Pe,ie,ce,Fe,Ce,"throw",Ue)}Fe(void 0)})},function(){return K.apply(this,arguments)})},{key:"timedRead",value:function(oe,fe){var ie;return(ie=this.reader)===null||ie===void 0?void 0:ie.timedRead(oe,fe)}}],E&&$r(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),he}(F),fr=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};const Vs=100,Hs=1e3,hi=5e3,so=8192,ao=536891392,co=1024,Ws=3758157068,Ks=100270084;class uo{constructor({logger:b,serialPort:E}){this.serialPort=new qs(E,{requestOptions:{baudRate:921600,dataBits:8,parity:"none",stopBits:1,flowControl:"none",bufferSize:4096,autoOpen:!1}}),this.logger=b}flash(b,E){return fr(this,void 0,void 0,function*(){E&&(yield this.cdcReset()),yield this.openSerial(),yield this.setBinaryMode(),yield this.checkVersion(),yield this.erase(),yield this.writeBinary(b),yield this.reset(),yield this.waitForPort()})}waitForPort(){return fr(this,void 0,void 0,function*(){yield h(500)})}reset(){return fr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#reset"),yield this.serialPort.writeText(`W${Q(Ws)},${Q(Ks)}#`)})}erase(){return fr(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#erase"),yield this.serialPort.writeText(`X${Q(so)}#`),!(yield this.checkResponse(`X
\r`,hi)))throw new Error("Error while erasing")})}checkVersion(){return fr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#checkVersion"),yield this.serialPort.writeText("V#"),this.logger.info(yield this.serialPort.timedRead(256,Vs))})}setBinaryMode(){return fr(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#setBinaryMode"),yield this.serialPort.writeText("N#"),!(yield this.checkResponse(`
\r`,Hs)))throw new Error("Error setting binary mode")})}openSerial(){return fr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#openSerial"),yield this.serialPort.open()})}writeBinary(b){return fr(this,void 0,void 0,function*(){let E=0;do{let U=b.length-E;U>co&&(U=co);const K=b.slice(E,E+U);if(yield this.serialPort.writeText(`S${Q(ao)},${Q(U)}#`),yield this.serialPort.write(K),yield h(5),yield this.serialPort.writeText(`Y${Q(ao)},0#`),!(yield this.checkResponse(`Y
\r`,5*hi)))throw new Error(`Error while writing chunk ${(100*E/b.length).toFixed(0)}%`);if(yield this.serialPort.writeText(`Y${Q(so+E)},${Q(U)}#`),!(yield this.checkResponse(`Y
\r`,hi)))throw new Error("Error while writing buffer");E+=U}while(E<b.length)})}checkResponse(b,E){return fr(this,void 0,void 0,function*(){const{length:U}=b;yield h(10);const K=yield this.serialPort.timedRead(U,E);return this.logger.debug(`Checked Response.
${encodeURIComponent(b)} :expected
${encodeURIComponent(K)} :actual`),K===b})}cdcReset(){return fr(this,void 0,void 0,function*(){const b=yield this.serialPort._getPort();yield new p({logger:this.logger,serialPort:b}).call()})}}var Ys=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};function xt(B){return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},xt(B)}function pn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pn=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,U=typeof Symbol=="function"?Symbol:{},K=U.iterator||"@@iterator",le=U.asyncIterator||"@@asyncIterator",he=U.toStringTag||"@@toStringTag";function oe(k,x,re){return Object.defineProperty(k,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{oe({},"")}catch{oe=function(x,re,de){return x[re]=de}}function fe(k,x,re,de){var J=x&&x.prototype instanceof Pe?x:Pe,Be=Object.create(J.prototype),Me=new Ot(de||[]);return Be._invoke=function(Ve,We,_e){var $e="suspendedStart";return function(Xe,Pt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Pt;return zt()}for(_e.method=Xe,_e.arg=Pt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ce)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(Ve,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ce)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(k,re,Me),Be}function ie(k,x,re){try{return{type:"normal",arg:k.call(x,re)}}catch(de){return{type:"throw",arg:de}}}B.wrap=fe;var ce={};function Pe(){}function Fe(){}function Ce(){}var Ue={};oe(Ue,K,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,K)&&(Ue=Ge);var Ze=Ce.prototype=Pe.prototype=Object.create(Ue);function Ct(k){["next","throw","return"].forEach(function(x){oe(k,x,function(re){return this._invoke(x,re)})})}function ot(k,x){function re(J,Be,Me,Ve){var We=ie(k[J],k,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&xt($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,Ve)},function(Xe){re("throw",Xe,Me,Ve)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,Ve)})}Ve(We.arg)}var de;this._invoke=function(J,Be){function Me(){return new x(function(Ve,We){re(J,Be,Ve,We)})}return de=de?de.then(Me,Me):Me()}}function ut(k,x){var re=k.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(k.iterator.return&&(x.method="return",x.arg=void 0,ut(k,x),x.method==="throw"))return ce;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ce}var de=ie(re,k.iterator,x.arg);if(de.type==="throw")return x.method="throw",x.arg=de.arg,x.delegate=null,ce;var J=de.arg;return J?J.done?(x[k.resultName]=J.value,x.next=k.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ce):J:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ce)}function Zt(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function Tt(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function Ot(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Zt,this),this.reset(!0)}function At(k){if(k){var x=k[K];if(x)return x.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var re=-1,de=function J(){for(;++re<k.length;)if(E.call(k,re))return J.value=k[re],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return Fe.prototype=Ce,oe(Ze,"constructor",Ce),oe(Ce,"constructor",Fe),Fe.displayName=oe(Ce,he,"GeneratorFunction"),B.isGeneratorFunction=function(k){var x=typeof k=="function"&&k.constructor;return!!x&&(x===Fe||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Ce):(k.__proto__=Ce,oe(k,he,"GeneratorFunction")),k.prototype=Object.create(Ze),k},B.awrap=function(k){return{__await:k}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),B.AsyncIterator=ot,B.async=function(k,x,re,de,J){J===void 0&&(J=Promise);var Be=new ot(fe(k,x,re,de),J);return B.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ze),oe(Ze,he,"Generator"),oe(Ze,K,function(){return this}),oe(Ze,"toString",function(){return"[object Generator]"}),B.keys=function(k){var x=[];for(var re in k)x.push(re);return x.reverse(),function de(){for(;x.length;){var J=x.pop();if(J in k)return de.value=J,de.done=!1,de}return de.done=!0,de}},B.values=At,Ot.prototype={constructor:Ot,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!k)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function re(We,_e){return Be.type="throw",Be.arg=k,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],Be=J.completion;if(J.tryLoc==="root")return re("end");if(J.tryLoc<=this.prev){var Me=E.call(J,"catchLoc"),Ve=E.call(J,"finallyLoc");if(Me&&Ve){if(this.prev<J.catchLoc)return re(J.catchLoc,!0);if(this.prev<J.finallyLoc)return re(J.finallyLoc)}else if(Me){if(this.prev<J.catchLoc)return re(J.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return re(J.finallyLoc)}}}},abrupt:function(k,x){for(var re=this.tryEntries.length-1;re>=0;--re){var de=this.tryEntries[re];if(de.tryLoc<=this.prev&&E.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=x&&x<=J.finallyLoc&&(J=null);var Be=J?J.completion:{};return Be.type=k,Be.arg=x,J?(this.method="next",this.next=J.finallyLoc,ce):this.complete(Be)},complete:function(k,x){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&x&&(this.next=x),ce},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===k)return this.complete(re.completion,re.afterLoc),Tt(re),ce}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===k){var de=re.completion;if(de.type==="throw"){var J=de.arg;Tt(re)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,re){return this.delegate={iterator:At(k),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ce}},B}function lo(B,b,E,U,K,le,he){try{var oe=B[le](he),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(U,K)}function di(B){return function(){var b=this,E=arguments;return new Promise(function(U,K){var le=B.apply(b,E);function he(fe){lo(le,U,K,he,oe,"next",fe)}function oe(fe){lo(le,U,K,he,oe,"throw",fe)}he(void 0)})}}function mn(B,b){if(!(B instanceof b))throw new TypeError("Cannot call a class as a function")}function pi(B,b){for(var E=0;E<b.length;E++){var U=b[E];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}var fo=function(){function B(le){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new TextDecoder;mn(this,B),this.reader=le,this.decoder=he,this.buffer=[],this.index=0}var b,E,U,K;return b=B,E=[{key:"startReading",value:(K=di(pn().mark(function le(){var he,oe,fe;return pn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=1,ie.next=4,this.reader.read();case 4:if(he=ie.sent,oe=he.value,!he.done){ie.next=11;break}return this.reader.releaseLock(),console.debug("Reader done"),ie.abrupt("break",20);case 11:oe&&(fe=this.decoder.decode(oe),this.buffer.push(fe),console.debug("Received Value: ".concat(fe))),ie.next=18;break;case 14:return ie.prev=14,ie.t0=ie.catch(1),console.warn("An error occurred while reading;",ie.t0),ie.abrupt("break",20);case 18:ie.next=0;break;case 20:case"end":return ie.stop()}},le,this,[[1,14]])})),function(){return K.apply(this,arguments)})},{key:"timedRead",value:(U=di(pn().mark(function le(he,oe){var fe,ie;return pn().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:fe=!0,ie="",setTimeout(function(){fe=!1},oe);case 3:if(!fe){ce.next=10;break}return this.index<this.buffer.length&&(ie+=this.buffer[this.index],this.index+=1),ie.length>=he&&(fe=!1),ce.next=8,h(0);case 8:ce.next=3;break;case 10:return ce.abrupt("return",ie);case 11:case"end":return ce.stop()}},le,this)})),function(le,he){return U.apply(this,arguments)})},{key:"cancel",value:function(){return this.reader.cancel()}}],E&&pi(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),B}();function gn(B){return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},gn(B)}function vn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */vn=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,U=typeof Symbol=="function"?Symbol:{},K=U.iterator||"@@iterator",le=U.asyncIterator||"@@asyncIterator",he=U.toStringTag||"@@toStringTag";function oe(k,x,re){return Object.defineProperty(k,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{oe({},"")}catch{oe=function(x,re,de){return x[re]=de}}function fe(k,x,re,de){var J=x&&x.prototype instanceof Pe?x:Pe,Be=Object.create(J.prototype),Me=new Ot(de||[]);return Be._invoke=function(Ve,We,_e){var $e="suspendedStart";return function(Xe,Pt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Pt;return zt()}for(_e.method=Xe,_e.arg=Pt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ce)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(Ve,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ce)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(k,re,Me),Be}function ie(k,x,re){try{return{type:"normal",arg:k.call(x,re)}}catch(de){return{type:"throw",arg:de}}}B.wrap=fe;var ce={};function Pe(){}function Fe(){}function Ce(){}var Ue={};oe(Ue,K,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,K)&&(Ue=Ge);var Ze=Ce.prototype=Pe.prototype=Object.create(Ue);function Ct(k){["next","throw","return"].forEach(function(x){oe(k,x,function(re){return this._invoke(x,re)})})}function ot(k,x){function re(J,Be,Me,Ve){var We=ie(k[J],k,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&gn($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,Ve)},function(Xe){re("throw",Xe,Me,Ve)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,Ve)})}Ve(We.arg)}var de;this._invoke=function(J,Be){function Me(){return new x(function(Ve,We){re(J,Be,Ve,We)})}return de=de?de.then(Me,Me):Me()}}function ut(k,x){var re=k.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(k.iterator.return&&(x.method="return",x.arg=void 0,ut(k,x),x.method==="throw"))return ce;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ce}var de=ie(re,k.iterator,x.arg);if(de.type==="throw")return x.method="throw",x.arg=de.arg,x.delegate=null,ce;var J=de.arg;return J?J.done?(x[k.resultName]=J.value,x.next=k.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ce):J:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ce)}function Zt(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function Tt(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function Ot(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Zt,this),this.reset(!0)}function At(k){if(k){var x=k[K];if(x)return x.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var re=-1,de=function J(){for(;++re<k.length;)if(E.call(k,re))return J.value=k[re],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return Fe.prototype=Ce,oe(Ze,"constructor",Ce),oe(Ce,"constructor",Fe),Fe.displayName=oe(Ce,he,"GeneratorFunction"),B.isGeneratorFunction=function(k){var x=typeof k=="function"&&k.constructor;return!!x&&(x===Fe||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Ce):(k.__proto__=Ce,oe(k,he,"GeneratorFunction")),k.prototype=Object.create(Ze),k},B.awrap=function(k){return{__await:k}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),B.AsyncIterator=ot,B.async=function(k,x,re,de,J){J===void 0&&(J=Promise);var Be=new ot(fe(k,x,re,de),J);return B.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ze),oe(Ze,he,"Generator"),oe(Ze,K,function(){return this}),oe(Ze,"toString",function(){return"[object Generator]"}),B.keys=function(k){var x=[];for(var re in k)x.push(re);return x.reverse(),function de(){for(;x.length;){var J=x.pop();if(J in k)return de.value=J,de.done=!1,de}return de.done=!0,de}},B.values=At,Ot.prototype={constructor:Ot,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!k)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function re(We,_e){return Be.type="throw",Be.arg=k,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],Be=J.completion;if(J.tryLoc==="root")return re("end");if(J.tryLoc<=this.prev){var Me=E.call(J,"catchLoc"),Ve=E.call(J,"finallyLoc");if(Me&&Ve){if(this.prev<J.catchLoc)return re(J.catchLoc,!0);if(this.prev<J.finallyLoc)return re(J.finallyLoc)}else if(Me){if(this.prev<J.catchLoc)return re(J.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return re(J.finallyLoc)}}}},abrupt:function(k,x){for(var re=this.tryEntries.length-1;re>=0;--re){var de=this.tryEntries[re];if(de.tryLoc<=this.prev&&E.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=x&&x<=J.finallyLoc&&(J=null);var Be=J?J.completion:{};return Be.type=k,Be.arg=x,J?(this.method="next",this.next=J.finallyLoc,ce):this.complete(Be)},complete:function(k,x){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&x&&(this.next=x),ce},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===k)return this.complete(re.completion,re.afterLoc),Tt(re),ce}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===k){var de=re.completion;if(de.type==="throw"){var J=de.arg;Tt(re)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,re){return this.delegate={iterator:At(k),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ce}},B}function ho(B,b,E,U,K,le,he){try{var oe=B[le](he),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(U,K)}function po(B){return function(){var b=this,E=arguments;return new Promise(function(U,K){var le=B.apply(b,E);function he(fe){ho(le,U,K,he,oe,"next",fe)}function oe(fe){ho(le,U,K,he,oe,"throw",fe)}he(void 0)})}}function Zs(B,b){for(var E=0;E<b.length;E++){var U=b[E];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}function mi(B,b){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,U){return E.__proto__=U,E},mi(B,b)}function Xs(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,U=Nn(B);if(b){var K=Nn(this).constructor;E=Reflect.construct(U,arguments,K)}else E=U.apply(this,arguments);return Qs(this,E)}}function Qs(B,b){if(b&&(gn(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function Nn(B){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Nn(B)}var Js=function(B){(function(oe,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(fe&&fe.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),fe&&mi(oe,fe)})(he,B);var b,E,U,K,le=Xs(he);function he(oe,fe){var ie;return function(ce,Pe){if(!(ce instanceof Pe))throw new TypeError("Cannot call a class as a function")}(this,he),(ie=le.call(this,oe,fe)).className="SambaUSBSerialPort",ie}return b=he,E=[{key:"open",value:(K=po(vn().mark(function oe(){var fe;return vn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._getPort();case 3:if(this.port=ie.sent,!this.isOpen){ie.next=6;break}return ie.abrupt("return");case 6:return ie.next=8,this.port.open(this.requestOptions||{baudRate:this.baudRate||57600});case 8:return ie.next=10,this.port.writable.getWriter();case 10:this.writer=ie.sent,this.reader=new fo(this.port.readable.getReader()),this.isOpen=!0,(fe=this.reader)===null||fe===void 0||fe.startReading(),ie.next=20;break;case 16:ie.prev=16,ie.t0=ie.catch(0),console.error(ie.t0),this.isOpen=!1;case 20:case"end":return ie.stop()}},oe,this,[[0,16]])})),function(){return K.apply(this,arguments)})},{key:"close",value:(U=po(vn().mark(function oe(){var fe,ie;return vn().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(this.isOpen){ce.next=2;break}return ce.abrupt("return");case 2:return ce.prev=2,ce.next=5,(fe=this.reader)===null||fe===void 0?void 0:fe.cancel();case 5:return ce.next=7,(ie=this.writer)===null||ie===void 0?void 0:ie.close();case 7:return ce.next=9,this.port.close();case 9:this.isOpen=!1,ce.next=15;break;case 12:ce.prev=12,ce.t0=ce.catch(2),console.error(ce.t0);case 15:case"end":return ce.stop()}},oe,this,[[2,12]])})),function(){return U.apply(this,arguments)})},{key:"timedRead",value:function(oe,fe){var ie;return(ie=this.reader)===null||ie===void 0?void 0:ie.timedRead(oe,fe)}}],E&&Zs(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),he}(F);function Rr(B){const b=`000000000${B.toString(16)}`;return b.substring(b.length-8)}var Yt=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};const mo=100,ea=1e3,gi=5e3,Nt={startAddress:0,ramAddress:20480,transferSize:4096};function Pn(B,b){if(B.length>=b)return B.subarray(0,b);const E=new Uint8Array(b);return E.set(B),E}function Tr(B){if(B<0||B>100)return"[                              ]";const b=Math.round(B/100*30),E=30-b;return`[${"=".repeat(b)}${" ".repeat(E)}]`}class Mt{constructor({logger:b,serialPort:E}){this.serialPort=new Js(E,{requestOptions:{baudRate:230400,dataBits:8,parity:"none",stopBits:1,flowControl:"none",bufferSize:4096,autoOpen:!1}}),this.logger=b}flash(b,E){return Yt(this,void 0,void 0,function*(){E&&(yield this.cdcReset()),yield this.openSerial(),yield this.checkVersion(),yield this.identifyChip(),yield this.setBinaryMode(),yield this.erase(),yield this.writeBinary(b),yield this.reset(),yield this.waitForPort(),yield this.closeSerial()})}waitForPort(){return Yt(this,void 0,void 0,function*(){yield h(500)})}reset(){return Yt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#reset"),yield this.serialPort.writeText("K#")})}erase(){return Yt(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#erase"),yield this.serialPort.writeText(`X${Rr(Nt.startAddress)}#`),!(yield this.checkResponse(`X
\r`,gi)))throw new Error("Error while erasing")})}checkVersion(){return Yt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#checkVersion"),yield this.serialPort.writeText("V#"),this.logger.debug(yield this.serialPort.timedRead(256,mo))})}identifyChip(){return Yt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#identifyChip"),yield this.serialPort.writeText("I#"),this.logger.debug(yield this.serialPort.timedRead(256,mo))})}setBinaryMode(){return Yt(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#setBinaryMode"),yield this.serialPort.writeText("N#"),!(yield this.checkResponse(`
\r`,ea)))throw new Error("Error setting binary mode")})}forgetSerial(){return Yt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#forgetSerial"),yield this.serialPort.forget()})}closeSerial(){return Yt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#closeSerial"),yield this.serialPort.close()})}openSerial(){return Yt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#openSerial"),yield this.serialPort.open()})}writeBinary(b){return Yt(this,void 0,void 0,function*(){let E=0,U=0;const K=Math.ceil(b.length/Nt.transferSize);do{let le=b.length-E;le>Nt.transferSize&&(le=Nt.transferSize);let he=b.slice(E,E+le);Nt.transferSize-he.length>0&&(new Uint8Array(Nt.transferSize).set(he),he=Pn(he,Nt.transferSize),le=he.length),yield this.serialPort.writeText(`S${Rr(Nt.ramAddress)},${Rr(le)}#`);const oe=100*E/b.length;if(this.logger.info(`${Tr(oe)} ${oe.toFixed(0)}% (${U}/${K} pages) write(addr=0x${Nt.ramAddress.toString(16)}, size=0x${le.toString(16)})`),yield this.serialPort.write(he),yield h(5),yield this.serialPort.writeText(`Y${Rr(Nt.ramAddress)},0#`),!(yield this.checkResponse(`Y
\r`,5*gi)))throw new Error(`Error while writing chunk ${oe}%`);if(yield this.serialPort.writeText(`Y${Rr(Nt.startAddress+E)},${Rr(le)}#`),this.logger.info(`writeBuffer(scr_addr=0x${Nt.ramAddress.toString(16)}, dst_addr=0x${(Nt.startAddress+E).toString(16)}, size=0x${le.toString(16)})`),!(yield this.checkResponse(`Y
\r`,gi)))throw new Error("Error while writing buffer");E+=le,U+=1}while(E<b.length);this.logger.info(`${Tr(100)} 100% (${U}/${K} pages)`)})}checkResponse(b,E){return Yt(this,void 0,void 0,function*(){const{length:U}=b;yield h(10);const K=yield this.serialPort.timedRead(U,E);return this.logger.debug(`Checked Response.
${encodeURIComponent(b)} :expected
${encodeURIComponent(K)} :actual`),K===b})}cdcReset(){return Yt(this,void 0,void 0,function*(){const b=yield this.serialPort._getPort();yield new p({logger:this.logger,serialPort:b}).call()})}}var ta=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};function vi(B){return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},vi(B)}function _t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_t=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,U=typeof Symbol=="function"?Symbol:{},K=U.iterator||"@@iterator",le=U.asyncIterator||"@@asyncIterator",he=U.toStringTag||"@@toStringTag";function oe(k,x,re){return Object.defineProperty(k,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{oe({},"")}catch{oe=function(x,re,de){return x[re]=de}}function fe(k,x,re,de){var J=x&&x.prototype instanceof Pe?x:Pe,Be=Object.create(J.prototype),Me=new Ot(de||[]);return Be._invoke=function(Ve,We,_e){var $e="suspendedStart";return function(Xe,Pt){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Xe==="throw")throw Pt;return zt()}for(_e.method=Xe,_e.arg=Pt;;){var It=_e.delegate;if(It){var kt=ut(It,_e);if(kt){if(kt===ce)continue;return kt}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if($e==="suspendedStart")throw $e="completed",_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);$e="executing";var dt=ie(Ve,We,_e);if(dt.type==="normal"){if($e=_e.done?"completed":"suspendedYield",dt.arg===ce)continue;return{value:dt.arg,done:_e.done}}dt.type==="throw"&&($e="completed",_e.method="throw",_e.arg=dt.arg)}}}(k,re,Me),Be}function ie(k,x,re){try{return{type:"normal",arg:k.call(x,re)}}catch(de){return{type:"throw",arg:de}}}B.wrap=fe;var ce={};function Pe(){}function Fe(){}function Ce(){}var Ue={};oe(Ue,K,function(){return this});var xe=Object.getPrototypeOf,Ge=xe&&xe(xe(At([])));Ge&&Ge!==b&&E.call(Ge,K)&&(Ue=Ge);var Ze=Ce.prototype=Pe.prototype=Object.create(Ue);function Ct(k){["next","throw","return"].forEach(function(x){oe(k,x,function(re){return this._invoke(x,re)})})}function ot(k,x){function re(J,Be,Me,Ve){var We=ie(k[J],k,Be);if(We.type!=="throw"){var _e=We.arg,$e=_e.value;return $e&&vi($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Xe){re("next",Xe,Me,Ve)},function(Xe){re("throw",Xe,Me,Ve)}):x.resolve($e).then(function(Xe){_e.value=Xe,Me(_e)},function(Xe){return re("throw",Xe,Me,Ve)})}Ve(We.arg)}var de;this._invoke=function(J,Be){function Me(){return new x(function(Ve,We){re(J,Be,Ve,We)})}return de=de?de.then(Me,Me):Me()}}function ut(k,x){var re=k.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(k.iterator.return&&(x.method="return",x.arg=void 0,ut(k,x),x.method==="throw"))return ce;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ce}var de=ie(re,k.iterator,x.arg);if(de.type==="throw")return x.method="throw",x.arg=de.arg,x.delegate=null,ce;var J=de.arg;return J?J.done?(x[k.resultName]=J.value,x.next=k.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ce):J:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ce)}function Zt(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function Tt(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function Ot(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Zt,this),this.reset(!0)}function At(k){if(k){var x=k[K];if(x)return x.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var re=-1,de=function J(){for(;++re<k.length;)if(E.call(k,re))return J.value=k[re],J.done=!1,J;return J.value=void 0,J.done=!0,J};return de.next=de}}return{next:zt}}function zt(){return{value:void 0,done:!0}}return Fe.prototype=Ce,oe(Ze,"constructor",Ce),oe(Ce,"constructor",Fe),Fe.displayName=oe(Ce,he,"GeneratorFunction"),B.isGeneratorFunction=function(k){var x=typeof k=="function"&&k.constructor;return!!x&&(x===Fe||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Ce):(k.__proto__=Ce,oe(k,he,"GeneratorFunction")),k.prototype=Object.create(Ze),k},B.awrap=function(k){return{__await:k}},Ct(ot.prototype),oe(ot.prototype,le,function(){return this}),B.AsyncIterator=ot,B.async=function(k,x,re,de,J){J===void 0&&(J=Promise);var Be=new ot(fe(k,x,re,de),J);return B.isGeneratorFunction(x)?Be:Be.next().then(function(Me){return Me.done?Me.value:Be.next()})},Ct(Ze),oe(Ze,he,"Generator"),oe(Ze,K,function(){return this}),oe(Ze,"toString",function(){return"[object Generator]"}),B.keys=function(k){var x=[];for(var re in k)x.push(re);return x.reverse(),function de(){for(;x.length;){var J=x.pop();if(J in k)return de.value=J,de.done=!1,de}return de.done=!0,de}},B.values=At,Ot.prototype={constructor:Ot,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Tt),!k)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function re(We,_e){return Be.type="throw",Be.arg=k,x.next=We,_e&&(x.method="next",x.arg=void 0),!!_e}for(var de=this.tryEntries.length-1;de>=0;--de){var J=this.tryEntries[de],Be=J.completion;if(J.tryLoc==="root")return re("end");if(J.tryLoc<=this.prev){var Me=E.call(J,"catchLoc"),Ve=E.call(J,"finallyLoc");if(Me&&Ve){if(this.prev<J.catchLoc)return re(J.catchLoc,!0);if(this.prev<J.finallyLoc)return re(J.finallyLoc)}else if(Me){if(this.prev<J.catchLoc)return re(J.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return re(J.finallyLoc)}}}},abrupt:function(k,x){for(var re=this.tryEntries.length-1;re>=0;--re){var de=this.tryEntries[re];if(de.tryLoc<=this.prev&&E.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var J=de;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=x&&x<=J.finallyLoc&&(J=null);var Be=J?J.completion:{};return Be.type=k,Be.arg=x,J?(this.method="next",this.next=J.finallyLoc,ce):this.complete(Be)},complete:function(k,x){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&x&&(this.next=x),ce},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===k)return this.complete(re.completion,re.afterLoc),Tt(re),ce}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===k){var de=re.completion;if(de.type==="throw"){var J=de.arg;Tt(re)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,re){return this.delegate={iterator:At(k),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ce}},B}function zr(B,b,E,U,K,le,he){try{var oe=B[le](he),fe=oe.value}catch(ie){return void E(ie)}oe.done?b(fe):Promise.resolve(fe).then(U,K)}function hr(B){return function(){var b=this,E=arguments;return new Promise(function(U,K){var le=B.apply(b,E);function he(fe){zr(le,U,K,he,oe,"next",fe)}function oe(fe){zr(le,U,K,he,oe,"throw",fe)}he(void 0)})}}function dr(B,b){var E=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!E){if(Array.isArray(B)||(E=function(fe,ie){if(fe){if(typeof fe=="string")return yi(fe,ie);var ce=Object.prototype.toString.call(fe).slice(8,-1);if(ce==="Object"&&fe.constructor&&(ce=fe.constructor.name),ce==="Map"||ce==="Set")return Array.from(fe);if(ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return yi(fe,ie)}}(B))||b){E&&(B=E);var U=0,K=function(){};return{s:K,n:function(){return U>=B.length?{done:!0}:{done:!1,value:B[U++]}},e:function(fe){throw fe},f:K}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,he=!0,oe=!1;return{s:function(){E=E.call(B)},n:function(){var fe=E.next();return he=fe.done,fe},e:function(fe){oe=!0,le=fe},f:function(){try{he||E.return==null||E.return()}finally{if(oe)throw le}}}}function yi(B,b){(b==null||b>B.length)&&(b=B.length);for(var E=0,U=new Array(b);E<b;E++)U[E]=B[E];return U}var pr=function(){var B={DETACH:0,DNLOAD:1,UPLOAD:2,GETSTATUS:3,CLRSTATUS:4,GETSTATE:5,ABORT:6,appIDLE:0,appDETACH:1,dfuIDLE:2,dfuDNLOAD_SYNC:3,dfuDNBUSY:4,dfuDNLOAD_IDLE:5,dfuMANIFEST_SYNC:6,dfuMANIFEST:7,dfuMANIFEST_WAIT_RESET:8,dfuUPLOAD_IDLE:9,dfuERROR:10,STATUS_OK:0,Device:function(b,E){this.device_=b,this.settings=E,this.intfNumber=E.interface.interfaceNumber},findDeviceDfuInterfaces:function(b){var E,U=[],K=dr(b.configurations);try{for(K.s();!(E=K.n()).done;){var le,he=E.value,oe=dr(he.interfaces);try{for(oe.s();!(le=oe.n()).done;){var fe,ie=le.value,ce=dr(ie.alternates);try{for(ce.s();!(fe=ce.n()).done;){var Pe=fe.value;if(Pe.interfaceClass===254&&Pe.interfaceSubclass===1&&(Pe.interfaceProtocol===1||Pe.interfaceProtocol===2)){var Fe={configuration:he,interface:ie,alternate:Pe,name:Pe.interfaceName};U.push(Fe)}}}catch(Ce){ce.e(Ce)}finally{ce.f()}}}catch(Ce){oe.e(Ce)}finally{oe.f()}}}catch(Ce){K.e(Ce)}finally{K.f()}return U},findAllDfuInterfaces:function(){return navigator.usb.getDevices().then(function(b){var E,U=[],K=dr(b);try{for(K.s();!(E=K.n()).done;){var le,he=E.value,oe=dr(B.findDeviceDfuInterfaces(he));try{for(oe.s();!(le=oe.n()).done;){var fe=le.value;U.push(new B.Device(he,fe))}}catch(ie){oe.e(ie)}finally{oe.f()}}}catch(ie){K.e(ie)}finally{K.f()}return U})}};return B.Device.prototype.logDebug=function(b){console.debug(b)},B.Device.prototype.logInfo=function(b){console.log(b)},B.Device.prototype.logWarning=function(b){console.log(b)},B.Device.prototype.logError=function(b){console.log(b)},B.Device.prototype.logProgress=function(b,E){console.log(E===void 0?b:"".concat(b,"/").concat(E))},B.Device.prototype.open=hr(_t().mark(function b(){var E,U,K,le;return _t().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,this.device_.open();case 2:if(E=this.settings.configuration.configurationValue,this.device_.configuration!==null&&this.device_.configuration.configurationValue===E){he.next=6;break}return he.next=6,this.device_.selectConfiguration(E);case 6:if(U=this.settings.interface.interfaceNumber,this.device_.configuration.interfaces[U].claimed){he.next=10;break}return he.next=10,this.device_.claimInterface(U);case 10:if(K=this.settings.alternate.alternateSetting,!((le=this.device_.configuration.interfaces[U]).alternate===null||le.alternate.alternateSetting!==K||le.alternates.length>1)){he.next=25;break}return he.prev=13,he.next=16,this.device_.selectAlternateInterface(U,K);case 16:he.next=25;break;case 18:if(he.prev=18,he.t0=he.catch(13),le.alternate.alternateSetting!==K||!he.t0.endsWith("Unable to set device interface.")){he.next=24;break}this.logWarning("Redundant SET_INTERFACE request to select altSetting ".concat(K," failed")),he.next=25;break;case 24:throw he.t0;case 25:case"end":return he.stop()}},b,this,[[13,18]])})),B.Device.prototype.close=hr(_t().mark(function b(){return _t().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,this.device_.close();case 3:E.next=8;break;case 5:E.prev=5,E.t0=E.catch(0),console.log(E.t0);case 8:case"end":return E.stop()}},b,this,[[0,5]])})),B.Device.prototype.readDeviceDescriptor=function(){return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:256,index:0},18).then(function(b){return b.status==="ok"?Promise.resolve(b.data):Promise.reject(b.status)})},B.Device.prototype.readStringDescriptor=function(){var b=hr(_t().mark(function E(U,K){var le,he,oe,fe,ie,ce;return _t().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return K===void 0&&(K=0),le={requestType:"standard",recipient:"device",request:6,value:768|U,index:K},Pe.next=7,this.device_.controlTransferIn(le,1);case 7:if((he=Pe.sent).status!=="ok"){Pe.next=20;break}return oe=he.data.getUint8(0),Pe.next=12,this.device_.controlTransferIn(le,oe);case 12:if((he=Pe.sent).status!=="ok"){Pe.next=20;break}for(fe=(oe-2)/2,ie=[],ce=0;ce<fe;ce++)ie.push(he.data.getUint16(2+2*ce,!0));if(K!==0){Pe.next=19;break}return Pe.abrupt("return",ie);case 19:return Pe.abrupt("return",String.fromCharCode.apply(String,ie));case 20:throw"Failed to read string descriptor ".concat(U,": ").concat(he.status);case 21:case"end":return Pe.stop()}},E,this)}));return function(E,U){return b.apply(this,arguments)}}(),B.Device.prototype.readInterfaceNames=hr(_t().mark(function b(){var E,U,K,le,he,oe,fe,ie,ce,Pe,Fe,Ce,Ue,xe,Ge,Ze,Ct,ot;return _t().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:E=4,U={},K=new Set,le=0;case 4:if(!(le<this.device_.configurations.length)){ut.next=16;break}return ut.next=7,this.readConfigurationDescriptor(le);case 7:he=ut.sent,oe=B.parseConfigurationDescriptor(he),fe=oe.bConfigurationValue,U[fe]={},ie=dr(oe.descriptors);try{for(ie.s();!(ce=ie.n()).done;)(Pe=ce.value).bDescriptorType===E&&(Pe.bInterfaceNumber in U[fe]||(U[fe][Pe.bInterfaceNumber]={}),U[fe][Pe.bInterfaceNumber][Pe.bAlternateSetting]=Pe.iInterface,Pe.iInterface>0&&K.add(Pe.iInterface))}catch(Zt){ie.e(Zt)}finally{ie.f()}case 13:le++,ut.next=4;break;case 16:Fe={},Ce=dr(K),ut.prev=18,Ce.s();case 20:if((Ue=Ce.n()).done){ut.next=34;break}return xe=Ue.value,ut.prev=22,ut.next=25,this.readStringDescriptor(xe,1033);case 25:Fe[xe]=ut.sent,ut.next=32;break;case 28:ut.prev=28,ut.t0=ut.catch(22),console.log(ut.t0),Fe[xe]=null;case 32:ut.next=20;break;case 34:ut.next=39;break;case 36:ut.prev=36,ut.t1=ut.catch(18),Ce.e(ut.t1);case 39:return ut.prev=39,Ce.f(),ut.finish(39);case 42:for(Ge in U)for(Ze in U[Ge])for(Ct in U[Ge][Ze])ot=U[Ge][Ze][Ct],U[Ge][Ze][Ct]=Fe[ot];return ut.abrupt("return",U);case 44:case"end":return ut.stop()}},b,this,[[18,36,39,42],[22,28]])})),B.parseDeviceDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bcdUSB:b.getUint16(2,!0),bDeviceClass:b.getUint8(4),bDeviceSubClass:b.getUint8(5),bDeviceProtocol:b.getUint8(6),bMaxPacketSize:b.getUint8(7),idVendor:b.getUint16(8,!0),idProduct:b.getUint16(10,!0),bcdDevice:b.getUint16(12,!0),iManufacturer:b.getUint8(14),iProduct:b.getUint8(15),iSerialNumber:b.getUint8(16),bNumConfigurations:b.getUint8(17)}},B.parseConfigurationDescriptor=function(b){var E=new DataView(b.buffer.slice(9)),U=B.parseSubDescriptors(E);return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),wTotalLength:b.getUint16(2,!0),bNumInterfaces:b.getUint8(4),bConfigurationValue:b.getUint8(5),iConfiguration:b.getUint8(6),bmAttributes:b.getUint8(7),bMaxPower:b.getUint8(8),descriptors:U}},B.parseInterfaceDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bInterfaceNumber:b.getUint8(2),bAlternateSetting:b.getUint8(3),bNumEndpoints:b.getUint8(4),bInterfaceClass:b.getUint8(5),bInterfaceSubClass:b.getUint8(6),bInterfaceProtocol:b.getUint8(7),iInterface:b.getUint8(8),descriptors:[]}},B.parseFunctionalDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bmAttributes:b.getUint8(2),wDetachTimeOut:b.getUint16(3,!0),wTransferSize:b.getUint16(5,!0),bcdDFUVersion:b.getUint16(7,!0)}},B.parseSubDescriptors=function(b){for(var E,U=b,K=[],le=!1;U.byteLength>2;){var he=U.getUint8(0),oe=U.getUint8(1),fe=new DataView(U.buffer.slice(0,he));if(oe===4)le=(E=B.parseInterfaceDescriptor(fe)).bInterfaceClass===254&&E.bInterfaceSubClass===1,K.push(E);else if(le&&oe===33){var ie=B.parseFunctionalDescriptor(fe);K.push(ie),E.descriptors.push(ie)}else{var ce={bLength:he,bDescriptorType:oe,data:fe};K.push(ce),E&&E.descriptors.push(ce)}U=new DataView(U.buffer.slice(he))}return K},B.Device.prototype.readConfigurationDescriptor=function(b){var E=this,U=512|b;return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:U,index:0},4).then(function(K){if(K.status==="ok"){var le=K.data.getUint16(2,!0);return E.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:U,index:0},le)}return Promise.reject(K.status)}).then(function(K){return K.status==="ok"?Promise.resolve(K.data):Promise.reject(K.status)})},B.Device.prototype.requestOut=function(b,E){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:b,value:U,index:this.intfNumber},E).then(function(K){return K.status==="ok"?Promise.resolve(K.bytesWritten):Promise.reject(K.status)},function(K){return Promise.reject("ControlTransferOut failed: ".concat(K))})},B.Device.prototype.requestIn=function(b,E){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.device_.controlTransferIn({requestType:"class",recipient:"interface",request:b,value:U,index:this.intfNumber},E).then(function(K){return K.status==="ok"?Promise.resolve(K.data):Promise.reject(K.status)},function(K){return Promise.reject("ControlTransferIn failed: ".concat(K))})},B.Device.prototype.detach=function(){return this.requestOut(B.DETACH,void 0,1e3)},B.Device.prototype.waitDisconnected=function(){var b=hr(_t().mark(function E(U){var K,le;return _t().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return K=this,le=this.device_,he.abrupt("return",new Promise(function(oe,fe){var ie;U>0&&(ie=setTimeout(fe,U));function ce(Pe){Pe.device===le&&(U>0&&clearTimeout(ie),K.disconnected=!0,navigator.usb.removeEventListener("disconnect",ce),Pe.stopPropagation(),oe(K))}navigator.usb.addEventListener("disconnect",ce)}));case 3:case"end":return he.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),B.Device.prototype.download=function(b,E){return this.requestOut(B.DNLOAD,b,E)},B.Device.prototype.dnload=B.Device.prototype.download,B.Device.prototype.upload=function(b,E){return this.requestIn(B.UPLOAD,b,E)},B.Device.prototype.clearStatus=function(){return this.requestOut(B.CLRSTATUS)},B.Device.prototype.clrStatus=B.Device.prototype.clearStatus,B.Device.prototype.getStatus=function(){return this.requestIn(B.GETSTATUS,6).then(function(b){return Promise.resolve({status:b.getUint8(0),pollTimeout:16777215&b.getUint32(1,!0),state:b.getUint8(4)})},function(b){return Promise.reject("DFU GETSTATUS failed: ".concat(b))})},B.Device.prototype.getState=function(){return this.requestIn(B.GETSTATE,1).then(function(b){return Promise.resolve(b.getUint8(0))},function(b){return Promise.reject("DFU GETSTATE failed: ".concat(b))})},B.Device.prototype.abort=function(){return this.requestOut(B.ABORT)},B.Device.prototype.abortToIdle=hr(_t().mark(function b(){var E;return _t().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.abort();case 2:return U.next=4,this.getState();case 4:if((E=U.sent)!==B.dfuERROR){U.next=11;break}return U.next=8,this.clearStatus();case 8:return U.next=10,this.getState();case 10:E=U.sent;case 11:if(E===B.dfuIDLE){U.next=13;break}throw"Failed to return to idle state after abort: state ".concat(E.state);case 13:case"end":return U.stop()}},b,this)})),B.Device.prototype.do_upload=function(){var b=hr(_t().mark(function E(U){var K,le,he,oe,fe,ie,ce,Pe=arguments;return _t().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:K=Pe.length>1&&Pe[1]!==void 0?Pe[1]:1/0,le=Pe.length>2&&Pe[2]!==void 0?Pe[2]:0,he=le,oe=[],fe=0,this.logInfo("Copying data from DFU device to browser"),this.logProgress(0);case 7:return ce=Math.min(U,K-fe),Fe.next=10,this.upload(ce,he++);case 10:ie=Fe.sent,this.logDebug("Read ".concat(ie.byteLength," bytes")),ie.byteLength>0&&(oe.push(ie),fe+=ie.byteLength),Number.isFinite(K)?this.logProgress(fe,K):this.logProgress(fe);case 14:if(fe<K&&ie.byteLength===ce){Fe.next=7;break}case 15:if(fe!==K){Fe.next=18;break}return Fe.next=18,this.abortToIdle();case 18:return this.logInfo("Read ".concat(fe," bytes")),Fe.abrupt("return",new Blob(oe,{type:"application/octet-stream"}));case 20:case"end":return Fe.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),B.Device.prototype.poll_until=function(){var b=hr(_t().mark(function E(U){var K,le,he;return _t().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return he=function(fe){return new Promise(function(ie,ce){le.logDebug("Sleeping for ".concat(fe,"ms")),setTimeout(ie,fe)})},oe.next=3,this.getStatus();case 3:K=oe.sent,le=this;case 5:if(U(K.state)||K.state===B.dfuERROR){oe.next=13;break}return oe.next=8,he(K.pollTimeout);case 8:return oe.next=10,this.getStatus();case 10:K=oe.sent,oe.next=5;break;case 13:return oe.abrupt("return",K);case 14:case"end":return oe.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),B.Device.prototype.poll_until_idle=function(b){return this.poll_until(function(E){return E===b})},B.Device.prototype.do_download=function(){var b=hr(_t().mark(function E(U,K,le){var he,oe,fe,ie,ce,Pe,Fe,Ce,Ue;return _t().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:he=0,oe=K.byteLength,fe=0,this.logInfo("Copying data from browser to DFU device"),this.logProgress(he,oe);case 5:if(!(he<oe)){xe.next=30;break}return ie=oe-he,ce=Math.min(ie,U),Pe=0,Fe=void 0,xe.prev=10,xe.next=13,this.download(K.slice(he,he+ce),fe++);case 13:return Pe=xe.sent,this.logDebug("Sent ".concat(Pe," bytes")),xe.next=17,this.poll_until_idle(B.dfuDNLOAD_IDLE);case 17:Fe=xe.sent,xe.next=23;break;case 20:throw xe.prev=20,xe.t0=xe.catch(10),"Error during DFU download: ".concat(xe.t0);case 23:if(Fe.status===B.STATUS_OK){xe.next=25;break}throw"DFU DOWNLOAD failed state=".concat(Fe.state,", status=").concat(Fe.status);case 25:this.logDebug("Wrote ".concat(Pe," bytes")),he+=Pe,this.logProgress(he,oe),xe.next=5;break;case 30:return this.logDebug("Sending empty block"),xe.prev=31,xe.next=34,this.download(new ArrayBuffer([]),fe++);case 34:xe.next=39;break;case 36:throw xe.prev=36,xe.t1=xe.catch(31),"Error during final DFU download: ".concat(xe.t1);case 39:if(this.logInfo("Wrote ".concat(he," bytes")),this.logInfo("Manifesting new firmware"),!le){xe.next=60;break}return xe.prev=42,xe.next=45,this.poll_until(function(Ge){return Ge===B.dfuIDLE||Ge===B.dfuMANIFEST_WAIT_RESET});case 45:if((Ce=xe.sent).state===B.dfuMANIFEST_WAIT_RESET&&this.logDebug("Device transitioned to MANIFEST_WAIT_RESET even though it is manifestation tolerant"),Ce.status===B.STATUS_OK){xe.next=49;break}throw"DFU MANIFEST failed state=".concat(Ce.state,", status=").concat(Ce.status);case 49:xe.next=58;break;case 51:if(xe.prev=51,xe.t2=xe.catch(42),!xe.t2.endsWith("ControlTransferIn failed: NotFoundError: Device unavailable.")&&!xe.t2.endsWith("ControlTransferIn failed: NotFoundError: The device was disconnected.")){xe.next=57;break}this.logWarning("Unable to poll final manifestation status"),xe.next=58;break;case 57:throw"Error during DFU manifest: ".concat(xe.t2);case 58:xe.next=70;break;case 60:return xe.prev=60,xe.next=63,this.getStatus();case 63:Ue=xe.sent,this.logDebug("Final DFU status: state=".concat(Ue.state,", status=").concat(Ue.status)),xe.next=70;break;case 67:xe.prev=67,xe.t3=xe.catch(60),this.logDebug("Manifest GET_STATUS poll error: ".concat(xe.t3));case 70:return xe.prev=70,xe.next=73,this.device_.reset();case 73:xe.next=82;break;case 75:if(xe.prev=75,xe.t4=xe.catch(70),xe.t4!=="NetworkError: Unable to reset the device."&&xe.t4!=="NotFoundError: Device unavailable."&&xe.t4!=="NotFoundError: The device was disconnected."){xe.next=81;break}this.logDebug("Ignored reset error"),xe.next=82;break;case 81:throw"Error during reset for manifestation: ".concat(xe.t4);case 82:case"end":return xe.stop()}},E,this,[[10,20],[31,36],[42,51],[60,67],[70,75]])}));return function(E,U,K){return b.apply(this,arguments)}}(),B}(),Or=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};class Gr{constructor(b){this.onDisconnect=he=>{he&&this.logger.error(he)},this.connect=he=>Or(this,void 0,void 0,function*(){try{yield he.open()}catch(fe){throw this.onDisconnect(fe),fe}let oe={};try{oe=yield function(fe){return fe.readConfigurationDescriptor(0).then(ie=>{const ce=pr.parseConfigurationDescriptor(ie);let Pe=null;const Fe=fe.settings.configuration.configurationValue;if(ce.bConfigurationValue===Fe)for(let Ce=0;Ce<ce.descriptors.length;Ce+=1){const Ue=ce.descriptors[Ce];if(Ue.bDescriptorType===33&&Ue.bcdDFUVersion){Pe=Ue;break}}return Pe?{WillDetach:(8&Pe.bmAttributes)!=0,ManifestationTolerant:(4&Pe.bmAttributes)!=0,CanUpload:(2&Pe.bmAttributes)!=0,CanDnload:(1&Pe.bmAttributes)!=0,TransferSize:Pe.wTransferSize,DetachTimeOut:Pe.wDetachTimeOut,DFUVersion:Pe.bcdDFUVersion}:{}},ie=>{console.error(ie)})}(he)}catch(fe){throw this.onDisconnect(fe),fe}return oe&&Object.keys(oe).length>0&&(he.properties=oe,oe.WillDetach,oe.ManifestationTolerant,oe.CanUpload,oe.CanDnload,oe.TransferSize,oe.DetachTimeOut,function(fe){let ie=fe.toString(16);for(;ie.length<4;)ie=`0${ie}`}(oe.DFUVersion),this.transferSize=oe.TransferSize,oe.CanDnload&&(this.manifestationTolerant=oe.ManifestationTolerant)),he});const{options:E,postMessage:U,fqbn:K,dialogCustomizations:le}=b;this.logger=(E==null?void 0:E.logger)||new i,this.fqbn=K,this.vid=b.vid,this.pid=b.pid,this.postMessage=U,this.dialogCustomizations=le}getCustomDialog(b){if(this.dialogCustomizations&&b<this.dialogCustomizations.length)return this.dialogCustomizations[b]}flash({filename:b,compiledSketch:E}){return Or(this,void 0,void 0,function*(){this.logger.info(`Compiling file '${b}' ...`);let U=yield A({vid:this.vid,pid:this.pid});if(!U){const he=yield N(this.getCustomDialog(0));this.vid=he.getInfo().usbVendorId||this.vid,this.pid=he.getInfo().usbProductId||this.pid,U=yield A({vid:this.vid,pid:this.pid})}if(!U)throw new Error("Cannot perform CDC reset");yield new p({logger:this.logger,serialPort:U}).call();let K=yield O(this.fqbn);if(K||(yield function(he){return g(this,void 0,void 0,function*(){if(!(yield a.From(he).confirm()))throw new Error("Permission denied");yield navigator.usb.requestDevice({filters:[]})})}(this.dialogCustomizations&&this.dialogCustomizations[0]),K=yield O(this.fqbn)),!K)throw new Error("Cannot connect USB device");const le=yield pr.findDeviceDfuInterfaces(K);if(le.length===0?this.logger.info("The selected device does not have any USB DFU interfaces."):(this.logger.info(`The selected device has ${le.length} USB DFU interfaces`),yield Gr.fixInterfaceNames(K,le),this.dfuDevice=yield this.connect(new pr.Device(K,le[0]))),this.dfuDevice&&E!=null){try{(yield this.dfuDevice.getStatus()).state===pr.dfuERROR&&(yield this.dfuDevice.clearStatus())}catch{this.logger.warn("Failed to clear status")}yield this.dfuDevice.do_download(64,Buffer.from(E,"base64"),this.manifestationTolerant).then(()=>{var he;this.logger.info("Done!"),this.manifestationTolerant||(he=this.dfuDevice)===null||he===void 0||he.waitDisconnected(5e3).then(oe=>this.logger.info("Disconnected"),oe=>this.logger.error("Device unexpectedly tolerated manifestation."))},he=>{this.logger.error(he)}),yield this.dfuDevice.detach()}})}}Gr.fixInterfaceNames=(B,b)=>Or(void 0,void 0,void 0,function*(){if(b.some(E=>E.name==null)){const E=new pr.Device(B,b[0]);yield E.device_.open(),yield E.device_.selectConfiguration(1);const U=yield E.readInterfaceNames();yield E.close();for(const K of b)if(K.name===null){const le=K.configuration.configurationValue,he=K.interface.interfaceNumber,oe=K.alternate.alternateSetting;K.name=U[le][he][oe]}}}),Gr.findDeviceDfuInterfaces=B=>{const b=[];for(const E of B.configurations)for(const U of E.interfaces)for(const K of U.alternates)if(K.interfaceClass===254&&K.interfaceSubclass===1&&(K.interfaceProtocol===1||K.interfaceProtocol===2)){const le={configuration:E,interface:U,alternate:K,name:K.interfaceName};b.push(le)}return b};const bi={avr:class{constructor(B){const{options:b,fqbn:E,vid:U,pid:K,dialogCustomizations:le,postMessage:he}=B;this.fqbn=E,this.vid=U,this.pid=K,this.dialogCustomizations=le,this.logger=(b==null?void 0:b.logger)||new i,this.options=B.options,this.postMessage=he,this.callback=this.options.callback||R,window.match||(window.match="")}flash({filename:B,compiledSketch:b}){return m(this,void 0,void 0,function*(){this.logger.info(`compiling file '${B}'`);let E=yield A({vid:this.vid,pid:this.pid});if(!E){const U=yield N(this.dialogCustomizations?this.dialogCustomizations[0]:void 0);this.vid=U.getInfo().usbVendorId||this.vid,this.pid=U.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid})}if(!E)throw new Error("Cannot find the serial port.");return new qe({board:this.options.avr_name,serialPort:new Te(E),debug:!0,megaDebug:!0}).flash(new TextDecoder().decode(D(b)),this.callback)})}},"sam-ba":class{constructor(B){const{options:b,fqbn:E,dialogCustomizations:U,postMessage:K}=B;this.flasherOptions=b,this.logger=(b==null?void 0:b.logger)||new i,this.fqbn=E,this.vid=B.vid,this.pid=B.pid,this.postMessage=K,this.dialogCustomizations=U}flash({filename:B,compiledSketch:b}){return Ys(this,void 0,void 0,function*(){this.logger.info(`compiling file '${B}'`);let E=yield A({vid:this.vid,pid:this.pid});if(E){yield new p({logger:this.logger,serialPort:E}).call();const K=yield N(this.getCustomDialog(1));if(this.vid=K.getInfo().usbVendorId||this.vid,this.pid=K.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid}),E)return new uo({logger:this.logger,serialPort:E}).flash(D(b),!1);throw new Error("Cannot find the serial port.")}const U=yield N(this.getCustomDialog(0));if(this.vid=U.getInfo().usbVendorId||this.vid,this.pid=U.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid}),E){yield new p({logger:this.logger,serialPort:E}).call();const K=yield N(this.getCustomDialog(1));if(this.vid=K.getInfo().usbVendorId||this.vid,this.pid=K.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid}),E)return new uo({logger:this.logger,serialPort:E}).flash(D(b),!1);throw new Error("Cannot find the serial port.")}throw new Error("Some unexpeted error occurred.")})}getCustomDialog(B){if(this.dialogCustomizations&&B<this.dialogCustomizations.length)return this.dialogCustomizations[B]}},"sam-ba-renesas":class{constructor(B){const{options:b,fqbn:E,dialogCustomizations:U,postMessage:K}=B;this.flasherOptions=b,this.logger=(b==null?void 0:b.logger)||new i,this.fqbn=E,this.pid=B.pid,this.vid=B.vid,this.postMessage=K,this.dialogCustomizations=U}flash({filename:B,compiledSketch:b}){return ta(this,void 0,void 0,function*(){this.logger.info(`compiling file '${B}'`);let E=yield A({vid:this.vid,pid:this.pid});if(E){const K=yield N(this.getCustomDialog(1));if(this.vid=K.getInfo().usbVendorId||this.vid,this.pid=K.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid}),E)return yield new p({logger:this.logger,serialPort:E}).call(),new Mt({logger:this.logger,serialPort:E,options:this.flasherOptions}).flash(D(b));throw new Error("Cannot find the serial port.")}const U=yield N(this.getCustomDialog(1));if(this.vid=U.getInfo().usbVendorId||this.vid,this.pid=U.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid}),E){const K=yield N(this.getCustomDialog(1));if(this.vid=K.getInfo().usbVendorId||this.vid,this.pid=K.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid}),E)return yield new p({logger:this.logger,serialPort:E}).call(),new Mt({logger:this.logger,serialPort:E,options:this.flasherOptions}).flash(D(b));throw new Error("Cannot find the serial port.")}throw new Error(`An unexpected error occurred flashing ${this.fqbn}`)})}getCustomDialog(B){if(this.dialogCustomizations&&B<this.dialogCustomizations.length)return this.dialogCustomizations[B]}},rp:class{constructor(B){const{options:b,fqbn:E,dialogCustomizations:U,postMessage:K}=B;this.fqbn=E,this.vid=B.vid,this.pid=B.pid,this.dialogCustomizations=U,this.logger=(b==null?void 0:b.logger)||new i,this.postMessage=K}flash({filename:B,compiledSketch:b}){return j(this,void 0,void 0,function*(){let E=yield A({vid:this.vid,pid:this.pid});if(!E){const U=yield this.connectToSerialDevice(this.getCustomDialog(0));this.vid=U.getInfo().usbVendorId||this.vid,this.pid=U.getInfo().usbProductId||this.pid,E=yield A({vid:this.vid,pid:this.pid})}if(!E)throw new Error("Cannot find the serial port.");yield new p({logger:this.logger,serialPort:E}).call(),yield this.saveToFile({compiledSketch:b,filename:B||"sketch.uf2",dialogCustomization:this.getCustomDialog(2)})})}saveToFile({filename:B,compiledSketch:b,dialogCustomization:E}){return j(this,void 0,void 0,function*(){const U=a.From(E);let K=B;if(K.endsWith(".elf")&&(K=`${K.substring(0,K.length-4)}.uf2`),!(yield U.confirm()))throw new Error("User aborted");{const le={suggestedName:K,types:[{description:"UF2 files (*.uf2)",accept:{"application/octet-stream":[".uf2"]}}]},he=Buffer.from(b,"base64");yield window.showSaveFilePicker(le).then(oe=>{this.fileHandle=oe,oe.createWritable().then(fe=>(fe.write(he),fe)).then(fe=>{fe.close(),this.postMessage&&this.postMessage({uploadStatus:"success",message:"Flash completed."})}).catch(fe=>console.error(fe))})}})}connectToSerialDevice(B){return j(this,void 0,void 0,function*(){if(yield a.From(B).confirm())return yield navigator.serial.requestPort();throw new Error("Permission denied")})}getCustomDialog(B){if(this.dialogCustomizations&&B<this.dialogCustomizations.length)return this.dialogCustomizations[B]}},dfu:Gr};class Ln{constructor(){this.create=({fqbn:b,vid:E,pid:U,dialogCustomizations:K,postMessage:le,options:he,logger:oe})=>{const fe=C(b),ie=fe.flasher;if(!bi[ie])throw new Error(`Flasher for ${b} not found`);return new bi[ie]({fqbn:b,vid:E,pid:U,dialogCustomizations:K,postMessage:le,options:Object.assign(Object.assign({},he),{logger:oe,avr_name:fe.avr_name})})}}}var ra=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};class na{constructor({logger:b,filters:E,fqbn:U,vid:K,pid:le,dialogCustomizations:he,postMessage:oe}){this.fqbn=U,this.vid=K,this.pid=le,this.dialogCustomizations=he,this.logger=b,this.filters=E,this.postMessage=oe,this.flasherFactory=new Ln}flash({filename:b,compiledSketch:E}){return ra(this,void 0,void 0,function*(){yield this.flasherFactory.create({fqbn:this.fqbn,vid:this.vid,pid:this.pid,dialogCustomizations:this.dialogCustomizations,postMessage:this.postMessage,logger:this.logger||new i,options:{callback:K=>{this.logger.info(K)}}}).flash({filename:b,compiledSketch:E})})}}const Qr="uploader-inbound-channel",go="uploader-outbound-channel";function vo(B,b){return!(!B||!b)&&B.some(E=>b.includes(E))}const ia=class{constructor(B=[]){console.debug("Initializing event channel"),this.whiteListedOrigins=B,this.createInboundChannel(),this.createOutboundChannel()}createInboundChannel(){console.debug("creating inbound channel"),this.inboundChannelBroadcaster=new BroadcastChannel(Qr),this.inboundChannelReceiver=new BroadcastChannel(Qr),this.inboundChannelReceiver.onmessage=B=>{const b=B.origin.toLowerCase();vo(this.whiteListedOrigins,b)&&this._onMessage(B)},this.inboundChannelBroadcaster.onmessageerror=B=>this._onDisconnect(B),this.inboundChannelReceiver.onmessageerror=B=>this._onDisconnect(B)}createOutboundChannel(){console.debug("creating outbound channel"),this.port=new BroadcastChannel(go),this.outboundChannelReceiver=new BroadcastChannel(go),this.port.onmessageerror=B=>this._onDisconnect(B),this.outboundChannelReceiver.onmessageerror=B=>this._onDisconnect(B)}_onDisconnect(B){console.error(B),this.disconnectCallback&&this.disconnectCallback(B),this.inboundChannelBroadcaster.close(),this.inboundChannelReceiver.close(),this.port.close(),this.outboundChannelReceiver.close()}onDisconnect(B){this.disconnectCallback=B}postMessage(B){this.inboundChannelBroadcaster.postMessage(B)}onMessage(B){this.outboundChannelReceiver.onmessage=b=>{const E=b.origin.toLowerCase();vo(this.whiteListedOrigins,E)&&B(b.data)}}};function yn(B){const b=B.split("/"),E=parseInt(b[0],16),U=parseInt(b[1],16);if(Number.isNaN(E)||Number.isNaN(U))throw new Error(`Port name [${B}] has an invalid format`);return{vid:E,pid:U}}const wi=function(B){var b,E;const{extrafiles:U}=B;return((E=(b=U==null?void 0:U[0])===null||b===void 0?void 0:b.filename)===null||E===void 0?void 0:E.indexOf(".uf2"))>0?U[0].hex:B.data};var ar=function(B,b,E,U){return new(E||(E=Promise))(function(K,le){function he(ie){try{fe(U.next(ie))}catch(ce){le(ce)}}function oe(ie){try{fe(U.throw(ie))}catch(ce){le(ce)}}function fe(ie){var ce;ie.done?K(ie.value):(ce=ie.value,ce instanceof E?ce:new E(function(Pe){Pe(ce)})).then(he,oe)}fe((U=U.apply(B,[])).next())})};const oa=["create.arduino.cc"];class Bn extends ia{constructor({logger:b,filters:E,whiteListedOrigins:U=oa}){super(U),this.logger=b||new i,this.filters=E,this.serialRxBuffer=Buffer.alloc(0),this.openPorts={},this.sendInitialData()}sendInitialData(){setTimeout(()=>{this.sendVersion(),this.sendSupportedBoards()},500)}_onMessage(b){const{command:E,data:U}=b.data;E==="listPorts"?this.listPorts():E==="upload"?this.upload(U):E==="openPort"?this.openPort(U):E==="closePort"?this.closePort(U):E==="writePort"?this.writePort(U):E==="connectToSerial"&&this.connectToSerialDevice({from:U.from,dialogCustomization:U.dialogCustomization})}writePort(b){var E;(E=this.serialReader)===null||E===void 0||E.writeText(b.data)}listPorts(){this.listBoards().then(b=>{this.port.postMessage({ports:b})})}sendVersion(){this.port.postMessage({version:1})}sendSupportedBoards(){this.port.postMessage({supportedBoards:v})}static isSerialSupported(){return"serial"in navigator}openPort({name:b,baudrate:E}){return ar(this,void 0,void 0,function*(){const{vid:U,pid:K}=yn(b);try{const le=yield A({vid:U,pid:K});le&&(this.serialReader=new F(le,{baudRate:E}),yield this.serialReader.open(),this.serialRxBuffer=Buffer.alloc(0),this.serialReader.on("data",he=>{this.onSerialData(he)}),this.port.postMessage({portOpenStatus:"success"}),this.markPortAsOpen(le))}catch(le){console.error(le),this.port.postMessage({portOpenStatus:"error",message:le.message})}})}markPortAsOpen(b){const{usbVendorId:E,usbProductId:U}=b.getInfo();this.openPorts[u({vid:E,pid:U})]=!0}markPortAsClosed(b){const{usbVendorId:E,usbProductId:U}=b.getInfo();this.openPorts[u({vid:E,pid:U})]=null}isPortOpen(b){const{usbVendorId:E,usbProductId:U}=b.getInfo();return!!this.openPorts[u({vid:E,pid:U})]}onSerialData(b){if(!b)return;this.serialRxBuffer=Buffer.concat([this.serialRxBuffer,b]);let E=0;for(let U=0;U<this.serialRxBuffer.length;U+=1){const K=this.serialRxBuffer[U];let le=1;if(K>>3==30?le=4:K>>4==14?le=3:K>>5==6&&(le=2),U+le>this.serialRxBuffer.length)break;U+=le-1,E+=le}E>0&&(this.port.postMessage({serialData:this.serialRxBuffer.slice(0,E).toString("utf8")}),this.serialRxBuffer=this.serialRxBuffer.slice(E))}closeAllPorts(){return ar(this,void 0,void 0,function*(){(yield this.listBoards()).forEach(b=>this.closePort({name:b.name}))})}closePort({name:b}){return ar(this,void 0,void 0,function*(){const{vid:E,pid:U}=yn(b);try{const K=yield A({vid:E,pid:U});K&&this.serialReader&&(yield this.serialReader.close(),this.markPortAsClosed(K),this.port.postMessage({portCloseStatus:"success"}))}catch(K){console.error(K),this.port.postMessage({portCloseStatus:"error",message:K.message})}})}listBoards(){return ar(this,void 0,void 0,function*(){return Bn.isSerialSupported()?(yield navigator.serial.getPorts()).map(b=>{const{usbVendorId:E,usbProductId:U}=b.getInfo();return function({vid:K,pid:le,isOpen:he}){const oe=Object.keys(v).find(fe=>v[fe].ids.find(ie=>ie.vid===K&&ie.pid===le));return{name:u({vid:K,pid:le}),vendorId:y(K),productId:y(le),fqbn:oe??I,isOpen:he||!1}}({vid:E,pid:U,isOpen:this.isPortOpen(b)})}):[]})}upload(b){return ar(this,void 0,void 0,function*(){if(Bn.isSerialSupported())try{yield new na({fqbn:b.board,vid:b.vid,pid:b.pid,dialogCustomizations:b.dialogCustomizations,logger:this.logger,filters:this.filters,postMessage:this.port.postMessage}).flash({filename:b.filename,compiledSketch:wi(b)}),this.port.postMessage({uploadStatus:"success",message:"Upload completed"})}catch(E){console.error(E),this.port.postMessage({uploadStatus:"error",message:E.message})}finally{this.listPorts()}})}connectToSerialDevice({from:b,dialogCustomization:E}){return ar(this,void 0,void 0,function*(){b==="serial-monitor"&&(yield N(E))})}}})(),f})())})(Jf);var Tc=Jf.exports,Ka={exports:{}};const Wg="2.0.0",Kg=256,Yg=Number.MAX_SAFE_INTEGER||9007199254740991,Zg=16,Xg=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var _s={MAX_LENGTH:Kg,MAX_SAFE_COMPONENT_LENGTH:Zg,MAX_SAFE_INTEGER:Yg,RELEASE_TYPES:Xg,SEMVER_SPEC_VERSION:Wg,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ba={};const Qg=typeof process=="object"&&ba&&ba.NODE_DEBUG&&/\bsemver\b/i.test(ba.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Es=Qg;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=_s,n=Es;t=e.exports={};const o=t.re=[],s=t.safeRe=[],f=t.src=[],i=t.t={};let v=0;const l=(a,y,u)=>{const g=y.split("\\s*").join("\\s{0,1}").split("\\s+").join("\\s"),I=v++;n(a,I,y),i[a]=I,f[I]=y,o[I]=new RegExp(y,u?"g":void 0),s[I]=new RegExp(g,u?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${f[i.NUMERICIDENTIFIER]})\\.(${f[i.NUMERICIDENTIFIER]})\\.(${f[i.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${f[i.NUMERICIDENTIFIERLOOSE]})\\.(${f[i.NUMERICIDENTIFIERLOOSE]})\\.(${f[i.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${f[i.NUMERICIDENTIFIER]}|${f[i.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${f[i.NUMERICIDENTIFIERLOOSE]}|${f[i.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${f[i.PRERELEASEIDENTIFIER]}(?:\\.${f[i.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${f[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[i.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${f[i.BUILDIDENTIFIER]}(?:\\.${f[i.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${f[i.MAINVERSION]}${f[i.PRERELEASE]}?${f[i.BUILD]}?`),l("FULL",`^${f[i.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${f[i.MAINVERSIONLOOSE]}${f[i.PRERELEASELOOSE]}?${f[i.BUILD]}?`),l("LOOSE",`^${f[i.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${f[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${f[i.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${f[i.XRANGEIDENTIFIER]})(?:\\.(${f[i.XRANGEIDENTIFIER]})(?:\\.(${f[i.XRANGEIDENTIFIER]})(?:${f[i.PRERELEASE]})?${f[i.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${f[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[i.XRANGEIDENTIFIERLOOSE]})(?:${f[i.PRERELEASELOOSE]})?${f[i.BUILD]}?)?)?`),l("XRANGE",`^${f[i.GTLT]}\\s*${f[i.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${f[i.GTLT]}\\s*${f[i.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),l("COERCERTL",f[i.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${f[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${f[i.LONETILDE]}${f[i.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${f[i.LONETILDE]}${f[i.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${f[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${f[i.LONECARET]}${f[i.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${f[i.LONECARET]}${f[i.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${f[i.GTLT]}\\s*(${f[i.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${f[i.GTLT]}\\s*(${f[i.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${f[i.GTLT]}\\s*(${f[i.LOOSEPLAIN]}|${f[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${f[i.XRANGEPLAIN]})\\s+-\\s+(${f[i.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${f[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[i.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ka,Ka.exports);var to=Ka.exports;const Jg=Object.freeze({loose:!0}),e0=Object.freeze({}),t0=e=>e?typeof e!="object"?Jg:e:e0;var Oc=t0;const dl=/^[0-9]+$/,eh=(e,t)=>{const r=dl.test(e),n=dl.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},r0=(e,t)=>eh(t,e);var th={compareIdentifiers:eh,rcompareIdentifiers:r0};const Do=Es,{MAX_LENGTH:pl,MAX_SAFE_INTEGER:Fo}=_s,{safeRe:ml,t:gl}=to,n0=Oc,{compareIdentifiers:Mn}=th;let i0=class Lr{constructor(t,r){if(r=n0(r),t instanceof Lr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>pl)throw new TypeError(`version is longer than ${pl} characters`);Do("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?ml[gl.LOOSE]:ml[gl.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Fo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fo||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const s=+o;if(s>=0&&s<Fo)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Do("SemVer.compare",this.version,this.options,t),!(t instanceof Lr)){if(typeof t=="string"&&t===this.version)return 0;t=new Lr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Lr||(t=new Lr(t,this.options)),Mn(this.major,t.major)||Mn(this.minor,t.minor)||Mn(this.patch,t.patch)}comparePre(t){if(t instanceof Lr||(t=new Lr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(Do("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Mn(n,o)}while(++r)}compareBuild(t){t instanceof Lr||(t=new Lr(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(Do("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Mn(n,o)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),Mn(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var nr=i0;const vl=nr,o0=(e,t,r=!1)=>{if(e instanceof vl)return e;try{return new vl(e,t)}catch(n){if(!r)return null;throw n}};var ni=o0;const s0=ni,a0=(e,t)=>{const r=s0(e,t);return r?r.version:null};var c0=a0;const u0=ni,l0=(e,t)=>{const r=u0(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var f0=l0;const yl=nr,h0=(e,t,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new yl(e instanceof yl?e.version:e,r).inc(t,n,o).version}catch{return null}};var d0=h0;const bl=ni,p0=(e,t)=>{const r=bl(e,null,!0),n=bl(t,null,!0),o=r.compare(n);if(o===0)return null;const s=o>0,f=s?r:n,i=s?n:r,v=!!f.prerelease.length;if(!!i.prerelease.length&&!v)return!i.patch&&!i.minor?"major":f.patch?"patch":f.minor?"minor":"major";const a=v?"pre":"";return r.major!==n.major?a+"major":r.minor!==n.minor?a+"minor":r.patch!==n.patch?a+"patch":"prerelease"};var m0=p0;const g0=nr,v0=(e,t)=>new g0(e,t).major;var y0=v0;const b0=nr,w0=(e,t)=>new b0(e,t).minor;var x0=w0;const _0=nr,E0=(e,t)=>new _0(e,t).patch;var S0=E0;const C0=ni,k0=(e,t)=>{const r=C0(e,t);return r&&r.prerelease.length?r.prerelease:null};var A0=k0;const wl=nr,I0=(e,t,r)=>new wl(e,r).compare(new wl(t,r));var kr=I0;const R0=kr,T0=(e,t,r)=>R0(t,e,r);var O0=T0;const N0=kr,P0=(e,t)=>N0(e,t,!0);var L0=P0;const xl=nr,B0=(e,t,r)=>{const n=new xl(e,r),o=new xl(t,r);return n.compare(o)||n.compareBuild(o)};var Nc=B0;const D0=Nc,F0=(e,t)=>e.sort((r,n)=>D0(r,n,t));var j0=F0;const M0=Nc,U0=(e,t)=>e.sort((r,n)=>M0(n,r,t));var $0=U0;const z0=kr,G0=(e,t,r)=>z0(e,t,r)>0;var Ss=G0;const q0=kr,V0=(e,t,r)=>q0(e,t,r)<0;var Pc=V0;const H0=kr,W0=(e,t,r)=>H0(e,t,r)===0;var rh=W0;const K0=kr,Y0=(e,t,r)=>K0(e,t,r)!==0;var nh=Y0;const Z0=kr,X0=(e,t,r)=>Z0(e,t,r)>=0;var Lc=X0;const Q0=kr,J0=(e,t,r)=>Q0(e,t,r)<=0;var Bc=J0;const ev=rh,tv=nh,rv=Ss,nv=Lc,iv=Pc,ov=Bc,sv=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return ev(e,r,n);case"!=":return tv(e,r,n);case">":return rv(e,r,n);case">=":return nv(e,r,n);case"<":return iv(e,r,n);case"<=":return ov(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var ih=sv;const av=nr,cv=ni,{safeRe:jo,t:Mo}=to,uv=(e,t)=>{if(e instanceof av)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(jo[Mo.COERCE]);else{let n;for(;(n=jo[Mo.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),jo[Mo.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;jo[Mo.COERCERTL].lastIndex=-1}return r===null?null:cv(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var lv=uv,wa,_l;function fv(){return _l||(_l=1,wa=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),wa}var hv=gt;gt.Node=An;gt.create=gt;function gt(e){var t=this;if(t instanceof gt||(t=new gt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}gt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};gt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};gt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};gt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)pv(this,arguments[e]);return this.length};gt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)mv(this,arguments[e]);return this.length};gt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};gt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};gt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};gt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};gt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};gt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};gt.prototype.map=function(e,t){t=t||this;for(var r=new gt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};gt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new gt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};gt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};gt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};gt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};gt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};gt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new gt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};gt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new gt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};gt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var s=[],n=0;o&&n<t;n++)s.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=dv(this,o,r[n]);return s};gt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function dv(e,t,r){var n=t===e.head?new An(r,null,t,e):new An(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function pv(e,t){e.tail=new An(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function mv(e,t){e.head=new An(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function An(e,t,r,n){if(!(this instanceof An))return new An(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{fv()(gt)}catch{}const gv=hv,En=Symbol("max"),Vr=Symbol("length"),Un=Symbol("lengthCalculator"),Di=Symbol("allowStale"),Cn=Symbol("maxAge"),qr=Symbol("dispose"),El=Symbol("noDisposeOnSet"),Vt=Symbol("lruList"),wr=Symbol("cache"),oh=Symbol("updateAgeOnGet"),xa=()=>1;class vv{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[En]=t.max||1/0;const r=t.length||xa;if(this[Un]=typeof r!="function"?xa:r,this[Di]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Cn]=t.maxAge||0,this[qr]=t.dispose,this[El]=t.noDisposeOnSet||!1,this[oh]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[En]=t||1/0,Ri(this)}get max(){return this[En]}set allowStale(t){this[Di]=!!t}get allowStale(){return this[Di]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Cn]=t,Ri(this)}get maxAge(){return this[Cn]}set lengthCalculator(t){typeof t!="function"&&(t=xa),t!==this[Un]&&(this[Un]=t,this[Vr]=0,this[Vt].forEach(r=>{r.length=this[Un](r.value,r.key),this[Vr]+=r.length})),Ri(this)}get lengthCalculator(){return this[Un]}get length(){return this[Vr]}get itemCount(){return this[Vt].length}rforEach(t,r){r=r||this;for(let n=this[Vt].tail;n!==null;){const o=n.prev;Sl(this,t,n,r),n=o}}forEach(t,r){r=r||this;for(let n=this[Vt].head;n!==null;){const o=n.next;Sl(this,t,n,r),n=o}}keys(){return this[Vt].toArray().map(t=>t.key)}values(){return this[Vt].toArray().map(t=>t.value)}reset(){this[qr]&&this[Vt]&&this[Vt].length&&this[Vt].forEach(t=>this[qr](t.key,t.value)),this[wr]=new Map,this[Vt]=new gv,this[Vr]=0}dump(){return this[Vt].map(t=>is(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Vt]}set(t,r,n){if(n=n||this[Cn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const o=n?Date.now():0,s=this[Un](r,t);if(this[wr].has(t)){if(s>this[En])return Wn(this,this[wr].get(t)),!1;const v=this[wr].get(t).value;return this[qr]&&(this[El]||this[qr](t,v.value)),v.now=o,v.maxAge=n,v.value=r,this[Vr]+=s-v.length,v.length=s,this.get(t),Ri(this),!0}const f=new yv(t,r,s,o,n);return f.length>this[En]?(this[qr]&&this[qr](t,r),!1):(this[Vr]+=f.length,this[Vt].unshift(f),this[wr].set(t,this[Vt].head),Ri(this),!0)}has(t){if(!this[wr].has(t))return!1;const r=this[wr].get(t).value;return!is(this,r)}get(t){return _a(this,t,!0)}peek(t){return _a(this,t,!1)}pop(){const t=this[Vt].tail;return t?(Wn(this,t),t.value):null}del(t){Wn(this,this[wr].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const o=t[n],s=o.e||0;if(s===0)this.set(o.k,o.v);else{const f=s-r;f>0&&this.set(o.k,o.v,f)}}}prune(){this[wr].forEach((t,r)=>_a(this,r,!1))}}const _a=(e,t,r)=>{const n=e[wr].get(t);if(n){const o=n.value;if(is(e,o)){if(Wn(e,n),!e[Di])return}else r&&(e[oh]&&(n.value.now=Date.now()),e[Vt].unshiftNode(n));return o.value}},is=(e,t)=>{if(!t||!t.maxAge&&!e[Cn])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Cn]&&r>e[Cn]},Ri=e=>{if(e[Vr]>e[En])for(let t=e[Vt].tail;e[Vr]>e[En]&&t!==null;){const r=t.prev;Wn(e,t),t=r}},Wn=(e,t)=>{if(t){const r=t.value;e[qr]&&e[qr](r.key,r.value),e[Vr]-=r.length,e[wr].delete(r.key),e[Vt].removeNode(t)}};class yv{constructor(t,r,n,o,s){this.key=t,this.value=r,this.length=n,this.now=o,this.maxAge=s||0}}const Sl=(e,t,r,n)=>{let o=r.value;is(e,o)&&(Wn(e,r),e[Di]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};var bv=vv,Ea,Cl;function Ar(){if(Cl)return Ea;Cl=1;class e{constructor(_,S){if(S=n(S),_ instanceof e)return _.loose===!!S.loose&&_.includePrerelease===!!S.includePrerelease?_:new e(_.raw,S);if(_ instanceof o)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=S,this.loose=!!S.loose,this.includePrerelease=!!S.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L)).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(P=>!I(P[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const P of this.set)if(P.length===1&&d(P[0])){this.set=[P];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){const L=((this.options.includePrerelease&&u)|(this.options.loose&&g))+":"+_,P=r.get(L);if(P)return P;const $=this.options.loose,F=$?i[v.HYPHENRANGELOOSE]:i[v.HYPHENRANGE];_=_.replace(F,pe(this.options.includePrerelease)),s("hyphen replace",_),_=_.replace(i[v.COMPARATORTRIM],l),s("comparator trim",_),_=_.replace(i[v.TILDETRIM],a),_=_.replace(i[v.CARETTRIM],y);let Y=_.split(" ").map(Ee=>w(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>ae(Ee,this.options));$&&(Y=Y.filter(Ee=>(s("loose invalid filter",Ee,this.options),!!Ee.match(i[v.COMPARATORLOOSE])))),s("range list",Y);const q=new Map,Z=Y.map(Ee=>new o(Ee,this.options));for(const Ee of Z){if(I(Ee))return[Ee];q.set(Ee.value,Ee)}q.size>1&&q.has("")&&q.delete("");const ye=[...q.values()];return r.set(L,ye),ye}intersects(_,S){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>A(L,S)&&_.set.some(P=>A(P,S)&&L.every($=>P.every(F=>$.intersects(F,S)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new f(_,this.options)}catch{return!1}for(let S=0;S<this.set.length;S++)if(H(this.set[S],_,this.options))return!0;return!1}}Ea=e;const t=bv,r=new t({max:1e3}),n=Oc,o=Cs(),s=Es,f=nr,{safeRe:i,t:v,comparatorTrimReplace:l,tildeTrimReplace:a,caretTrimReplace:y}=to,{FLAG_INCLUDE_PRERELEASE:u,FLAG_LOOSE:g}=_s,I=ee=>ee.value==="<0.0.0-0",d=ee=>ee.value==="",A=(ee,_)=>{let S=!0;const L=ee.slice();let P=L.pop();for(;S&&L.length;)S=L.every($=>P.intersects($,_)),P=L.pop();return S},w=(ee,_)=>(s("comp",ee,_),ee=D(ee,_),s("caret",ee),ee=O(ee,_),s("tildes",ee),ee=M(ee,_),s("xrange",ee),ee=G(ee,_),s("stars",ee),ee),C=ee=>!ee||ee.toLowerCase()==="x"||ee==="*",O=(ee,_)=>ee.trim().split(/\s+/).map(S=>N(S,_)).join(" "),N=(ee,_)=>{const S=_.loose?i[v.TILDELOOSE]:i[v.TILDE];return ee.replace(S,(L,P,$,F,Y)=>{s("tilde",ee,L,P,$,F,Y);let q;return C(P)?q="":C($)?q=`>=${P}.0.0 <${+P+1}.0.0-0`:C(F)?q=`>=${P}.${$}.0 <${P}.${+$+1}.0-0`:Y?(s("replaceTilde pr",Y),q=`>=${P}.${$}.${F}-${Y} <${P}.${+$+1}.0-0`):q=`>=${P}.${$}.${F} <${P}.${+$+1}.0-0`,s("tilde return",q),q})},D=(ee,_)=>ee.trim().split(/\s+/).map(S=>W(S,_)).join(" "),W=(ee,_)=>{s("caret",ee,_);const S=_.loose?i[v.CARETLOOSE]:i[v.CARET],L=_.includePrerelease?"-0":"";return ee.replace(S,(P,$,F,Y,q)=>{s("caret",ee,P,$,F,Y,q);let Z;return C($)?Z="":C(F)?Z=`>=${$}.0.0${L} <${+$+1}.0.0-0`:C(Y)?$==="0"?Z=`>=${$}.${F}.0${L} <${$}.${+F+1}.0-0`:Z=`>=${$}.${F}.0${L} <${+$+1}.0.0-0`:q?(s("replaceCaret pr",q),$==="0"?F==="0"?Z=`>=${$}.${F}.${Y}-${q} <${$}.${F}.${+Y+1}-0`:Z=`>=${$}.${F}.${Y}-${q} <${$}.${+F+1}.0-0`:Z=`>=${$}.${F}.${Y}-${q} <${+$+1}.0.0-0`):(s("no pr"),$==="0"?F==="0"?Z=`>=${$}.${F}.${Y}${L} <${$}.${F}.${+Y+1}-0`:Z=`>=${$}.${F}.${Y}${L} <${$}.${+F+1}.0-0`:Z=`>=${$}.${F}.${Y} <${+$+1}.0.0-0`),s("caret return",Z),Z})},M=(ee,_)=>(s("replaceXRanges",ee,_),ee.split(/\s+/).map(S=>V(S,_)).join(" ")),V=(ee,_)=>{ee=ee.trim();const S=_.loose?i[v.XRANGELOOSE]:i[v.XRANGE];return ee.replace(S,(L,P,$,F,Y,q)=>{s("xRange",ee,L,P,$,F,Y,q);const Z=C($),ye=Z||C(F),Ee=ye||C(Y),Te=Ee;return P==="="&&Te&&(P=""),q=_.includePrerelease?"-0":"",Z?P===">"||P==="<"?L="<0.0.0-0":L="*":P&&Te?(ye&&(F=0),Y=0,P===">"?(P=">=",ye?($=+$+1,F=0,Y=0):(F=+F+1,Y=0)):P==="<="&&(P="<",ye?$=+$+1:F=+F+1),P==="<"&&(q="-0"),L=`${P+$}.${F}.${Y}${q}`):ye?L=`>=${$}.0.0${q} <${+$+1}.0.0-0`:Ee&&(L=`>=${$}.${F}.0${q} <${$}.${+F+1}.0-0`),s("xRange return",L),L})},G=(ee,_)=>(s("replaceStars",ee,_),ee.trim().replace(i[v.STAR],"")),ae=(ee,_)=>(s("replaceGTE0",ee,_),ee.trim().replace(i[_.includePrerelease?v.GTE0PRE:v.GTE0],"")),pe=ee=>(_,S,L,P,$,F,Y,q,Z,ye,Ee,Te,ct)=>(C(L)?S="":C(P)?S=`>=${L}.0.0${ee?"-0":""}`:C($)?S=`>=${L}.${P}.0${ee?"-0":""}`:F?S=`>=${S}`:S=`>=${S}${ee?"-0":""}`,C(Z)?q="":C(ye)?q=`<${+Z+1}.0.0-0`:C(Ee)?q=`<${Z}.${+ye+1}.0-0`:Te?q=`<=${Z}.${ye}.${Ee}-${Te}`:ee?q=`<${Z}.${ye}.${+Ee+1}-0`:q=`<=${q}`,`${S} ${q}`.trim()),H=(ee,_,S)=>{for(let L=0;L<ee.length;L++)if(!ee[L].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(let L=0;L<ee.length;L++)if(s(ee[L].semver),ee[L].semver!==o.ANY&&ee[L].semver.prerelease.length>0){const P=ee[L].semver;if(P.major===_.major&&P.minor===_.minor&&P.patch===_.patch)return!0}return!1}return!0};return Ea}var Sa,kl;function Cs(){if(kl)return Sa;kl=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(a,y){if(y=r(y),a instanceof t){if(a.loose===!!y.loose)return a;a=a.value}a=a.trim().split(/\s+/).join(" "),f("comparator",a,y),this.options=y,this.loose=!!y.loose,this.parse(a),this.semver===e?this.value="":this.value=this.operator+this.semver.version,f("comp",this)}parse(a){const y=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],u=a.match(y);if(!u)throw new TypeError(`Invalid comparator: ${a}`);this.operator=u[1]!==void 0?u[1]:"",this.operator==="="&&(this.operator=""),u[2]?this.semver=new i(u[2],this.options.loose):this.semver=e}toString(){return this.value}test(a){if(f("Comparator.test",a,this.options.loose),this.semver===e||a===e)return!0;if(typeof a=="string")try{a=new i(a,this.options)}catch{return!1}return s(a,this.operator,this.semver,this.options)}intersects(a,y){if(!(a instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new v(a.value,y).test(this.value):a.operator===""?a.value===""?!0:new v(this.value,y).test(a.semver):(y=r(y),y.includePrerelease&&(this.value==="<0.0.0-0"||a.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||s(this.semver,"<",a.semver,y)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||s(this.semver,">",a.semver,y)&&this.operator.startsWith("<")&&a.operator.startsWith(">")))}}Sa=t;const r=Oc,{safeRe:n,t:o}=to,s=ih,f=Es,i=nr,v=Ar();return Sa}const wv=Ar(),xv=(e,t,r)=>{try{t=new wv(t,r)}catch{return!1}return t.test(e)};var ks=xv;const _v=Ar(),Ev=(e,t)=>new _v(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Sv=Ev;const Cv=nr,kv=Ar(),Av=(e,t,r)=>{let n=null,o=null,s=null;try{s=new kv(t,r)}catch{return null}return e.forEach(f=>{s.test(f)&&(!n||o.compare(f)===-1)&&(n=f,o=new Cv(n,r))}),n};var Iv=Av;const Rv=nr,Tv=Ar(),Ov=(e,t,r)=>{let n=null,o=null,s=null;try{s=new Tv(t,r)}catch{return null}return e.forEach(f=>{s.test(f)&&(!n||o.compare(f)===1)&&(n=f,o=new Rv(n,r))}),n};var Nv=Ov;const Ca=nr,Pv=Ar(),Al=Ss,Lv=(e,t)=>{e=new Pv(e,t);let r=new Ca("0.0.0");if(e.test(r)||(r=new Ca("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const o=e.set[n];let s=null;o.forEach(f=>{const i=new Ca(f.semver.version);switch(f.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!s||Al(i,s))&&(s=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),s&&(!r||Al(r,s))&&(r=s)}return r&&e.test(r)?r:null};var Bv=Lv;const Dv=Ar(),Fv=(e,t)=>{try{return new Dv(e,t).range||"*"}catch{return null}};var jv=Fv;const Mv=nr,sh=Cs(),{ANY:Uv}=sh,$v=Ar(),zv=ks,Il=Ss,Rl=Pc,Gv=Bc,qv=Lc,Vv=(e,t,r,n)=>{e=new Mv(e,n),t=new $v(t,n);let o,s,f,i,v;switch(r){case">":o=Il,s=Gv,f=Rl,i=">",v=">=";break;case"<":o=Rl,s=qv,f=Il,i="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zv(e,t,n))return!1;for(let l=0;l<t.set.length;++l){const a=t.set[l];let y=null,u=null;if(a.forEach(g=>{g.semver===Uv&&(g=new sh(">=0.0.0")),y=y||g,u=u||g,o(g.semver,y.semver,n)?y=g:f(g.semver,u.semver,n)&&(u=g)}),y.operator===i||y.operator===v||(!u.operator||u.operator===i)&&s(e,u.semver))return!1;if(u.operator===v&&f(e,u.semver))return!1}return!0};var Dc=Vv;const Hv=Dc,Wv=(e,t,r)=>Hv(e,t,">",r);var Kv=Wv;const Yv=Dc,Zv=(e,t,r)=>Yv(e,t,"<",r);var Xv=Zv;const Tl=Ar(),Qv=(e,t,r)=>(e=new Tl(e,r),t=new Tl(t,r),e.intersects(t,r));var Jv=Qv;const ey=ks,ty=kr;var ry=(e,t,r)=>{const n=[];let o=null,s=null;const f=e.sort((a,y)=>ty(a,y,r));for(const a of f)ey(a,t,r)?(s=a,o||(o=a)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);const i=[];for(const[a,y]of n)a===y?i.push(a):!y&&a===f[0]?i.push("*"):y?a===f[0]?i.push(`<=${y}`):i.push(`${a} - ${y}`):i.push(`>=${a}`);const v=i.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return v.length<l.length?v:t};const Ol=Ar(),Fc=Cs(),{ANY:ka}=Fc,Ti=ks,jc=kr,ny=(e,t,r={})=>{if(e===t)return!0;e=new Ol(e,r),t=new Ol(t,r);let n=!1;e:for(const o of e.set){for(const s of t.set){const f=oy(o,s,r);if(n=n||f!==null,f)continue e}if(n)return!1}return!0},iy=[new Fc(">=0.0.0-0")],Nl=[new Fc(">=0.0.0")],oy=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===ka){if(t.length===1&&t[0].semver===ka)return!0;r.includePrerelease?e=iy:e=Nl}if(t.length===1&&t[0].semver===ka){if(r.includePrerelease)return!0;t=Nl}const n=new Set;let o,s;for(const g of e)g.operator===">"||g.operator===">="?o=Pl(o,g,r):g.operator==="<"||g.operator==="<="?s=Ll(s,g,r):n.add(g.semver);if(n.size>1)return null;let f;if(o&&s){if(f=jc(o.semver,s.semver,r),f>0)return null;if(f===0&&(o.operator!==">="||s.operator!=="<="))return null}for(const g of n){if(o&&!Ti(g,String(o),r)||s&&!Ti(g,String(s),r))return null;for(const I of t)if(!Ti(g,String(I),r))return!1;return!0}let i,v,l,a,y=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,u=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;y&&y.prerelease.length===1&&s.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(const g of t){if(a=a||g.operator===">"||g.operator===">=",l=l||g.operator==="<"||g.operator==="<=",o){if(u&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===u.major&&g.semver.minor===u.minor&&g.semver.patch===u.patch&&(u=!1),g.operator===">"||g.operator===">="){if(i=Pl(o,g,r),i===g&&i!==o)return!1}else if(o.operator===">="&&!Ti(o.semver,String(g),r))return!1}if(s){if(y&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===y.major&&g.semver.minor===y.minor&&g.semver.patch===y.patch&&(y=!1),g.operator==="<"||g.operator==="<="){if(v=Ll(s,g,r),v===g&&v!==s)return!1}else if(s.operator==="<="&&!Ti(s.semver,String(g),r))return!1}if(!g.operator&&(s||o)&&f!==0)return!1}return!(o&&l&&!s&&f!==0||s&&a&&!o&&f!==0||u||y)},Pl=(e,t,r)=>{if(!e)return t;const n=jc(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ll=(e,t,r)=>{if(!e)return t;const n=jc(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var sy=ny;const Aa=to,Bl=_s,ay=nr,Dl=th,cy=ni,uy=c0,ly=f0,fy=d0,hy=m0,dy=y0,py=x0,my=S0,gy=A0,vy=kr,yy=O0,by=L0,wy=Nc,xy=j0,_y=$0,Ey=Ss,Sy=Pc,Cy=rh,ky=nh,Ay=Lc,Iy=Bc,Ry=ih,Ty=lv,Oy=Cs(),Ny=Ar(),Py=ks,Ly=Sv,By=Iv,Dy=Nv,Fy=Bv,jy=jv,My=Dc,Uy=Kv,$y=Xv,zy=Jv,Gy=ry,qy=sy;var Vy={parse:cy,valid:uy,clean:ly,inc:fy,diff:hy,major:dy,minor:py,patch:my,prerelease:gy,compare:vy,rcompare:yy,compareLoose:by,compareBuild:wy,sort:xy,rsort:_y,gt:Ey,lt:Sy,eq:Cy,neq:ky,gte:Ay,lte:Iy,cmp:Ry,coerce:Ty,Comparator:Oy,Range:Ny,satisfies:Py,toComparators:Ly,maxSatisfying:By,minSatisfying:Dy,minVersion:Fy,validRange:jy,outside:My,gtr:Uy,ltr:$y,intersects:zy,simplifyRange:Gy,subset:qy,SemVer:ay,re:Aa.re,src:Aa.src,tokens:Aa.t,SEMVER_SPEC_VERSION:Bl.SEMVER_SPEC_VERSION,RELEASE_TYPES:Bl.RELEASE_TYPES,compareIdentifiers:Dl.compareIdentifiers,rcompareIdentifiers:Dl.rcompareIdentifiers};function Hy(e){try{return decodeURIComponent(escape(atob(e)))}catch{return atob(e)}}function Wy(e){return decodeURIComponent(escape(e))}function Ky(e){return btoa(unescape(encodeURIComponent(e)))}function Yy(e){return unescape(encodeURIComponent(e))}function ah(e){return!e.startsWith("text")&&!e.startsWith("application/json")}function Mc(e,t){return t&&ah(t)?Wy(e):Hy(e)}function Er(e,t){return t&&ah(t)?Yy(e):Ky(e)}function Zy(e,t){return new Set(e.add(t))}function Xy(e,t){return e.delete(t),new Set(e)}let Kn;function Qy(){return Kn||(Kn=new Lf.UAParser),Kn.getOS().name}const Uc=Qy()==="Chromium OS"||at.MODE!=="production"&&new URLSearchParams(window.location.search).has("forceWebSerial");function OS(){return Kn||(Kn=new Lf.UAParser),Kn.getBrowser().name}function ii(){const e=/CrOS/.test(navigator.userAgent),t=window.matchMedia("(display-mode: standalone)").matches;return sessionStorage.getItem("arduino::chrome-app")==="true"||e&&t}const Fi=["filefullname","row","col"],Jy=e=>Fi.every(t=>t in e)&&Object.keys(e).length===Fi.length,Fl=e=>!!(e.name&&e.path),ch=e=>!!(e.name&&e.ino&&Fl(e.ino)&&e.folder&&e.path&&e.types&&(!e.files||e.files&&e.files.every(Fl))),uh=36,e1=(e,t)=>{const r=t.indexOf(e)+e.length,o=t.slice(r,t.length).split("_"),s=o.slice(0,3).join("."),f=o.slice(3,o.length).join(".");return f?`${s}-${f}`:s},t1=e=>new RegExp(`.*?${nm(e)}/(?<${Fi[0]}>.+?.ino):(?<${Fi[1]}>[0-9]+):(?<${Fi[2]}>[0-9]+):.*error:`,"g"),r1=(e,t)=>[...e.matchAll(t1(t))].filter(n=>{const o=n.groups;return o&&Jy(o)}).map(({groups:n})=>n),n1=e=>e.toLowerCase().replace(/[\s-.]+/g,"_")+"_",NS=e=>`:${e.map(n=>{var o;return{key:n.id,value:(o=n.variants.find(s=>s.selected))==null?void 0:o.id}}).map(n=>`${n.key}=${n.value}`).join(",")}`;function lh(e){return e.length>uh}function fh(e){return e.match(/[^a-zA-Z0-9-_]{1}[^a-zA-Z0-9-_.]{0,35}/g)!==null}function PS(e){return e.replace(/[^a-zA-Z0-9-_]{1}[^a-zA-Z0-9-_.]{0,35}/g,"_")}async function LS(){const e=await yt();if(!e)return bt();try{const t=await ym(e);return(t==null?void 0:t.status)==200}catch{return!1}}function i1(e){return e&&e.status==="failed"?e.error||"Unknown error":null}function BS(e,t,r,n,o){const s=/\r\n|\r|\n/;if(o&&!t)return{output:o,errors:[],failed:!0,settled:!0,warnLineStart:1,warnLineEnd:o.split(s).length,outputLineEnd:1};let f=t&&r?r1(t,r):void 0;const i=!!t&&(t.indexOf("error")!==-1||t.indexOf("#error")!==-1),v=!!e&&(e.indexOf("[error]")!==-1||e.indexOf("#error")!==-1),l=e?e.split(s).length:void 0,a=e?1:void 0,y=l,u=l&&t?l+1:t?1:void 0,g=u&&t?u+t.split(s).length:void 0,I=v,d=g!==void 0,A=[e,t].filter(Boolean).join(`

`),w=A.split(s).length;return{output:A,errors:f,failed:i||v,settled:!0,warnLineStart:I?a:u,warnLineEnd:d?g:v?y:void 0,outputLineEnd:w}}async function DS({sketch:e,ota:t=!1,verbose:r=!1,...n},o){const s=await yt();return s?gm({...n,sketch:e,ota:t,verbose:r},s,o):bt()}async function FS(e){const t=await yt();return t?cm({id:e},t):bt()}async function jS(e){const t=await yt();return t?vm({id:e},t):bt()}let vr;function o1(){vr!=null&&vr.lastAbortController&&vr.lastAbortController.abort("User interrupted compilation"),vr=void 0}async function MS(e,t,r,n,o,s,f,i){if(vr){console.error(`A compilation stream is already open for compilation id: ${vr.id}`);return}vr={id:e,lastAbortController:i};try{const v=await yt();if(!v)return vr=void 0,bt();const l=a=>{var g;const y=a.event,u=JSON.parse(a.data);switch(y){case Ii.Stdout:t("out",u.timestamp,u.lines);break;case Ii.Stderr:r("err",u.timestamp,u.lines);break;case Ii.Status:n(u.status);break;case Ii.Progress:o(u.progress);break;case Ii.Result:{const I=u.diagnostics||i1(u);s(I,u.status==="failed"?u.error||"Unknown error":void 0);break}}(g=f.onmessage)==null||g.call(f,a)};i&&(i.signal.onabort=()=>{vr=void 0}),await fm({id:e},{...f,onclose:()=>{var a;vr=void 0,(a=f.onclose)==null||a.call(f)},onmessage:l},v,i);return}catch(v){throw vr=void 0,v}}async function US(e){const t=await yt();return t?await um({id:e},t):bt()}async function $S(e){const{boards:t,...r}=await lm(e);return{...r,boards:Mr.sortBy(t,["name"])}}async function zS(e,t){const r={...t,id:Mr.uniqueId(),isUnknownBoard:!0};if(e.vid.toLocaleLowerCase()==="0x303a"&&e.pid.toLocaleLowerCase()==="0x1001")return r;let n;try{n=t.fqbn===Tc.UNKNOWN_BOARD_FQBN?{id:Mr.uniqueId(),isUnknownBoard:!0}:await im(e)}catch{return r}return{...t,...n}}function GS(e){return om(e)}async function qS({fqbn:e,agentOS:t}){const r=await yt();return r?mm({fqbn:e},{action:"upload",verbose:!0,os:t},r):bt()}async function VS(e){return{...await bm(e),fromParams:JSON.stringify(e)}}async function HS(e){const t=await am(e);let r;if(t.otherVersions){const n=n1(t.name);r=t.otherVersions.map(s=>e1(n,s)).sort((s,f)=>Vy.lt(s,f)?1:-1)}return{...t,examples:t.examples?t.examples.filter(ch):void 0,otherVersions:r}}async function WS(e){return(await sm(e)).examples.filter(ch)}async function KS(){const e=await yt();return e?hm(e):bt()}async function YS({id:e},t){const r=await yt();return r?t?dm({id:e},r):pm({id:e},r):bt()}async function ZS(e,t,r,n){const{data:o,mimetype:s,href:f}=await Bf({path:e});if(typeof o>"u")return Promise.reject(new Error("No data to decode in retrieved example file"));const i=e.substring(e.lastIndexOf(".")+1),v=Mc(o,s),l=n&&v.split(`
`).slice(n.start,n.end+1).join(`
`);return{name:wc(t),fullName:t,extension:i,data:o,content:v,scopedContent:l,mimetype:s,path:e,href:f||"",exampleInoPath:r}}async function XS(e,t){const{data:r,mimetype:n,href:o}=await Bf({path:e});if(typeof r>"u")return Promise.reject(new Error("No data to decode in retrieved library file"));let s;return t.toLocaleLowerCase().indexOf("license")!==-1?s="txt":s=e.substring(e.lastIndexOf(".")+1),{name:wc(t),fullName:t,extension:s,data:r,content:Mc(r,n),mimetype:n,href:o||"",path:e}}var Yr={exports:{}};const s1={},a1=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"})),ro=ap(a1),c1="16.4.7",u1={version:c1};var ji={};const Ya=ro,$c=ro,l1=ro,f1=ro,h1=u1,zc=h1.version,d1=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function p1(e){const t={};let r=e.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=d1.exec(r))!=null;){const o=n[1];let s=n[2]||"";s=s.trim();const f=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),f==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),t[o]=s}return t}function m1(e){const t=dh(e),r=Gt.configDotenv({path:t});if(!r.parsed){const f=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw f.code="MISSING_DATA",f}const n=hh(e).split(","),o=n.length;let s;for(let f=0;f<o;f++)try{const i=n[f].trim(),v=y1(r,i);s=Gt.decrypt(v.ciphertext,v.key);break}catch(i){if(f+1>=o)throw i}return Gt.parse(s)}function g1(e){console.log(`[dotenv@${zc}][INFO] ${e}`)}function v1(e){console.log(`[dotenv@${zc}][WARN] ${e}`)}function os(e){console.log(`[dotenv@${zc}][DEBUG] ${e}`)}function hh(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:ji.DOTENV_KEY&&ji.DOTENV_KEY.length>0?ji.DOTENV_KEY:""}function y1(e,t){let r;try{r=new URL(t)}catch(i){if(i.code==="ERR_INVALID_URL"){const v=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw v.code="INVALID_DOTENV_KEY",v}throw i}const n=r.password;if(!n){const i=new Error("INVALID_DOTENV_KEY: Missing key part");throw i.code="INVALID_DOTENV_KEY",i}const o=r.searchParams.get("environment");if(!o){const i=new Error("INVALID_DOTENV_KEY: Missing environment part");throw i.code="INVALID_DOTENV_KEY",i}const s=`DOTENV_VAULT_${o.toUpperCase()}`,f=e.parsed[s];if(!f){const i=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw i.code="NOT_FOUND_DOTENV_ENVIRONMENT",i}return{ciphertext:f,key:n}}function dh(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const r of e.path)Ya.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=$c.resolve(process.cwd(),".env.vault");return Ya.existsSync(t)?t:null}function jl(e){return e[0]==="~"?$c.join(l1.homedir(),e.slice(1)):e}function b1(e){g1("Loading env from encrypted .env.vault");const t=Gt._parseVault(e);let r=ji;return e&&e.processEnv!=null&&(r=e.processEnv),Gt.populate(r,t,e),{parsed:t}}function w1(e){const t=$c.resolve(process.cwd(),".env");let r="utf8";const n=!!(e&&e.debug);e&&e.encoding?r=e.encoding:n&&os("No encoding is specified. UTF-8 is used by default");let o=[t];if(e&&e.path)if(!Array.isArray(e.path))o=[jl(e.path)];else{o=[];for(const v of e.path)o.push(jl(v))}let s;const f={};for(const v of o)try{const l=Gt.parse(Ya.readFileSync(v,{encoding:r}));Gt.populate(f,l,e)}catch(l){n&&os(`Failed to load ${v} ${l.message}`),s=l}let i=ji;return e&&e.processEnv!=null&&(i=e.processEnv),Gt.populate(i,f,e),s?{parsed:f,error:s}:{parsed:f}}function x1(e){if(hh(e).length===0)return Gt.configDotenv(e);const t=dh(e);return t?Gt._configVault(e):(v1(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),Gt.configDotenv(e))}function _1(e,t){const r=Buffer.from(t.slice(-64),"hex");let n=Buffer.from(e,"base64");const o=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{const f=f1.createDecipheriv("aes-256-gcm",r,o);return f.setAuthTag(s),`${f.update(n)}${f.final()}`}catch(f){const i=f instanceof RangeError,v=f.message==="Invalid key length",l=f.message==="Unsupported state or unable to authenticate data";if(i||v){const a=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw a.code="INVALID_DOTENV_KEY",a}else if(l){const a=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw a.code="DECRYPTION_FAILED",a}else throw f}}function E1(e,t,r={}){const n=!!(r&&r.debug),o=!!(r&&r.override);if(typeof t!="object"){const s=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw s.code="OBJECT_REQUIRED",s}for(const s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(o===!0&&(e[s]=t[s]),n&&os(o===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}const Gt={configDotenv:w1,_configVault:b1,_parseVault:m1,config:x1,decrypt:_1,parse:p1,populate:E1};Yr.exports.configDotenv=Gt.configDotenv;Yr.exports._configVault=Gt._configVault;Yr.exports._parseVault=Gt._parseVault;Yr.exports.config=Gt.config;Yr.exports.decrypt=Gt.decrypt;Yr.exports.parse=Gt.parse;Yr.exports.populate=Gt.populate;Yr.exports=Gt;var S1=Yr.exports;const C1=gs(S1),Gc="arduino_secrets.h",k1=()=>({name:Gc,data:"",content:"",mimetype:"text"});function A1(e,t){for(const r of t){const n=r.value?r.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"'):"";e.content+=`#define ${r.name} "${n}"
`}return e}function ph(e){const t=k1(),r=A1(t,e);return{data:Er(r.content,r.mimetype),name:r.name}}function mh(e,t,r){const n=`#include "${Gc}"
${t}`;return{...e,data:Er(n,r)}}function gh(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=gh(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function I1(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=gh(e))&&(n&&(n+=" "),n+=t);return n}const Ml=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,sr=I1,no=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return sr(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:s}=t,f=Object.keys(o).map(l=>{const a=r==null?void 0:r[l],y=s==null?void 0:s[l];if(a===null)return null;const u=Ml(a)||Ml(y);return o[l][u]}),i=r&&Object.entries(r).reduce((l,a)=>{let[y,u]=a;return u===void 0||(l[y]=u),l},{}),v=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((l,a)=>{let{class:y,className:u,...g}=a;return Object.entries(g).every(I=>{let[d,A]=I;return Array.isArray(A)?A.includes({...s,...i}[d]):{...s,...i}[d]===A})?[...l,y,u]:l},[]);return sr(e,f,v,r==null?void 0:r.class,r==null?void 0:r.className)};var Qt={id:"my-cloud",name:"My Cloud",space:"private",plan_id:"",plan_name:"",roles:[],country:"",type:""},R1={CLOUD_HOME_URL:"https://app.arduino.cc",DIGITAL_STORE_URL:"https://digital-store.arduino.cc",ID_URL:"https://id.arduino.cc",ICON_CDN:"https://wedo-organizations-logo.arduino.cc"},Za=["arduino","create-entry","create-maker","create-maker-plus","cloud-enterprise","cloud-classroom"];function T1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M6.67 26.67c-.74 0-1.36-.26-1.89-.79A2.57 2.57 0 0 1 4 24V5.33c0-.73.26-1.36.78-1.88a2.57 2.57 0 0 1 1.89-.78h18.66c.74 0 1.36.26 1.89.78.52.52.78 1.15.78 1.88v7.57a9.22 9.22 0 0 0-2.67-.8V5.33H6.67v17.14a14.15 14.15 0 0 1 3.78-2.6 12.62 12.62 0 0 1 4.58-1.17 11.78 11.78 0 0 0-.36 2.7 10.04 10.04 0 0 0-5.34 2.27V24h5.74c.15.49.33.96.53 1.4.2.44.44.87.73 1.27H6.67ZM16 16h.33a9.45 9.45 0 0 1 4.14-3.3 4.8 4.8 0 0 0 .2-1.37 4.5 4.5 0 0 0-1.37-3.3A4.5 4.5 0 0 0 16 6.67a4.5 4.5 0 0 0-3.3 1.36 4.5 4.5 0 0 0-1.37 3.3 4.5 4.5 0 0 0 1.37 3.3A4.5 4.5 0 0 0 16 16Zm0-2.67c-.56 0-1.03-.2-1.42-.58a1.93 1.93 0 0 1-.58-1.42c0-.55.2-1.02.58-1.41.4-.4.86-.59 1.42-.59.56 0 1.03.2 1.42.59.39.39.58.86.58 1.41 0 .56-.2 1.03-.58 1.42-.4.39-.86.58-1.42.58ZM22.67 28l-.4-2a5.79 5.79 0 0 1-1.47-.8l-1.93.6-1.34-2.27 1.54-1.33a6.15 6.15 0 0 1 0-1.73l-1.54-1.34 1.34-2.26 1.93.6a5.79 5.79 0 0 1 1.47-.8l.4-2h2.66l.4 2a6.72 6.72 0 0 1 1.47.86l1.93-.66 1.34 2.33-1.54 1.33a5.06 5.06 0 0 1 0 1.67l1.54 1.33-1.34 2.27-1.93-.6a5.79 5.79 0 0 1-1.47.8l-.4 2h-2.66ZM24 24c.73 0 1.36-.26 1.88-.78.53-.53.79-1.15.79-1.89 0-.73-.26-1.36-.79-1.88a2.57 2.57 0 0 0-1.88-.78c-.73 0-1.36.26-1.88.78a2.57 2.57 0 0 0-.79 1.88c0 .74.26 1.36.79 1.89.52.52 1.15.78 1.88.78Z"})})}function O1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"#374146",fillRule:"evenodd",clipRule:"evenodd",d:"m7.42 21 4.3-4.29a1 1 0 0 0 .21-1.09 1 1 0 0 0-1.63-.33l-6 6a1 1 0 0 0 0 1.42l6 6a1 1 0 1 0 1.42-1.42L7.42 23H27a1 1 0 0 0 0-2H7.4Zm20.3-11.7-6-6a1 1 0 0 0-1.42 1.4L24.59 9H5a1 1 0 0 0 0 2h19.58l-4.3 4.28a1 1 0 1 0 1.43 1.42l6-6a1 1 0 0 0 .21-1.09 1 1 0 0 0-.21-.33Z"})})}function N1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M11.9 25.33c-.31 0-.67-.13-.92-.38l-8.31-8.3 1.86-1.82 7.38 7.37L27.47 6.67l1.86 1.85-16.5 16.43c-.25.25-.6.38-.92.38"})})}function P1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M29.33 8v16c0 .73-.26 1.36-.78 1.88-.52.53-1.15.79-1.88.79H5.33c-.73 0-1.36-.27-1.88-.79A2.57 2.57 0 0 1 2.67 24V8c0-.73.26-1.36.78-1.88a2.57 2.57 0 0 1 1.88-.79h21.34c.73 0 1.36.26 1.88.79.52.52.78 1.15.78 1.88Zm-24 2.67h21.34V8H5.33v2.67Zm0 5.33v8h21.34v-8H5.33Z"})})}function L1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",fill:"none",...e,children:X.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.7 5.3 8 8c.2.2.3.4.3.7v12c0 .6-.4 1-1 1H8a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v1h14V15h-7a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V7H8a1 1 0 0 1-1-1c0-.6.4-1 1-1h8c.3 0 .5.1.7.3Zm.3 3.1V13h4.6L17 8.4ZM12 21h8a1 1 0 1 0 0-2h-8a1 1 0 1 0 0 2Zm-4-2a1 1 0 0 1-1-1v-2a1 1 0 1 1 2 0v2c0 .6-.4 1-1 1Zm-1-7a1 1 0 1 0 2 0v-2a1 1 0 1 0-2 0v2Z",clipRule:"evenodd"})})}function B1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"#374146",d:"M6.67 28c-.74 0-1.36-.26-1.89-.78A2.57 2.57 0 0 1 4 25.33V6.67c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 6.67 4H16v2.67H6.67v18.66H16V28H6.67Zm14.66-5.33-1.83-1.94 3.4-3.4H12v-2.66h10.9l-3.4-3.4 1.83-1.94L28 16l-6.67 6.67Z"})})}var Ul={label:"Plan Usage",href:"/plan-usage",icon:yp,allowed:{space:["edu","pro","private"],minor:!1}},D1={label:"Space Settings",href:"/settings",icon:vp,allowed:{space:["edu","pro"],minor:!1}},F1=[[{label:"Home",href:"/",icon:cp,allowed:{space:["edu","pro","private"],minor:!0}}],[{label:"Sketches",href:"/sketches",icon:up,allowed:{space:["edu","pro","private"],minor:!0}}],[{label:"Devices",href:"/devices",icon:lp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Things",href:"/things",icon:fp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Dashboards",href:"/dashboards",icon:hp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Triggers",href:"/triggers",icon:dp,requiresPaidPlan:Za.filter(e=>e!=="create-entry"),allowed:{space:["edu","pro","private"],minor:!1}}],[{label:"Templates",href:"/templates",icon:L1,allowed:{space:["edu","pro","private"],minor:!1},extra:()=>window.localStorage.getItem("cs-link-templates")===null?X.jsx("span",{className:"rounded bg-teal-0/30 px-2 font-roboto text-xx-small font-bold text-teal-3",children:"NEW"}):null,onClickEmit:()=>window.localStorage.setItem("cs-link-templates","true")}],[{label:"Resources",href:"/resources",icon:pp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Courses",href:"/courses",icon:mp,allowed:{space:["edu","private"],minor:!0}}],[{label:"Integrations",href:"/integrations",icon:gp,allowed:{space:["edu","pro","private"],minor:!1}}],[D1,{...Ul,allowed:{...Ul.allowed,space:["private"]}}]],Zo={linkGroup:F1},j1={enabled:!0,cacheTime:0,initialData:void 0},Ia=new Map,Ra=(e,t,r)=>{const n=Oe.useRef(),[o,s]=Oe.useState("stale"),[f,i]=Oe.useState(r==null?void 0:r.initialData),v=Oe.useMemo(()=>typeof e=="string"?e:e.join("/"),[e]),{enabled:l,cacheTime:a}={...j1,...r};return n.current=t,Oe.useEffect(()=>{var y;l&&(a===1/0&&Ia.has(v)?i(Ia.get(v)):(s("loading"),(y=n.current)==null||y.call(n).then(u=>{i(u),s("done"),Ia.set(v,u)}).catch(()=>s("error"))))},[v,l,a]),{loading:o==="loading",error:o==="error",data:f}},vh=class Xa{constructor(t,r){this.domain=t??"arduino.cc",this.prefix=r??"arduino",this._listeners=[]}static isSSR(){return typeof document>"u"||typeof window>"u"}get(t){if(!this.prefix||Xa.isSSR())return"";const r=document.cookie.match(new RegExp(`(?:^|; )${`${this.prefix}::${t}`.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return r?decodeURIComponent(r[1]):""}set(t,r,n){if(!(!this.prefix||Xa.isSSR())&&(document.cookie=`${this.prefix}::${r}=${encodeURIComponent(t)};max-age=31622400;Domain=${this.domain}; Path=/; SameSite=Strict`,!n))for(const o of this._listeners)o(t,r)}getSpace(){return this.get("space-id")}setSpace(t,r){this.set(t,"space-id",r)}getHiddenlogo(){return this.get("hidden-logo")}setHiddenlogo(t){this.set(t.filter(r=>r!=="").join(","),"hidden-logo")}subscribe(t){this._listeners.push(t)}unsubscribe(t){this._listeners=this._listeners.filter(r=>r!==t)}};function M1(e){if(!e)throw new Error("CloudSidebar: No token provided.");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json;charset=UTF-8"}}async function $l(e,t){const r=await fetch(e,{...t});if(!r.ok){const n=await r.json();return Promise.reject(n)}return r.json().then(n=>n)}function Zn(e){return e.replace(/\/+$/,"")}function yh(e,t){return e?e.includes(t)||e.includes("data:image")?e:`${Zn(t)}/${e}`:""}function zl(e,t,r=!1){return e.map(n=>n.filter(({allowed:s})=>!s.minor&&r?!1:s.space.includes(t.id!==Qt.id?t.space:"private"))).filter(n=>n.length>0)}function U1(e,t,r){if(!t||!r)return e;for(const[n,o]of Object.entries(t)){const s=o.linkGroup.flat();if(s.length>1&&s.filter(f=>r===f.href).length>0||s.length===1&&r===s[0].href&&e.linkGroup.flat().filter(f=>r===f.href).length===0)return{...t[n],isSubNav:!0}}return{...e,isSubNav:!1}}function bh(){return typeof window>"u"||typeof document>"u"?!0:localStorage.getItem("create.installed-from-store")==="true"}var wh={page:{id:"",name:"",url:"",updated_at:""},status:{indicator:"",description:"Loading..."}},xh=Oe.createContext({spaces:[],env:R1,selectedSpace:Qt,plans:[],storage:new vh,cloudStatus:{data:wh}}),Zr=()=>{const e=Oe.useContext(xh);if(!e)throw new Error("useCloudContext must be used within a CloudContextProvider");return e};function $1(e){var t,r;const{children:n,spaces:o,onSpaceChange:s,env:f,privateSpacePlans:i,api:v,storage:l}=e,{client:a,isAuthenticated:y}=Cr(),u=typeof window>"u"||typeof document>"u"?void 0:a.getCustomization(),g=Oe.useCallback(async N=>$l(N,{headers:M1(await a.getTokenSilently())}),[a]),I=Ra("spaces",()=>g(`${v==null?void 0:v.baseurl}/classroom/v1/organizations`),{enabled:y&&!!v,cacheTime:5*60*1e3}),d=Ra("privatePlans",()=>g(`${v==null?void 0:v.baseurl}/restrictions/v1/recap/me`),{enabled:y&&!!v,cacheTime:5*60*1e3}),A=Ra("cloudStatus",()=>$l("https://status.arduino.cc/api/v2/status.json"),{cacheTime:5*60*1e3,initialData:wh}),w=Oe.useMemo(()=>{var N;const D=o||((N=I.data)==null?void 0:N.organizations);if(D){if(u){const W=D.find(M=>M.id===u.organization_id);return W?[W]:[Qt]}return D.includes(Qt)?D:[Qt,...D]}},[o,(t=I.data)==null?void 0:t.organizations,u]),C=Oe.useSyncExternalStore(N=>{const D=(W,M)=>{if(M!=="space-id"||!W)return;const V=(w==null?void 0:w.find(G=>G.id===W))||Qt;s==null||s(V),N()};return l.subscribe(D),()=>{l.unsubscribe(D)}},()=>{const N=l.getSpace();if(!N||N!==Qt.id&&w&&w.length>1&&!w.some(D=>D.id===N))return l.setSpace(Qt.id,!0),Qt;if(u){const D=w==null?void 0:w.find(W=>W.id===u.organization_id);if(D&&N!==D.id)return l.setSpace(D.id,!0),D}return(w==null?void 0:w.find(D=>D.id===N))||Qt},()=>Qt);Oe.useEffect(()=>{const N=document.createElement("script");return N.src="https://status.arduino.cc/embed/script.js",N.async=!0,document.body.appendChild(N),()=>{document.body.removeChild(N)}},[]);const O=Oe.useMemo(()=>{var N;return{spaces:w,selectedSpace:C,env:f,cloudStatus:A,plans:C.space==="edu"||C.space==="pro"?[C.plan_name]:i||((N=d.data)==null?void 0:N.plans)||[],storage:l}},[i,A,f,(r=d.data)==null?void 0:r.plans,C,w,l]);return X.jsx(xh.Provider,{value:O,children:n})}function z1(e){const{storage:t,selectedSpace:r}=Zr(),{client:n}=Cr(),o=typeof window>"u"||typeof document>"u"?void 0:n.getCustomization(),s=Oe.useSyncExternalStore(i=>{const v=(l,a)=>a==="hidden-logo"&&i();return t.subscribe(v),()=>{t.unsubscribe(v)}},()=>t.getHiddenlogo(),()=>"");return Oe.useMemo(()=>s.split(",").filter(i=>i!=="").includes(r.id),[s,r.id])?null:X.jsxs("div",{className:"mx-auto my-3.5 flex flex-col items-center gap-2 text-center text-fog",children:[o?X.jsx("span",{className:"font-opensans text-xx-small text-smoke",children:"Powered by"}):void 0,X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"53",height:"38",fill:"none",...e,children:X.jsxs("g",{fill:"currentColor",children:[X.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.5 13.572C52.5 6.574 46.744.89 39.69.89c-.65 0-1.318.037-1.967.149-5.485.796-9.166 4.85-11.223 7.961-2.057-3.11-5.738-7.165-11.223-7.961a14.061 14.061 0 0 0-1.966-.149C6.237.89.5 6.574.5 13.572c0 7 5.756 12.683 12.81 12.683.65 0 1.318-.037 1.985-.148 5.485-.814 9.166-4.87 11.223-7.98 2.057 3.11 5.738 7.166 11.223 7.98.65.093 1.317.148 1.984.148 7.02 0 12.775-5.684 12.775-12.683Zm-37.854 8.091a8.31 8.31 0 0 1-1.354.093c-4.655 0-8.426-3.684-8.426-8.184 0-4.517 3.79-8.183 8.444-8.183.452 0 .903.037 1.354.092 5.178.76 8.336 6 9.418 8.091-1.1 2.111-4.276 7.332-9.436 8.091Zm23.69-16.182c-5.178.76-8.354 6-9.418 8.091 1.064 2.093 4.24 7.332 9.418 8.091.451.056.902.093 1.354.093 4.637 0 8.426-3.666 8.426-8.184 0-4.499-3.771-8.183-8.426-8.183-.452 0-.903.037-1.354.092ZM9.697 12.214h7.748v2.438H9.697v-2.438Zm33.568 2.456h-2.613v2.563h-2.504V14.67h-2.613v-2.456h2.613V9.65h2.504v2.563h2.613v2.456Zm5.938-12.374c0-.77.627-1.407 1.389-1.407a1.41 1.41 0 0 1 1.41 1.407c0 .813-.626 1.406-1.41 1.406a1.406 1.406 0 0 1-1.39-1.406Zm1.408-.88h-.694v1.759h.448V2.58h.246l.247.594h.493l-.336-.66c.224-.087.336-.263.336-.505 0-.373-.202-.593-.74-.593Zm1.144.88c0-.638-.493-1.187-1.165-1.187s-1.143.484-1.143 1.187c0 .725.538 1.186 1.143 1.186.672 0 1.165-.461 1.165-1.186Zm-.875-.308c0 .22-.112.286-.313.286l-.224.022v-.572h.224c.246 0 .313.066.313.264Z"}),X.jsx("path",{d:"m.993 37.79 2.303-7.535h2.093l2.407 7.536H5.808l-.419-1.465H3.296l-.419 1.465H.993Zm3.35-5.65-.733 2.72h1.465l-.733-2.72ZM8.947 30.36h3.036c2.093 0 2.825 1.047 2.825 2.512 0 1.046-.418 1.779-1.256 2.197l1.466 2.722H12.82l-1.047-2.303h-.942v2.407H8.947V30.36Zm3.977 2.512c0-.628-.209-1.047-1.15-1.047h-.943v2.093h.942c.733.105 1.151-.209 1.151-1.046ZM16.378 30.36h2.407c2.826 0 3.768 1.36 3.768 3.663 0 1.78-.523 3.768-3.768 3.768h-2.512V30.36h.105Zm1.884 1.465v4.396h.733c1.57 0 1.674-.942 1.674-2.198 0-1.465-.105-2.198-1.78-2.198h-.627ZM27.995 30.36h1.78v4.919c0 2.198-1.675 2.721-3.036 2.721-1.256 0-2.93-.419-2.93-2.721v-4.92h1.884v4.606c0 1.256.418 1.57 1.15 1.57.838 0 1.152-.419 1.152-1.57V30.36ZM31.449 36.325h1.988V31.93h-1.883v-1.57h5.756v1.57H35.32v4.395h1.989v1.57h-5.757v-1.57h-.104ZM40.45 37.79h-1.78v-7.43h2.093l2.407 4.5v-4.5h1.78v7.535h-1.884l-2.512-4.814-.105 4.71ZM52.485 34.128c0 2.197-.837 3.872-3.244 3.872-2.198 0-3.14-1.256-3.14-3.768 0-2.302.837-3.977 3.14-3.977 2.198 0 3.244.942 3.244 3.873Zm-1.988 0c0-1.884-.105-2.303-1.256-2.303-.942-.104-1.151.524-1.151 2.407 0 1.465.104 2.303 1.15 2.303 1.152-.105 1.257-.733 1.257-2.407Z"})]})})]})}function G1(e){const{children:t,className:r,...n}=e;return X.jsx("div",{className:sr("flex items-center justify-center",r),...n,children:t})}var _h=Oe.forwardRef(({children:e,className:t,...r},n)=>{const o=typeof e=="string"?"span":kp;return X.jsx(o,{className:sr("whitespace-nowrap rounded px-1 text-x-small text-asbestos ","no-underline duration-150 ease-in-out hover:bg-clouds hover:text-jet",t),...r,ref:n,children:e})});_h.displayName="BreadcrumbsItem";function q1(){return X.jsx(Ap,{className:"text-medium text-concrete"})}function V1(e){const{triggerContent:t,hideCaret:r,triggerIcon:n,openOnHover:o,children:s,className:f,...i}=e,[v,l]=Oe.useState(!1);return X.jsx("div",{className:sr("flex items-center justify-center",f),...i,children:X.jsxs(Ef,{modal:!1,open:v,onOpenChange:l,children:[X.jsx(Sf,{asChild:!0,onMouseEnter:()=>{o&&!v&&l(!0)},children:X.jsxs("button",{className:"group flex cursor-pointer items-center rounded-md border-0 bg-transparent px-2 font-opensans text-x-small font-bold text-jet transition-colors duration-150 hover:bg-teal-5/10 hover:text-teal-3 data-[state=open]:bg-teal-5/10 data-[state=open]:text-teal-3",children:[X.jsxs("span",{className:"flex items-center justify-center gap-1",children:[n,X.jsx("span",{className:"max-w-40 truncate",children:t})]}),r?null:X.jsx(Ip,{className:"text-medium text-asbestos transition-transform duration-300 group-hover:text-teal-3 group-data-[state=open]:rotate-180 group-data-[state=open]:text-teal-3"})]})}),X.jsx(Cf,{children:X.jsx(kf,{className:"w-64 rounded bg-white py-0.5 shadow-deep data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in",align:"start",sideOffset:5,side:"bottom",children:s})})]})})}var br=Oe.forwardRef((e,t)=>{const{className:r,children:n,...o}=e;return X.jsx(Vn,{className:sr("box-border inline-flex w-full cursor-pointer items-center gap-4 px-4 py-2 font-opensans text-xx-small text-jet outline-none transition-colors duration-[250ms] ease-in-out data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",r),...o,ref:t,children:n})});br.displayName="BreadcrumbsDropdownItem";function H1(e){const{children:t,container:r="cloud-header-portal",rightPadding:n=!0,className:o,...s}=e,[f,i]=Oe.useState(!1);if(Oe.useEffect(()=>{i(!0)},[]),!f)return null;const v=document.getElementById(r);return f&&!v&&console.warn(`HeaderPortal: Could not find ${r} element. Is the CloudHeader component correctly mounted?`),v?Cp.createPortal(X.jsx("div",{className:sr("flex size-full items-center justify-between gap-2 pl-5",n?"pr-[60px]":"",o),...s,children:t}),v):null}function W1(e){const{children:t,className:r,...n}=e;return X.jsx("div",{className:sr("scrollable mt-5 flex size-full flex-1 flex-col overflow-auto from-feather",r),...n,children:t})}var K1=no("mx-4 my-2 flex animate-fade-in flex-col items-center gap-4 rounded-md p-4",{variants:{intent:{normal:"bg-clouds",edu:"border border-solid border-edu bg-[#F39C12]/10",expired:"border border-solid border-warning bg-[#FCFEEE]"}},defaultVariants:{intent:"normal"}});function Y1(e){var t;const{callbacks:r,...n}=e,{spaces:o,selectedSpace:s,plans:f,env:i}=Zr(),{user:v,isAuthenticated:l,client:a}=Cr(),y=typeof window>"u"||typeof document>"u"?void 0:a.getCustomization(),u=bh(),g=Oe.useMemo(()=>({"free-plan":{intent:"normal",title:"Arduino Cloud",description:"Ready to go beyond this free plan? Upgrade for premium features.",button:{label:"SEE PLANS",onClick:()=>window.open("https://cloud.arduino.cc/plans/","_blank")}},minor:{intent:"edu",title:"Hey Kid!",description:"Join your School in Arduino Cloud and enjoy your experiments!",button:{label:"JOIN SHARED SPACE",onClick:()=>window.open(`${Zn(i.CLOUD_HOME_URL)}/home/?join-space}`,"_blank")}}}),[i]),I=Oe.useMemo(()=>{if(!(!v||f===void 0||!o)){if(v["http://arduino.cc/is_minor"]&&(o==null?void 0:o.length)===1)return"minor";if(!v["http://arduino.cc/is_minor"])return s.id===Qt.id?f.some(d=>Za.includes(d))?void 0:"free-plan":s.space==="edu"&&s.roles.includes("role:edu-admin")?f.some(d=>Za.includes(d))?void 0:"free-plan":void 0}},[f,s,o,v]);return!I||!l||y||I==="free-plan"&&u?null:X.jsxs("div",{className:K1({intent:g[I].intent}),...n,children:[X.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 text-jet",children:[g[I].icon,X.jsx("span",{className:"text-x-small font-bold",children:g[I].title}),X.jsx("span",{className:"text-center text-xx-small",children:g[I].description})]}),X.jsx("button",{className:"cursor-pointer rounded-full border-0 bg-teal-3 px-4 py-0.5 font-opensans text-x-small font-bold uppercase text-white",onClick:(t=r==null?void 0:r[I])!=null?t:g[I].button.onClick,children:g[I].button.label})]})}function Eh(e){return e.condition?e.wrapper(e.children):e.children}var ss=Oe.forwardRef((e,t)=>{const{as:r="a",hrefProp:n="href",onClick:o,className:s,...f}=e;return X.jsx(r,{ref:t,[n]:e.href,onClick:o,className:s,...f})});ss.displayName="PolymorphicLink";function Z1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M6.67 28c-.74 0-1.36-.26-1.89-.78A2.57 2.57 0 0 1 4 25.33V6.67c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 6.67 4h18.66c.74 0 1.36.26 1.89.78.52.53.78 1.15.78 1.89v18.66c0 .74-.26 1.36-.78 1.89-.53.52-1.15.78-1.89.78H6.67Zm4-2.67V6.67h-4v18.66h4Zm2.66 0h12V6.67h-12v18.66Z"})})}var Sh=Oe.createContext({navigation:Zo,subNavigation:{}});function Ch(){const e=Oe.useContext(Sh);if(!e)throw new Error("useSidebarContext must be used within a SidebarRoot");return e}function X1(e){const{className:t,children:r,asDialog:n,navigation:o=Zo,linkElement:s,path:f,subNavigation:i,...v}=e,{selectedSpace:l}=Zr(),{user:a,client:y}=Cr(),u=typeof window>"u"||typeof document>"u"?void 0:y.getCustomization(),g=a["http://arduino.cc/is_minor"]||!1,I=Oe.useMemo(()=>({...o,linkGroup:zl(o.linkGroup,l,g)}),[o,l,g]),d=Oe.useMemo(()=>i?Object.fromEntries(Object.entries(i).map(([w,C])=>[w,{...C,linkGroup:zl(C.linkGroup,l,g)}])):void 0,[i,l,g]),A=Oe.useMemo(()=>({linkElement:s,subNavigation:i,asDialog:n,navigation:l.id===Qt.id&&u?{...Zo,linkGroup:[[Zo.linkGroup[0][0]]],isSubNav:!1,path:f}:{...U1(I,d,f),path:f}}),[n,I,d,u,s,f,l.id,i]);return X.jsx(Sh.Provider,{value:A,children:n?X.jsx(Eh,{condition:n==="header",wrapper:w=>X.jsxs("nav",{className:"fixed z-[1] box-border flex h-[60px] w-full items-center justify-between border-0 border-b border-solid border-fog bg-white font-opensans",children:[X.jsx(Q1,{}),w,X.jsx("div",{id:"cloud-header-portal",className:"contents"})]}),children:X.jsxs(yf,{children:[X.jsx(bf,{asChild:!0,children:n==="header"?X.jsx("button",{className:"flex h-full cursor-pointer items-center justify-center border-0 bg-transparent px-3.5 hover:bg-clouds",id:"cs-sidebarroot-trigger",children:X.jsx(Z1,{className:"text-[32px] text-teal-2"})}):n.trigger}),X.jsxs(wf,{children:[X.jsx(xf,{className:"fixed inset-0 z-auto bg-black/50 data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in"}),X.jsx(_f,{asChild:!0,children:X.jsx("div",{className:sr("fixed inset-0 z-auto m-5 w-[270px] overflow-auto border-0 border-r border-solid border-fog bg-feather font-opensans data-[state=closed]:animate-sidebar-out data-[state=open]:animate-sidebar-in",t),...v,children:X.jsx("nav",{className:"flex h-full flex-col justify-between",children:r})})})]})]})}):X.jsx("div",{className:sr("fixed w-[var(--cloud-sidebar-width)] border-0 border-r border-solid border-fog bg-feather font-opensans",t),...v,children:X.jsx("nav",{className:"flex h-screen flex-col justify-between",children:r})})})}function Q1(){const{selectedSpace:e,env:t}=Zr(),{client:r}=Cr(),n=typeof window>"u"||typeof document>"u"?void 0:r.getCustomization(),o=n?n.organization_second_logo:e.second_logo;return n&&!n.organization_second_logo?X.jsx("span",{className:"absolute inset-0 m-auto flex h-[30px] justify-center text-small font-bold text-jet opacity-0 transition-opacity duration-300 xl:opacity-100",children:n.organization_name}):o?X.jsx("img",{className:"absolute inset-0 m-auto aspect-[3/1] h-[30px] object-contain text-5xl text-[#BDC7C7] opacity-0 transition-opacity duration-300 xl:opacity-100",src:yh(o,t.ICON_CDN)}):X.jsx(Rp,{className:"absolute inset-0 m-auto h-full text-5xl text-[#BDC7C7] opacity-0 transition-opacity duration-300 xl:opacity-100"})}function J1(){const{spaces:e,plans:t,env:r}=Zr(),{navigation:n,asDialog:o,linkElement:s}=Ch(),{isAuthenticated:f}=Cr();return!f||!e?X.jsx("div",{className:"size-full flex-1",children:n.linkGroup.map((i,v,{length:l})=>X.jsxs("div",{children:[X.jsx("ul",{className:"my-1 list-none space-y-2 p-0",children:i.map(({href:a})=>X.jsx("li",{className:"px-2",children:X.jsxs("div",{className:"box-border inline-flex w-full items-center gap-4 px-4 py-2",children:[X.jsx("div",{className:"size-5 animate-pulse rounded-full bg-fog"}),X.jsx("div",{className:"h-6 w-24 animate-pulse rounded-md bg-fog"})]})},a))}),l!==v+1?X.jsx(ma,{className:"h-px w-full bg-fog"}):null]},`linkgroup-${v}`))}):X.jsxs("div",{className:"w-full flex-1",id:"cs-sidebarnavigation",children:[n.name?X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"flex items-center justify-between px-4 py-1.5",children:X.jsx("span",{className:"text-xx-small font-bold uppercase text-jet",children:n.name})}),X.jsx(ma,{className:"h-px w-full bg-fog"})]}):null,n.linkGroup.map((i,v,{length:l})=>X.jsxs("div",{children:[X.jsx("ul",{className:"my-1 list-none space-y-2 p-0",children:i.map(({href:a,label:y,icon:u,requiresPaidPlan:g,onClickEmit:I,extra:d})=>{const A=s?n.path===`${Zn(r.CLOUD_HOME_URL)}${a}`:!1,w=()=>g?!t.filter(Boolean).some(C=>g.includes(C)):!1;return X.jsx("li",{className:"px-2",children:X.jsx(Eh,{condition:o!==void 0,wrapper:C=>X.jsx(vc,{asChild:!0,children:C}),children:X.jsxs(ss,{as:s==null?void 0:s.as,hrefProp:s==null?void 0:s.hrefProp,className:"box-border inline-flex w-full items-center justify-between rounded px-4 py-2 text-x-small text-jet no-underline hover:bg-teal-5/5 focus-visible:bg-teal-5/5 data-[active=true]:bg-cloud-selected data-[active=true]:font-bold data-[active=true]:text-teal-3","data-active":A,onClick:C=>I==null?void 0:I(C),ref:C=>{A&&(C==null||C.scrollIntoView({behavior:"smooth",block:"nearest"}))},href:s?a:`${Zn(r.CLOUD_HOME_URL)}${a}`,children:[X.jsxs("div",{className:"flex w-full items-center gap-4",children:[X.jsx(u,{className:"text-medium"}),X.jsx("span",{children:y}),d==null?void 0:d()]}),w()?X.jsx(Sp,{className:"text-medium"}):null]})})},a)})}),l!==v+1?X.jsx(ma,{className:"h-px w-full bg-fog"}):null]},`linkgroup-${v}`))]})}function eb(e){return e.condition?e.children:null}function kh(e){const{children:t,trigger:r,title:n,padded:o=!0,contentProps:s,...f}=e;return X.jsxs(yf,{...f,children:[X.jsx(bf,{asChild:!0,children:r}),X.jsxs(wf,{children:[X.jsx(xf,{className:"fixed inset-0 z-auto bg-black/80 data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in"}),X.jsx(_f,{className:"fixed left-[50%] top-[50%] flex max-h-[90vh] w-[90%] translate-x-[-50%] translate-y-[-50%] transition-all duration-500 data-[state=closed]:animate-modal-out data-[state=open]:animate-modal-in md:w-[650px]",...s,children:X.jsxs("div",{className:"relative z-auto w-full overflow-auto rounded bg-white shadow-deep",children:[X.jsxs("div",{className:"sticky top-0 inline-flex h-[54px] w-full border-spacing-1 items-center justify-between border-0 border-b border-solid border-smoke bg-white",children:[X.jsx("div",{className:"w-[50px]"}),X.jsx(Pp,{className:"font-opensans text-small font-normal",children:n}),X.jsx(Lp,{className:"flex w-[50px] cursor-pointer items-center justify-center border-0 bg-transparent",children:X.jsx(Bp,{className:"size-6"})})]}),X.jsx("div",{className:sr("scrollable space-y-7 overflow-auto overscroll-y-none from-white",o&&"p-9 md:px-[86px]"),children:t})]})})]})]})}var tb='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="none"><g clip-path="url(%23a)"><mask id="b" width="60" height="60" x="0" y="0" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="%23fff" d="M30 60a30 30 0 1 0 0-60 30 30 0 0 0 0 60Z"/></mask><g mask="url(%23b)"><path fill="%230A7891" d="M30 60a30 30 0 1 0 0-60 30 30 0 0 0 0 60Z"/><path fill="%2399E9E7" d="M49.06 59.14 30 65.39l-19.06-6.25a19.07 19.07 0 0 1 38.12 0Z"/><path fill="%2369C3CA" d="M30.16 16.88h-.32a4.24 4.24 0 0 0-4.23 4.23v11.84c0 2.35 1.9 4.24 4.23 4.24h.32c2.34 0 4.23-1.9 4.23-4.24V21.11c0-2.34-1.9-4.23-4.23-4.23Z"/></g></g><defs><clipPath id="a"><path fill="%23fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>',rb=no("block shrink-0 select-none overflow-hidden align-middle",{variants:{size:{sm:"size-7",lg:"size-9",xl:"size-10"}},defaultVariants:{size:"sm"}}),nb=no("m-0 box-border size-full rounded-full border-2 border-solid object-cover p-px",{variants:{spaceType:{edu:"border-edu",pro:"border-jet",private:"border-teal-1"}},defaultVariants:{spaceType:"private"}});function Qa(e){const{name:t,spaceType:r,logo:n,size:o}=e,{env:s}=Zr(),{user:f}=Cr(),i=f["http://arduino.cc/is_minor"]?tb:f.picture;return X.jsxs(Tp,{className:rb({size:o}),children:[X.jsx(Op,{className:nb({spaceType:r}),src:r?yh(n,s.ICON_CDN):i,alt:t}),X.jsx(Np,{className:"flex size-full items-center justify-center rounded-full bg-teal-2 font-opensans text-x-small font-bold text-white data-[spacetype=edu]:bg-edu data-[spacetype=pro]:bg-jet",delayMs:0,"data-spacetype":r,children:ib(r!=="private"?t:f.name||f["http://arduino.cc/username"]||f.email||t)})]})}function ib(e){try{const t=e.replace(/[^a-zA-Z0-9 ]/g,"").split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.filter(r=>r.length>0).slice(0,2).map(r=>r[0].toUpperCase()).join("")||""}catch{return""}}var ob=no("cursor-pointer space-y-2 rounded-lg border-0 bg-transparent p-4 font-opensans outline outline-1 outline-smoke",{variants:{spaceType:{private:"hover:bg-teal-5/10 focus-visible:bg-teal-1/10 data-[selected]:bg-teal-5/10 data-[selected]:outline-teal-2",edu:"hover:bg-edu/10 focus-visible:bg-edu/10 data-[selected]:bg-edu/10 data-[selected]:outline-edu",pro:"hover:bg-jet/10 focus-visible:bg-jet/10 data-[selected]:bg-jet/10 data-[selected]:outline-jet"}},defaultVariants:{spaceType:"private"}}),sb={private:"My Cloud",edu:"School Space",pro:"Pro Space"};function Uo(e){const{children:t,condition:r=!0,...n}=e;return r?X.jsx(Vn,{className:"box-border inline-flex h-11 w-full cursor-pointer items-center gap-4 px-4 py-2.5 font-opensans text-xx-small text-jet outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",...n,children:t}):null}function ab(e){const{onSelect:t}=e,{spaces:r,selectedSpace:n,storage:o}=Zr();return X.jsxs(kh,{title:"Switch space",contentProps:{onCloseAutoFocus:()=>t()},trigger:X.jsxs(Vn,{className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-3xl border-0 bg-basegray py-1.5 font-opensans text-jet transition-colors duration-200 hover:bg-clouds hover:outline-none",onSelect:s=>{s.preventDefault()},children:[X.jsx(O1,{className:"text-[21px]"}),X.jsx("span",{className:"text-xx-small",children:"Switch space"})]}),children:[X.jsxs("div",{className:"flex flex-col justify-center gap-4 font-opensans",children:[X.jsx("span",{className:"text-medium font-bold text-jet",children:"Arduino Shared Space"}),X.jsx("span",{className:"text-x-small",children:"Select one and start to Collaborate on projects with shared devices and dashboards."})]}),X.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:r==null?void 0:r.map(s=>X.jsx(vc,{asChild:!0,children:X.jsxs("button",{onClick:()=>{o.setSpace(s.id)},className:ob({spaceType:s.space}),"data-selected":(n==null?void 0:n.id)===s.id?!0:void 0,children:[X.jsx(Qa,{name:s.name,spaceType:s.space,logo:s.logo,size:"xl"}),X.jsxs("div",{className:"block overflow-hidden text-start",children:[X.jsx("div",{title:s.name,className:"truncate text-x-small font-bold text-onyx",children:s.name}),X.jsx("span",{className:"text-xx-small text-jet",children:sb[s.space]||"Private Space"})]})]})},s.id))})]})}function Ta(e){const{user:t}=Cr();return t["http://arduino.cc/is_minor"]?X.jsx(kh,{title:e.title,padded:!1,trigger:X.jsx("button",{className:"cursor-pointer border-none bg-inherit p-0 font-opensans text-inherit",style:{textDecoration:"inherit",fontSize:"inherit"},children:e.children}),children:X.jsx("iframe",{id:"iframe-content",name:"iframe-content",className:"h-[75vh] w-full border-none bg-white",src:e.href})}):X.jsx("a",{href:e.href,className:"text-inherit",style:{textDecoration:"inherit",fontSize:"inherit"},target:"_blank",rel:"noopener noreferrer",children:e.children})}function cb(){const[e,t]=Oe.useState(!1),{spaces:r,selectedSpace:n,storage:o,env:s}=Zr(),{navigation:f,asDialog:i,linkElement:v}=Ch(),{user:l,isAuthenticated:a,client:y}=Cr(),u=(n==null?void 0:n.space)==="pro"&&(n==null?void 0:n.roles.includes("role:pro-editor")),g=Oe.useRef(null),I=typeof window>"u"||typeof document>"u"?void 0:y.getCustomization(),d=bh();if(!a||!r)return X.jsx("header",{className:"p-2",children:X.jsxs("div",{className:"box-border flex w-full cursor-wait flex-row flex-wrap items-center justify-between rounded px-4 py-2.5",children:[X.jsxs("div",{className:"inline-flex h-11 items-center gap-3",children:[X.jsx("div",{className:"size-9 select-none items-center justify-start overflow-hidden align-middle",children:X.jsx("div",{className:"flex size-full animate-pulse items-center justify-center rounded-full bg-fog"})}),X.jsxs("div",{className:"flex flex-col flex-wrap items-start justify-center gap-1",children:[X.jsx("div",{className:"h-6 w-24 animate-pulse rounded-md bg-fog"}),X.jsx("div",{className:"h-5 w-16 animate-pulse rounded-md bg-fog"})]})]}),X.jsx(ol,{className:"animate-pulse text-3xl text-fog"})]})});if(f.isSubNav)return X.jsx("header",{className:"p-2",children:X.jsxs(ss,{as:v==null?void 0:v.as,hrefProp:v==null?void 0:v.hrefProp,href:"/",className:"box-border flex h-16 items-center justify-start gap-3 rounded px-4 py-2.5 text-x-small font-bold text-jet no-underline transition-colors duration-150 hover:bg-teal-5/5",children:[X.jsx(bp,{className:"text-xl text-jet"}),"Back to Home"]})});const A=n.id===Qt.id?{title:l.name||l["http://arduino.cc/username"],desc:l.email}:{title:n.name,desc:l.name||l.email};return X.jsxs("header",{className:"p-2",children:[i!==void 0?X.jsx(vc,{className:"hidden",ref:g}):null,X.jsxs(Ef,{open:e,onOpenChange:t,children:[X.jsx(Sf,{asChild:!0,children:X.jsxs("button",{id:"cs-spaceselector",className:"flex w-full cursor-pointer items-center justify-start gap-3 rounded border-0 bg-transparent px-4 py-2.5 font-opensans transition-colors duration-150 hover:bg-teal-5/5 data-[state=open]:bg-teal-5/5",children:[X.jsx(Qa,{name:n.name,spaceType:n==null?void 0:n.space,logo:n==null?void 0:n.logo,size:"lg"}),X.jsxs("div",{className:"block flex-1 overflow-hidden text-start",children:[X.jsx("div",{title:A.title,className:"truncate text-x-small font-bold text-gris",children:A.title}),X.jsx("div",{title:A.desc,className:"truncate text-xx-small text-gris",children:A.desc})]}),X.jsx(ol,{className:"shrink-0 text-3xl text-jet"})]})}),X.jsx(Cf,{children:X.jsxs(kf,{className:"w-[var(--radix-dropdown-menu-trigger-width)] rounded bg-white py-0.5 shadow-deep data-[state=closed]:animate-fade-out data-[state=open]:animate-slide-in",align:"start",sideOffset:5,side:"bottom",children:[X.jsx(eb,{condition:!!r&&r.length>1,children:X.jsxs(X.Fragment,{children:[r&&r.length>3?X.jsx("div",{className:"px-4 py-3",children:X.jsx(ab,{onSelect:()=>t(!1)})}):X.jsx(wp,{className:"py-3 font-opensans",children:r.map(w=>X.jsxs(xp,{className:"box-border flex w-full cursor-pointer items-center justify-start gap-4 px-4 py-2 text-jet outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",onClick:()=>o.setSpace(w.id),checked:(n==null?void 0:n.id)===w.id,children:[X.jsx(Qa,{name:w.name,spaceType:w.space,logo:w.logo}),X.jsx("div",{className:"block flex-1 overflow-hidden text-start",children:X.jsx("div",{title:w.name,className:sr("truncate text-xx-small text-jet",(n==null?void 0:n.id)===w.id&&"font-bold"),children:w.name})}),X.jsx(_p,{children:X.jsx(N1,{className:"shrink-0 text-small text-jet"})})]},w.id))}),X.jsx(sl,{className:"h-px w-full bg-fog"})]})}),X.jsx(Uo,{asChild:!0,condition:!l["http://arduino.cc/is_minor"]&&!u,children:X.jsxs("a",{href:s.ID_URL,className:"text-inherit no-underline",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(T1,{className:"text-small"}),"Account Settings"]})}),d?null:X.jsx(Uo,{asChild:!0,condition:!l["http://arduino.cc/is_minor"]&&!u,children:X.jsxs("a",{href:`${Zn(s.DIGITAL_STORE_URL)}/subscriptions/plans`,className:"text-inherit no-underline",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(P1,{className:"text-small"}),"Billing & subscriptions"]})}),I&&n.id===Qt.id?null:X.jsx(Uo,{asChild:!0,condition:!l["http://arduino.cc/is_minor"],children:X.jsxs(ss,{as:v==null?void 0:v.as,hrefProp:v==null?void 0:v.hrefProp,onClick:()=>{var w;return(w=g.current)==null?void 0:w.click()},className:"font-opensans text-inherit no-underline",href:v?"/api-keys":`${Zn(s.CLOUD_HOME_URL)}/api-keys`,children:[X.jsx(Ep,{className:"text-small"}),"API Keys"]})}),X.jsxs(Uo,{onClick:()=>y.logout({logoutParams:{returnTo:window.location.origin}}),children:[X.jsx(B1,{className:"text-small"}),"Sign out"]}),X.jsx(sl,{className:"h-px w-full bg-fog"}),X.jsxs("div",{className:sr("box-border inline-flex w-full items-baseline gap-2 px-4 pb-1 pt-2 text-center font-opensans text-xx-small text-asbestos",I?"justify-center":"justify-between"),children:[X.jsx(Vn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(Ta,{title:"Privacy",href:I?I.policy_url:`https://www.arduino.cc/en/privacy-policy${l["http://arduino.cc/is_minor"]?"/children-privacy-policy":""}`,children:"Privacy"})}),X.jsx("span",{className:"h-1",children:""}),X.jsx(Vn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(Ta,{title:"Terms",href:I?I.custom_tos:"https://www.arduino.cc/en/terms-conditions",children:"Terms"})}),I?null:X.jsxs(X.Fragment,{children:[X.jsx("span",{className:"h-1",children:""}),X.jsx(Vn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(Ta,{title:"Security",href:"https://www.arduino.cc/en/security",children:"Security"})})]})]})]})})]})]})}var ub=no("size-3.5 rounded-full bg-gray-500",{variants:{intent:{"":"",none:"!bg-[#1DA086]",minor:"!bg-[#E7BC43]",maintenance:"!bg-[#E7BC43]",major:"!bg-[#D9863B]",critical:"!bg-[#C11f09]"}},defaultVariants:{intent:""}}),lb=()=>{var e,t;const{user:r}=Cr(),n=r["http://arduino.cc/is_minor"]||!1,{cloudStatus:o}=Zr();return X.jsxs("a",{className:sr("flex cursor-pointer items-center justify-center gap-3 border-0 border-t border-solid border-fog p-2 text-x-small text-jet no-underline",n&&"pointer-events-none"),href:"https://status.arduino.cc",target:"_blank",rel:"noopener noreferrer",id:"cs-systemstatus",children:[X.jsx("div",{className:ub({intent:o.error?"none":(e=o.data)==null?void 0:e.status.indicator})}),X.jsx("div",{children:o.error?"Unable to obtain status":(t=o.data)==null?void 0:t.status.description})]})};Oe.createContext({selected:"",setSelected:()=>{}});let Oa=null;function Ah(){return Oa||(Oa=new vh(at.COOKIES_DOMAIN,Jo.customKey?`${Jo.customKey}-arduino`:void 0)),Oa}function ir(){let e;return e=Ah().getSpace(),e==="my-cloud"&&(e=void 0),e}var Ih={exports:{}};(function(e,t){(function(r,n){n()})(Hr,function(){function r(l,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,a,y){var u=new XMLHttpRequest;u.open("GET",l),u.responseType="blob",u.onload=function(){v(u.response,a,y)},u.onerror=function(){console.error("could not download file")},u.send()}function o(l){var a=new XMLHttpRequest;a.open("HEAD",l,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function s(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(a)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hr=="object"&&Hr.global===Hr?Hr:void 0,i=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(l,a,y){var u=f.URL||f.webkitURL,g=document.createElement("a");a=a||l.name||"download",g.download=a,g.rel="noopener",typeof l=="string"?(g.href=l,g.origin===location.origin?s(g):o(g.href)?n(l,a,y):s(g,g.target="_blank")):(g.href=u.createObjectURL(l),setTimeout(function(){u.revokeObjectURL(g.href)},4e4),setTimeout(function(){s(g)},0))}:"msSaveOrOpenBlob"in navigator?function(l,a,y){if(a=a||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,y),a);else if(o(l))n(l,a,y);else{var u=document.createElement("a");u.href=l,u.target="_blank",setTimeout(function(){s(u)})}}:function(l,a,y,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof l=="string")return n(l,a,y);var g=l.type==="application/octet-stream",I=/constructor/i.test(f.HTMLElement)||f.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||g&&I||i)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var O=A.result;O=d?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=O:location=O,u=null},A.readAsDataURL(l)}else{var w=f.URL||f.webkitURL,C=w.createObjectURL(l);u?u.location=C:location.href=C,u=null,setTimeout(function(){w.revokeObjectURL(C)},4e4)}});f.saveAs=v.saveAs=v,e.exports=v})})(Ih);var fb=Ih.exports;function $o(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rh={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,o,s){function f(l,a){if(!o[l]){if(!n[l]){var y=typeof $o=="function"&&$o;if(!a&&y)return y(l,!0);if(i)return i(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var g=o[l]={exports:{}};n[l][0].call(g.exports,function(I){var d=n[l][1][I];return f(d||I)},g,g.exports,r,n,o,s)}return o[l].exports}for(var i=typeof $o=="function"&&$o,v=0;v<s.length;v++)f(s[v]);return f}({1:[function(r,n,o){var s=r("./utils"),f=r("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(v){for(var l,a,y,u,g,I,d,A=[],w=0,C=v.length,O=C,N=s.getTypeOf(v)!=="string";w<v.length;)O=C-w,y=N?(l=v[w++],a=w<C?v[w++]:0,w<C?v[w++]:0):(l=v.charCodeAt(w++),a=w<C?v.charCodeAt(w++):0,w<C?v.charCodeAt(w++):0),u=l>>2,g=(3&l)<<4|a>>4,I=1<O?(15&a)<<2|y>>6:64,d=2<O?63&y:64,A.push(i.charAt(u)+i.charAt(g)+i.charAt(I)+i.charAt(d));return A.join("")},o.decode=function(v){var l,a,y,u,g,I,d=0,A=0,w="data:";if(v.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var C,O=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===i.charAt(64)&&O--,v.charAt(v.length-2)===i.charAt(64)&&O--,O%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=f.uint8array?new Uint8Array(0|O):new Array(0|O);d<v.length;)l=i.indexOf(v.charAt(d++))<<2|(u=i.indexOf(v.charAt(d++)))>>4,a=(15&u)<<4|(g=i.indexOf(v.charAt(d++)))>>2,y=(3&g)<<6|(I=i.indexOf(v.charAt(d++))),C[A++]=l,g!==64&&(C[A++]=a),I!==64&&(C[A++]=y);return C}},{"./support":30,"./utils":32}],2:[function(r,n,o){var s=r("./external"),f=r("./stream/DataWorker"),i=r("./stream/Crc32Probe"),v=r("./stream/DataLengthProbe");function l(a,y,u,g,I){this.compressedSize=a,this.uncompressedSize=y,this.crc32=u,this.compression=g,this.compressedContent=I}l.prototype={getContentWorker:function(){var a=new f(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),y=this;return a.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new f(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(a,y,u){return a.pipe(new i).pipe(new v("uncompressedSize")).pipe(y.compressWorker(u)).pipe(new v("compressedSize")).withStreamInfo("compression",y)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,o){var s=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,o){var s=r("./utils"),f=function(){for(var i,v=[],l=0;l<256;l++){i=l;for(var a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;v[l]=i}return v}();n.exports=function(i,v){return i!==void 0&&i.length?s.getTypeOf(i)!=="string"?function(l,a,y,u){var g=f,I=u+y;l^=-1;for(var d=u;d<I;d++)l=l>>>8^g[255&(l^a[d])];return-1^l}(0|v,i,i.length,0):function(l,a,y,u){var g=f,I=u+y;l^=-1;for(var d=u;d<I;d++)l=l>>>8^g[255&(l^a.charCodeAt(d))];return-1^l}(0|v,i,i.length,0):0}},{"./utils":32}],5:[function(r,n,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,n,o){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=r("pako"),i=r("./utils"),v=r("./stream/GenericWorker"),l=s?"uint8array":"array";function a(y,u){v.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=u,this.meta={}}o.magic="\b\0",i.inherits(a,v),a.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(l,y.data),!1)},a.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},a.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},a.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(u){y.push({data:u,meta:y.meta})}},o.compressWorker=function(y){return new a("Deflate",y)},o.uncompressWorker=function(){return new a("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,o){function s(g,I){var d,A="";for(d=0;d<I;d++)A+=String.fromCharCode(255&g),g>>>=8;return A}function f(g,I,d,A,w,C){var O,N,D=g.file,W=g.compression,M=C!==l.utf8encode,V=i.transformTo("string",C(D.name)),G=i.transformTo("string",l.utf8encode(D.name)),ae=D.comment,pe=i.transformTo("string",C(ae)),H=i.transformTo("string",l.utf8encode(ae)),ee=G.length!==D.name.length,_=H.length!==ae.length,S="",L="",P="",$=D.dir,F=D.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};I&&!d||(Y.crc32=g.crc32,Y.compressedSize=g.compressedSize,Y.uncompressedSize=g.uncompressedSize);var q=0;I&&(q|=8),M||!ee&&!_||(q|=2048);var Z=0,ye=0;$&&(Z|=16),w==="UNIX"?(ye=798,Z|=function(Te,ct){var ft=Te;return Te||(ft=ct?16893:33204),(65535&ft)<<16}(D.unixPermissions,$)):(ye=20,Z|=function(Te){return 63&(Te||0)}(D.dosPermissions)),O=F.getUTCHours(),O<<=6,O|=F.getUTCMinutes(),O<<=5,O|=F.getUTCSeconds()/2,N=F.getUTCFullYear()-1980,N<<=4,N|=F.getUTCMonth()+1,N<<=5,N|=F.getUTCDate(),ee&&(L=s(1,1)+s(a(V),4)+G,S+="up"+s(L.length,2)+L),_&&(P=s(1,1)+s(a(pe),4)+H,S+="uc"+s(P.length,2)+P);var Ee="";return Ee+=`
\0`,Ee+=s(q,2),Ee+=W.magic,Ee+=s(O,2),Ee+=s(N,2),Ee+=s(Y.crc32,4),Ee+=s(Y.compressedSize,4),Ee+=s(Y.uncompressedSize,4),Ee+=s(V.length,2),Ee+=s(S.length,2),{fileRecord:y.LOCAL_FILE_HEADER+Ee+V+S,dirRecord:y.CENTRAL_FILE_HEADER+s(ye,2)+Ee+s(pe.length,2)+"\0\0\0\0"+s(Z,4)+s(A,4)+V+S+pe}}var i=r("../utils"),v=r("../stream/GenericWorker"),l=r("../utf8"),a=r("../crc32"),y=r("../signature");function u(g,I,d,A){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=I,this.zipPlatform=d,this.encodeFileName=A,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,v),u.prototype.push=function(g){var I=g.meta.percent||0,d=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,v.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:d?(I+100*(d-A-1))/d:100}}))},u.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var I=this.streamFiles&&!g.file.dir;if(I){var d=f(g,I,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(g){this.accumulate=!1;var I=this.streamFiles&&!g.file.dir,d=f(g,I,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),I)this.push({data:function(A){return y.DATA_DESCRIPTOR+s(A.crc32,4)+s(A.compressedSize,4)+s(A.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var g=this.bytesWritten,I=0;I<this.dirRecords.length;I++)this.push({data:this.dirRecords[I],meta:{percent:100}});var d=this.bytesWritten-g,A=function(w,C,O,N,D){var W=i.transformTo("string",D(N));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(w,2)+s(w,2)+s(C,4)+s(O,4)+s(W.length,2)+W}(this.dirRecords.length,d,g,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(g){this._sources.push(g);var I=this;return g.on("data",function(d){I.processChunk(d)}),g.on("end",function(){I.closedSource(I.previous.streamInfo),I._sources.length?I.prepareNextSource():I.end()}),g.on("error",function(d){I.error(d)}),this},u.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(g){var I=this._sources;if(!v.prototype.error.call(this,g))return!1;for(var d=0;d<I.length;d++)try{I[d].error(g)}catch{}return!0},u.prototype.lock=function(){v.prototype.lock.call(this);for(var g=this._sources,I=0;I<g.length;I++)g[I].lock()},n.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,o){var s=r("../compressions"),f=r("./ZipFileWorker");o.generateWorker=function(i,v,l){var a=new f(v.streamFiles,l,v.platform,v.encodeFileName),y=0;try{i.forEach(function(u,g){y++;var I=function(C,O){var N=C||O,D=s[N];if(!D)throw new Error(N+" is not a valid compression method !");return D}(g.options.compression,v.compression),d=g.options.compressionOptions||v.compressionOptions||{},A=g.dir,w=g.date;g._compressWorker(I,d).withStreamInfo("file",{name:u,dir:A,date:w,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(a)}),a.entriesCount=y}catch(u){a.error(u)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,o){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new s;for(var i in this)typeof this[i]!="function"&&(f[i]=this[i]);return f}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(f,i){return new s().loadAsync(f,i)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,o){var s=r("./utils"),f=r("./external"),i=r("./utf8"),v=r("./zipEntries"),l=r("./stream/Crc32Probe"),a=r("./nodejsUtils");function y(u){return new f.Promise(function(g,I){var d=u.decompressed.getContentWorker().pipe(new l);d.on("error",function(A){I(A)}).on("end",function(){d.streamInfo.crc32!==u.decompressed.crc32?I(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(u,g){var I=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),a.isNode&&a.isStream(u)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",u,!0,g.optimizedBinaryString,g.base64).then(function(d){var A=new v(g);return A.load(d),A}).then(function(d){var A=[f.Promise.resolve(d)],w=d.files;if(g.checkCRC32)for(var C=0;C<w.length;C++)A.push(y(w[C]));return f.Promise.all(A)}).then(function(d){for(var A=d.shift(),w=A.files,C=0;C<w.length;C++){var O=w[C],N=O.fileNameStr,D=s.resolve(O.fileNameStr);I.file(D,O.decompressed,{binary:!0,optimizedBinaryString:!0,date:O.date,dir:O.dir,comment:O.fileCommentStr.length?O.fileCommentStr:null,unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions,createFolders:g.createFolders}),O.dir||(I.file(D).unsafeOriginalName=N)}return A.zipComment.length&&(I.comment=A.zipComment),I})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,o){var s=r("../utils"),f=r("../stream/GenericWorker");function i(v,l){f.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(i,f),i.prototype._bindStream=function(v){var l=this;(this._stream=v).pause(),v.on("data",function(a){l.push({data:a,meta:{percent:0}})}).on("error",function(a){l.isPaused?this.generatedError=a:l.error(a)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},i.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,o){var s=r("readable-stream").Readable;function f(i,v,l){s.call(this,v),this._helper=i;var a=this;i.on("data",function(y,u){a.push(y)||a._helper.pause(),l&&l(u)}).on("error",function(y){a.emit("error",y)}).on("end",function(){a.push(null)})}r("../utils").inherits(f,s),f.prototype._read=function(){this._helper.resume()},n.exports=f},{"../utils":32,"readable-stream":16}],14:[function(r,n,o){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,f);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,f)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var f=new Buffer(s);return f.fill(0),f},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,o){function s(D,W,M){var V,G=i.getTypeOf(W),ae=i.extend(M||{},a);ae.date=ae.date||new Date,ae.compression!==null&&(ae.compression=ae.compression.toUpperCase()),typeof ae.unixPermissions=="string"&&(ae.unixPermissions=parseInt(ae.unixPermissions,8)),ae.unixPermissions&&16384&ae.unixPermissions&&(ae.dir=!0),ae.dosPermissions&&16&ae.dosPermissions&&(ae.dir=!0),ae.dir&&(D=w(D)),ae.createFolders&&(V=A(D))&&C.call(this,V,!0);var pe=G==="string"&&ae.binary===!1&&ae.base64===!1;M&&M.binary!==void 0||(ae.binary=!pe),(W instanceof y&&W.uncompressedSize===0||ae.dir||!W||W.length===0)&&(ae.base64=!1,ae.binary=!0,W="",ae.compression="STORE",G="string");var H=null;H=W instanceof y||W instanceof v?W:I.isNode&&I.isStream(W)?new d(D,W):i.prepareContent(D,W,ae.binary,ae.optimizedBinaryString,ae.base64);var ee=new u(D,H,ae);this.files[D]=ee}var f=r("./utf8"),i=r("./utils"),v=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),a=r("./defaults"),y=r("./compressedObject"),u=r("./zipObject"),g=r("./generate"),I=r("./nodejsUtils"),d=r("./nodejs/NodejsStreamInputAdapter"),A=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var W=D.lastIndexOf("/");return 0<W?D.substring(0,W):""},w=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},C=function(D,W){return W=W!==void 0?W:a.createFolders,D=w(D),this.files[D]||s.call(this,D,null,{dir:!0,createFolders:W}),this.files[D]};function O(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var W,M,V;for(W in this.files)V=this.files[W],(M=W.slice(this.root.length,W.length))&&W.slice(0,this.root.length)===this.root&&D(M,V)},filter:function(D){var W=[];return this.forEach(function(M,V){D(M,V)&&W.push(V)}),W},file:function(D,W,M){if(arguments.length!==1)return D=this.root+D,s.call(this,D,W,M),this;if(O(D)){var V=D;return this.filter(function(ae,pe){return!pe.dir&&V.test(ae)})}var G=this.files[this.root+D];return G&&!G.dir?G:null},folder:function(D){if(!D)return this;if(O(D))return this.filter(function(G,ae){return ae.dir&&D.test(G)});var W=this.root+D,M=C.call(this,W),V=this.clone();return V.root=M.name,V},remove:function(D){D=this.root+D;var W=this.files[D];if(W||(D.slice(-1)!=="/"&&(D+="/"),W=this.files[D]),W&&!W.dir)delete this.files[D];else for(var M=this.filter(function(G,ae){return ae.name.slice(0,D.length)===D}),V=0;V<M.length;V++)delete this.files[M[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var W,M={};try{if((M=i.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");i.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var V=M.comment||this.comment||"";W=g.generateWorker(this,M,V)}catch(G){(W=new v("error")).error(G)}return new l(W,M.type||"string",M.mimeType)},generateAsync:function(D,W){return this.generateInternalStream(D).accumulate(W)},generateNodeStream:function(D,W){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(W)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,o){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,o){var s=r("./DataReader");function f(i){s.call(this,i);for(var v=0;v<this.data.length;v++)i[v]=255&i[v]}r("../utils").inherits(f,s),f.prototype.byteAt=function(i){return this.data[this.zero+i]},f.prototype.lastIndexOfSignature=function(i){for(var v=i.charCodeAt(0),l=i.charCodeAt(1),a=i.charCodeAt(2),y=i.charCodeAt(3),u=this.length-4;0<=u;--u)if(this.data[u]===v&&this.data[u+1]===l&&this.data[u+2]===a&&this.data[u+3]===y)return u-this.zero;return-1},f.prototype.readAndCheckSignature=function(i){var v=i.charCodeAt(0),l=i.charCodeAt(1),a=i.charCodeAt(2),y=i.charCodeAt(3),u=this.readData(4);return v===u[0]&&l===u[1]&&a===u[2]&&y===u[3]},f.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,v},n.exports=f},{"../utils":32,"./DataReader":18}],18:[function(r,n,o){var s=r("../utils");function f(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var v,l=0;for(this.checkOffset(i),v=this.index+i-1;v>=this.index;v--)l=(l<<8)+this.byteAt(v);return this.index+=i,l},readString:function(i){return s.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},n.exports=f},{"../utils":32}],19:[function(r,n,o){var s=r("./Uint8ArrayReader");function f(i){s.call(this,i)}r("../utils").inherits(f,s),f.prototype.readData=function(i){this.checkOffset(i);var v=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,v},n.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,o){var s=r("./DataReader");function f(i){s.call(this,i)}r("../utils").inherits(f,s),f.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},f.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},f.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},f.prototype.readData=function(i){this.checkOffset(i);var v=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,v},n.exports=f},{"../utils":32,"./DataReader":18}],21:[function(r,n,o){var s=r("./ArrayReader");function f(i){s.call(this,i)}r("../utils").inherits(f,s),f.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,v},n.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,o){var s=r("../utils"),f=r("../support"),i=r("./ArrayReader"),v=r("./StringReader"),l=r("./NodeBufferReader"),a=r("./Uint8ArrayReader");n.exports=function(y){var u=s.getTypeOf(y);return s.checkSupport(u),u!=="string"||f.uint8array?u==="nodebuffer"?new l(y):f.uint8array?new a(s.transformTo("uint8array",y)):new i(s.transformTo("array",y)):new v(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,o){var s=r("./GenericWorker"),f=r("../utils");function i(v){s.call(this,"ConvertWorker to "+v),this.destType=v}f.inherits(i,s),i.prototype.processChunk=function(v){this.push({data:f.transformTo(this.destType,v.data),meta:v.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,o){var s=r("./GenericWorker"),f=r("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(i,s),i.prototype.processChunk=function(v){this.streamInfo.crc32=f(v.data,this.streamInfo.crc32||0),this.push(v)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,o){var s=r("../utils"),f=r("./GenericWorker");function i(v){f.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}s.inherits(i,f),i.prototype.processChunk=function(v){if(v){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+v.data.length}f.prototype.processChunk.call(this,v)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,o){var s=r("../utils"),f=r("./GenericWorker");function i(v){f.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then(function(a){l.dataIsReady=!0,l.data=a,l.max=a&&a.length||0,l.type=s.getTypeOf(a),l.isPaused||l._tickAndRepeat()},function(a){l.error(a)})}s.inherits(i,f),i.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,l);break;case"uint8array":v=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":v=this.data.slice(this.index,l)}return this.index=l,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,o){function s(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,i){return this._listeners[f].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,i){if(this._listeners[f])for(var v=0;v<this._listeners[f].length;v++)this._listeners[f][v].call(this,i)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var i=this;return f.on("data",function(v){i.processChunk(v)}),f.on("end",function(){i.end()}),f.on("error",function(v){i.error(v)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,i){return this.extraStreamInfo[f]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},n.exports=s},{}],29:[function(r,n,o){var s=r("../utils"),f=r("./ConvertWorker"),i=r("./GenericWorker"),v=r("../base64"),l=r("../support"),a=r("../external"),y=null;if(l.nodestream)try{y=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function u(I,d){return new a.Promise(function(A,w){var C=[],O=I._internalType,N=I._outputType,D=I._mimeType;I.on("data",function(W,M){C.push(W),d&&d(M)}).on("error",function(W){C=[],w(W)}).on("end",function(){try{var W=function(M,V,G){switch(M){case"blob":return s.newBlob(s.transformTo("arraybuffer",V),G);case"base64":return v.encode(V);default:return s.transformTo(M,V)}}(N,function(M,V){var G,ae=0,pe=null,H=0;for(G=0;G<V.length;G++)H+=V[G].length;switch(M){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(pe=new Uint8Array(H),G=0;G<V.length;G++)pe.set(V[G],ae),ae+=V[G].length;return pe;case"nodebuffer":return Buffer.concat(V);default:throw new Error("concat : unsupported type '"+M+"'")}}(O,C),D);A(W)}catch(M){w(M)}C=[]}).resume()})}function g(I,d,A){var w=d;switch(d){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=d,this._mimeType=A,s.checkSupport(w),this._worker=I.pipe(new f(w)),I.lock()}catch(C){this._worker=new i("error"),this._worker.error(C)}}g.prototype={accumulate:function(I){return u(this,I)},on:function(I,d){var A=this;return I==="data"?this._worker.on(I,function(w){d.call(A,w.data,w.meta)}):this._worker.on(I,function(){s.delay(d,arguments,A)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(I){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},I)}},n.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var s=new ArrayBuffer(0);try{o.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(s),o.blob=f.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,o){for(var s=r("./utils"),f=r("./support"),i=r("./nodejsUtils"),v=r("./stream/GenericWorker"),l=new Array(256),a=0;a<256;a++)l[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;l[254]=l[254]=1;function y(){v.call(this,"utf-8 decode"),this.leftOver=null}function u(){v.call(this,"utf-8 encode")}o.utf8encode=function(g){return f.nodebuffer?i.newBufferFrom(g,"utf-8"):function(I){var d,A,w,C,O,N=I.length,D=0;for(C=0;C<N;C++)(64512&(A=I.charCodeAt(C)))==55296&&C+1<N&&(64512&(w=I.charCodeAt(C+1)))==56320&&(A=65536+(A-55296<<10)+(w-56320),C++),D+=A<128?1:A<2048?2:A<65536?3:4;for(d=f.uint8array?new Uint8Array(D):new Array(D),C=O=0;O<D;C++)(64512&(A=I.charCodeAt(C)))==55296&&C+1<N&&(64512&(w=I.charCodeAt(C+1)))==56320&&(A=65536+(A-55296<<10)+(w-56320),C++),A<128?d[O++]=A:(A<2048?d[O++]=192|A>>>6:(A<65536?d[O++]=224|A>>>12:(d[O++]=240|A>>>18,d[O++]=128|A>>>12&63),d[O++]=128|A>>>6&63),d[O++]=128|63&A);return d}(g)},o.utf8decode=function(g){return f.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(I){var d,A,w,C,O=I.length,N=new Array(2*O);for(d=A=0;d<O;)if((w=I[d++])<128)N[A++]=w;else if(4<(C=l[w]))N[A++]=65533,d+=C-1;else{for(w&=C===2?31:C===3?15:7;1<C&&d<O;)w=w<<6|63&I[d++],C--;1<C?N[A++]=65533:w<65536?N[A++]=w:(w-=65536,N[A++]=55296|w>>10&1023,N[A++]=56320|1023&w)}return N.length!==A&&(N.subarray?N=N.subarray(0,A):N.length=A),s.applyFromCharCode(N)}(g=s.transformTo(f.uint8array?"uint8array":"array",g))},s.inherits(y,v),y.prototype.processChunk=function(g){var I=s.transformTo(f.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var d=I;(I=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),I.set(d,this.leftOver.length)}else I=this.leftOver.concat(I);this.leftOver=null}var A=function(C,O){var N;for((O=O||C.length)>C.length&&(O=C.length),N=O-1;0<=N&&(192&C[N])==128;)N--;return N<0||N===0?O:N+l[C[N]]>O?N:O}(I),w=I;A!==I.length&&(f.uint8array?(w=I.subarray(0,A),this.leftOver=I.subarray(A,I.length)):(w=I.slice(0,A),this.leftOver=I.slice(A,I.length))),this.push({data:o.utf8decode(w),meta:g.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=y,s.inherits(u,v),u.prototype.processChunk=function(g){this.push({data:o.utf8encode(g.data),meta:g.meta})},o.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,o){var s=r("./support"),f=r("./base64"),i=r("./nodejsUtils"),v=r("./external");function l(d){return d}function a(d,A){for(var w=0;w<d.length;++w)A[w]=255&d.charCodeAt(w);return A}r("setimmediate"),o.newBlob=function(d,A){o.checkSupport("blob");try{return new Blob([d],{type:A})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(d),w.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(d,A,w){var C=[],O=0,N=d.length;if(N<=w)return String.fromCharCode.apply(null,d);for(;O<N;)A==="array"||A==="nodebuffer"?C.push(String.fromCharCode.apply(null,d.slice(O,Math.min(O+w,N)))):C.push(String.fromCharCode.apply(null,d.subarray(O,Math.min(O+w,N)))),O+=w;return C.join("")},stringifyByChar:function(d){for(var A="",w=0;w<d.length;w++)A+=String.fromCharCode(d[w]);return A},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function u(d){var A=65536,w=o.getTypeOf(d),C=!0;if(w==="uint8array"?C=y.applyCanBeUsed.uint8array:w==="nodebuffer"&&(C=y.applyCanBeUsed.nodebuffer),C)for(;1<A;)try{return y.stringifyByChunk(d,w,A)}catch{A=Math.floor(A/2)}return y.stringifyByChar(d)}function g(d,A){for(var w=0;w<d.length;w++)A[w]=d[w];return A}o.applyFromCharCode=u;var I={};I.string={string:l,array:function(d){return a(d,new Array(d.length))},arraybuffer:function(d){return I.string.uint8array(d).buffer},uint8array:function(d){return a(d,new Uint8Array(d.length))},nodebuffer:function(d){return a(d,i.allocBuffer(d.length))}},I.array={string:u,array:l,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return i.newBufferFrom(d)}},I.arraybuffer={string:function(d){return u(new Uint8Array(d))},array:function(d){return g(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:l,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return i.newBufferFrom(new Uint8Array(d))}},I.uint8array={string:u,array:function(d){return g(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:l,nodebuffer:function(d){return i.newBufferFrom(d)}},I.nodebuffer={string:u,array:function(d){return g(d,new Array(d.length))},arraybuffer:function(d){return I.nodebuffer.uint8array(d).buffer},uint8array:function(d){return g(d,new Uint8Array(d.length))},nodebuffer:l},o.transformTo=function(d,A){if(A=A||"",!d)return A;o.checkSupport(d);var w=o.getTypeOf(A);return I[w][d](A)},o.resolve=function(d){for(var A=d.split("/"),w=[],C=0;C<A.length;C++){var O=A[C];O==="."||O===""&&C!==0&&C!==A.length-1||(O===".."?w.pop():w.push(O))}return w.join("/")},o.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":s.nodebuffer&&i.isBuffer(d)?"nodebuffer":s.uint8array&&d instanceof Uint8Array?"uint8array":s.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(d){if(!s[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(d){var A,w,C="";for(w=0;w<(d||"").length;w++)C+="\\x"+((A=d.charCodeAt(w))<16?"0":"")+A.toString(16).toUpperCase();return C},o.delay=function(d,A,w){setImmediate(function(){d.apply(w||null,A||[])})},o.inherits=function(d,A){function w(){}w.prototype=A.prototype,d.prototype=new w},o.extend=function(){var d,A,w={};for(d=0;d<arguments.length;d++)for(A in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],A)&&w[A]===void 0&&(w[A]=arguments[d][A]);return w},o.prepareContent=function(d,A,w,C,O){return v.Promise.resolve(A).then(function(N){return s.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new v.Promise(function(D,W){var M=new FileReader;M.onload=function(V){D(V.target.result)},M.onerror=function(V){W(V.target.error)},M.readAsArrayBuffer(N)}):N}).then(function(N){var D=o.getTypeOf(N);return D?(D==="arraybuffer"?N=o.transformTo("uint8array",N):D==="string"&&(O?N=f.decode(N):w&&C!==!0&&(N=function(W){return a(W,s.uint8array?new Uint8Array(W.length):new Array(W.length))}(N))),N):v.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,o){var s=r("./reader/readerFor"),f=r("./utils"),i=r("./signature"),v=r("./zipEntry"),l=r("./support");function a(y){this.files=[],this.loadOptions=y}a.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var u=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(u)+", expected "+f.pretty(y)+")")}},isSignature:function(y,u){var g=this.reader.index;this.reader.setIndex(y);var I=this.reader.readString(4)===u;return this.reader.setIndex(g),I},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),u=l.uint8array?"uint8array":"array",g=f.transformTo(u,y);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,u,g,I=this.zip64EndOfCentralSize-44;0<I;)y=this.reader.readInt(2),u=this.reader.readInt(4),g=this.reader.readData(u),this.zip64ExtensibleData[y]={id:y,length:u,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,u;for(y=0;y<this.files.length;y++)u=this.files[y],this.reader.setIndex(u.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),u.readLocalPart(this.reader),u.handleUTF8(),u.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(y=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var u=y;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var I=u-g;if(0<I)this.isSignature(u,i.CENTRAL_FILE_HEADER)||(this.reader.zero=I);else if(I<0)throw new Error("Corrupted zip: missing "+Math.abs(I)+" bytes.")},prepareReader:function(y){this.reader=s(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=a},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,o){var s=r("./reader/readerFor"),f=r("./utils"),i=r("./compressedObject"),v=r("./crc32"),l=r("./utf8"),a=r("./compressions"),y=r("./support");function u(g,I){this.options=g,this.loadOptions=I}u.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var I,d;if(g.skip(22),this.fileNameLength=g.readInt(2),d=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((I=function(A){for(var w in a)if(Object.prototype.hasOwnProperty.call(a,w)&&a[w].magic===A)return a[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,I,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var I=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(I),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var I,d,A,w=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<w;)I=g.readInt(2),d=g.readInt(2),A=g.readData(d),this.extraFields[I]={id:I,length:d,value:A};g.setIndex(w)},handleUTF8:function(){var g=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var I=this.findExtraFieldUnicodePath();if(I!==null)this.fileNameStr=I;else{var d=f.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var w=f.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var I=s(g.value);return I.readInt(1)!==1||v(this.fileName)!==I.readInt(4)?null:l.utf8decode(I.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var I=s(g.value);return I.readInt(1)!==1||v(this.fileComment)!==I.readInt(4)?null:l.utf8decode(I.readData(g.length-5))}return null}},n.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,o){function s(I,d,A){this.name=I,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=d,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var f=r("./stream/StreamHelper"),i=r("./stream/DataWorker"),v=r("./utf8"),l=r("./compressedObject"),a=r("./stream/GenericWorker");s.prototype={internalStream:function(I){var d=null,A="string";try{if(!I)throw new Error("No output type specified.");var w=(A=I.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),d=this._decompressWorker();var C=!this._dataBinary;C&&!w&&(d=d.pipe(new v.Utf8EncodeWorker)),!C&&w&&(d=d.pipe(new v.Utf8DecodeWorker))}catch(O){(d=new a("error")).error(O)}return new f(d,A,"")},async:function(I,d){return this.internalStream(I).accumulate(d)},nodeStream:function(I,d){return this.internalStream(I||"nodebuffer").toNodejsStream(d)},_compressWorker:function(I,d){if(this._data instanceof l&&this._data.compression.magic===I.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new v.Utf8EncodeWorker)),l.createWorkerFrom(A,I,d)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof a?this._data:new i(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<y.length;g++)s.prototype[y[g]]=u;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,o){(function(s){var f,i,v=s.MutationObserver||s.WebKitMutationObserver;if(v){var l=0,a=new v(I),y=s.document.createTextNode("");a.observe(y,{characterData:!0}),f=function(){y.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)f="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var d=s.document.createElement("script");d.onreadystatechange=function(){I(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},s.document.documentElement.appendChild(d)}:function(){setTimeout(I,0)};else{var u=new s.MessageChannel;u.port1.onmessage=I,f=function(){u.port2.postMessage(0)}}var g=[];function I(){var d,A;i=!0;for(var w=g.length;w;){for(A=g,g=[],d=-1;++d<w;)A[d]();w=g.length}i=!1}n.exports=function(d){g.push(d)!==1||i||f()}}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,o){var s=r("immediate");function f(){}var i={},v=["REJECTED"],l=["FULFILLED"],a=["PENDING"];function y(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,w!==f&&d(this,w)}function u(w,C,O){this.promise=w,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}function g(w,C,O){s(function(){var N;try{N=C(O)}catch(D){return i.reject(w,D)}N===w?i.reject(w,new TypeError("Cannot resolve promise with itself")):i.resolve(w,N)})}function I(w){var C=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof C=="function")return function(){C.apply(w,arguments)}}function d(w,C){var O=!1;function N(M){O||(O=!0,i.reject(w,M))}function D(M){O||(O=!0,i.resolve(w,M))}var W=A(function(){C(D,N)});W.status==="error"&&N(W.value)}function A(w,C){var O={};try{O.value=w(C),O.status="success"}catch(N){O.status="error",O.value=N}return O}(n.exports=y).prototype.finally=function(w){if(typeof w!="function")return this;var C=this.constructor;return this.then(function(O){return C.resolve(w()).then(function(){return O})},function(O){return C.resolve(w()).then(function(){throw O})})},y.prototype.catch=function(w){return this.then(null,w)},y.prototype.then=function(w,C){if(typeof w!="function"&&this.state===l||typeof C!="function"&&this.state===v)return this;var O=new this.constructor(f);return this.state!==a?g(O,this.state===l?w:C,this.outcome):this.queue.push(new u(O,w,C)),O},u.prototype.callFulfilled=function(w){i.resolve(this.promise,w)},u.prototype.otherCallFulfilled=function(w){g(this.promise,this.onFulfilled,w)},u.prototype.callRejected=function(w){i.reject(this.promise,w)},u.prototype.otherCallRejected=function(w){g(this.promise,this.onRejected,w)},i.resolve=function(w,C){var O=A(I,C);if(O.status==="error")return i.reject(w,O.value);var N=O.value;if(N)d(w,N);else{w.state=l,w.outcome=C;for(var D=-1,W=w.queue.length;++D<W;)w.queue[D].callFulfilled(C)}return w},i.reject=function(w,C){w.state=v,w.outcome=C;for(var O=-1,N=w.queue.length;++O<N;)w.queue[O].callRejected(C);return w},y.resolve=function(w){return w instanceof this?w:i.resolve(new this(f),w)},y.reject=function(w){var C=new this(f);return i.reject(C,w)},y.all=function(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=w.length,N=!1;if(!O)return this.resolve([]);for(var D=new Array(O),W=0,M=-1,V=new this(f);++M<O;)G(w[M],M);return V;function G(ae,pe){C.resolve(ae).then(function(H){D[pe]=H,++W!==O||N||(N=!0,i.resolve(V,D))},function(H){N||(N=!0,i.reject(V,H))})}},y.race=function(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=w.length,N=!1;if(!O)return this.resolve([]);for(var D=-1,W=new this(f);++D<O;)M=w[D],C.resolve(M).then(function(V){N||(N=!0,i.resolve(W,V))},function(V){N||(N=!0,i.reject(W,V))});var M;return W}},{immediate:36}],38:[function(r,n,o){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,o){var s=r("./zlib/deflate"),f=r("./utils/common"),i=r("./utils/strings"),v=r("./zlib/messages"),l=r("./zlib/zstream"),a=Object.prototype.toString,y=0,u=-1,g=0,I=8;function d(w){if(!(this instanceof d))return new d(w);this.options=f.assign({level:u,method:I,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},w||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(O!==y)throw new Error(v[O]);if(C.header&&s.deflateSetHeader(this.strm,C.header),C.dictionary){var N;if(N=typeof C.dictionary=="string"?i.string2buf(C.dictionary):a.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(O=s.deflateSetDictionary(this.strm,N))!==y)throw new Error(v[O]);this._dict_set=!0}}function A(w,C){var O=new d(C);if(O.push(w,!0),O.err)throw O.msg||v[O.err];return O.result}d.prototype.push=function(w,C){var O,N,D=this.strm,W=this.options.chunkSize;if(this.ended)return!1;N=C===~~C?C:C===!0?4:0,typeof w=="string"?D.input=i.string2buf(w):a.call(w)==="[object ArrayBuffer]"?D.input=new Uint8Array(w):D.input=w,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new f.Buf8(W),D.next_out=0,D.avail_out=W),(O=s.deflate(D,N))!==1&&O!==y)return this.onEnd(O),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(f.shrinkBuf(D.output,D.next_out))):this.onData(f.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&O!==1);return N===4?(O=s.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===y):N!==2||(this.onEnd(y),!(D.avail_out=0))},d.prototype.onData=function(w){this.chunks.push(w)},d.prototype.onEnd=function(w){w===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},o.Deflate=d,o.deflate=A,o.deflateRaw=function(w,C){return(C=C||{}).raw=!0,A(w,C)},o.gzip=function(w,C){return(C=C||{}).gzip=!0,A(w,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,o){var s=r("./zlib/inflate"),f=r("./utils/common"),i=r("./utils/strings"),v=r("./zlib/constants"),l=r("./zlib/messages"),a=r("./zlib/zstream"),y=r("./zlib/gzheader"),u=Object.prototype.toString;function g(d){if(!(this instanceof g))return new g(d);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},d||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||d&&d.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&!(15&A.windowBits)&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var w=s.inflateInit2(this.strm,A.windowBits);if(w!==v.Z_OK)throw new Error(l[w]);this.header=new y,s.inflateGetHeader(this.strm,this.header)}function I(d,A){var w=new g(A);if(w.push(d,!0),w.err)throw w.msg||l[w.err];return w.result}g.prototype.push=function(d,A){var w,C,O,N,D,W,M=this.strm,V=this.options.chunkSize,G=this.options.dictionary,ae=!1;if(this.ended)return!1;C=A===~~A?A:A===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof d=="string"?M.input=i.binstring2buf(d):u.call(d)==="[object ArrayBuffer]"?M.input=new Uint8Array(d):M.input=d,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new f.Buf8(V),M.next_out=0,M.avail_out=V),(w=s.inflate(M,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&G&&(W=typeof G=="string"?i.string2buf(G):u.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,w=s.inflateSetDictionary(this.strm,W)),w===v.Z_BUF_ERROR&&ae===!0&&(w=v.Z_OK,ae=!1),w!==v.Z_STREAM_END&&w!==v.Z_OK)return this.onEnd(w),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&w!==v.Z_STREAM_END&&(M.avail_in!==0||C!==v.Z_FINISH&&C!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(O=i.utf8border(M.output,M.next_out),N=M.next_out-O,D=i.buf2string(M.output,O),M.next_out=N,M.avail_out=V-N,N&&f.arraySet(M.output,M.output,O,N,0),this.onData(D)):this.onData(f.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(ae=!0)}while((0<M.avail_in||M.avail_out===0)&&w!==v.Z_STREAM_END);return w===v.Z_STREAM_END&&(C=v.Z_FINISH),C===v.Z_FINISH?(w=s.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===v.Z_OK):C!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(M.avail_out=0))},g.prototype.onData=function(d){this.chunks.push(d)},g.prototype.onEnd=function(d){d===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},o.Inflate=g,o.inflate=I,o.inflateRaw=function(d,A){return(A=A||{}).raw=!0,I(d,A)},o.ungzip=I},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(v){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var a=l.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var y in a)a.hasOwnProperty(y)&&(v[y]=a[y])}}return v},o.shrinkBuf=function(v,l){return v.length===l?v:v.subarray?v.subarray(0,l):(v.length=l,v)};var f={arraySet:function(v,l,a,y,u){if(l.subarray&&v.subarray)v.set(l.subarray(a,a+y),u);else for(var g=0;g<y;g++)v[u+g]=l[a+g]},flattenChunks:function(v){var l,a,y,u,g,I;for(l=y=0,a=v.length;l<a;l++)y+=v[l].length;for(I=new Uint8Array(y),l=u=0,a=v.length;l<a;l++)g=v[l],I.set(g,u),u+=g.length;return I}},i={arraySet:function(v,l,a,y,u){for(var g=0;g<y;g++)v[u+g]=l[a+g]},flattenChunks:function(v){return[].concat.apply([],v)}};o.setTyped=function(v){v?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,f)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,i))},o.setTyped(s)},{}],42:[function(r,n,o){var s=r("./common"),f=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var v=new s.Buf8(256),l=0;l<256;l++)v[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function a(y,u){if(u<65537&&(y.subarray&&i||!y.subarray&&f))return String.fromCharCode.apply(null,s.shrinkBuf(y,u));for(var g="",I=0;I<u;I++)g+=String.fromCharCode(y[I]);return g}v[254]=v[254]=1,o.string2buf=function(y){var u,g,I,d,A,w=y.length,C=0;for(d=0;d<w;d++)(64512&(g=y.charCodeAt(d)))==55296&&d+1<w&&(64512&(I=y.charCodeAt(d+1)))==56320&&(g=65536+(g-55296<<10)+(I-56320),d++),C+=g<128?1:g<2048?2:g<65536?3:4;for(u=new s.Buf8(C),d=A=0;A<C;d++)(64512&(g=y.charCodeAt(d)))==55296&&d+1<w&&(64512&(I=y.charCodeAt(d+1)))==56320&&(g=65536+(g-55296<<10)+(I-56320),d++),g<128?u[A++]=g:(g<2048?u[A++]=192|g>>>6:(g<65536?u[A++]=224|g>>>12:(u[A++]=240|g>>>18,u[A++]=128|g>>>12&63),u[A++]=128|g>>>6&63),u[A++]=128|63&g);return u},o.buf2binstring=function(y){return a(y,y.length)},o.binstring2buf=function(y){for(var u=new s.Buf8(y.length),g=0,I=u.length;g<I;g++)u[g]=y.charCodeAt(g);return u},o.buf2string=function(y,u){var g,I,d,A,w=u||y.length,C=new Array(2*w);for(g=I=0;g<w;)if((d=y[g++])<128)C[I++]=d;else if(4<(A=v[d]))C[I++]=65533,g+=A-1;else{for(d&=A===2?31:A===3?15:7;1<A&&g<w;)d=d<<6|63&y[g++],A--;1<A?C[I++]=65533:d<65536?C[I++]=d:(d-=65536,C[I++]=55296|d>>10&1023,C[I++]=56320|1023&d)}return a(C,I)},o.utf8border=function(y,u){var g;for((u=u||y.length)>y.length&&(u=y.length),g=u-1;0<=g&&(192&y[g])==128;)g--;return g<0||g===0?u:g+v[y[g]]>u?g:u}},{"./common":41}],43:[function(r,n,o){n.exports=function(s,f,i,v){for(var l=65535&s|0,a=s>>>16&65535|0,y=0;i!==0;){for(i-=y=2e3<i?2e3:i;a=a+(l=l+f[v++]|0)|0,--y;);l%=65521,a%=65521}return l|a<<16|0}},{}],44:[function(r,n,o){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,o){var s=function(){for(var f,i=[],v=0;v<256;v++){f=v;for(var l=0;l<8;l++)f=1&f?3988292384^f>>>1:f>>>1;i[v]=f}return i}();n.exports=function(f,i,v,l){var a=s,y=l+v;f^=-1;for(var u=l;u<y;u++)f=f>>>8^a[255&(f^i[u])];return-1^f}},{}],46:[function(r,n,o){var s,f=r("../utils/common"),i=r("./trees"),v=r("./adler32"),l=r("./crc32"),a=r("./messages"),y=0,u=4,g=0,I=-2,d=-1,A=4,w=2,C=8,O=9,N=286,D=30,W=19,M=2*N+1,V=15,G=3,ae=258,pe=ae+G+1,H=42,ee=113,_=1,S=2,L=3,P=4;function $(T,Se){return T.msg=a[Se],Se}function F(T){return(T<<1)-(4<T?9:0)}function Y(T){for(var Se=T.length;0<=--Se;)T[Se]=0}function q(T){var Se=T.state,Ae=Se.pending;Ae>T.avail_out&&(Ae=T.avail_out),Ae!==0&&(f.arraySet(T.output,Se.pending_buf,Se.pending_out,Ae,T.next_out),T.next_out+=Ae,Se.pending_out+=Ae,T.total_out+=Ae,T.avail_out-=Ae,Se.pending-=Ae,Se.pending===0&&(Se.pending_out=0))}function Z(T,Se){i._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,Se),T.block_start=T.strstart,q(T.strm)}function ye(T,Se){T.pending_buf[T.pending++]=Se}function Ee(T,Se){T.pending_buf[T.pending++]=Se>>>8&255,T.pending_buf[T.pending++]=255&Se}function Te(T,Se){var Ae,se,ne=T.max_chain_length,ve=T.strstart,Re=T.prev_length,Le=T.nice_match,we=T.strstart>T.w_size-pe?T.strstart-(T.w_size-pe):0,De=T.window,qe=T.w_mask,m=T.prev,R=T.strstart+ae,h=De[ve+Re-1],c=De[ve+Re];T.prev_length>=T.good_match&&(ne>>=2),Le>T.lookahead&&(Le=T.lookahead);do if(De[(Ae=Se)+Re]===c&&De[Ae+Re-1]===h&&De[Ae]===De[ve]&&De[++Ae]===De[ve+1]){ve+=2,Ae++;do;while(De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&De[++ve]===De[++Ae]&&ve<R);if(se=ae-(R-ve),ve=R-ae,Re<se){if(T.match_start=Se,Le<=(Re=se))break;h=De[ve+Re-1],c=De[ve+Re]}}while((Se=m[Se&qe])>we&&--ne!=0);return Re<=T.lookahead?Re:T.lookahead}function ct(T){var Se,Ae,se,ne,ve,Re,Le,we,De,qe,m=T.w_size;do{if(ne=T.window_size-T.lookahead-T.strstart,T.strstart>=m+(m-pe)){for(f.arraySet(T.window,T.window,m,m,0),T.match_start-=m,T.strstart-=m,T.block_start-=m,Se=Ae=T.hash_size;se=T.head[--Se],T.head[Se]=m<=se?se-m:0,--Ae;);for(Se=Ae=m;se=T.prev[--Se],T.prev[Se]=m<=se?se-m:0,--Ae;);ne+=m}if(T.strm.avail_in===0)break;if(Re=T.strm,Le=T.window,we=T.strstart+T.lookahead,De=ne,qe=void 0,qe=Re.avail_in,De<qe&&(qe=De),Ae=qe===0?0:(Re.avail_in-=qe,f.arraySet(Le,Re.input,Re.next_in,qe,we),Re.state.wrap===1?Re.adler=v(Re.adler,Le,qe,we):Re.state.wrap===2&&(Re.adler=l(Re.adler,Le,qe,we)),Re.next_in+=qe,Re.total_in+=qe,qe),T.lookahead+=Ae,T.lookahead+T.insert>=G)for(ve=T.strstart-T.insert,T.ins_h=T.window[ve],T.ins_h=(T.ins_h<<T.hash_shift^T.window[ve+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[ve+G-1])&T.hash_mask,T.prev[ve&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=ve,ve++,T.insert--,!(T.lookahead+T.insert<G)););}while(T.lookahead<pe&&T.strm.avail_in!==0)}function ft(T,Se){for(var Ae,se;;){if(T.lookahead<pe){if(ct(T),T.lookahead<pe&&Se===y)return _;if(T.lookahead===0)break}if(Ae=0,T.lookahead>=G&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+G-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),Ae!==0&&T.strstart-Ae<=T.w_size-pe&&(T.match_length=Te(T,Ae)),T.match_length>=G)if(se=i._tr_tally(T,T.strstart-T.match_start,T.match_length-G),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=G){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+G-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else se=i._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(se&&(Z(T,!1),T.strm.avail_out===0))return _}return T.insert=T.strstart<G-1?T.strstart:G-1,Se===u?(Z(T,!0),T.strm.avail_out===0?L:P):T.last_lit&&(Z(T,!1),T.strm.avail_out===0)?_:S}function Ye(T,Se){for(var Ae,se,ne;;){if(T.lookahead<pe){if(ct(T),T.lookahead<pe&&Se===y)return _;if(T.lookahead===0)break}if(Ae=0,T.lookahead>=G&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+G-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=G-1,Ae!==0&&T.prev_length<T.max_lazy_match&&T.strstart-Ae<=T.w_size-pe&&(T.match_length=Te(T,Ae),T.match_length<=5&&(T.strategy===1||T.match_length===G&&4096<T.strstart-T.match_start)&&(T.match_length=G-1)),T.prev_length>=G&&T.match_length<=T.prev_length){for(ne=T.strstart+T.lookahead-G,se=i._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-G),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=ne&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+G-1])&T.hash_mask,Ae=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=G-1,T.strstart++,se&&(Z(T,!1),T.strm.avail_out===0))return _}else if(T.match_available){if((se=i._tr_tally(T,0,T.window[T.strstart-1]))&&Z(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return _}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(se=i._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<G-1?T.strstart:G-1,Se===u?(Z(T,!0),T.strm.avail_out===0?L:P):T.last_lit&&(Z(T,!1),T.strm.avail_out===0)?_:S}function et(T,Se,Ae,se,ne){this.good_length=T,this.max_lazy=Se,this.nice_length=Ae,this.max_chain=se,this.func=ne}function Qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*M),this.dyn_dtree=new f.Buf16(2*(2*D+1)),this.bl_tree=new f.Buf16(2*(2*W+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(V+1),this.heap=new f.Buf16(2*N+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*N+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Je(T){var Se;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=w,(Se=T.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?H:ee,T.adler=Se.wrap===2?0:1,Se.last_flush=y,i._tr_init(Se),g):$(T,I)}function ht(T){var Se=Je(T);return Se===g&&function(Ae){Ae.window_size=2*Ae.w_size,Y(Ae.head),Ae.max_lazy_match=s[Ae.level].max_lazy,Ae.good_match=s[Ae.level].good_length,Ae.nice_match=s[Ae.level].nice_length,Ae.max_chain_length=s[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=G-1,Ae.match_available=0,Ae.ins_h=0}(T.state),Se}function lt(T,Se,Ae,se,ne,ve){if(!T)return I;var Re=1;if(Se===d&&(Se=6),se<0?(Re=0,se=-se):15<se&&(Re=2,se-=16),ne<1||O<ne||Ae!==C||se<8||15<se||Se<0||9<Se||ve<0||A<ve)return $(T,I);se===8&&(se=9);var Le=new Qe;return(T.state=Le).strm=T,Le.wrap=Re,Le.gzhead=null,Le.w_bits=se,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=ne+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+G-1)/G),Le.window=new f.Buf8(2*Le.w_size),Le.head=new f.Buf16(Le.hash_size),Le.prev=new f.Buf16(Le.w_size),Le.lit_bufsize=1<<ne+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new f.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=Se,Le.strategy=ve,Le.method=Ae,ht(T)}s=[new et(0,0,0,0,function(T,Se){var Ae=65535;for(Ae>T.pending_buf_size-5&&(Ae=T.pending_buf_size-5);;){if(T.lookahead<=1){if(ct(T),T.lookahead===0&&Se===y)return _;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var se=T.block_start+Ae;if((T.strstart===0||T.strstart>=se)&&(T.lookahead=T.strstart-se,T.strstart=se,Z(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-pe&&(Z(T,!1),T.strm.avail_out===0))return _}return T.insert=0,Se===u?(Z(T,!0),T.strm.avail_out===0?L:P):(T.strstart>T.block_start&&(Z(T,!1),T.strm.avail_out),_)}),new et(4,4,8,4,ft),new et(4,5,16,8,ft),new et(4,6,32,32,ft),new et(4,4,16,16,Ye),new et(8,16,32,32,Ye),new et(8,16,128,128,Ye),new et(8,32,128,256,Ye),new et(32,128,258,1024,Ye),new et(32,258,258,4096,Ye)],o.deflateInit=function(T,Se){return lt(T,Se,C,15,8,0)},o.deflateInit2=lt,o.deflateReset=ht,o.deflateResetKeep=Je,o.deflateSetHeader=function(T,Se){return T&&T.state?T.state.wrap!==2?I:(T.state.gzhead=Se,g):I},o.deflate=function(T,Se){var Ae,se,ne,ve;if(!T||!T.state||5<Se||Se<0)return T?$(T,I):I;if(se=T.state,!T.output||!T.input&&T.avail_in!==0||se.status===666&&Se!==u)return $(T,T.avail_out===0?-5:I);if(se.strm=T,Ae=se.last_flush,se.last_flush=Se,se.status===H)if(se.wrap===2)T.adler=0,ye(se,31),ye(se,139),ye(se,8),se.gzhead?(ye(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),ye(se,255&se.gzhead.time),ye(se,se.gzhead.time>>8&255),ye(se,se.gzhead.time>>16&255),ye(se,se.gzhead.time>>24&255),ye(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ye(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(ye(se,255&se.gzhead.extra.length),ye(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(T.adler=l(T.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(ye(se,0),ye(se,0),ye(se,0),ye(se,0),ye(se,0),ye(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ye(se,3),se.status=ee);else{var Re=C+(se.w_bits-8<<4)<<8;Re|=(2<=se.strategy||se.level<2?0:se.level<6?1:se.level===6?2:3)<<6,se.strstart!==0&&(Re|=32),Re+=31-Re%31,se.status=ee,Ee(se,Re),se.strstart!==0&&(Ee(se,T.adler>>>16),Ee(se,65535&T.adler)),T.adler=1}if(se.status===69)if(se.gzhead.extra){for(ne=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ne&&(T.adler=l(T.adler,se.pending_buf,se.pending-ne,ne)),q(T),ne=se.pending,se.pending!==se.pending_buf_size));)ye(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ne&&(T.adler=l(T.adler,se.pending_buf,se.pending-ne,ne)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(se.status===73)if(se.gzhead.name){ne=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ne&&(T.adler=l(T.adler,se.pending_buf,se.pending-ne,ne)),q(T),ne=se.pending,se.pending===se.pending_buf_size)){ve=1;break}ve=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,ye(se,ve)}while(ve!==0);se.gzhead.hcrc&&se.pending>ne&&(T.adler=l(T.adler,se.pending_buf,se.pending-ne,ne)),ve===0&&(se.gzindex=0,se.status=91)}else se.status=91;if(se.status===91)if(se.gzhead.comment){ne=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ne&&(T.adler=l(T.adler,se.pending_buf,se.pending-ne,ne)),q(T),ne=se.pending,se.pending===se.pending_buf_size)){ve=1;break}ve=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,ye(se,ve)}while(ve!==0);se.gzhead.hcrc&&se.pending>ne&&(T.adler=l(T.adler,se.pending_buf,se.pending-ne,ne)),ve===0&&(se.status=103)}else se.status=103;if(se.status===103&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&q(T),se.pending+2<=se.pending_buf_size&&(ye(se,255&T.adler),ye(se,T.adler>>8&255),T.adler=0,se.status=ee)):se.status=ee),se.pending!==0){if(q(T),T.avail_out===0)return se.last_flush=-1,g}else if(T.avail_in===0&&F(Se)<=F(Ae)&&Se!==u)return $(T,-5);if(se.status===666&&T.avail_in!==0)return $(T,-5);if(T.avail_in!==0||se.lookahead!==0||Se!==y&&se.status!==666){var Le=se.strategy===2?function(we,De){for(var qe;;){if(we.lookahead===0&&(ct(we),we.lookahead===0)){if(De===y)return _;break}if(we.match_length=0,qe=i._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,qe&&(Z(we,!1),we.strm.avail_out===0))return _}return we.insert=0,De===u?(Z(we,!0),we.strm.avail_out===0?L:P):we.last_lit&&(Z(we,!1),we.strm.avail_out===0)?_:S}(se,Se):se.strategy===3?function(we,De){for(var qe,m,R,h,c=we.window;;){if(we.lookahead<=ae){if(ct(we),we.lookahead<=ae&&De===y)return _;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=G&&0<we.strstart&&(m=c[R=we.strstart-1])===c[++R]&&m===c[++R]&&m===c[++R]){h=we.strstart+ae;do;while(m===c[++R]&&m===c[++R]&&m===c[++R]&&m===c[++R]&&m===c[++R]&&m===c[++R]&&m===c[++R]&&m===c[++R]&&R<h);we.match_length=ae-(h-R),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=G?(qe=i._tr_tally(we,1,we.match_length-G),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(qe=i._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),qe&&(Z(we,!1),we.strm.avail_out===0))return _}return we.insert=0,De===u?(Z(we,!0),we.strm.avail_out===0?L:P):we.last_lit&&(Z(we,!1),we.strm.avail_out===0)?_:S}(se,Se):s[se.level].func(se,Se);if(Le!==L&&Le!==P||(se.status=666),Le===_||Le===L)return T.avail_out===0&&(se.last_flush=-1),g;if(Le===S&&(Se===1?i._tr_align(se):Se!==5&&(i._tr_stored_block(se,0,0,!1),Se===3&&(Y(se.head),se.lookahead===0&&(se.strstart=0,se.block_start=0,se.insert=0))),q(T),T.avail_out===0))return se.last_flush=-1,g}return Se!==u?g:se.wrap<=0?1:(se.wrap===2?(ye(se,255&T.adler),ye(se,T.adler>>8&255),ye(se,T.adler>>16&255),ye(se,T.adler>>24&255),ye(se,255&T.total_in),ye(se,T.total_in>>8&255),ye(se,T.total_in>>16&255),ye(se,T.total_in>>24&255)):(Ee(se,T.adler>>>16),Ee(se,65535&T.adler)),q(T),0<se.wrap&&(se.wrap=-se.wrap),se.pending!==0?g:1)},o.deflateEnd=function(T){var Se;return T&&T.state?(Se=T.state.status)!==H&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==ee&&Se!==666?$(T,I):(T.state=null,Se===ee?$(T,-3):g):I},o.deflateSetDictionary=function(T,Se){var Ae,se,ne,ve,Re,Le,we,De,qe=Se.length;if(!T||!T.state||(ve=(Ae=T.state).wrap)===2||ve===1&&Ae.status!==H||Ae.lookahead)return I;for(ve===1&&(T.adler=v(T.adler,Se,qe,0)),Ae.wrap=0,qe>=Ae.w_size&&(ve===0&&(Y(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),De=new f.Buf8(Ae.w_size),f.arraySet(De,Se,qe-Ae.w_size,Ae.w_size,0),Se=De,qe=Ae.w_size),Re=T.avail_in,Le=T.next_in,we=T.input,T.avail_in=qe,T.next_in=0,T.input=Se,ct(Ae);Ae.lookahead>=G;){for(se=Ae.strstart,ne=Ae.lookahead-(G-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[se+G-1])&Ae.hash_mask,Ae.prev[se&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=se,se++,--ne;);Ae.strstart=se,Ae.lookahead=G-1,ct(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=G-1,Ae.match_available=0,T.next_in=Le,T.input=we,T.avail_in=Re,Ae.wrap=ve,g},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,o){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,o){n.exports=function(s,f){var i,v,l,a,y,u,g,I,d,A,w,C,O,N,D,W,M,V,G,ae,pe,H,ee,_,S;i=s.state,v=s.next_in,_=s.input,l=v+(s.avail_in-5),a=s.next_out,S=s.output,y=a-(f-s.avail_out),u=a+(s.avail_out-257),g=i.dmax,I=i.wsize,d=i.whave,A=i.wnext,w=i.window,C=i.hold,O=i.bits,N=i.lencode,D=i.distcode,W=(1<<i.lenbits)-1,M=(1<<i.distbits)-1;e:do{O<15&&(C+=_[v++]<<O,O+=8,C+=_[v++]<<O,O+=8),V=N[C&W];t:for(;;){if(C>>>=G=V>>>24,O-=G,(G=V>>>16&255)===0)S[a++]=65535&V;else{if(!(16&G)){if(!(64&G)){V=N[(65535&V)+(C&(1<<G)-1)];continue t}if(32&G){i.mode=12;break e}s.msg="invalid literal/length code",i.mode=30;break e}ae=65535&V,(G&=15)&&(O<G&&(C+=_[v++]<<O,O+=8),ae+=C&(1<<G)-1,C>>>=G,O-=G),O<15&&(C+=_[v++]<<O,O+=8,C+=_[v++]<<O,O+=8),V=D[C&M];r:for(;;){if(C>>>=G=V>>>24,O-=G,!(16&(G=V>>>16&255))){if(!(64&G)){V=D[(65535&V)+(C&(1<<G)-1)];continue r}s.msg="invalid distance code",i.mode=30;break e}if(pe=65535&V,O<(G&=15)&&(C+=_[v++]<<O,(O+=8)<G&&(C+=_[v++]<<O,O+=8)),g<(pe+=C&(1<<G)-1)){s.msg="invalid distance too far back",i.mode=30;break e}if(C>>>=G,O-=G,(G=a-y)<pe){if(d<(G=pe-G)&&i.sane){s.msg="invalid distance too far back",i.mode=30;break e}if(ee=w,(H=0)===A){if(H+=I-G,G<ae){for(ae-=G;S[a++]=w[H++],--G;);H=a-pe,ee=S}}else if(A<G){if(H+=I+A-G,(G-=A)<ae){for(ae-=G;S[a++]=w[H++],--G;);if(H=0,A<ae){for(ae-=G=A;S[a++]=w[H++],--G;);H=a-pe,ee=S}}}else if(H+=A-G,G<ae){for(ae-=G;S[a++]=w[H++],--G;);H=a-pe,ee=S}for(;2<ae;)S[a++]=ee[H++],S[a++]=ee[H++],S[a++]=ee[H++],ae-=3;ae&&(S[a++]=ee[H++],1<ae&&(S[a++]=ee[H++]))}else{for(H=a-pe;S[a++]=S[H++],S[a++]=S[H++],S[a++]=S[H++],2<(ae-=3););ae&&(S[a++]=S[H++],1<ae&&(S[a++]=S[H++]))}break}}break}}while(v<l&&a<u);v-=ae=O>>3,C&=(1<<(O-=ae<<3))-1,s.next_in=v,s.next_out=a,s.avail_in=v<l?l-v+5:5-(v-l),s.avail_out=a<u?u-a+257:257-(a-u),i.hold=C,i.bits=O}},{}],49:[function(r,n,o){var s=r("../utils/common"),f=r("./adler32"),i=r("./crc32"),v=r("./inffast"),l=r("./inftrees"),a=1,y=2,u=0,g=-2,I=1,d=852,A=592;function w(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(H){var ee;return H&&H.state?(ee=H.state,H.total_in=H.total_out=ee.total=0,H.msg="",ee.wrap&&(H.adler=1&ee.wrap),ee.mode=I,ee.last=0,ee.havedict=0,ee.dmax=32768,ee.head=null,ee.hold=0,ee.bits=0,ee.lencode=ee.lendyn=new s.Buf32(d),ee.distcode=ee.distdyn=new s.Buf32(A),ee.sane=1,ee.back=-1,u):g}function N(H){var ee;return H&&H.state?((ee=H.state).wsize=0,ee.whave=0,ee.wnext=0,O(H)):g}function D(H,ee){var _,S;return H&&H.state?(S=H.state,ee<0?(_=0,ee=-ee):(_=1+(ee>>4),ee<48&&(ee&=15)),ee&&(ee<8||15<ee)?g:(S.window!==null&&S.wbits!==ee&&(S.window=null),S.wrap=_,S.wbits=ee,N(H))):g}function W(H,ee){var _,S;return H?(S=new C,(H.state=S).window=null,(_=D(H,ee))!==u&&(H.state=null),_):g}var M,V,G=!0;function ae(H){if(G){var ee;for(M=new s.Buf32(512),V=new s.Buf32(32),ee=0;ee<144;)H.lens[ee++]=8;for(;ee<256;)H.lens[ee++]=9;for(;ee<280;)H.lens[ee++]=7;for(;ee<288;)H.lens[ee++]=8;for(l(a,H.lens,0,288,M,0,H.work,{bits:9}),ee=0;ee<32;)H.lens[ee++]=5;l(y,H.lens,0,32,V,0,H.work,{bits:5}),G=!1}H.lencode=M,H.lenbits=9,H.distcode=V,H.distbits=5}function pe(H,ee,_,S){var L,P=H.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new s.Buf8(P.wsize)),S>=P.wsize?(s.arraySet(P.window,ee,_-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(S<(L=P.wsize-P.wnext)&&(L=S),s.arraySet(P.window,ee,_-S,L,P.wnext),(S-=L)?(s.arraySet(P.window,ee,_-S,S,0),P.wnext=S,P.whave=P.wsize):(P.wnext+=L,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=L))),0}o.inflateReset=N,o.inflateReset2=D,o.inflateResetKeep=O,o.inflateInit=function(H){return W(H,15)},o.inflateInit2=W,o.inflate=function(H,ee){var _,S,L,P,$,F,Y,q,Z,ye,Ee,Te,ct,ft,Ye,et,Qe,Je,ht,lt,T,Se,Ae,se,ne=0,ve=new s.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return g;(_=H.state).mode===12&&(_.mode=13),$=H.next_out,L=H.output,Y=H.avail_out,P=H.next_in,S=H.input,F=H.avail_in,q=_.hold,Z=_.bits,ye=F,Ee=Y,Se=u;e:for(;;)switch(_.mode){case I:if(_.wrap===0){_.mode=13;break}for(;Z<16;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(2&_.wrap&&q===35615){ve[_.check=0]=255&q,ve[1]=q>>>8&255,_.check=i(_.check,ve,2,0),Z=q=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&q)<<8)+(q>>8))%31){H.msg="incorrect header check",_.mode=30;break}if((15&q)!=8){H.msg="unknown compression method",_.mode=30;break}if(Z-=4,T=8+(15&(q>>>=4)),_.wbits===0)_.wbits=T;else if(T>_.wbits){H.msg="invalid window size",_.mode=30;break}_.dmax=1<<T,H.adler=_.check=1,_.mode=512&q?10:12,Z=q=0;break;case 2:for(;Z<16;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(_.flags=q,(255&_.flags)!=8){H.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){H.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=q>>8&1),512&_.flags&&(ve[0]=255&q,ve[1]=q>>>8&255,_.check=i(_.check,ve,2,0)),Z=q=0,_.mode=3;case 3:for(;Z<32;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}_.head&&(_.head.time=q),512&_.flags&&(ve[0]=255&q,ve[1]=q>>>8&255,ve[2]=q>>>16&255,ve[3]=q>>>24&255,_.check=i(_.check,ve,4,0)),Z=q=0,_.mode=4;case 4:for(;Z<16;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}_.head&&(_.head.xflags=255&q,_.head.os=q>>8),512&_.flags&&(ve[0]=255&q,ve[1]=q>>>8&255,_.check=i(_.check,ve,2,0)),Z=q=0,_.mode=5;case 5:if(1024&_.flags){for(;Z<16;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}_.length=q,_.head&&(_.head.extra_len=q),512&_.flags&&(ve[0]=255&q,ve[1]=q>>>8&255,_.check=i(_.check,ve,2,0)),Z=q=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(F<(Te=_.length)&&(Te=F),Te&&(_.head&&(T=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,S,P,Te,T)),512&_.flags&&(_.check=i(_.check,S,Te,P)),F-=Te,P+=Te,_.length-=Te),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(F===0)break e;for(Te=0;T=S[P+Te++],_.head&&T&&_.length<65536&&(_.head.name+=String.fromCharCode(T)),T&&Te<F;);if(512&_.flags&&(_.check=i(_.check,S,Te,P)),F-=Te,P+=Te,T)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(F===0)break e;for(Te=0;T=S[P+Te++],_.head&&T&&_.length<65536&&(_.head.comment+=String.fromCharCode(T)),T&&Te<F;);if(512&_.flags&&(_.check=i(_.check,S,Te,P)),F-=Te,P+=Te,T)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;Z<16;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(q!==(65535&_.check)){H.msg="header crc mismatch",_.mode=30;break}Z=q=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),H.adler=_.check=0,_.mode=12;break;case 10:for(;Z<32;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}H.adler=_.check=w(q),Z=q=0,_.mode=11;case 11:if(_.havedict===0)return H.next_out=$,H.avail_out=Y,H.next_in=P,H.avail_in=F,_.hold=q,_.bits=Z,2;H.adler=_.check=1,_.mode=12;case 12:if(ee===5||ee===6)break e;case 13:if(_.last){q>>>=7&Z,Z-=7&Z,_.mode=27;break}for(;Z<3;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}switch(_.last=1&q,Z-=1,3&(q>>>=1)){case 0:_.mode=14;break;case 1:if(ae(_),_.mode=20,ee!==6)break;q>>>=2,Z-=2;break e;case 2:_.mode=17;break;case 3:H.msg="invalid block type",_.mode=30}q>>>=2,Z-=2;break;case 14:for(q>>>=7&Z,Z-=7&Z;Z<32;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if((65535&q)!=(q>>>16^65535)){H.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&q,Z=q=0,_.mode=15,ee===6)break e;case 15:_.mode=16;case 16:if(Te=_.length){if(F<Te&&(Te=F),Y<Te&&(Te=Y),Te===0)break e;s.arraySet(L,S,P,Te,$),F-=Te,P+=Te,Y-=Te,$+=Te,_.length-=Te;break}_.mode=12;break;case 17:for(;Z<14;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(_.nlen=257+(31&q),q>>>=5,Z-=5,_.ndist=1+(31&q),q>>>=5,Z-=5,_.ncode=4+(15&q),q>>>=4,Z-=4,286<_.nlen||30<_.ndist){H.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;Z<3;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}_.lens[Re[_.have++]]=7&q,q>>>=3,Z-=3}for(;_.have<19;)_.lens[Re[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,Ae={bits:_.lenbits},Se=l(0,_.lens,0,19,_.lencode,0,_.work,Ae),_.lenbits=Ae.bits,Se){H.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;et=(ne=_.lencode[q&(1<<_.lenbits)-1])>>>16&255,Qe=65535&ne,!((Ye=ne>>>24)<=Z);){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(Qe<16)q>>>=Ye,Z-=Ye,_.lens[_.have++]=Qe;else{if(Qe===16){for(se=Ye+2;Z<se;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(q>>>=Ye,Z-=Ye,_.have===0){H.msg="invalid bit length repeat",_.mode=30;break}T=_.lens[_.have-1],Te=3+(3&q),q>>>=2,Z-=2}else if(Qe===17){for(se=Ye+3;Z<se;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}Z-=Ye,T=0,Te=3+(7&(q>>>=Ye)),q>>>=3,Z-=3}else{for(se=Ye+7;Z<se;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}Z-=Ye,T=0,Te=11+(127&(q>>>=Ye)),q>>>=7,Z-=7}if(_.have+Te>_.nlen+_.ndist){H.msg="invalid bit length repeat",_.mode=30;break}for(;Te--;)_.lens[_.have++]=T}}if(_.mode===30)break;if(_.lens[256]===0){H.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,Ae={bits:_.lenbits},Se=l(a,_.lens,0,_.nlen,_.lencode,0,_.work,Ae),_.lenbits=Ae.bits,Se){H.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,Ae={bits:_.distbits},Se=l(y,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,Ae),_.distbits=Ae.bits,Se){H.msg="invalid distances set",_.mode=30;break}if(_.mode=20,ee===6)break e;case 20:_.mode=21;case 21:if(6<=F&&258<=Y){H.next_out=$,H.avail_out=Y,H.next_in=P,H.avail_in=F,_.hold=q,_.bits=Z,v(H,Ee),$=H.next_out,L=H.output,Y=H.avail_out,P=H.next_in,S=H.input,F=H.avail_in,q=_.hold,Z=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;et=(ne=_.lencode[q&(1<<_.lenbits)-1])>>>16&255,Qe=65535&ne,!((Ye=ne>>>24)<=Z);){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(et&&!(240&et)){for(Je=Ye,ht=et,lt=Qe;et=(ne=_.lencode[lt+((q&(1<<Je+ht)-1)>>Je)])>>>16&255,Qe=65535&ne,!(Je+(Ye=ne>>>24)<=Z);){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}q>>>=Je,Z-=Je,_.back+=Je}if(q>>>=Ye,Z-=Ye,_.back+=Ye,_.length=Qe,et===0){_.mode=26;break}if(32&et){_.back=-1,_.mode=12;break}if(64&et){H.msg="invalid literal/length code",_.mode=30;break}_.extra=15&et,_.mode=22;case 22:if(_.extra){for(se=_.extra;Z<se;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}_.length+=q&(1<<_.extra)-1,q>>>=_.extra,Z-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;et=(ne=_.distcode[q&(1<<_.distbits)-1])>>>16&255,Qe=65535&ne,!((Ye=ne>>>24)<=Z);){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(!(240&et)){for(Je=Ye,ht=et,lt=Qe;et=(ne=_.distcode[lt+((q&(1<<Je+ht)-1)>>Je)])>>>16&255,Qe=65535&ne,!(Je+(Ye=ne>>>24)<=Z);){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}q>>>=Je,Z-=Je,_.back+=Je}if(q>>>=Ye,Z-=Ye,_.back+=Ye,64&et){H.msg="invalid distance code",_.mode=30;break}_.offset=Qe,_.extra=15&et,_.mode=24;case 24:if(_.extra){for(se=_.extra;Z<se;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}_.offset+=q&(1<<_.extra)-1,q>>>=_.extra,Z-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){H.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(Y===0)break e;if(Te=Ee-Y,_.offset>Te){if((Te=_.offset-Te)>_.whave&&_.sane){H.msg="invalid distance too far back",_.mode=30;break}ct=Te>_.wnext?(Te-=_.wnext,_.wsize-Te):_.wnext-Te,Te>_.length&&(Te=_.length),ft=_.window}else ft=L,ct=$-_.offset,Te=_.length;for(Y<Te&&(Te=Y),Y-=Te,_.length-=Te;L[$++]=ft[ct++],--Te;);_.length===0&&(_.mode=21);break;case 26:if(Y===0)break e;L[$++]=_.length,Y--,_.mode=21;break;case 27:if(_.wrap){for(;Z<32;){if(F===0)break e;F--,q|=S[P++]<<Z,Z+=8}if(Ee-=Y,H.total_out+=Ee,_.total+=Ee,Ee&&(H.adler=_.check=_.flags?i(_.check,L,Ee,$-Ee):f(_.check,L,Ee,$-Ee)),Ee=Y,(_.flags?q:w(q))!==_.check){H.msg="incorrect data check",_.mode=30;break}Z=q=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;Z<32;){if(F===0)break e;F--,q+=S[P++]<<Z,Z+=8}if(q!==(4294967295&_.total)){H.msg="incorrect length check",_.mode=30;break}Z=q=0}_.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return g}return H.next_out=$,H.avail_out=Y,H.next_in=P,H.avail_in=F,_.hold=q,_.bits=Z,(_.wsize||Ee!==H.avail_out&&_.mode<30&&(_.mode<27||ee!==4))&&pe(H,H.output,H.next_out,Ee-H.avail_out)?(_.mode=31,-4):(ye-=H.avail_in,Ee-=H.avail_out,H.total_in+=ye,H.total_out+=Ee,_.total+=Ee,_.wrap&&Ee&&(H.adler=_.check=_.flags?i(_.check,L,Ee,H.next_out-Ee):f(_.check,L,Ee,H.next_out-Ee)),H.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(ye==0&&Ee===0||ee===4)&&Se===u&&(Se=-5),Se)},o.inflateEnd=function(H){if(!H||!H.state)return g;var ee=H.state;return ee.window&&(ee.window=null),H.state=null,u},o.inflateGetHeader=function(H,ee){var _;return H&&H.state&&2&(_=H.state).wrap?((_.head=ee).done=!1,u):g},o.inflateSetDictionary=function(H,ee){var _,S=ee.length;return H&&H.state?(_=H.state).wrap!==0&&_.mode!==11?g:_.mode===11&&f(1,ee,S,0)!==_.check?-3:pe(H,ee,S,S)?(_.mode=31,-4):(_.havedict=1,u):g},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,o){var s=r("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(a,y,u,g,I,d,A,w){var C,O,N,D,W,M,V,G,ae,pe=w.bits,H=0,ee=0,_=0,S=0,L=0,P=0,$=0,F=0,Y=0,q=0,Z=null,ye=0,Ee=new s.Buf16(16),Te=new s.Buf16(16),ct=null,ft=0;for(H=0;H<=15;H++)Ee[H]=0;for(ee=0;ee<g;ee++)Ee[y[u+ee]]++;for(L=pe,S=15;1<=S&&Ee[S]===0;S--);if(S<L&&(L=S),S===0)return I[d++]=20971520,I[d++]=20971520,w.bits=1,0;for(_=1;_<S&&Ee[_]===0;_++);for(L<_&&(L=_),H=F=1;H<=15;H++)if(F<<=1,(F-=Ee[H])<0)return-1;if(0<F&&(a===0||S!==1))return-1;for(Te[1]=0,H=1;H<15;H++)Te[H+1]=Te[H]+Ee[H];for(ee=0;ee<g;ee++)y[u+ee]!==0&&(A[Te[y[u+ee]]++]=ee);if(M=a===0?(Z=ct=A,19):a===1?(Z=f,ye-=257,ct=i,ft-=257,256):(Z=v,ct=l,-1),H=_,W=d,$=ee=q=0,N=-1,D=(Y=1<<(P=L))-1,a===1&&852<Y||a===2&&592<Y)return 1;for(;;){for(V=H-$,ae=A[ee]<M?(G=0,A[ee]):A[ee]>M?(G=ct[ft+A[ee]],Z[ye+A[ee]]):(G=96,0),C=1<<H-$,_=O=1<<P;I[W+(q>>$)+(O-=C)]=V<<24|G<<16|ae|0,O!==0;);for(C=1<<H-1;q&C;)C>>=1;if(C!==0?(q&=C-1,q+=C):q=0,ee++,--Ee[H]==0){if(H===S)break;H=y[u+A[ee]]}if(L<H&&(q&D)!==N){for($===0&&($=L),W+=_,F=1<<(P=H-$);P+$<S&&!((F-=Ee[P+$])<=0);)P++,F<<=1;if(Y+=1<<P,a===1&&852<Y||a===2&&592<Y)return 1;I[N=q&D]=L<<24|P<<16|W-d|0}}return q!==0&&(I[W+q]=H-$<<24|64<<16|0),w.bits=L,0}},{"../utils/common":41}],51:[function(r,n,o){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,o){var s=r("../utils/common"),f=0,i=1;function v(ne){for(var ve=ne.length;0<=--ve;)ne[ve]=0}var l=0,a=29,y=256,u=y+1+a,g=30,I=19,d=2*u+1,A=15,w=16,C=7,O=256,N=16,D=17,W=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=new Array(2*(u+2));v(pe);var H=new Array(2*g);v(H);var ee=new Array(512);v(ee);var _=new Array(256);v(_);var S=new Array(a);v(S);var L,P,$,F=new Array(g);function Y(ne,ve,Re,Le,we){this.static_tree=ne,this.extra_bits=ve,this.extra_base=Re,this.elems=Le,this.max_length=we,this.has_stree=ne&&ne.length}function q(ne,ve){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ve}function Z(ne){return ne<256?ee[ne]:ee[256+(ne>>>7)]}function ye(ne,ve){ne.pending_buf[ne.pending++]=255&ve,ne.pending_buf[ne.pending++]=ve>>>8&255}function Ee(ne,ve,Re){ne.bi_valid>w-Re?(ne.bi_buf|=ve<<ne.bi_valid&65535,ye(ne,ne.bi_buf),ne.bi_buf=ve>>w-ne.bi_valid,ne.bi_valid+=Re-w):(ne.bi_buf|=ve<<ne.bi_valid&65535,ne.bi_valid+=Re)}function Te(ne,ve,Re){Ee(ne,Re[2*ve],Re[2*ve+1])}function ct(ne,ve){for(var Re=0;Re|=1&ne,ne>>>=1,Re<<=1,0<--ve;);return Re>>>1}function ft(ne,ve,Re){var Le,we,De=new Array(A+1),qe=0;for(Le=1;Le<=A;Le++)De[Le]=qe=qe+Re[Le-1]<<1;for(we=0;we<=ve;we++){var m=ne[2*we+1];m!==0&&(ne[2*we]=ct(De[m]++,m))}}function Ye(ne){var ve;for(ve=0;ve<u;ve++)ne.dyn_ltree[2*ve]=0;for(ve=0;ve<g;ve++)ne.dyn_dtree[2*ve]=0;for(ve=0;ve<I;ve++)ne.bl_tree[2*ve]=0;ne.dyn_ltree[2*O]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function et(ne){8<ne.bi_valid?ye(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function Qe(ne,ve,Re,Le){var we=2*ve,De=2*Re;return ne[we]<ne[De]||ne[we]===ne[De]&&Le[ve]<=Le[Re]}function Je(ne,ve,Re){for(var Le=ne.heap[Re],we=Re<<1;we<=ne.heap_len&&(we<ne.heap_len&&Qe(ve,ne.heap[we+1],ne.heap[we],ne.depth)&&we++,!Qe(ve,Le,ne.heap[we],ne.depth));)ne.heap[Re]=ne.heap[we],Re=we,we<<=1;ne.heap[Re]=Le}function ht(ne,ve,Re){var Le,we,De,qe,m=0;if(ne.last_lit!==0)for(;Le=ne.pending_buf[ne.d_buf+2*m]<<8|ne.pending_buf[ne.d_buf+2*m+1],we=ne.pending_buf[ne.l_buf+m],m++,Le===0?Te(ne,we,ve):(Te(ne,(De=_[we])+y+1,ve),(qe=M[De])!==0&&Ee(ne,we-=S[De],qe),Te(ne,De=Z(--Le),Re),(qe=V[De])!==0&&Ee(ne,Le-=F[De],qe)),m<ne.last_lit;);Te(ne,O,ve)}function lt(ne,ve){var Re,Le,we,De=ve.dyn_tree,qe=ve.stat_desc.static_tree,m=ve.stat_desc.has_stree,R=ve.stat_desc.elems,h=-1;for(ne.heap_len=0,ne.heap_max=d,Re=0;Re<R;Re++)De[2*Re]!==0?(ne.heap[++ne.heap_len]=h=Re,ne.depth[Re]=0):De[2*Re+1]=0;for(;ne.heap_len<2;)De[2*(we=ne.heap[++ne.heap_len]=h<2?++h:0)]=1,ne.depth[we]=0,ne.opt_len--,m&&(ne.static_len-=qe[2*we+1]);for(ve.max_code=h,Re=ne.heap_len>>1;1<=Re;Re--)Je(ne,De,Re);for(we=R;Re=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],Je(ne,De,1),Le=ne.heap[1],ne.heap[--ne.heap_max]=Re,ne.heap[--ne.heap_max]=Le,De[2*we]=De[2*Re]+De[2*Le],ne.depth[we]=(ne.depth[Re]>=ne.depth[Le]?ne.depth[Re]:ne.depth[Le])+1,De[2*Re+1]=De[2*Le+1]=we,ne.heap[1]=we++,Je(ne,De,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(c,p){var j,Q,ge,be,Ke,tt,rt=p.dyn_tree,wt=p.max_code,mt=p.stat_desc.static_tree,Xr=p.stat_desc.has_stree,hn=p.stat_desc.extra_bits,dn=p.stat_desc.extra_base,$r=p.stat_desc.max_length,Ir=0;for(be=0;be<=A;be++)c.bl_count[be]=0;for(rt[2*c.heap[c.heap_max]+1]=0,j=c.heap_max+1;j<d;j++)$r<(be=rt[2*rt[2*(Q=c.heap[j])+1]+1]+1)&&(be=$r,Ir++),rt[2*Q+1]=be,wt<Q||(c.bl_count[be]++,Ke=0,dn<=Q&&(Ke=hn[Q-dn]),tt=rt[2*Q],c.opt_len+=tt*(be+Ke),Xr&&(c.static_len+=tt*(mt[2*Q+1]+Ke)));if(Ir!==0){do{for(be=$r-1;c.bl_count[be]===0;)be--;c.bl_count[be]--,c.bl_count[be+1]+=2,c.bl_count[$r]--,Ir-=2}while(0<Ir);for(be=$r;be!==0;be--)for(Q=c.bl_count[be];Q!==0;)wt<(ge=c.heap[--j])||(rt[2*ge+1]!==be&&(c.opt_len+=(be-rt[2*ge+1])*rt[2*ge],rt[2*ge+1]=be),Q--)}}(ne,ve),ft(De,h,ne.bl_count)}function T(ne,ve,Re){var Le,we,De=-1,qe=ve[1],m=0,R=7,h=4;for(qe===0&&(R=138,h=3),ve[2*(Re+1)+1]=65535,Le=0;Le<=Re;Le++)we=qe,qe=ve[2*(Le+1)+1],++m<R&&we===qe||(m<h?ne.bl_tree[2*we]+=m:we!==0?(we!==De&&ne.bl_tree[2*we]++,ne.bl_tree[2*N]++):m<=10?ne.bl_tree[2*D]++:ne.bl_tree[2*W]++,De=we,h=(m=0)===qe?(R=138,3):we===qe?(R=6,3):(R=7,4))}function Se(ne,ve,Re){var Le,we,De=-1,qe=ve[1],m=0,R=7,h=4;for(qe===0&&(R=138,h=3),Le=0;Le<=Re;Le++)if(we=qe,qe=ve[2*(Le+1)+1],!(++m<R&&we===qe)){if(m<h)for(;Te(ne,we,ne.bl_tree),--m!=0;);else we!==0?(we!==De&&(Te(ne,we,ne.bl_tree),m--),Te(ne,N,ne.bl_tree),Ee(ne,m-3,2)):m<=10?(Te(ne,D,ne.bl_tree),Ee(ne,m-3,3)):(Te(ne,W,ne.bl_tree),Ee(ne,m-11,7));De=we,h=(m=0)===qe?(R=138,3):we===qe?(R=6,3):(R=7,4)}}v(F);var Ae=!1;function se(ne,ve,Re,Le){Ee(ne,(l<<1)+(Le?1:0),3),function(we,De,qe,m){et(we),ye(we,qe),ye(we,~qe),s.arraySet(we.pending_buf,we.window,De,qe,we.pending),we.pending+=qe}(ne,ve,Re)}o._tr_init=function(ne){Ae||(function(){var ve,Re,Le,we,De,qe=new Array(A+1);for(we=Le=0;we<a-1;we++)for(S[we]=Le,ve=0;ve<1<<M[we];ve++)_[Le++]=we;for(_[Le-1]=we,we=De=0;we<16;we++)for(F[we]=De,ve=0;ve<1<<V[we];ve++)ee[De++]=we;for(De>>=7;we<g;we++)for(F[we]=De<<7,ve=0;ve<1<<V[we]-7;ve++)ee[256+De++]=we;for(Re=0;Re<=A;Re++)qe[Re]=0;for(ve=0;ve<=143;)pe[2*ve+1]=8,ve++,qe[8]++;for(;ve<=255;)pe[2*ve+1]=9,ve++,qe[9]++;for(;ve<=279;)pe[2*ve+1]=7,ve++,qe[7]++;for(;ve<=287;)pe[2*ve+1]=8,ve++,qe[8]++;for(ft(pe,u+1,qe),ve=0;ve<g;ve++)H[2*ve+1]=5,H[2*ve]=ct(ve,5);L=new Y(pe,M,y+1,u,A),P=new Y(H,V,0,g,A),$=new Y(new Array(0),G,0,I,C)}(),Ae=!0),ne.l_desc=new q(ne.dyn_ltree,L),ne.d_desc=new q(ne.dyn_dtree,P),ne.bl_desc=new q(ne.bl_tree,$),ne.bi_buf=0,ne.bi_valid=0,Ye(ne)},o._tr_stored_block=se,o._tr_flush_block=function(ne,ve,Re,Le){var we,De,qe=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(m){var R,h=4093624447;for(R=0;R<=31;R++,h>>>=1)if(1&h&&m.dyn_ltree[2*R]!==0)return f;if(m.dyn_ltree[18]!==0||m.dyn_ltree[20]!==0||m.dyn_ltree[26]!==0)return i;for(R=32;R<y;R++)if(m.dyn_ltree[2*R]!==0)return i;return f}(ne)),lt(ne,ne.l_desc),lt(ne,ne.d_desc),qe=function(m){var R;for(T(m,m.dyn_ltree,m.l_desc.max_code),T(m,m.dyn_dtree,m.d_desc.max_code),lt(m,m.bl_desc),R=I-1;3<=R&&m.bl_tree[2*ae[R]+1]===0;R--);return m.opt_len+=3*(R+1)+5+5+4,R}(ne),we=ne.opt_len+3+7>>>3,(De=ne.static_len+3+7>>>3)<=we&&(we=De)):we=De=Re+5,Re+4<=we&&ve!==-1?se(ne,ve,Re,Le):ne.strategy===4||De===we?(Ee(ne,2+(Le?1:0),3),ht(ne,pe,H)):(Ee(ne,4+(Le?1:0),3),function(m,R,h,c){var p;for(Ee(m,R-257,5),Ee(m,h-1,5),Ee(m,c-4,4),p=0;p<c;p++)Ee(m,m.bl_tree[2*ae[p]+1],3);Se(m,m.dyn_ltree,R-1),Se(m,m.dyn_dtree,h-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,qe+1),ht(ne,ne.dyn_ltree,ne.dyn_dtree)),Ye(ne),Le&&et(ne)},o._tr_tally=function(ne,ve,Re){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ve>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ve,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Re,ne.last_lit++,ve===0?ne.dyn_ltree[2*Re]++:(ne.matches++,ve--,ne.dyn_ltree[2*(_[Re]+y+1)]++,ne.dyn_dtree[2*Z(ve)]++),ne.last_lit===ne.lit_bufsize-1},o._tr_align=function(ne){Ee(ne,2,3),Te(ne,O,pe),function(ve){ve.bi_valid===16?(ye(ve,ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0):8<=ve.bi_valid&&(ve.pending_buf[ve.pending++]=255&ve.bi_buf,ve.bi_buf>>=8,ve.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(r,n,o){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,o){(function(s){(function(f,i){if(!f.setImmediate){var v,l,a,y,u=1,g={},I=!1,d=f.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(f);A=A&&A.setTimeout?A:f,v={}.toString.call(f.process)==="[object process]"?function(N){process.nextTick(function(){C(N)})}:function(){if(f.postMessage&&!f.importScripts){var N=!0,D=f.onmessage;return f.onmessage=function(){N=!1},f.postMessage("","*"),f.onmessage=D,N}}()?(y="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",O,!1):f.attachEvent("onmessage",O),function(N){f.postMessage(y+N,"*")}):f.MessageChannel?((a=new MessageChannel).port1.onmessage=function(N){C(N.data)},function(N){a.port2.postMessage(N)}):d&&"onreadystatechange"in d.createElement("script")?(l=d.documentElement,function(N){var D=d.createElement("script");D.onreadystatechange=function(){C(N),D.onreadystatechange=null,l.removeChild(D),D=null},l.appendChild(D)}):function(N){setTimeout(C,0,N)},A.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var D=new Array(arguments.length-1),W=0;W<D.length;W++)D[W]=arguments[W+1];var M={callback:N,args:D};return g[u]=M,v(u),u++},A.clearImmediate=w}function w(N){delete g[N]}function C(N){if(I)setTimeout(C,0,N);else{var D=g[N];if(D){I=!0;try{(function(W){var M=W.callback,V=W.args;switch(V.length){case 0:M();break;case 1:M(V[0]);break;case 2:M(V[0],V[1]);break;case 3:M(V[0],V[1],V[2]);break;default:M.apply(i,V)}})(D)}finally{w(N),I=!1}}}}function O(N){N.source===f&&typeof N.data=="string"&&N.data.indexOf(y)===0&&C(+N.data.slice(y.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Hr<"u"?Hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Rh);var hb=Rh.exports;const Th=gs(hb);function qc(e,t){const r=new Th,n=t&&r.folder(t)||r;return e.forEach(o=>{try{const s=t?`${t}/${o.nameWithExt}`:o.nameWithExt;if(!o.isDirectory&&!o.base64Content&&!o.textContent){n.file(s,"");return}o.isDirectory?n.folder(s):n.file(s,o.base64Content||btoa(o.textContent),{base64:!0})}catch(s){console.error(`Failed to add file ${o.nameWithExt} to zip archive`,s)}}),r.generateAsync({type:"blob"})}async function Oh(e,t,r){const n=await qc(t,r);fb.saveAs(n,`${e}.zip`)}async function db(e){const r=await new Th().loadAsync(e),n=[];for(const o in r.files){const s=r.files[o];n.push({nameWithExt:s.name.replace(`${e.name.replace(".zip","")}/`,""),base64Content:await s.async("base64"),isDirectory:s.dir})}return n}const Nh=e=>!e.meta.initialChange&&"context"in e,pb=e=>{const[t,r]=e;return Ph(t,r)},Ph=(e,t)=>e.meta.doc&&t.meta.doc?!e.meta.doc.eq(t.meta.doc):e.value!==t.value,Ja="sketch.json",mb=[Ja,Gc];function Lh(e){return mb.some(t=>e.path.includes(t))}function fn(e){const t=e.indexOf(":")+1;let r=e.indexOf("/sketches_v2");return r===-1&&(r=e.indexOf("/libraries_v2")),e.substring(t,r)}const gb="cannot access resources from a private space";function vb(e,t){var o,s;const r=e.cause,n=((s=(o=r.message)==null?void 0:o.detail)==null?void 0:s.toLowerCase())===gb;return t?r.status===401&&(t(r)||n):r.status===401&&n}const as="EditorBeta_Sketch",yb="me",bb="LyoNDSovDQ12b2lkIHNldHVwKCkgew0gICAgDX0NDXZvaWQgbG9vcCgpIHsNICAgIA19DQ==";let Xn={};function wb(){Xn={}}function xb(e,t){return{...e,...t}}function Vc(e){Xn=xb(Xn,e)}const _b=new Map;function Eb(e){const t=new Map(e);return Vc({codeSubjects:t}),t}function Sb(){const e=new ln().pipe(_c((t,[r,n])=>n?Zy(t,r):Xy(t,r),new Set),ei(1));return Vc({unsavedFiles$:e}),e}function Cb(){const e=new ln().pipe(es(()=>{t.unsubscribe()}),ei(1)),t=e.subscribe(({fileId:r,value:n,initialContext:o,isLibrary:s,lineToScroll:f,fromAssist:i})=>{const v=Sr(r).getValue(),l=s?`${n}
`+v.value:n,a=Sr(r).getValue();Hc(r,l,Nh(a)?a.context.saveCode:o.saveCode,void 0,!0,void 0,f,i)});return Vc({codeSubjectInjections$:e}),e}function oi(e=_b){let{codeSubjects:t}=Xn;return t||(t=Eb(e),t)}function Sr(e){const t=oi(),r=typeof e=="string"?t.get(e):qa;if(r===void 0)throw new Error(`Code subject with id ${e} not found`);return r}const Bh=1e3;function As(){let{unsavedFiles$:e}=Xn;return e||(e=Sb(),e)}function Dh(e,t){As().next([e,t])}function kb(){let{codeSubjectInjections$:e}=Xn;return e||(e=Cb(),e)}function QS(e,t,r,n,o,s){return Sr(e).getValue().value.indexOf(t)!==-1?!1:(kb().next({fileId:e,value:t,initialContext:r,isLibrary:n,lineToScroll:o,fromAssist:s}),!0)}function Gl(e){return function(t){return t.pipe(kn(Nh),Rm(()=>Dm(e)))}}function Ab(e,t=Bh){const r=e.path,n=e.scopedContent||e.content,o={fileId:r,meta:{initialChange:!0,instanceId:Mr.uniqueId(),ext:e.extension,hash:e.hash},value:n},s=new In(o),f=s.pipe(Gl(t),Cm(o),km(),kn(pb),Ji(([,y])=>y),es(()=>{v.unsubscribe()})),i=As(),v=f.subscribe(async({context:y,value:u,meta:g})=>{i.next([r,!0]);try{const I=await y.saveCode(r,u,g.hash);if(I&&"isUnsaved"in I&&(I!=null&&I.isUnsaved))return;i.next([r,!1]),I&&"newHash"in I&&Hc(r,u,y.saveCode,void 0,!1,I==null?void 0:I.newHash)}catch(I){console.error(I)}}),a=s.pipe(Gl(t),_c((y,u)=>({isSameCode:!Ph(y,u),value:u.value,meta:{doc:u.meta.doc}}),{isSameCode:!1,value:n,meta:{}}),kn(({isSameCode:y})=>y),es(()=>{a.unsubscribe()})).subscribe(()=>{i.next([r,!1])});return s}function Fh(e,t=Bh){const r=oi(),n=Ab(e,t);r.set(e.path,n)}function Ib(e){oi().forEach(r=>{const n=r.getValue().fileId;new RegExp(`^${e}/`).test(n)&&Is(n)})}function Is(e){Sr(e).complete(),oi().delete(e)}function Hc(e,t,r,n,o=!1,s,f,i){const v=Sr(e);As().next([e,!0]);const a=v.getValue().meta.instanceId,y=!o&&a.includes(Bo),u=(o||y)&&!i,g=(o||y)&&i;let I=a;const d=I.includes(Bo);u?I=d&&y?I.split(Bo)[0]:Mr.uniqueId():g&&(I=`${d?Mr.uniqueId():I}${Bo}`);const A=v.getValue().meta.ext,w=s||v.getValue().meta.hash;v.next({fileId:e,value:t,meta:{initialChange:!1,instanceId:I,doc:n,ext:A,hash:w,lineToScroll:f},context:{saveCode:r}})}function JS(e,t,r,n){Hc(e,t,r,void 0,!1,n),Dh(e,!1)}async function eC(){const e=await yt();if(!e)return bt();try{const t=await Bm(e);return(t==null?void 0:t.status)==200}catch{return!1}}async function Wc(e=as,t=bb,r=yb,n=[]){const o=await yt();if(!o)return bt();const s=ir(),f=await _m({user_id:r,path:e,ino:t},o,s);return n.length>0&&await Promise.all(n.map(i=>(()=>{const v=Er(i.content,i.mimetype);return xc({path:`${f.path}/${i.fullName}`},{data:v},o,s)})())),{owner:fn(f.path),...f}}async function Rb(e){const t=await yt();if(!t)return bt();const r=ir(),{id:n,secrets:o}=e,s=await ys({id:n},{secrets:{data:o}},t,r);return{owner:fn(s.path),...s}}async function Tb(e){const t=await yt();if(!t)return bt();const r=ir(),{id:n,...o}=e,s=await ys({id:n},o,t,r);return{owner:fn(s.path),...s}}async function Ob(e){const t=await yt();if(!t)return bt();const r=ir(),{id:n,...o}=e,s=await ys({id:n},o,t,r);return{owner:fn(s.path),...s}}async function Nb(e){const t=await yt();if(!t)return bt();const r=ir(),{id:n,...o}=e,s=await ys({id:n},o,t,r);return{owner:fn(s.path),...s}}async function Pb(e){const t=await yt();if(!t)return bt();const r=ir(),o=await wm({id:e},t===ri?void 0:t,r);return o?{owner:fn(o.path),...o}:null}async function Lb(e){const t=await yt();if(!t)return bt();const r=ir();await Om({id:e},t,r)}async function Bb(e){const t=await yt();if(!t)return bt();const r=ir();return(await xm({user_id:"me",name_like:e},t,r)).map(s=>({owner:fn(s.path),...s}))}async function Kc(e,t,r,n,o){const s=await yt(void 0,o);if(!s)return bt();const f=r?void 0:ir(),{data:i,mimetype:v,revision:l,href:a,modifiedAt:y}=await Sm(e,s===ri?void 0:s,f);if(typeof i>"u")return Promise.reject(new Error("No data to decode in retrieved file"));const u=e.substring(e.lastIndexOf(".")+1),g=Mc(i,v),I=n&&g.split(`
`).slice(n.start,n.end+1).join(`
`);return{name:wc(t),fullName:t,extension:u,data:i,content:g,scopedContent:I,mimetype:v,path:e,hash:l==null?void 0:l.hash,href:a,modifiedAt:y}}async function Yc(e,t,r){const n=await yt(void 0,r);if(!n)return bt();const o=t?void 0:ir();return Em(e,n===ri?void 0:n,o)}async function Db(e,t,r){const n=await yt();if(!n)return bt();const o=ir(),s=Er(t);return await xc(e,{data:s,hash:r},n,o)}async function Fb(e,t,r=""){const n=await yt();if(!n)return bt();const o=ir(),s=Pm.includes(`.${t}`)?r:Er(r);return xc(e,{data:s},n,o)}class jb extends Error{constructor(t){super(t),this.name="SketchNameConflict"}}async function jh(e,t){const r=await yt();if(!r)return bt();const n=ir();try{await Nm({from:e,to:t},r,n)}catch(o){throw o.status===409?new jb("Sketch name already exists"):o}}async function Mb(e){const t=await yt();if(!t)return bt();const r=ir();return await Lm(e,t,r)}async function Mh(){const e=await yt(void 0,!0);return e?(await Am(e)).map(r=>({...r,owner:r.path&&fn(r.path)})):bt()}async function Ub(e){const t=await yt(void 0,!0);return t?Im(e,t):bt()}async function $b(e,t){const r=await yt(void 0,!0);if(!r)return bt();const n=t.map(o=>{if(o.fullName==="library.properties"){const s=C1.parse(o.content);s.name=e;let f="";for(const i in s)f+=`${i}=${s[i]}
`;return{nameWithExt:o.fullName,textContent:f}}return{nameWithExt:o.fullName,textContent:o.content}});try{const o=await qc(n),{response:s}=await Df(o,r);if(!s)throw new Error("Create API returned no information about the newly created library");return s}catch(o){return console.error(o),Promise.reject(new Error("Error creating new custom library"))}}async function zb(e){const t=await yt(void 0,!0);if(!t)return bt();await Tm({id:e},t)}class ql extends Error{constructor(t){super(t),this.name="MalformedLibrary"}}async function Gb(e){const t=await yt(void 0,!0);if(!t)return bt();const r=await db(e),n=r.find(l=>l.nameWithExt.match(/^\/?library.properties/))||r.filter(l=>l.nameWithExt.match(/^\/?[A-Za-z0-9][A-Za-z0-9_.-]*\/$/)).map(l=>r.find(a=>a.nameWithExt.startsWith(`${l.nameWithExt}library.properties`))).find(l=>l);if(!n||!n.base64Content&&!n.textContent)throw new ql("library does not contain a library.properties file");const o=n.nameWithExt.replace(/\/?library.properties$/,"");let s=r.filter(l=>l.nameWithExt.startsWith(o)&&!l.nameWithExt.match(/^\/?(__MACOSX\/|\.DS_Store|\.git)/));o!=="/"&&(s.forEach(l=>{l.nameWithExt=l.nameWithExt.replace(o,"")}),s=s.filter(l=>l.nameWithExt!=="/"));const f=await qc(s),{error:i,response:v}=await Df(f,t);if(i)throw new ql(i);if(!v)throw new Error("Create API returned no information about the newly created library");return v}async function tC(e,t,r,n){const o=await Kc(`${t}/${Ja}`,Ja,!1),s=JSON.parse(o.content).secrets,f=s.length?ph(s.map(({name:a})=>({name:a,value:""}))):void 0;let i=Sr(r.path).value.value,v=Er(i,r.mimetype);f&&(v=mh({...r,data:v},i,r.mimetype).data,i=void 0);const l=n.map(a=>{const y=Sr(a.path).value.value,u=Er(y,a.mimetype);return{nameWithExt:a.fullName,base64Content:u,textContent:y}});f&&l.push({nameWithExt:f.name,base64Content:f.data}),l.push({nameWithExt:o.fullName,base64Content:Er(o.content,o.mimetype)}),l.push({nameWithExt:r.fullName,base64Content:v,textContent:i}),await Oh(e,l)}var Rs=(e=>(e.HTTP="http",e.HTTPS="https",e))(Rs||{});async function rC(e,t,r,n=Fm,o=Ts()){return jm(Et,e,t,r,o,n)}function Ts(){let{stateChangeSubject$:e}=Et;return e||(e=Ff(Rt),e)}var it=(e=>(e.Config="config",e.SocketConnected="socketConnected",e.DownloadQuota="downloadQuota",e.Ports="ports",e.NetworkPorts="networkPorts",e.AgentInfo="agentInfo",e.Socket="socket",e.UploadStatus="uploadStatus",e.SerialMonitors="serialMonitors",e.PortsListQuota="portsListQuota",e.UploadQuota="uploadQuota",e))(it||{});const Uh={[it.Config]:{protocolToUse:Rs.HTTP,useV2:!1},[it.SocketConnected]:!1,[it.DownloadQuota]:[],[it.NetworkPorts]:[],[it.Ports]:[],[it.SerialMonitors]:[],[it.PortsListQuota]:[],[it.UploadQuota]:[],searchedForDaemon:!1,socketEventsAreSet:!1};let Et={...Uh};function qb(){Et={...Uh}}function Rt(e,t=!1){Et=jf(Et,e);const r=Ts();t||Mf(Et,r)}function nC(){const{[it.Socket]:e,[it.SocketConnected]:t,[it.PortsListQuota]:r,[it.UploadQuota]:n,socketEventsAreSet:o,uploadConcatResponseStream$:s,uploadResponseStream$:f,serialMonitorsMsgStream$:i,serialMonitorsDisconnections$:v,stateChangeSubject$:l,...a}=Et;return{...a,[it.SocketConnected]:null,[it.PortsListQuota]:[],[it.UploadQuota]:[],socketEventsAreSet:!1}}var Xo=(e=>(e.Latest="latest",e))(Xo||{}),Li=(e=>(e.Arduino="arduino",e))(Li||{});const iC=e=>!!(e.http&&e.ws),oC=e=>!!(e.https&&e.wss),sC=e=>!!e.os,Vb="127.0.0.1",Hb="localhost",Wb=`${Rs.HTTP}://${Vb}`,Kb=`${Rs.HTTPS}://${Hb}`,aC="bin",Vl=Number(at.AGENT_LAST_POSSIBLE_PORT),ec=Number(at.AGENT_FIRST_POSSIBLE_PORT),cC=3e4,$h=new Mm;var vf;const Yb=((vf=$h.getOS().name)==null?void 0:vf.indexOf("Windows"))!==-1,Na=$h.getBrowser(),uC=(()=>{const e=Yb?[{toolName:"windows-drivers",toolVersion:Xo.Latest,packageName:Li.Arduino}]:[];return e.push({toolName:"bossac",toolVersion:"1.7.0",packageName:Li.Arduino},{toolName:"fwupdater",toolVersion:Xo.Latest,packageName:Li.Arduino},{toolName:"rp2040tools",toolVersion:Xo.Latest,packageName:Li.Arduino}),e})();function Zb(e,t,r){return async()=>{const n=await Um(`${e}:${t}`,r);return n||Promise.reject()}}const Xb=Vl&&ec?Array(Vl-ec+1):[],Qb=Array.from(Xb,(e,t)=>{var o,s,f;const r=ec+t,n=(o=Na.name)!=null&&o.includes("Chrome")||(s=Na.name)!=null&&s.includes("Firefox")||(f=Na.name)!=null&&f.includes("Edge")?Wb:Kb;return Zb(n,r,at.AGENT_INFO_ENDPOINT)});function lC(){return Qb.map(e=>e())}var xn=(e=>(e.Sent="sent",e.Pending="pending",e.Success="success",e.Error="error",e))(xn||{}),tc=(e=>(e.Success="Success",e.Pending="Pending",e))(tc||{});function fC(e){return!!(e.name&&e.version&&e.packager)}var Ft=(e=>(e[e.ListCommandPortsResponse=0]="ListCommandPortsResponse",e[e.ListCommandNetworkPortsResponse=1]="ListCommandNetworkPortsResponse",e[e.SerialMonitorStatusUpdate=2]="SerialMonitorStatusUpdate",e[e.SerialMonitorMessage=3]="SerialMonitorMessage",e[e.DownloadStatusResponse=4]="DownloadStatusResponse",e[e.Upload=5]="Upload",e[e.Unknown=6]="Unknown",e))(Ft||{});function hC(e){return{endpointUrl:e.url,status:e.status,http:e.http,https:e.https,ws:e.ws,wss:e.wss,updateUrl:e.update_url,version:e.version,os:e.os}}function Hl(e){const{Ports:t,Network:r}=e;return{ports:t.map(n=>({baud:n.Baud,bufferAlgorithm:n.BufferAlgorithm,deviceClass:n.DeviceClass,isOpen:n.IsOpen,isPrimary:n.IsPrimary,portName:n.Name,networkPort:n.NetworkPort,productId:n.ProductID,serialNumber:n.SerialNumber,vendorId:n.VendorID,version:n.Ver})),areNetworkPorts:r}}function Jb(e){const{DownloadStatus:t,Msg:r}=e;return{status:t,message:r}}function ew(e){const{ProgrammerStatus:t,Msg:r,Flash:n}=e;return{status:t,message:r,flash:n}}function tw(e){const{Cmd:t,Port:r,Baud:n}=e;return{status:t,port:r,baudRate:n}}function rw(e){const{P:t,D:r}=e;return{port:t,data:r}}const nw={[Ft.ListCommandPortsResponse]:Hl,[Ft.ListCommandNetworkPortsResponse]:Hl,[Ft.SerialMonitorStatusUpdate]:tw,[Ft.SerialMonitorMessage]:rw,[Ft.DownloadStatusResponse]:Jb,[Ft.Upload]:ew,[Ft.Unknown]:e=>e};var rc={exports:{}},iw=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ow=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],zh=function(t){var r=t,n=t.indexOf("["),o=t.indexOf("]");n!=-1&&o!=-1&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=iw.exec(t||""),f={},i=14;i--;)f[ow[i]]=s[i]||"";return n!=-1&&o!=-1&&(f.source=r,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=sw(f,f.path),f.queryKey=aw(f,f.query),f};function sw(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&n.splice(0,1),t.substr(t.length-1,1)=="/"&&n.splice(n.length-1,1),n}function aw(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,s){o&&(r[o]=s)}),r}var nc={exports:{}},ic={exports:{}},Mi=1e3,Ui=Mi*60,$i=Ui*60,zi=$i*24,cw=zi*365.25,uw=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return lw(e);if(r==="number"&&isNaN(e)===!1)return t.long?hw(e):fw(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function lw(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*cw;case"days":case"day":case"d":return r*zi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$i;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ui;case"seconds":case"second":case"secs":case"sec":case"s":return r*Mi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fw(e){return e>=zi?Math.round(e/zi)+"d":e>=$i?Math.round(e/$i)+"h":e>=Ui?Math.round(e/Ui)+"m":e>=Mi?Math.round(e/Mi)+"s":e+"ms"}function hw(e){return zo(e,zi,"day")||zo(e,$i,"hour")||zo(e,Ui,"minute")||zo(e,Mi,"second")||e+" ms"}function zo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=v,t.disable=f,t.enable=s,t.enabled=i,t.humanize=uw,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(l){var a=0,y;for(y in l)a=(a<<5)-a+l.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(l){var a;function y(){if(y.enabled){var u=y,g=+new Date,I=g-(a||g);u.diff=I,u.prev=a,u.curr=g,a=g;for(var d=new Array(arguments.length),A=0;A<d.length;A++)d[A]=arguments[A];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var D=t.formatters[N];if(typeof D=="function"){var W=d[w];O=D.call(u,W),d.splice(w,1),w--}return O}),t.formatArgs.call(u,d);var C=y.log||t.log||console.log.bind(console);C.apply(u,d)}}return y.namespace=l,y.enabled=t.enabled(l),y.useColors=t.useColors(),y.color=r(l),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var l=t.instances.indexOf(this);return l!==-1?(t.instances.splice(l,1),!0):!1}function s(l){t.save(l),t.names=[],t.skips=[];var a,y=(typeof l=="string"?l:"").split(/[\s,]+/),u=y.length;for(a=0;a<u;a++)y[a]&&(l=y[a].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")));for(a=0;a<t.instances.length;a++){var g=t.instances[a];g.enabled=t.enabled(g.namespace)}}function f(){t.enable("")}function i(l){if(l[l.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(l))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(l))return!0;return!1}function v(l){return l instanceof Error?l.stack||l.message:l}})(ic,ic.exports);var dw=ic.exports;(function(e,t){var r={};t=e.exports=dw,t.log=s,t.formatArgs=o,t.save=f,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:v(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(l){var a=this.useColors;if(l[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+l[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;l.splice(1,0,y,"color: inherit");var u=0,g=0;l[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(u++,I==="%c"&&(g=u))}),l.splice(g,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function f(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function i(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=r.DEBUG),l}t.enable(i());function v(){try{return window.localStorage}catch{}}})(nc,nc.exports);var Os=nc.exports,pw=zh,Wl=Os("socket.io-client:url"),mw=gw;function gw(e,t){var r=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(Wl("protocol-less url %s",e),typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),Wl("parse %s",e),r=pw(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var n=r.host.indexOf(":")!==-1,o=n?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}var Ns={},oc={exports:{}},sc={exports:{}},Gi=1e3,qi=Gi*60,Vi=qi*60,Hi=Vi*24,vw=Hi*365.25,yw=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return bw(e);if(r==="number"&&isNaN(e)===!1)return t.long?xw(e):ww(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function bw(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*vw;case"days":case"day":case"d":return r*Hi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Vi;case"minutes":case"minute":case"mins":case"min":case"m":return r*qi;case"seconds":case"second":case"secs":case"sec":case"s":return r*Gi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ww(e){return e>=Hi?Math.round(e/Hi)+"d":e>=Vi?Math.round(e/Vi)+"h":e>=qi?Math.round(e/qi)+"m":e>=Gi?Math.round(e/Gi)+"s":e+"ms"}function xw(e){return Go(e,Hi,"day")||Go(e,Vi,"hour")||Go(e,qi,"minute")||Go(e,Gi,"second")||e+" ms"}function Go(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=v,t.disable=f,t.enable=s,t.enabled=i,t.humanize=yw,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(l){var a=0,y;for(y in l)a=(a<<5)-a+l.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(l){var a;function y(){if(y.enabled){var u=y,g=+new Date,I=g-(a||g);u.diff=I,u.prev=a,u.curr=g,a=g;for(var d=new Array(arguments.length),A=0;A<d.length;A++)d[A]=arguments[A];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var D=t.formatters[N];if(typeof D=="function"){var W=d[w];O=D.call(u,W),d.splice(w,1),w--}return O}),t.formatArgs.call(u,d);var C=y.log||t.log||console.log.bind(console);C.apply(u,d)}}return y.namespace=l,y.enabled=t.enabled(l),y.useColors=t.useColors(),y.color=r(l),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var l=t.instances.indexOf(this);return l!==-1?(t.instances.splice(l,1),!0):!1}function s(l){t.save(l),t.names=[],t.skips=[];var a,y=(typeof l=="string"?l:"").split(/[\s,]+/),u=y.length;for(a=0;a<u;a++)y[a]&&(l=y[a].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")));for(a=0;a<t.instances.length;a++){var g=t.instances[a];g.enabled=t.enabled(g.namespace)}}function f(){t.enable("")}function i(l){if(l[l.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(l))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(l))return!0;return!1}function v(l){return l instanceof Error?l.stack||l.message:l}})(sc,sc.exports);var _w=sc.exports;(function(e,t){var r={};t=e.exports=_w,t.log=s,t.formatArgs=o,t.save=f,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:v(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(l){var a=this.useColors;if(l[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+l[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;l.splice(1,0,y,"color: inherit");var u=0,g=0;l[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(u++,I==="%c"&&(g=u))}),l.splice(g,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function f(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function i(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=r.DEBUG),l}t.enable(i());function v(){try{return window.localStorage}catch{}}})(oc,oc.exports);var Ew=oc.exports,Gh={exports:{}};(function(e){e.exports=t;function t(n){if(n)return r(n)}function r(n){for(var o in t.prototype)n[o]=t.prototype[o];return n}t.prototype.on=t.prototype.addEventListener=function(n,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(o),this},t.prototype.once=function(n,o){function s(){this.off(n,s),o.apply(this,arguments)}return s.fn=o,this.on(n,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var f,i=0;i<s.length;i++)if(f=s[i],f===o||f.fn===o){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+n],this},t.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),s=this._callbacks["$"+n],f=1;f<arguments.length;f++)o[f-1]=arguments[f];if(s){s=s.slice(0);for(var f=0,i=s.length;f<i;++f)s[f].apply(this,o)}return this},t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},t.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(Gh);var si=Gh.exports,Ps={},Sw={}.toString,qh=Array.isArray||function(e){return Sw.call(e)=="[object Array]"},Vh=Iw,Cw=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",kw=typeof ArrayBuffer=="function",Aw=function(e){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function Iw(e){return Cw&&Buffer.isBuffer(e)||kw&&(e instanceof ArrayBuffer||Aw(e))}var Zc=qh,Hh=Vh,Wh=Object.prototype.toString,Rw=typeof Blob=="function"||typeof Blob<"u"&&Wh.call(Blob)==="[object BlobConstructor]",Tw=typeof File=="function"||typeof File<"u"&&Wh.call(File)==="[object FileConstructor]";Ps.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=ac(r,t),n.attachments=t.length,{packet:n,buffers:t}};function ac(e,t){if(!e)return e;if(Hh(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Zc(e)){for(var n=new Array(e.length),o=0;o<e.length;o++)n[o]=ac(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){var n={};for(var s in e)n[s]=ac(e[s],t);return n}return e}Ps.reconstructPacket=function(e,t){return e.data=cc(e.data,t),e.attachments=void 0,e};function cc(e,t){if(!e)return e;if(e&&e._placeholder===!0){var r=typeof e.num=="number"&&e.num>=0&&e.num<t.length;if(r)return t[e.num];throw new Error("illegal attachments")}else if(Zc(e))for(var n=0;n<e.length;n++)e[n]=cc(e[n],t);else if(typeof e=="object")for(var o in e)e[o]=cc(e[o],t);return e}Ps.removeBlobs=function(e,t){function r(s,f,i){if(!s)return s;if(Rw&&s instanceof Blob||Tw&&s instanceof File){n++;var v=new FileReader;v.onload=function(){i?i[f]=this.result:o=this.result,--n||t(o)},v.readAsArrayBuffer(s)}else if(Zc(s))for(var l=0;l<s.length;l++)r(s[l],l,s);else if(typeof s=="object"&&!Hh(s))for(var a in s)r(s[a],a,s)}var n=0,o=e;r(o),n||t(o)};(function(e){var t=Ew("socket.io-parser"),r=si,n=Ps,o=qh,s=Vh;e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=f,e.Decoder=y;function f(){}var i=e.ERROR+'"encode error"';f.prototype.encode=function(w,C){if(t("encoding packet %j",w),e.BINARY_EVENT===w.type||e.BINARY_ACK===w.type)a(w,C);else{var O=v(w);C([O])}};function v(w){var C=""+w.type;if((e.BINARY_EVENT===w.type||e.BINARY_ACK===w.type)&&(C+=w.attachments+"-"),w.nsp&&w.nsp!=="/"&&(C+=w.nsp+","),w.id!=null&&(C+=w.id),w.data!=null){var O=l(w.data);if(O!==!1)C+=O;else return i}return t("encoded %j as %s",w,C),C}function l(w){try{return JSON.stringify(w)}catch{return!1}}function a(w,C){function O(N){var D=n.deconstructPacket(N),W=v(D.packet),M=D.buffers;M.unshift(W),C(M)}n.removeBlobs(w,O)}function y(){this.reconstructor=null}r(y.prototype),y.prototype.add=function(w){var C;if(typeof w=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");C=g(w),e.BINARY_EVENT===C.type||e.BINARY_ACK===C.type?(this.reconstructor=new d(C),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",C)):this.emit("decoded",C)}else if(s(w)||w.base64)if(this.reconstructor)C=this.reconstructor.takeBinaryData(w),C&&(this.reconstructor=null,this.emit("decoded",C));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+w)};function u(w,C){switch(w){case 0:return typeof C=="object";case 1:return C===void 0;case 4:return typeof C=="string"||typeof C=="object";case 2:case 5:return o(C)&&(typeof C[0]=="string"||typeof C[0]=="number");case 3:case 6:return o(C)}}function g(w){var C=0,O={type:Number(w.charAt(0))};if(e.types[O.type]==null)return A("unknown packet type "+O.type);if(e.BINARY_EVENT===O.type||e.BINARY_ACK===O.type){for(var N=C+1;w.charAt(++C)!=="-"&&C!=w.length;);var D=w.substring(N,C);if(D!=Number(D)||w.charAt(C)!=="-")throw new Error("Illegal attachments");O.attachments=Number(D)}if(w.charAt(C+1)==="/"){for(var N=C+1;++C;){var W=w.charAt(C);if(W===","||C===w.length)break}O.nsp=w.substring(N,C)}else O.nsp="/";var M=w.charAt(C+1);if(M!==""&&Number(M)==M){for(var N=C+1;++C;){var W=w.charAt(C);if(W==null||Number(W)!=W){--C;break}if(C===w.length)break}O.id=Number(w.substring(N,C+1))}if(w.charAt(++C)){var V=I(w.substr(C));if(u(O.type,V))O.data=V;else throw new Error("invalid payload")}return t("decoded %s as %j",w,O),O}function I(w){try{return JSON.parse(w)}catch{return!1}}y.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function d(w){this.reconPack=w,this.buffers=[]}d.prototype.takeBinaryData=function(w){if(this.buffers.push(w),this.buffers.length===this.reconPack.attachments){var C=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),C}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function A(w){return{type:e.ERROR,data:"parser error: "+w}}})(Ns);var Xc={exports:{}},Ls={},uc={exports:{}};try{uc.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{uc.exports=!1}var Ow=uc.exports,Qc=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),Nw=Ow,Pw=Qc,Jc=function(e){var t=e.xdomain,r=e.xscheme,n=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!t||Nw))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!r&&n)return new XDomainRequest}catch{}if(!t)try{return new Pw[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},eu={exports:{}},Tn={},Lw=Object.keys||function(t){var r=[],n=Object.prototype.hasOwnProperty;for(var o in t)n.call(t,o)&&r.push(o);return r},Bw={}.toString,Dw=Array.isArray||function(e){return Bw.call(e)=="[object Array]"},Fw=Dw,Kh=Object.prototype.toString,jw=typeof Blob=="function"||typeof Blob<"u"&&Kh.call(Blob)==="[object BlobConstructor]",Mw=typeof File=="function"||typeof File<"u"&&Kh.call(File)==="[object FileConstructor]",Yh=Qo;function Qo(e){if(!e||typeof e!="object")return!1;if(Fw(e)){for(var t=0,r=e.length;t<r;t++)if(Qo(e[t]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||jw&&e instanceof Blob||Mw&&e instanceof File)return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Qo(e.toJSON(),!0);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Qo(e[n]))return!0;return!1}var Uw=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||n===0)return new ArrayBuffer(0);for(var o=new Uint8Array(e),s=new Uint8Array(r-t),f=t,i=0;f<r;f++,i++)s[i]=o[f];return s.buffer},$w=zw;function zw(e,t,r){var n=!1;return r=r||Gw,o.count=e,e===0?t():o;function o(s,f){if(o.count<=0)throw new Error("after called too many times");--o.count,s?(n=!0,t(s),t=r):o.count===0&&!n&&t(null,f)}}function Gw(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var rn=String.fromCharCode;function Zh(e){for(var t=[],r=0,n=e.length,o,s;r<n;)o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<n?(s=e.charCodeAt(r++),(s&64512)==56320?t.push(((o&1023)<<10)+(s&1023)+65536):(t.push(o),r--)):t.push(o);return t}function qw(e){for(var t=e.length,r=-1,n,o="";++r<t;)n=e[r],n>65535&&(n-=65536,o+=rn(n>>>10&1023|55296),n=56320|n&1023),o+=rn(n);return o}function Xh(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Pa(e,t){return rn(e>>t&63|128)}function Vw(e,t){if(!(e&4294967168))return rn(e);var r="";return e&4294965248?e&4294901760?e&4292870144||(r=rn(e>>18&7|240),r+=Pa(e,12),r+=Pa(e,6)):(Xh(e,t)||(e=65533),r=rn(e>>12&15|224),r+=Pa(e,6)):r=rn(e>>6&31|192),r+=rn(e&63|128),r}function Hw(e,t){t=t||{};for(var r=t.strict!==!1,n=Zh(e),o=n.length,s=-1,f,i="";++s<o;)f=n[s],i+=Vw(f,r);return i}function $n(){if(on>=us)throw Error("Invalid byte index");var e=cs[on]&255;if(on++,(e&192)==128)return e&63;throw Error("Invalid continuation byte")}function Ww(e){var t,r,n,o,s;if(on>us)throw Error("Invalid byte index");if(on==us)return!1;if(t=cs[on]&255,on++,!(t&128))return t;if((t&224)==192){if(r=$n(),s=(t&31)<<6|r,s>=128)return s;throw Error("Invalid continuation byte")}if((t&240)==224){if(r=$n(),n=$n(),s=(t&15)<<12|r<<6|n,s>=2048)return Xh(s,e)?s:65533;throw Error("Invalid continuation byte")}if((t&248)==240&&(r=$n(),n=$n(),o=$n(),s=(t&7)<<18|r<<12|n<<6|o,s>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}var cs,us,on;function Kw(e,t){t=t||{};var r=t.strict!==!1;cs=Zh(e),us=cs.length,on=0;for(var n=[],o;(o=Ww(r))!==!1;)n.push(o);return qw(n)}var Yw={version:"2.1.2",encode:Hw,decode:Kw},qo={},Kl;function Zw(){return Kl||(Kl=1,function(e){qo.encode=function(t){var r=new Uint8Array(t),n,o=r.length,s="";for(n=0;n<o;n+=3)s+=e[r[n]>>2],s+=e[(r[n]&3)<<4|r[n+1]>>4],s+=e[(r[n+1]&15)<<2|r[n+2]>>6],s+=e[r[n+2]&63];return o%3===2?s=s.substring(0,s.length-1)+"=":o%3===1&&(s=s.substring(0,s.length-2)+"=="),s},qo.decode=function(t){var r=t.length*.75,n=t.length,o,s=0,f,i,v,l;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);var a=new ArrayBuffer(r),y=new Uint8Array(a);for(o=0;o<n;o+=4)f=e.indexOf(t[o]),i=e.indexOf(t[o+1]),v=e.indexOf(t[o+2]),l=e.indexOf(t[o+3]),y[s++]=f<<2|i>>4,y[s++]=(i&15)<<4|v>>2,y[s++]=(v&3)<<6|l&63;return a}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),qo}var La,Yl;function Xw(){if(Yl)return La;Yl=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var i=new Blob(["hi"]);return i.size===2}catch{return!1}}(),r=t&&function(){try{var i=new Blob([new Uint8Array([1,2])]);return i.size===2}catch{return!1}}(),n=e&&e.prototype.append&&e.prototype.getBlob;function o(i){return i.map(function(v){if(v.buffer instanceof ArrayBuffer){var l=v.buffer;if(v.byteLength!==l.byteLength){var a=new Uint8Array(v.byteLength);a.set(new Uint8Array(l,v.byteOffset,v.byteLength)),l=a.buffer}return l}return v})}function s(i,v){v=v||{};var l=new e;return o(i).forEach(function(a){l.append(a)}),v.type?l.getBlob(v.type):l.getBlob()}function f(i,v){return new Blob(o(i),v||{})}return typeof Blob<"u"&&(s.prototype=Blob.prototype,f.prototype=Blob.prototype),La=function(){return t?r?Blob:f:n?s:void 0}(),La}(function(e){var t=Lw,r=Yh,n=Uw,o=$w,s=Yw,f;typeof ArrayBuffer<"u"&&(f=Zw());var i=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),v=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),l=i||v;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=t(a),u={type:"error",data:"parser error"},g=Xw();e.encodePacket=function(N,D,W,M){typeof D=="function"&&(M=D,D=!1),typeof W=="function"&&(M=W,W=null);var V=N.data===void 0?void 0:N.data.buffer||N.data;if(typeof ArrayBuffer<"u"&&V instanceof ArrayBuffer)return d(N,D,M);if(typeof g<"u"&&V instanceof g)return w(N,D,M);if(V&&V.base64)return I(N,M);var G=a[N.type];return N.data!==void 0&&(G+=W?s.encode(String(N.data),{strict:!1}):String(N.data)),M(""+G)};function I(N,D){var W="b"+e.packets[N.type]+N.data.data;return D(W)}function d(N,D,W){if(!D)return e.encodeBase64Packet(N,W);var M=N.data,V=new Uint8Array(M),G=new Uint8Array(1+M.byteLength);G[0]=a[N.type];for(var ae=0;ae<V.length;ae++)G[ae+1]=V[ae];return W(G.buffer)}function A(N,D,W){if(!D)return e.encodeBase64Packet(N,W);var M=new FileReader;return M.onload=function(){e.encodePacket({type:N.type,data:M.result},D,!0,W)},M.readAsArrayBuffer(N.data)}function w(N,D,W){if(!D)return e.encodeBase64Packet(N,W);if(l)return A(N,D,W);var M=new Uint8Array(1);M[0]=a[N.type];var V=new g([M.buffer,N.data]);return W(V)}e.encodeBase64Packet=function(N,D){var W="b"+e.packets[N.type];if(typeof g<"u"&&N.data instanceof g){var M=new FileReader;return M.onload=function(){var H=M.result.split(",")[1];D(W+H)},M.readAsDataURL(N.data)}var V;try{V=String.fromCharCode.apply(null,new Uint8Array(N.data))}catch{for(var G=new Uint8Array(N.data),ae=new Array(G.length),pe=0;pe<G.length;pe++)ae[pe]=G[pe];V=String.fromCharCode.apply(null,ae)}return W+=btoa(V),D(W)},e.decodePacket=function(N,D,W){if(N===void 0)return u;if(typeof N=="string"){if(N.charAt(0)==="b")return e.decodeBase64Packet(N.substr(1),D);if(W&&(N=C(N),N===!1))return u;var V=N.charAt(0);return Number(V)!=V||!y[V]?u:N.length>1?{type:y[V],data:N.substring(1)}:{type:y[V]}}var M=new Uint8Array(N),V=M[0],G=n(N,1);return g&&D==="blob"&&(G=new g([G])),{type:y[V],data:G}};function C(N){try{N=s.decode(N,{strict:!1})}catch{return!1}return N}e.decodeBase64Packet=function(N,D){var W=y[N.charAt(0)];if(!f)return{type:W,data:{base64:!0,data:N.substr(1)}};var M=f.decode(N.substr(1));return D==="blob"&&g&&(M=new g([M])),{type:W,data:M}},e.encodePayload=function(N,D,W){typeof D=="function"&&(W=D,D=null);var M=r(N);if(D&&M)return g&&!l?e.encodePayloadAsBlob(N,W):e.encodePayloadAsArrayBuffer(N,W);if(!N.length)return W("0:");function V(ae){return ae.length+":"+ae}function G(ae,pe){e.encodePacket(ae,M?D:!1,!1,function(H){pe(null,V(H))})}O(N,G,function(ae,pe){return W(pe.join(""))})};function O(N,D,W){for(var M=new Array(N.length),V=o(N.length,W),G=function(pe,H,ee){D(H,function(_,S){M[pe]=S,ee(_,M)})},ae=0;ae<N.length;ae++)G(ae,N[ae],V)}e.decodePayload=function(N,D,W){if(typeof N!="string")return e.decodePayloadAsBinary(N,D,W);typeof D=="function"&&(W=D,D=null);var M;if(N==="")return W(u,0,1);for(var V="",G,ae,pe=0,H=N.length;pe<H;pe++){var ee=N.charAt(pe);if(ee!==":"){V+=ee;continue}if(V===""||V!=(G=Number(V))||(ae=N.substr(pe+1,G),V!=ae.length))return W(u,0,1);if(ae.length){if(M=e.decodePacket(ae,D,!1),u.type===M.type&&u.data===M.data)return W(u,0,1);var _=W(M,pe+G,H);if(_===!1)return}pe+=G,V=""}if(V!=="")return W(u,0,1)},e.encodePayloadAsArrayBuffer=function(N,D){if(!N.length)return D(new ArrayBuffer(0));function W(M,V){e.encodePacket(M,!0,!0,function(G){return V(null,G)})}O(N,W,function(M,V){var G=V.reduce(function(H,ee){var _;return typeof ee=="string"?_=ee.length:_=ee.byteLength,H+_.toString().length+_+2},0),ae=new Uint8Array(G),pe=0;return V.forEach(function(H){var ee=typeof H=="string",_=H;if(ee){for(var P=new Uint8Array(H.length),S=0;S<H.length;S++)P[S]=H.charCodeAt(S);_=P.buffer}ee?ae[pe++]=0:ae[pe++]=1;for(var L=_.byteLength.toString(),S=0;S<L.length;S++)ae[pe++]=parseInt(L[S]);ae[pe++]=255;for(var P=new Uint8Array(_),S=0;S<P.length;S++)ae[pe++]=P[S]}),D(ae.buffer)})},e.encodePayloadAsBlob=function(N,D){function W(M,V){e.encodePacket(M,!0,!0,function(G){var ae=new Uint8Array(1);if(ae[0]=1,typeof G=="string"){for(var pe=new Uint8Array(G.length),H=0;H<G.length;H++)pe[H]=G.charCodeAt(H);G=pe.buffer,ae[0]=0}for(var ee=G instanceof ArrayBuffer?G.byteLength:G.size,_=ee.toString(),S=new Uint8Array(_.length+1),H=0;H<_.length;H++)S[H]=parseInt(_[H]);if(S[_.length]=255,g){var L=new g([ae.buffer,S.buffer,G]);V(null,L)}})}O(N,W,function(M,V){return D(new g(V))})},e.decodePayloadAsBinary=function(N,D,W){typeof D=="function"&&(W=D,D=null);for(var M=N,V=[];M.byteLength>0;){for(var G=new Uint8Array(M),ae=G[0]===0,pe="",H=1;G[H]!==255;H++){if(pe.length>310)return W(u,0,1);pe+=G[H]}M=n(M,2+pe.length),pe=parseInt(pe);var ee=n(M,0,pe);if(ae)try{ee=String.fromCharCode.apply(null,new Uint8Array(ee))}catch{var _=new Uint8Array(ee);ee="";for(var H=0;H<_.length;H++)ee+=String.fromCharCode(_[H])}V.push(ee),M=n(M,pe)}var S=V.length;V.forEach(function(L,P){W(e.decodePacket(L,D,!0),P,S)})}})(Tn);var Ba,Zl;function tu(){if(Zl)return Ba;Zl=1;var e=Tn,t=si;Ba=r;function r(n){this.path=n.path,this.hostname=n.hostname,this.port=n.port,this.secure=n.secure,this.query=n.query,this.timestampParam=n.timestampParam,this.timestampRequests=n.timestampRequests,this.readyState="",this.agent=n.agent||!1,this.socket=n.socket,this.enablesXDR=n.enablesXDR,this.withCredentials=n.withCredentials,this.pfx=n.pfx,this.key=n.key,this.passphrase=n.passphrase,this.cert=n.cert,this.ca=n.ca,this.ciphers=n.ciphers,this.rejectUnauthorized=n.rejectUnauthorized,this.forceNode=n.forceNode,this.isReactNative=n.isReactNative,this.extraHeaders=n.extraHeaders,this.localAddress=n.localAddress}return t(r.prototype),r.prototype.onError=function(n,o){var s=new Error(n);return s.type="TransportError",s.description=o,this.emit("error",s),this},r.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},r.prototype.send=function(n){if(this.readyState==="open")this.write(n);else throw new Error("Transport not open")},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(n){var o=e.decodePacket(n,this.socket.binaryType);this.onPacket(o)},r.prototype.onPacket=function(n){this.emit("packet",n)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")},Ba}var ai={};ai.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t};ai.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t};var Bs=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Qh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ls=64,Jh={},Xl=0,sn=0,Ql;function lc(e){var t="";do t=Qh[e%ls]+t,e=Math.floor(e/ls);while(e>0);return t}function Qw(e){var t=0;for(sn=0;sn<e.length;sn++)t=t*ls+Jh[e.charAt(sn)];return t}function ru(){var e=lc(+new Date);return e!==Ql?(Xl=0,Ql=e):e+"."+lc(Xl++)}for(;sn<ls;sn++)Jh[Qh[sn]]=sn;ru.encode=lc;ru.decode=Qw;var ed=ru,fc={exports:{}},hc={exports:{}},Wi=1e3,Ki=Wi*60,Yi=Ki*60,Zi=Yi*24,Jw=Zi*365.25,e2=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return t2(e);if(r==="number"&&isNaN(e)===!1)return t.long?n2(e):r2(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function t2(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Jw;case"days":case"day":case"d":return r*Zi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Yi;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ki;case"seconds":case"second":case"secs":case"sec":case"s":return r*Wi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function r2(e){return e>=Zi?Math.round(e/Zi)+"d":e>=Yi?Math.round(e/Yi)+"h":e>=Ki?Math.round(e/Ki)+"m":e>=Wi?Math.round(e/Wi)+"s":e+"ms"}function n2(e){return Vo(e,Zi,"day")||Vo(e,Yi,"hour")||Vo(e,Ki,"minute")||Vo(e,Wi,"second")||e+" ms"}function Vo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=v,t.disable=f,t.enable=s,t.enabled=i,t.humanize=e2,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(l){var a=0,y;for(y in l)a=(a<<5)-a+l.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(l){var a;function y(){if(y.enabled){var u=y,g=+new Date,I=g-(a||g);u.diff=I,u.prev=a,u.curr=g,a=g;for(var d=new Array(arguments.length),A=0;A<d.length;A++)d[A]=arguments[A];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var D=t.formatters[N];if(typeof D=="function"){var W=d[w];O=D.call(u,W),d.splice(w,1),w--}return O}),t.formatArgs.call(u,d);var C=y.log||t.log||console.log.bind(console);C.apply(u,d)}}return y.namespace=l,y.enabled=t.enabled(l),y.useColors=t.useColors(),y.color=r(l),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var l=t.instances.indexOf(this);return l!==-1?(t.instances.splice(l,1),!0):!1}function s(l){t.save(l),t.names=[],t.skips=[];var a,y=(typeof l=="string"?l:"").split(/[\s,]+/),u=y.length;for(a=0;a<u;a++)y[a]&&(l=y[a].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")));for(a=0;a<t.instances.length;a++){var g=t.instances[a];g.enabled=t.enabled(g.namespace)}}function f(){t.enable("")}function i(l){if(l[l.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(l))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(l))return!0;return!1}function v(l){return l instanceof Error?l.stack||l.message:l}})(hc,hc.exports);var i2=hc.exports;(function(e,t){var r={};t=e.exports=i2,t.log=s,t.formatArgs=o,t.save=f,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:v(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(l){var a=this.useColors;if(l[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+l[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;l.splice(1,0,y,"color: inherit");var u=0,g=0;l[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(u++,I==="%c"&&(g=u))}),l.splice(g,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function f(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function i(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=r.DEBUG),l}t.enable(i());function v(){try{return window.localStorage}catch{}}})(fc,fc.exports);var Ds=fc.exports,td=tu(),o2=ai,rd=Tn,s2=Bs,a2=ed,xr=Ds("engine.io-client:polling"),nd=Ur,c2=function(){var e=Jc,t=new e({xdomain:!1});return t.responseType!=null}();function Ur(e){var t=e&&e.forceBase64;(!c2||t)&&(this.supportsBinary=!1),td.call(this,e)}s2(Ur,td);Ur.prototype.name="polling";Ur.prototype.doOpen=function(){this.poll()};Ur.prototype.pause=function(e){var t=this;this.readyState="pausing";function r(){xr("paused"),t.readyState="paused",e()}if(this.polling||!this.writable){var n=0;this.polling&&(xr("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){xr("pre-pause polling complete"),--n||r()})),this.writable||(xr("we are currently writing - waiting to pause"),n++,this.once("drain",function(){xr("pre-pause writing complete"),--n||r()}))}else r()};Ur.prototype.poll=function(){xr("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};Ur.prototype.onData=function(e){var t=this;xr("polling got data %s",e);var r=function(n,o,s){if(t.readyState==="opening"&&n.type==="open"&&t.onOpen(),n.type==="close")return t.onClose(),!1;t.onPacket(n)};rd.decodePayload(e,this.socket.binaryType,r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():xr('ignoring poll - transport state "%s"',this.readyState))};Ur.prototype.doClose=function(){var e=this;function t(){xr("writing close packet"),e.write([{type:"close"}])}this.readyState==="open"?(xr("transport open - closing"),t()):(xr("transport not open - deferring close"),this.once("open",t))};Ur.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};rd.encodePayload(e,this.supportsBinary,function(n){t.doWrite(n,r)})};Ur.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";this.timestampRequests!==!1&&(e[this.timestampParam]=a2()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=o2.encode(e),this.port&&(t==="https"&&Number(this.port)!==443||t==="http"&&Number(this.port)!==80)&&(r=":"+this.port),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};var u2=Jc,id=nd,l2=si,f2=Bs,dc=Ds("engine.io-client:polling-xhr"),h2=Qc;eu.exports=ci;eu.exports.Request=qt;function Jl(){}function ci(e){if(id.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,typeof location<"u"){var t=location.protocol==="https:",r=location.port;r||(r=t?443:80),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}f2(ci,id);ci.prototype.supportsBinary=!0;ci.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new qt(e)};ci.prototype.doWrite=function(e,t){var r=typeof e!="string"&&e!==void 0,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(s){o.onError("xhr post error",s)}),this.sendXhr=n};ci.prototype.doPoll=function(){dc("xhr poll");var e=this.request(),t=this;e.on("data",function(r){t.onData(r)}),e.on("error",function(r){t.onError("xhr poll error",r)}),this.pollXhr=e};function qt(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}l2(qt.prototype);qt.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new u2(e),r=this;try{dc("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}}catch{}if(this.method==="POST")try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(t.readyState===2)try{var o=t.getResponseHeader("Content-Type");(r.supportsBinary&&o==="application/octet-stream"||o==="application/octet-stream; charset=UTF-8")&&(t.responseType="arraybuffer")}catch{}t.readyState===4&&(t.status===200||t.status===1223?r.onLoad():setTimeout(function(){r.onError(typeof t.status=="number"?t.status:0)},0))},dc("xhr data %s",this.data),t.send(this.data)}catch(o){setTimeout(function(){r.onError(o)},0);return}typeof document<"u"&&(this.index=qt.requestsCount++,qt.requests[this.index]=this)};qt.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};qt.prototype.onData=function(e){this.emit("data",e),this.onSuccess()};qt.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)};qt.prototype.cleanup=function(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Jl:this.xhr.onreadystatechange=Jl,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete qt.requests[this.index],this.xhr=null}};qt.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch{}t==="application/octet-stream"||t==="application/octet-stream; charset=UTF-8"?e=this.xhr.response||this.xhr.responseText:e=this.xhr.responseText}catch(r){this.onError(r)}e!=null&&this.onData(e)};qt.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};qt.prototype.abort=function(){this.cleanup()};qt.requestsCount=0;qt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ef);else if(typeof addEventListener=="function"){var d2="onpagehide"in h2?"pagehide":"unload";addEventListener(d2,ef,!1)}}function ef(){for(var e in qt.requests)qt.requests.hasOwnProperty(e)&&qt.requests[e].abort()}var p2=eu.exports,nu=nd,m2=Bs,tf=Qc,g2=ui,v2=/\n/g,y2=/\\n/g,Ho;function b2(){}function ui(e){nu.call(this,e),this.query=this.query||{},Ho||(Ho=tf.___eio=tf.___eio||[]),this.index=Ho.length;var t=this;Ho.push(function(r){t.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=b2)},!1)}m2(ui,nu);ui.prototype.supportsBinary=!1;ui.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),nu.prototype.doClose.call(this)};ui.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(o){e.onError("jsonp poll error",o)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t;var n=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var o=document.createElement("iframe");document.body.appendChild(o),document.body.removeChild(o)},100)};ui.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,f;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=s,n.method="POST",n.setAttribute("accept-charset","utf-8"),o.name="d",n.appendChild(o),document.body.appendChild(n),this.form=n,this.area=o}this.form.action=this.uri();function i(){v(),t()}function v(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(a){r.onError("jsonp polling iframe removal error",a)}try{var l='<iframe src="javascript:0" name="'+r.iframeId+'">';f=document.createElement(l)}catch{f=document.createElement("iframe"),f.name=r.iframeId,f.src="javascript:0"}f.id=r.iframeId,r.form.appendChild(f),r.iframe=f}v(),e=e.replace(y2,`\\
`),this.area.value=e.replace(v2,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){r.iframe.readyState==="complete"&&i()}:this.iframe.onload=i};var iu=tu(),w2=Tn,x2=ai,_2=Bs,E2=ed,S2=Ds("engine.io-client:websocket"),fs,ou;typeof WebSocket<"u"?fs=WebSocket:typeof self<"u"&&(fs=self.WebSocket||self.MozWebSocket);if(typeof window>"u")try{ou=ro}catch{}var Yn=fs||ou,C2=yr;function yr(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=fs&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(Yn=ou),iu.call(this,e)}_2(yr,iu);yr.prototype.name="websocket";yr.prototype.supportsBinary=!0;yr.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new Yn(e,t):new Yn(e):new Yn(e,t,r)}catch(n){return this.emit("error",n)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};yr.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}};yr.prototype.write=function(e){var t=this;this.writable=!1;for(var r=e.length,n=0,o=r;n<o;n++)(function(f){w2.encodePacket(f,t.supportsBinary,function(i){if(!t.usingBrowserWebSocket){var v={};if(f.options&&(v.compress=f.options.compress),t.perMessageDeflate){var l=typeof i=="string"?Buffer.byteLength(i):i.length;l<t.perMessageDeflate.threshold&&(v.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,v)}catch{S2("websocket closed before onclose event")}--r||s()})})(e[n]);function s(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}};yr.prototype.onClose=function(){iu.prototype.onClose.call(this)};yr.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};yr.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";this.port&&(t==="wss"&&Number(this.port)!==443||t==="ws"&&Number(this.port)!==80)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=E2()),this.supportsBinary||(e.b64=1),e=x2.encode(e),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};yr.prototype.check=function(){return!!Yn&&!("__initialize"in Yn&&this.name===yr.prototype.name)};var k2=Jc,A2=p2,I2=g2,R2=C2;Ls.polling=T2;Ls.websocket=R2;function T2(e){var t,r=!1,n=!1,o=e.jsonp!==!1;if(typeof location<"u"){var s=location.protocol==="https:",f=location.port;f||(f=s?443:80),r=e.hostname!==location.hostname||f!==e.port,n=e.secure!==s}if(e.xdomain=r,e.xscheme=n,t=new k2(e),"open"in t&&!e.forceJSONP)return new A2(e);if(!o)throw new Error("JSONP disabled");return new I2(e)}var O2=[].indexOf,od=function(e,t){if(O2)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1},N2=Ls,P2=si,Ut=Ds("engine.io-client:socket"),L2=od,sd=Tn,rf=zh,B2=ai,D2=pt;function pt(e,t){if(!(this instanceof pt))return new pt(e,t);t=t||{},e&&typeof e=="object"&&(t=e,e=null),e?(e=rf(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=rf(t.host).host),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=t.query||{},typeof this.query=="string"&&(this.query=B2.decode(this.query)),this.upgrade=t.upgrade!==!1,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=t.jsonp!==!1,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=t.withCredentials!==!1,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=t.perMessageDeflate!==!1?t.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=t.rejectUnauthorized===void 0?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}pt.priorWebsocketSuccess=!1;P2(pt.prototype);pt.protocol=sd.protocol;pt.Socket=pt;pt.Transport=tu();pt.transports=Ls;pt.parser=Tn;pt.prototype.createTransport=function(e){Ut('creating transport "%s"',e);var t=F2(this.query);t.EIO=sd.protocol,t.transport=e;var r=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var n=new N2[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return n};function F2(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}pt.prototype.open=function(){var e;if(this.rememberUpgrade&&pt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)};pt.prototype.setTransport=function(e){Ut("setting transport %s",e.name);var t=this;this.transport&&(Ut("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(r){t.onPacket(r)}).on("error",function(r){t.onError(r)}).on("close",function(){t.onClose("transport close")})};pt.prototype.probe=function(e){Ut('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;pt.priorWebsocketSuccess=!1;function o(){if(n.onlyBinaryUpgrades){var y=!this.supportsBinary&&n.transport.supportsBinary;r=r||y}r||(Ut('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(u){if(!r)if(u.type==="pong"&&u.data==="probe"){if(Ut('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;pt.priorWebsocketSuccess=t.name==="websocket",Ut('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){r||n.readyState!=="closed"&&(Ut("changing transport and sending upgrade packet"),a(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())})}else{Ut('probe transport "%s" failed',e);var g=new Error("probe error");g.transport=t.name,n.emit("upgradeError",g)}}))}function s(){r||(r=!0,a(),t.close(),t=null)}function f(y){var u=new Error("probe error: "+y);u.transport=t.name,s(),Ut('probe transport "%s" failed because of error: %s',e,y),n.emit("upgradeError",u)}function i(){f("transport closed")}function v(){f("socket closed")}function l(y){t&&y.name!==t.name&&(Ut('"%s" works - aborting "%s"',y.name,t.name),s())}function a(){t.removeListener("open",o),t.removeListener("error",f),t.removeListener("close",i),n.removeListener("close",v),n.removeListener("upgrading",l)}t.once("open",o),t.once("error",f),t.once("close",i),this.once("close",v),this.once("upgrading",l),t.open()};pt.prototype.onOpen=function(){if(Ut("socket open"),this.readyState="open",pt.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){Ut("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}};pt.prototype.onPacket=function(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Ut('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else Ut('packet received with socket readyState "%s"',this.readyState)};pt.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};pt.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){t.readyState!=="closed"&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};pt.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){Ut("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)};pt.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})};pt.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};pt.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Ut("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};pt.prototype.write=pt.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this};pt.prototype.sendPacket=function(e,t,r,n){if(typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=null),!(this.readyState==="closing"||this.readyState==="closed")){r=r||{},r.compress=r.compress!==!1;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}};pt.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}function t(){e.onClose("forced close"),Ut("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this};pt.prototype.onError=function(e){Ut("socket error %j",e),pt.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)};pt.prototype.onClose=function(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){Ut('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}};pt.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~L2(this.transports,e[r])&&t.push(e[r]);return t};Xc.exports=D2;Xc.exports.parser=Tn;var j2=Xc.exports,ad={exports:{}},M2=U2;function U2(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}var cd=$2;function $2(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}var nf=[].slice,ud=function(e,t){if(typeof t=="string"&&(t=e[t]),typeof t!="function")throw new Error("bind() requires a function");var r=nf.call(arguments,2);return function(){return t.apply(e,r.concat(nf.call(arguments)))}};(function(e,t){var r=Ns,n=si,o=M2,s=cd,f=ud,i=Os("socket.io-client:socket"),v=ai,l=Yh;e.exports=u;var a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},y=n.prototype.emit;function u(g,I,d){this.io=g,this.nsp=I,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},d&&d.query&&(this.query=d.query),this.io.autoConnect&&this.open()}n(u.prototype),u.prototype.subEvents=function(){if(!this.subs){var g=this.io;this.subs=[s(g,"open",f(this,"onopen")),s(g,"packet",f(this,"onpacket")),s(g,"close",f(this,"onclose"))]}},u.prototype.open=u.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},u.prototype.send=function(){var g=o(arguments);return g.unshift("message"),this.emit.apply(this,g),this},u.prototype.emit=function(g){if(a.hasOwnProperty(g))return y.apply(this,arguments),this;var I=o(arguments),d={type:(this.flags.binary!==void 0?this.flags.binary:l(I))?r.BINARY_EVENT:r.EVENT,data:I};return d.options={},d.options.compress=!this.flags||this.flags.compress!==!1,typeof I[I.length-1]=="function"&&(i("emitting packet with ack id %d",this.ids),this.acks[this.ids]=I.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this.flags={},this},u.prototype.packet=function(g){g.nsp=this.nsp,this.io.packet(g)},u.prototype.onopen=function(){if(i("transport is open - connecting"),this.nsp!=="/")if(this.query){var g=typeof this.query=="object"?v.encode(this.query):this.query;i("sending connect packet with query %s",g),this.packet({type:r.CONNECT,query:g})}else this.packet({type:r.CONNECT})},u.prototype.onclose=function(g){i("close (%s)",g),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",g)},u.prototype.onpacket=function(g){var I=g.nsp===this.nsp,d=g.type===r.ERROR&&g.nsp==="/";if(!(!I&&!d))switch(g.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(g);break;case r.BINARY_EVENT:this.onevent(g);break;case r.ACK:this.onack(g);break;case r.BINARY_ACK:this.onack(g);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",g.data);break}},u.prototype.onevent=function(g){var I=g.data||[];i("emitting event %j",I),g.id!=null&&(i("attaching ack callback to event"),I.push(this.ack(g.id))),this.connected?y.apply(this,I):this.receiveBuffer.push(I)},u.prototype.ack=function(g){var I=this,d=!1;return function(){if(!d){d=!0;var A=o(arguments);i("sending ack %j",A),I.packet({type:l(A)?r.BINARY_ACK:r.ACK,id:g,data:A})}}},u.prototype.onack=function(g){var I=this.acks[g.id];typeof I=="function"?(i("calling ack %s with %j",g.id,g.data),I.apply(this,g.data),delete this.acks[g.id]):i("bad ack %s",g.id)},u.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},u.prototype.emitBuffered=function(){var g;for(g=0;g<this.receiveBuffer.length;g++)y.apply(this,this.receiveBuffer[g]);for(this.receiveBuffer=[],g=0;g<this.sendBuffer.length;g++)this.packet(this.sendBuffer[g]);this.sendBuffer=[]},u.prototype.ondisconnect=function(){i("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},u.prototype.destroy=function(){if(this.subs){for(var g=0;g<this.subs.length;g++)this.subs[g].destroy();this.subs=null}this.io.destroy(this)},u.prototype.close=u.prototype.disconnect=function(){return this.connected&&(i("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},u.prototype.compress=function(g){return this.flags.compress=g,this},u.prototype.binary=function(g){return this.flags.binary=g,this}})(ad);var ld=ad.exports,z2=li;function li(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}li.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};li.prototype.reset=function(){this.attempts=0};li.prototype.setMin=function(e){this.ms=e};li.prototype.setMax=function(e){this.max=e};li.prototype.setJitter=function(e){this.jitter=e};var G2=j2,q2=ld,V2=si,H2=Ns,en=cd,zn=ud,Kt=Os("socket.io-client:manager"),fd=od,W2=z2,hd=Object.prototype.hasOwnProperty,of=vt;function vt(e,t){if(!(this instanceof vt))return new vt(e,t);e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new W2({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||H2;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}vt.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)hd.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)};vt.prototype.updateSocketIds=function(){for(var e in this.nsps)hd.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))};vt.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};V2(vt.prototype);vt.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection};vt.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts};vt.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay};vt.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor};vt.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax};vt.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout};vt.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};vt.prototype.open=vt.prototype.connect=function(e,t){if(Kt("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Kt("opening %s",this.uri),this.engine=G2(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=en(r,"open",function(){n.onopen(),e&&e()}),s=en(r,"error",function(v){if(Kt("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",v),e){var l=new Error("Connection error");l.data=v,e(l)}else n.maybeReconnectOnOpen()});if(this._timeout!==!1){var f=this._timeout;Kt("connect attempt will timeout after %d",f),f===0&&o.destroy();var i=setTimeout(function(){Kt("connect attempt timed out after %d",f),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",f)},f);this.subs.push({destroy:function(){clearTimeout(i)}})}return this.subs.push(o),this.subs.push(s),this};vt.prototype.onopen=function(){Kt("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(en(e,"data",zn(this,"ondata"))),this.subs.push(en(e,"ping",zn(this,"onping"))),this.subs.push(en(e,"pong",zn(this,"onpong"))),this.subs.push(en(e,"error",zn(this,"onerror"))),this.subs.push(en(e,"close",zn(this,"onclose"))),this.subs.push(en(this.decoder,"decoded",zn(this,"ondecoded")))};vt.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};vt.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};vt.prototype.ondata=function(e){this.decoder.add(e)};vt.prototype.ondecoded=function(e){this.emit("packet",e)};vt.prototype.onerror=function(e){Kt("error",e),this.emitAll("error",e)};vt.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new q2(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",o),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&o()}function o(){~fd(n.connecting,r)||n.connecting.push(r)}return r};vt.prototype.destroy=function(e){var t=fd(this.connecting,e);~t&&this.connecting.splice(t,1),!this.connecting.length&&this.close()};vt.prototype.packet=function(e){Kt("writing packet %j",e);var t=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()}))};vt.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};vt.prototype.cleanup=function(){Kt("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};vt.prototype.close=vt.prototype.disconnect=function(){Kt("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};vt.prototype.onclose=function(e){Kt("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()};vt.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Kt("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Kt("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(Kt("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),!e.skipReconnect&&e.open(function(n){n?(Kt("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",n.data)):(Kt("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}};vt.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};(function(e,t){var r=mw,n=Ns,o=of,s=Os("socket.io-client");e.exports=t=i;var f=t.managers={};function i(v,l){typeof v=="object"&&(l=v,v=void 0),l=l||{};var a=r(v),y=a.source,u=a.id,g=a.path,I=f[u]&&g in f[u].nsps,d=l.forceNew||l["force new connection"]||l.multiplex===!1||I,A;return d?(s("ignoring socket cache for %s",y),A=o(y,l)):(f[u]||(s("new io instance for %s",y),f[u]=o(y,l)),A=f[u]),a.query&&!l.query&&(l.query=a.query),A.socket(a.path,l)}t.protocol=n.protocol,t.connect=i,t.Manager=of,t.Socket=ld})(rc,rc.exports);var K2=rc.exports;const Y2=gs(K2);function Z2(e){const t=new ln;return e({serialMonitorsMsgStream$:t}),t}function dd(e,t){let{serialMonitorsMsgStream$:r}=t;return r||(r=Z2(e),r)}function pd(e,t,r){dd(e,t).next(r)}function X2(e){const t=new ln;return e({serialMonitorsDisconnections$:t}),t}function md(e,t){let{serialMonitorsDisconnections$:r}=t;return r||(r=X2(e),r)}function pc(e,t,r){md(e,t).next(r)}function Q2(e,t,r,n){const o=dd(e,t),s=r.find(v=>v.port===n),f=md(e,t);if(!s)throw new Error(`Cannot find serial monitor with port ${n}`);const i=f.pipe(kn(v=>v===n));return $m(o.pipe(kn(v=>v.port===n),Ji(v=>v.data),Gm(i)),i.pipe(zm(()=>_r(()=>new yd))))}function J2(e,t){return function([r,n]){if(!n[t])return!1;const o=n[t].find(s=>s.port===e);return(o==null?void 0:o.status)===Jt.OPENED}}function ex(e,t,r){return function([n,o]){var f;if(!o[t])return!1;const s=(f=o[r])==null?void 0:f.find(i=>i.portName===e);return!o[t].some(i=>i.port===e)&&!(s!=null&&s.isOpen)}}function gd(e,t,r,n,o,s){return Uf(t,r,J2(n,r),o,100,s).pipe(qm(f=>{var i;if(!f||((i=f.find(v=>v.port===n))==null?void 0:i.status)!==Jt.OPENED)throw new Error("Could not open serial monitor");return Vm(Hm({type:"info",value:"ready"}),Q2(e,t,f,n).pipe(Ji(v=>({type:"message",value:v}))))}))}function vd(e,t,r,n,o,s){return Uf(e,t,ex(n,t,r),o,5e3,s).pipe(Ji(f=>{if(f.some(i=>i.port===n))throw new Error("Could not close serial monitor");return n}))}var Jt=(e=>(e.Open="Open",e.OpenFail="OpenFail",e.Close="Close",e))(Jt||{}),Jt=(e=>(e.NONE="none",e.OPENED="opened",e.FAILED="failed",e.CLOSED="closed",e))(Jt||{});class yd extends Error{constructor(){super("Board disconnected"),this.name="BoardDisconnectionError"}}class su extends Error{constructor(t){super(`Serial monitor at ${t} is already open`),this.name="PortAlreadyOpenError"}}const bd=[300,1200,2400,4800,9600,19200,38400,57600,115200],dC=[...bd],pC=9600;function mC(e){return bd.includes(e)}var Ht=(e=>(e[e.NONE=0]="NONE",e[e.IN_PROG=1]="IN_PROG",e[e.DONE=2]="DONE",e[e.ERROR=3]="ERROR",e))(Ht||{});const gC=e=>!!e,wd="END",tx="COMPILE_STREAM_UPDATE";function xd(e){const t=new ln;return e({uploadResponseStream$:t}),t}function rx(e,t){let{uploadResponseStream$:r}=t;return r||(r=xd(e),r)}function Xi(e,t,r,n){rx(e,t).next({value:r,meta:n})}function nx(e,t){const r=t.pipe(_c((n,{value:o,meta:s})=>(s==null?void 0:s.signal)===wd?"":(s==null?void 0:s.signal)===tx?o:`${n&&`${n}
`}${o||""}`,""),ei(1));return e({uploadConcatResponseStream$:r}),r}function vC(e,t){let{uploadConcatResponseStream$:r}=t;if(r)return r;let{uploadResponseStream$:n}=t;return n||(n=xd(e)),r=nx(e,n),r}function yC(e,t){const{uploadResponseStream$:r}=t;if(!r)return;Xi(e,t,"",{signal:wd}),r.complete(),e({uploadResponseStream$:void 0});const{uploadConcatResponseStream$:n}=t;n&&(n.complete(),e({uploadConcatResponseStream$:void 0}))}function ix(e){const{category:t,data:r}=e;if(t===Ft.ListCommandPortsResponse){if(!Et[it.PortsListQuota].length)return;Rt({[it.PortsListQuota]:Et[it.PortsListQuota].slice(1)}),Rt({[it.Ports]:r.ports})}if(t===Ft.ListCommandNetworkPortsResponse&&Rt({[it.NetworkPorts]:r.ports}),t===Ft.DownloadStatusResponse){const{downloadQuota:n}=Et,o=n.findIndex(f=>f.status===xn.Sent||f.status===xn.Pending);if(o===-1)return;const s=n[o];if(r.status===tc.Pending){if(s.status===xn.Pending)return;n[o]={...s,status:xn.Pending},Rt({[it.DownloadQuota]:n});return}if(r.status===tc.Success){n[o]={...s,status:xn.Success},Rt({[it.DownloadQuota]:n});return}n[o]={...s,status:xn.Error},Rt({[it.DownloadQuota]:n})}if(t===Ft.Upload){if(!Et[it.UploadQuota].length)return;if((r==null?void 0:r.flash)==="Ok"&&r.status===_n.Done){Rt({[it.UploadStatus]:Ht.DONE}),Xi(Rt,Et,r.flash);return}switch(r.status){case _n.Starting:Rt({[it.UploadStatus]:Ht.IN_PROG});break;case _n.Busy:Rt({[it.UploadStatus]:Ht.IN_PROG});break;case _n.Error:Rt({[it.UploadStatus]:Ht.ERROR});break;case _n.Killed:Rt({[it.UploadStatus]:Ht.ERROR});break;case _n.NotFound:Rt({[it.UploadStatus]:Ht.ERROR});break;default:Rt({[it.UploadStatus]:Ht.IN_PROG})}(Et[it.UploadStatus]===Ht.ERROR||Et[it.UploadStatus]===Ht.DONE)&&Rt({[it.UploadQuota]:Et[it.UploadQuota].slice(1)}),r.message&&Xi(Rt,Et,r.message)}if(t===Ft.SerialMonitorStatusUpdate){const n=Et[it.SerialMonitors],s=n.findIndex(i=>i.port===r.port)!==-1;let f;switch(r.status){case Jt.Open:case Jt.OpenFail:{const i=r.status,v={[Jt.Open]:Jt.OPENED,[Jt.OpenFail]:Jt.FAILED};s?(i===Jt.OpenFail&&pc(Rt,Et,r.port),f=n.map(l=>l.port===r.port?{...l,status:v[i]}:l)):f=[...n,{status:v[i],port:r.port,baudRate:r.baudRate}];break}case Jt.Close:s?(pc(Rt,Et,r.port),f=n.filter(i=>i.port!==r.port)):f=n;break;default:f=n}Rt({[it.SerialMonitors]:f})}t===Ft.SerialMonitorMessage&&pd(Rt,Et,r)}function ox(e,t){const r=nw[t];return r(e)}function sx(e){let t=Ft.Unknown;const r=e.Ports,n=e.Network;return r&&!n&&(t=Ft.ListCommandPortsResponse),r&&n&&(t=Ft.ListCommandNetworkPortsResponse),e.DownloadStatus&&(t=Ft.DownloadStatusResponse),e.ProgrammerStatus&&(t=Ft.Upload),e.Cmd in Jt&&(t=Ft.SerialMonitorStatusUpdate),e.P&&e.D&&(t=Ft.SerialMonitorMessage),t}function ax(e){try{return JSON.parse(e)}catch{return{}}}function cx(e){const t=ax(e),r=sx(t),n=ox(t,r);ix({category:r,data:n})}function ux(){var t;const{socket:e}=Et;e&&(e.removeAllListeners(),(t=e.destroy)==null||t.call(e))}function lx(e){const{socketEventsAreSet:t}=Et;t||(e.on("connect",()=>{Rt({[it.SocketConnected]:!0})}),e.on("message",cx),e.on("error",()=>{}),e.on("disconnect",()=>{Rt({[it.SocketConnected]:!1})}),Rt({socketEventsAreSet:!0}))}function fx(e){return Y2(e,{transports:["websocket"]})}function hx(e){let{socket:t}=Et;return t||(t=fx(e),Rt({[it.Socket]:t}),t)}function bC(e){const t=hx(e);lx(t)}function dx(e,t=9600){return bs(()=>{const{[it.Ports]:r,[it.Socket]:n,[it.UploadStatus]:o,[it.SerialMonitors]:s}=Et;if(o===Ht.IN_PROG)return _r(()=>new Error("Could not open serial monitor, upload in progress"));if(!n)return _r(()=>new Error("Could not open serial monitor, no connection to agent"));const f=r.find(i=>i.portName===e);return f?f.isOpen?_r(()=>new su(e)):(n.emit("command",`open ${e} ${t} timed`),gd(Rt,Et,it.SerialMonitors,e,s,Ts())):_r(()=>new Error(`Could not open serial monitor, can't find board at ${e}`))})}function px(e){return bs(()=>{const{[it.Socket]:t,[it.SerialMonitors]:r}=Et;return t?(t.emit("command",`close ${e}`),vd(Et,it.SerialMonitors,it.Ports,e,r,Ts())):_r(()=>new Error("Could not close serial monitor, no connection to agent"))})}function mx(e,t){const{[it.Socket]:r,[it.SerialMonitors]:n}=Et;if(!r)throw new Error("Could not close serial monitor, no connection to agent");if(!n.some(({port:o})=>o===e))throw new Error(`Could not find an opened serial monitor on port ${e}`);r.emit("command",`send ${e} ${t}`)}var _n=(e=>(e.Starting="Starting",e.Busy="Busy",e.Error="Error",e.Killed="Killed",e.NotFound="Error 404 Not Found",e.Done="Done",e))(_n||{}),_d=(e=>(e[e.Change=0]="Change",e[e.Success=1]="Success",e[e.Error=2]="Error",e))(_d||{}),Ed=(e=>(e[e.Toast=0]="Toast",e[e.NonUI=1]="NonUI",e))(Ed||{});const gx=e=>!!(e&&e.mode===0);let Qn={};function vx(){Qn={}}function yx(e,t){return{...e,...t}}function au(e){Qn=yx(Qn,e)}function bx(e){const t=new In(e);return au({$notificationStream:t}),t}const wx=null;function Sd(e=wx){let{$notificationStream:t}=Qn;return t||(t=bx(e),t)}function xx({id:e=Mr.uniqueId(),type:t=_d.Change,...r}){return Sd().next({...r,id:e,type:t}),e}function _x(e){const t=e.pipe(kn(gx),ei(1));return au({$toastNotificationStream:t}),t}function wC(){let{$toastNotificationStream:e}=Qn;if(e)return e;const t=Sd();return e=_x(t),e}function Ex(){const e=new ln().pipe(ei(1));return au({$toastNotificationDismissalStream:e}),e}function Sx(){let{$toastNotificationDismissalStream:e}=Qn;return e||(e=Ex(),e)}function Cx(e){Sx().next({toastId:e})}let hs={};function kx(){hs={}}function Ax(e,t){return{...e,...t}}function Ix(e){hs=Ax(hs,e)}function Rx(e){const t=new Map(e);return Ix({preferencesSubjects:t}),t}async function Tx(e){let{preferencesSubjects:t}=hs;if(t)return t;const r=await Px();return t=Rx(r),t}async function Cd(e,t){const r=await kd(e);if(!r)throw new Error(`Preference subject with id ${e} not found`);r.next(t)}async function kd(e){return(await Tx()).get(e)}function Ox(){Object.values(ts).forEach((e,t)=>{const r=Object.keys(ts)[t];Cd(r,e)})}function Nx(e,t,r){return r.set(e,t),t.subscribe(n=>{Zf(e,n)}),t}async function Px(){const e=new Map,t=Object.keys(ts),r=Object.values(ts);return(await _g(t)).forEach((o,s)=>{const f=t[s],i=new In(o??r[s]);Nx(f,i,e)}),e}async function Lx(e){if(!e)throw new Error("No user_id provided");const t=await yt(void 0,!0);if(!t)return bt();const r=ir();return Wm({user_id:e,header:r?{[Km]:r}:void 0},t)}function Bx(e){const t=Dx(e);return t.usage>=t.limit}function Dx(e){return{limit:e.limits.create_compilation_number_day,usage:e.usage.create_compilation_number_day_current}}function Fx(e){return e.limits.ota>0}function jx(e){var t;return(t=e.plans)==null?void 0:t.some(r=>r==="organization-member")}function Mx(e){var t,r,n,o,s;return(t=e.plans)!=null&&t.includes(Br.ENTERPRISE)?Br.ENTERPRISE:(r=e.plans)!=null&&r.includes(Br.MAKER)||(n=e.plans)!=null&&n.includes(Br.MAKER_PLUS)||(o=e.plans)!=null&&o.includes(Br.CLASSROOM)||(s=e.plans)!=null&&s.includes(Br.ARDUINO)?Br.MAKER:Br.FREE}function Ux(e){return{limit:e.limits.ai_interactions_months,usage:e.usage.ai_interactions_month_current??0}}const sf={"arduino:avr:uno":{name:"Arduino Uno",flasher:"avr",avr_name:"uno",ids:[{vid:9025,pid:67},{vid:9025,pid:1},{vid:10755,pid:67},{vid:9025,pid:579}]},"arduino:megaavr:uno2018":{name:"Arduino Uno WiFi Rev2",flasher:"avr",ids:[{vid:1003,pid:8517}],avr_name:"unowifirev2"},"arduino:samd:mkrwifi1010":{name:"Arduino MKR WiFi 1010",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:84},{vid:9025,pid:32852,bootloader:!0}],use_1200bps_touch:!0},"arduino:mbed_nano:nanorp2040connect":{name:"Arduino Nano RP2040 Connect",flasher:"rp",iot_enabled:!1,supports_uf2:!0,ids:[{vid:9025,pid:94},{vid:9025,pid:32862},{vid:9025,pid:350},{vid:9025,pid:606}],use_1200bps_touch:!0},"arduino:samd:nano_33_iot":{name:"Arduino NANO 33 IoT",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:87},{vid:9025,pid:32855,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:minima":{name:"Arduino Uno R4 Minima",flasher:"dfu",iot_enabled:!1,ids:[{vid:9025,pid:105},{vid:9025,pid:873,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:unor4wifi":{name:"Arduino Uno R4 WiFi",flasher:"sam-ba-renesas",iot_enabled:!0,ids:[{vid:9025,pid:4098},{vid:9025,pid:109,bootloader:!0}]}};function Ad(e){return e.map(r=>({serialNumber:"",vendorId:r.vendorId,productId:r.productId,id:r.fqbn.split(":")[2],name:sf[r.fqbn]?sf[r.fqbn].name:Tc.UNKNOWN_BOARD_NAME,portBoardId:r.name,fqbn:r.fqbn,portName:`${r.vendorId}/${r.productId}`,isOpen:r.isOpen,architecture:r.fqbn.split(":")[1]}))}function cu(){let{stateChangeSubject$:e}=$t;return e||(e=Ff(Xt),e)}var St=(e=>(e.WebSerialConnected="webSerialConnected",e.Ports="ports",e.UploadStatus="uploadStatus",e.SerialMonitors="serialMonitors",e.SupportedFqbns="supportedFqbns",e))(St||{});const Id={[St.WebSerialConnected]:!1,[St.Ports]:[],[St.SerialMonitors]:[],[St.SupportedFqbns]:[]};let $t={...Id};function $x(){$t={...Id}}function Xt(e,t=!1){$t=jf($t,e);const r=cu();t||Mf($t,r)}function xC(){const{[St.WebSerialConnected]:e,uploadConcatResponseStream$:t,uploadResponseStream$:r,serialMonitorsMsgStream$:n,serialMonitorsDisconnections$:o,stateChangeSubject$:s,...f}=$t;return{...f,[St.WebSerialConnected]:null}}function zx(e,t){return!e||!t||e.length!==t.length?!1:e.every((r,n)=>t[n].portName===r.portName&&t[n].isOpen===r.isOpen)}let an=null;function Gx(){an=null}class qx{debug(t,r){this.shouldLogUploadMessage()&&this.uploadLog(t),console.log(t,r)}info(t,r){this.shouldLogUploadMessage()&&this.uploadLog(t),console.log(t,r)}warn(t,r){console.warn(t,r)}error(t,r){console.error(t,r)}shouldLogUploadMessage(){return console.log($t[St.UploadStatus]),$t[St.UploadStatus]===Ht.IN_PROG}uploadLog(t){t.toLowerCase().includes("checked response")||Xi(Xt,$t,t)}}function Vx(){return an=new Tc.Uploader({whiteListedOrigins:[at.APP_ORIGIN,at.WEB_IDE_URL],logger:new qx}),an.onMessage(Hx),an}function Fs(){return an||(an=Vx(),an)}function Hx(e){var t,r;if(e.portCloseStatus==="success"){const{[St.SerialMonitors]:n}=$t,o=(t=n[0])==null?void 0:t.port,f=n.findIndex(v=>v.port===o)!==-1;let i;f?(pc(Xt,$t,o),i=n.filter(v=>v.port!==o)):i=n,Xt({[St.SerialMonitors]:i})}if(e.serialData){const{[St.SerialMonitors]:n}=$t,o=(r=n[0])==null?void 0:r.port;pd(Xt,$t,{port:o,data:e.serialData})}if(e.ports&&Array.isArray(e.ports)){const n=e.ports.filter(Wx),o=$t[St.Ports],s=Ad(n);zx(o,s)||Xt({[St.Ports]:s})}if(e.supportedBoards&&Xt({[St.SupportedFqbns]:Object.keys(e.supportedBoards)}),e.uploadStatus)switch(Xi(Xt,$t,e.message),e.uploadStatus){case"message":Xt({[St.UploadStatus]:Ht.IN_PROG});break;case"error":Xt({[St.UploadStatus]:Ht.ERROR});break;case"success":Xt({[St.UploadStatus]:Ht.DONE});break;default:Xt({[St.UploadStatus]:Ht.NONE})}e.err&&Xt({uploadStatus:Ht.ERROR})}function Wx(e){return e.name!==void 0&&e.vendorId!==void 0&&e.productId!==void 0&&e.fqbn!==void 0&&e.isOpen!==void 0}async function _C(){const t=await Fs().listBoards();return Ad(t)}async function Kx(e,t){const r=Fs();Object.keys(r.openPorts).some(n=>n===e&&r.openPorts[n]===!0)||await r.openPort({name:e,baudrate:t})}async function Yx(e){await Fs().closePort({name:e})}function Zx(e,t){Fs().writePort({name:e,data:t})}async function EC(){const e=navigator;return e.serial?(await e.serial.requestPort()).getInfo():Promise.reject(new Error("Web Serial API is not available"))}function Xx(e,t=9600){return bs(()=>{const{[St.Ports]:r,[St.UploadStatus]:n,[St.SerialMonitors]:o}=$t;if(n===Ht.IN_PROG)return _r(()=>new Error("Could not open serial monitor, upload in progress"));const s=r.find(l=>l.portName===e);if(!s)return _r(()=>new Error(`Could not open serial monitor, can't find board at ${e}`));if(s.isOpen)return _r(()=>new su(e));const i=o.findIndex(l=>l.port===e)!==-1;let v;return i?v=o.map(l=>l.port===e?{...l}:l):v=[...o,{port:e,baudRate:t,status:Jt.OPENED}],Kx(e,9600),Xt({[St.SerialMonitors]:v}),gd(Xt,$t,St.SerialMonitors,e,o,cu())})}function Qx(e){return bs(()=>{const{[St.SerialMonitors]:t}=$t;return Yx(e),vd($t,St.SerialMonitors,St.Ports,e,t,cu())})}function Jx(e,t){const{[St.SerialMonitors]:r}=$t;if(!r.some(({port:n})=>n===e))throw new Error(`Could not find an opened serial monitor on port ${e}`);Zx(e,t)}let tr,cn;function e_(){tr=void 0,cn=void 0}function t_(e){return t=>{let r=!1;return t.pipe($f(n=>{r=e(n)}),Xm(n=>r?Qm:_r(()=>n)))}}function r_(){return cn=new ln,cn}function n_(e,t,r){return tr=new ln().pipe(es(()=>{tr=void 0}),$f(({type:o,value:s})=>{o==="info"&&s==="ready"&&r()}),t_(({type:o,value:s})=>o==="info"&&s==="closing"),kn(({type:o})=>o==="message")),(Uc?Xx:dx)(e,t).pipe(Zm({delay:(o,s)=>o instanceof yd||o instanceof su||s>4?_r(()=>o):Jm(s**2*100)})).subscribe(tr),tr}function SC(e,t,r,n=()=>{}){if(!(!t||!r||!(e===ul.Starting||e===ul.Active)))return tr||(tr=n_(t,r,n)),tr}function i_(){return cn||(cn=r_()),cn}function CC(e,t){e.meta==="sent"&&t&&(Uc?Jx(t,e.value):mx(t,e.value)),tr==null||tr.next(e)}async function kC(e){e&&(tr==null||tr.next({type:"info",value:"closing"}),await Ym((Uc?Qx:px)(e)),tr=void 0)}function AC(){cn=i_(),cn.next()}const o_={userNotTargetAudience:!1,compileUsageExceeded:void 0,canUseOta:void 0,canUseGenAi:void 0,isAuthInjected:!1,aiUserPlan:void 0,genAiInteractions:void 0},Jn=Oe.createContext(o_),s_={headerless:!1,notificationElement:null,updateLogic:eg},io=Oe.createContext(s_);var Wt=(e=>(e.Sketch="Sketch",e.Example="Example",e.CustomLibrary="CustomLibrary",e.None="None",e))(Wt||{}),a_=(e=>(e.Rename="Rename",e.Download="Download",e.Delete="Delete",e.Share="Share",e.ShareToClassroom="ShareToClassroom",e))(a_||{}),c_=(e=>(e.Download="Download",e.Delete="Delete",e))(c_||{}),u_=(e=>(e.CopyToSketches="CopyToSketches",e.Download="Download",e.Share="Share",e))(u_||{});const l_="_warning_1n54v_12",bn={"title-skeleton":"_title-skeleton_1n54v_1",warning:l_,"read-only-header":"_read-only-header_1n54v_16","logo-container":"_logo-container_1n54v_26","right-item-container":"_right-item-container_1n54v_37","user-avatar":"_user-avatar_1n54v_42"},Da=un({[Wt.Sketch]:{id:"headerTitle.sketch",defaultMessage:"Sketches",description:"Sketches"},[Wt.Example]:{id:"headerTitle.example",defaultMessage:"Example",description:"Example"},[Wt.CustomLibrary]:{id:"headerTitle.customLibrary",defaultMessage:"Library",description:"Library"}}),f_=un({signIn:{id:"header.signIn",defaultMessage:"Sign In",description:"Sign In"}}),af={[Wt.CustomLibrary]:Da[Wt.CustomLibrary],[Wt.Example]:Da[Wt.Example],[Wt.Sketch]:Da[Wt.Sketch]},h_=e=>{const{headerLogic:t}=e,{user:r,isReadOnly:n,canShareToClassroom:o,readOnlyAvatarLink:s,headerItemId:f,itemName:i,itemDataIsLoading:v,headerActions:l}=t(),{formatMessage:a}=Rn();return n?X.jsxs("div",{className:bn["read-only-header"],children:[X.jsx("div",{className:bn["logo-container"],children:X.jsx(tn.ArduinoLoop,{})}),X.jsx("div",{className:bn["right-item-container"],children:r?r.picture?X.jsx("a",{href:s,target:"_blank",rel:"noreferrer",children:X.jsx("img",{className:bn["user-avatar"],src:r.picture,alt:"User avatar",width:"36",height:"36"})}):null:r===null?X.jsx(Ec,{type:rg.Tertiary,onClick:rs,children:a(f_.signIn)}):null})]}):X.jsxs(X.Fragment,{children:[X.jsxs(X1,{asDialog:"header",children:[X.jsx(cb,{}),X.jsxs(W1,{children:[X.jsx(J1,{}),X.jsx(Y1,{}),X.jsx(z1,{})]}),X.jsx(lb,{})]}),X.jsx(H1,{children:f===Wt.None||!l?null:v?X.jsx("div",{className:bn["title-skeleton"],children:X.jsx(tg,{variant:"rounded",count:1})}):X.jsxs(G1,{children:[X.jsx(_h,{children:f!==Wt.Sketch?a(af[f]):X.jsx("a",{href:`${at.CLOUD_HOME_URL}/sketches`,children:a(af[f])})}),X.jsx(q1,{}),X.jsxs(V1,{triggerContent:i,children:[f===Wt.Sketch&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:l[f].Rename,children:"Rename"}),X.jsx(br,{onClick:l[f].Download,children:"Download"}),X.jsx(br,{onClick:l[f].Share,children:"Share Sketch"}),X.jsx(br,{onClick:l[f].ShareToClassroom,disabled:!o,children:"Share to Google Classroom"}),X.jsx(br,{className:bn.warning,onClick:l[f].Delete,children:"Delete"})]}),f===Wt.CustomLibrary&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:l[f].Download,children:"Download"}),X.jsx(br,{className:bn.warning,onClick:l[f].Delete,children:"Delete"})]}),f===Wt.Example&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:l[f].CopyToSketches,children:"Save in your sketches"}),X.jsx(br,{onClick:l[f].Download,children:"Download"}),X.jsx(br,{onClick:l[f].Share,children:"Share"})]})]})]})})]})},js=Oe.memo(h_),IC=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"})),d_="data:image/svg+xml,%3csvg%20width='15'%20height='8'%20viewBox='0%200%2015%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.5%204.97755C8.35464%206.46437%209.6849%207.28125%2011.2596%207.28125C13.0637%207.28125%2014.5312%205.80931%2014.5312%204C14.5312%202.19069%2013.0637%200.71875%2011.2596%200.71875C9.6849%200.71875%208.35464%201.53563%207.5%203.02245C6.64536%201.53563%205.3151%200.71875%203.74039%200.71875C1.93634%200.71875%200.46875%202.19069%200.46875%204C0.46875%205.80931%201.93634%207.28125%203.74039%207.28125C5.3151%207.28125%206.64536%206.46437%207.5%204.97755ZM8.25531%204.40741L8.03353%204L8.25531%203.59259C8.9447%202.32573%209.98337%201.65625%2011.2596%201.65625C12.5466%201.65625%2013.5938%202.70773%2013.5938%204C13.5938%205.29227%2012.5466%206.34375%2011.2596%206.34375C9.98337%206.34375%208.9447%205.67427%208.25531%204.40741ZM1.40625%204C1.40625%202.70773%202.45338%201.65625%203.74039%201.65625C5.01663%201.65625%206.0553%202.32573%206.74469%203.59259L6.96647%204L6.74469%204.40741C6.0553%205.67427%205.01663%206.34375%203.74039%206.34375C2.45339%206.34375%201.40625%205.29227%201.40625%204ZM11.3688%204.35175H12.0849V3.66663H11.3688V2.94565H10.684V3.66663H9.96693V4.35175H10.684V5.07273H11.3688V4.35175ZM5.013%203.66663H2.89407V4.35175H5.013V3.66663Z'%20fill='black'/%3e%3c/svg%3e",p_="data:image/svg+xml,%3csvg%20width='15'%20height='8'%20viewBox='0%200%2015%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.5%204.97755C8.35464%206.46437%209.6849%207.28125%2011.2596%207.28125C13.0637%207.28125%2014.5312%205.80931%2014.5312%204C14.5312%202.19069%2013.0637%200.71875%2011.2596%200.71875C9.6849%200.71875%208.35464%201.53563%207.5%203.02245C6.64536%201.53563%205.3151%200.71875%203.74039%200.71875C1.93634%200.71875%200.46875%202.19069%200.46875%204C0.46875%205.80931%201.93634%207.28125%203.74039%207.28125C5.3151%207.28125%206.64536%206.46437%207.5%204.97755ZM8.25531%204.40741L8.03353%204L8.25531%203.59259C8.9447%202.32573%209.98337%201.65625%2011.2596%201.65625C12.5466%201.65625%2013.5938%202.70773%2013.5938%204C13.5938%205.29227%2012.5466%206.34375%2011.2596%206.34375C9.98337%206.34375%208.9447%205.67427%208.25531%204.40741ZM1.40625%204C1.40625%202.70773%202.45338%201.65625%203.74039%201.65625C5.01663%201.65625%206.0553%202.32573%206.74469%203.59259L6.96647%204L6.74469%204.40741C6.0553%205.67427%205.01663%206.34375%203.74039%206.34375C2.45339%206.34375%201.40625%205.29227%201.40625%204ZM11.3688%204.35175H12.0849V3.66663H11.3688V2.94565H10.684V3.66663H9.96693V4.35175H10.684V5.07273H11.3688V4.35175ZM5.013%203.66663H2.89407V4.35175H5.013V3.66663Z'%20fill='white'/%3e%3c/svg%3e",m_={},Rd=Oe.createContext(m_),cf=un({title:{id:"title",defaultMessage:"Cloud Editor",description:"Tab Title"},titleSuffix:{id:"title.suffix",defaultMessage:"Arduino Cloud Editor",description:"Tab Title Suffix"}}),uu=e=>{const{tabTitle:t}=e,{isDarkModeOs:r}=Oe.useContext(Rd),{formatMessage:n}=Rn();return X.jsxs(Dp,{children:[X.jsx("title",{children:t?`${t}  ${n(cf.titleSuffix)}`:n(cf.title)}),X.jsx("link",{rel:"icon",type:"image/svg+xml",href:r?p_:d_})]})},g_={},v_=Oe.createContext(g_),y_={hasError:!1};class b_ extends Oe.Component{constructor(t){super(t),this.state=y_}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?null:this.props.children}}const w_="_container_dbaw5_1",x_="_content_dbaw5_12",Fa={container:w_,"container-with-header":"_container-with-header_dbaw5_7",content:x_},__="_container_1nfy1_1",E_="_content_1nfy1_8",S_="_title_1nfy1_18",C_="_message_1nfy1_23",k_="_divider_1nfy1_27",A_="_button_1nfy1_33",I_="_iconContainer_1nfy1_37",wn={container:__,content:E_,title:S_,message:C_,divider:k_,button:A_,iconContainer:I_},Oi=un({needHelpMessage:{id:"error.needHelpMessage",defaultMessage:"{getInTouchLink} with us",description:"Help msg for error page"},getInTouchLink:{id:"error.getInTouchLink",defaultMessage:"Get in touch",description:"Link to get in touch"},helpTitle:{id:"error.helpTitle",defaultMessage:"An Error Occurred",description:"Title for error page"},helpMessage:{id:"error.helpMessage",defaultMessage:"We're not sure what happened",description:"Help msg for error page"},copyError:{id:"error.copyError",defaultMessage:"Copy Error to Clipboard",description:"CTA to copy error to clipboard"}}),R_=e=>{const{onClickCopyError:t}=e,{formatMessage:r}=Rn(),n=X.jsx(zf,{href:at.ARDUINO_CONTACT_US_URL,target:"_blank",rel:"noreferrer",children:r(Oi.getInTouchLink)});return X.jsx("div",{className:wn.container,children:X.jsxs("div",{className:wn.content,children:[X.jsx("div",{className:wn.iconContainer,children:X.jsx(tn.StatusError,{})}),X.jsx(Sc,{bold:!0,className:wn.title,children:r(Oi.helpTitle)}),X.jsx(Cc,{className:wn.message,children:r(Oi.helpMessage)}),X.jsx(Ec,{classes:{button:wn.button},onClick:t,children:r(Oi.copyError)}),X.jsx("hr",{className:wn.divider}),ii()?void 0:X.jsx(Gf,{children:r(Oi.needHelpMessage,{getInTouchLink:n})})]})})},T_=Oe.memo(R_),O_=e=>{const{onClickCopyError:t}=e,r=()=>{const{user:f}=Oe.useContext(Jn),{viewMode:i}=$s(),v=Wt.None;return{isReadOnly:!!i,readOnlyAvatarLink:ii()?"":at.ID_URL,user:f,headerItemId:v}},n=Oe.useCallback(r,[]);let o=!1;const s=Oe.useContext(io);return s&&(o=!!s.headerless),X.jsxs("div",{className:vs(Fa.container,{[Fa["container-with-header"]]:!o}),children:[X.jsxs(b_,{children:[o?null:X.jsx(uu,{}),o?null:X.jsx(js,{headerLogic:n})]}),X.jsx("div",{className:Fa.content,children:X.jsx(T_,{onClickCopyError:t})})]})},N_=Oe.memo(O_);function Td(e){const t=Oe.useCallback(n=>{const o=e.subscribe(n);return()=>o.unsubscribe()},[e]),r=Oe.useCallback(()=>{if(e instanceof In)return e.getValue();{let n;return e.subscribe(o=>{n=o}).unsubscribe(),n}},[e]);return Oe.useSyncExternalStore(t,r)}let uf=!1;function P_(e,t){const{isIotComponent:r}=Oe.useContext(io),{viewMode:n}=$s(),o=Rc(),s=Td(o),f=!!(n&&!s);Fg(f);const i=!!(e||!e&&t),{data:v}=er(["auth-init"],Ng,{enabled:!i}),{data:l}=er(["auth-token"],()=>yt(void 0,!0,f),{enabled:!i&&!!v}),a=!!(l||l===""),{data:y}=er(["auth-check"],Lg,{enabled:a});er(["auth-login"],rs,{enabled:a&&y===!1&&!f});const{data:u}=er(["auth-user"],Xf,{enabled:a&&y===!0}),g=e||u||void 0,{data:I}=er(["user-restrictions-recap",g==null?void 0:g[Bi]],()=>Lx(g==null?void 0:g[Bi]),{enabled:!!g});return er(["analytics",g==null?void 0:g[Bi]],()=>g?qg(g):Promise.reject(),{enabled:!!g&&!r,onSuccess:async()=>{g&&!uf&&(Hg({type:"INIT"}),uf=!0)}}),{client:v,token:l,user:f&&l===ri?null:g,isAuthInjected:i,userNotTargetAudience:!1,compileUsageExceeded:I&&Bx(I),canUseOta:I&&Fx(I),canUseGenAi:!0,canShareToClassroom:I&&jx(I),aiUserPlan:I&&Mx(I),genAiInteractions:I&&Ux(I)}}const lu=({profile:e,profileIsLoading:t,children:r})=>{const{client:n,isAuthInjected:o,...s}=P_(e,t);return o?X.jsx(Jn.Provider,{value:{...s,isAuthInjected:!0},children:r}):X.jsx(Oe.Suspense,{children:n?X.jsx(Jn.Provider,{value:{...s,isAuthInjected:!1},children:X.jsx(ng,{env:{API_URL:at.API_URL},authClient:n,skipRedirectCallback:!0,children:r})}):null})},{API_URL:L_,ID_URL:B_,DIGITAL_STORE_URL:D_,CLOUD_CDN_URL:F_}=at,fu=({children:e})=>{const{isAuthInjected:t}=Oe.useContext(Jn);return t?X.jsx(X.Fragment,{children:e}):X.jsx(j_,{children:e})},j_=({children:e})=>{var r,n;const{client:t}=Cr();return X.jsx($1,{api:{baseurl:L_},onSpaceChange:M_(((r=t.getCustomization())==null?void 0:r.url)||at.CLOUD_HOME_URL),env:{DIGITAL_STORE_URL:ii()?"":D_,ID_URL:B_,ICON_CDN:F_,CLOUD_HOME_URL:((n=t.getCustomization())==null?void 0:n.url)||at.CLOUD_HOME_URL},storage:Ah(),children:e})},M_=e=>t=>{window.location.href=`${e}/sketches`},lr=new Fp({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),hu=e=>{const{children:t}=e;return X.jsx(jp,{client:lr,children:t})},U_={},$_=Oe.createContext(U_),lf=ig.ENGLISH,du=({children:e})=>{const[t,r]=Oe.useState(lf);return X.jsx($_.Provider,{value:{currentLocale:t,setCurrentLocale:r},children:X.jsx(Mp,{locale:t,defaultLocale:lf,children:e})})},RC=function(){const e=Oe.useCallback((r,n)=>{Cd(r,n)},[]),t=Oe.useCallback(()=>{Ox()},[]);return{setPreference:e,restorePreferences:t}};function ff(e){const[t,r]=Oe.useState(qa);Oe.useEffect(()=>{(async()=>{const o=await kd(e);r(o||qa)})()},[e,t]);const n=Td(t);return t instanceof In?n:void 0}const z_="_themeContainer_17qd2_1",G_={themeContainer:z_},pu=e=>{const{children:t}=e,r=Up("(prefers-color-scheme:dark)"),n=ff(ll.Theme),s=ff(ll.AutoTheme)?r?ga.DarkTheme:ga.LightTheme:n??ga.LightTheme,[f,i]=Oe.useState(String(s));return X.jsx(Rd.Provider,{value:{theme:f,setTheme:i,isDarkModeOs:r},children:X.jsx("div",{className:vs(f,G_.themeContainer),children:t})})},q_=new Af,V_=({profile:e,profileIsLoading:t,children:r})=>X.jsx(If,{location:q_,routes:[],children:X.jsx(hu,{children:X.jsx(du,{children:X.jsx(lu,{profile:e,profileIsLoading:t,children:X.jsx(fu,{children:X.jsx(pu,{children:X.jsx(yc,{children:r})})})})})})}),H_=e=>{const{errorMsg:t,errorInfo:r,profile:n,profileIsLoading:o}=e,[s,f]=$p(),i=Oe.useCallback(()=>{const v=`Error message: ${t}
Stack: ${r.componentStack}`;f(v)},[f,r.componentStack,t]);return X.jsx(V_,{profile:n,profileIsLoading:o,children:X.jsx(N_,{onClickCopyError:i})})},W_={hasError:!1,errorMsg:void 0,errorInfo:void 0};class Od extends Oe.Component{constructor(t){super(t),this.state=W_}componentDidCatch(t,r){this.setState({hasError:!0,errorInfo:r,errorMsg:t.message})}render(){return this.state.hasError?X.jsx(H_,{errorInfo:this.state.errorInfo,errorMsg:this.state.errorMsg,profile:this.context.profile,profileIsLoading:this.context.profileIsLoading}):this.props.children}}il(Od,"contextType",io);const K_="_container_1nf32_1",Y_="_content_1nf32_13",ja={container:K_,"container-with-header":"_container-with-header_1nf32_10",content:Y_},Ni=un({needHelpMessage:{id:"notFound.needHelpMessage",defaultMessage:"Need help? {getInTouchLink} with us",description:"Help msg for error page"},getInTouchLink:{id:"notFound.getInTouchLink",defaultMessage:"Get in touch",description:"Link to get in touch"},helpTitle:{id:"notFound.helpTitle",defaultMessage:"{type} not found",description:"Title for error page"},helpMessage:{id:"notFound.helpMessage",defaultMessage:"Unfortunately, we cant find the {type} that you are looking for",description:"Help msg for error page"},goToSketches:{id:"notFound.goToSketches",defaultMessage:"Go to sketches",description:"CTA to go to sketch list"}}),Z_="_container_17g8x_1",X_="_content_17g8x_8",Q_="_title_17g8x_18",J_="_message_17g8x_23",eE="_divider_17g8x_27",tE="_button_17g8x_33",Gn={container:Z_,content:X_,title:Q_,message:J_,divider:eE,button:tE},rE=e=>{const{type:t}=e,{formatMessage:r}=Rn(),n=X.jsx(zf,{href:at.ARDUINO_CONTACT_US_URL,target:"_blank",rel:"noreferrer",children:r(Ni.getInTouchLink)}),o=()=>{window.location.href=`${at.CLOUD_HOME_URL}/sketches`};return X.jsx("div",{className:Gn.container,children:X.jsxs("div",{className:Gn.content,children:[X.jsx(tn.NotFoundPageImage,{}),X.jsx(Sc,{bold:!0,className:Gn.title,children:r(Ni.helpTitle,{type:t})}),X.jsx(Cc,{className:Gn.message,children:r(Ni.helpMessage,{type:t})}),X.jsx(Ec,{classes:{button:Gn.button},onClick:o,children:r(Ni.goToSketches)}),X.jsx("hr",{className:Gn.divider}),ii()?null:X.jsx(Gf,{children:r(Ni.needHelpMessage,{getInTouchLink:n})})]})})},nE=e=>{const{notFoundType:t}=e,r=()=>{const{user:f}=Oe.useContext(Jn),{viewMode:i}=$s(),v=Wt.None;return{isReadOnly:!!i,readOnlyAvatarLink:ii()?"":at.ID_URL,user:f,headerItemId:v}},n=Oe.useCallback(r,[]);let o=!1;const s=Oe.useContext(io);return s&&(o=!!s.headerless),X.jsxs("div",{className:vs(ja.container,{[ja["container-with-header"]]:!o}),children:[o?null:X.jsx(uu,{}),o?null:X.jsx(js,{headerLogic:n}),X.jsx("div",{className:ja.content,children:X.jsx(rE,{type:t})})]})},iE=({profile:e,profileIsLoading:t,children:r})=>X.jsx(hu,{children:X.jsx(du,{children:X.jsx(lu,{profile:e,profileIsLoading:t,children:X.jsx(fu,{children:X.jsx(pu,{children:X.jsx(yc,{children:r})})})})})}),Ma=e=>{const{notFoundType:t,profile:r,profileIsLoading:n}=e;return X.jsx(iE,{profile:r,profileIsLoading:n,children:X.jsx(nE,{notFoundType:t})})};function oE(){const e=Object.assign(Oe.lazy(()=>Pi(()=>import("./MainPage-QBXWPM_a.js").then(r=>r.j),__vite__mapDeps([0,1,2,3,4,5,6,7]))),{preload:async()=>{await Pi(()=>import("./MainPage-QBXWPM_a.js").then(r=>r.j),__vite__mapDeps([0,1,2,3,4,5,6,7]))}}),t=Object.assign(Oe.lazy(()=>Pi(()=>import("./SerialMonitorPage-CBDKNhDt.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),{preload:async()=>{await Pi(()=>import("./SerialMonitorPage-CBDKNhDt.js"),__vite__mapDeps([8,1,2,3,4,5,6]))}});return{MainPage:e,SerialMonitorPage:t}}function sE(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function aE(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,r){return String.fromCharCode(parseInt(r,16))}))}const cE="nav",Nd="eid",Pd="lid",TC="ui",mu="slid",Ld="clid",mc="createExample",gc="createSketch",Bd="sketchID",uE="optIn",lE="bypassIotRedirect",fE="view-mode",hE="scope",dE="highlight",pE="hide-numbers",mE=["preview","embed","snippet"];function gE(e){return mE.includes(e)}function vE(e){const[t,r]=e.replaceAll("L","").split("-");return!isNaN(Number(t))&&!isNaN(Number(r))}function yE(e){const[t,r]=e.replaceAll("L","").split("-").map(Number);return{start:t,end:r}}function bE(e){return e.split(",").every(t=>{const[r,n]=t.replaceAll("L","").split("-");return n?!isNaN(Number(r))&&!isNaN(Number(n)):!isNaN(Number(r))})}function wE(e){return[...new Set(e.split(",").flatMap(t=>{const[r,n]=t.replaceAll("L","").split("-").map(Number);return n?Array.from({length:n-r+1},(o,s)=>r+s):[r]}))]}var xE=(e=>(e.Fullscreen="fs",e))(xE||{});const _E={parseSearch:Gp(e=>JSON.parse(sE(e))),stringifySearch:zp(e=>aE(JSON.stringify(e)))},EE=new Af(_E),{MainPage:Ms,SerialMonitorPage:SE}=oE(),Dd="monitor",Fd="examples",jd="libraries",Us="notfound",Md="redirect",CE=[Dd,Fd,jd,Us,Md],fi="/",kE=Dd,gu=`${fi}${Fd}`,vu=`${fi}${jd}`,Ud=`${fi}${Us}`,$d=`${gu}/${Us}`,zd=`${vu}/${Us}`,AE=`${fi}${Md}`,IE={Sketch:Ud,Example:$d,Library:zd},RE=X.jsx(qp,{to:fi,from:{pathname:at.ROUTING_BASE_URL},fromCurrent:!1}),TE={element:RE},OE=e=>({path:kE,element:X.jsx(SE,{...e})}),NE=e=>({path:`:${Bd}`,element:X.jsx(Ms,{...e})}),PE=e=>({path:gu,element:X.jsx(Ms,{...e})}),LE=e=>({path:vu,element:X.jsx(Ms,{...e})}),BE=e=>({path:AE,element:X.jsx(Ms,{...e})}),DE=e=>[{path:zd,element:X.jsx(Ma,{...e,notFoundType:"Library"})},{path:Ud,element:X.jsx(Ma,{...e,notFoundType:"Sketch"})},{path:$d,element:X.jsx(Ma,{...e,notFoundType:"Example"})}],FE=(e,t)=>[...DE(e),OE(t),BE(e),PE(e),LE(e),NE(e),TE],jE=FE(),ME=e=>{const{location:t,routes:r,renderOutletContextProvider:n}=e,o=X.jsx(Od,{children:X.jsx(Vp,{})});return X.jsx(If,{location:t||EE,basepath:at.ROUTING_BASE_URL,routes:r||jE,children:n?n(o):o})},hf=un({noAgentAdvisoryTitle:{id:"toolbar.agent-down-title",defaultMessage:"No Cloud Agent Connection",description:"Title for advisory given to user when create agent is not detected"},noAgentAdvisoryMessage:{id:"toolbar.agent-down",defaultMessage:"To upload a Sketch via USB port, make sure the Cloud Agent is installed and running on this computer.",description:"Advisory given to user when create agent is not detected"},uploadNotAvailableAdvisoryTitle:{id:"toolbar.generic-upload-unavailable-title",defaultMessage:"Upload Unavailable",description:"Title for advisory given to user when upload is not available"},noDeviceAdvisoryTitle:{id:"toolbar.no-device-upload-unavailable-title",defaultMessage:"Device not found",description:"Title for advisory given to user when upload is not available because no device/port is selected"},noDeviceAdvisoryMessage:{id:"toolbar.no-device-upload-unavailable",defaultMessage:"To upload your sketch, plug a device.",description:"Advisory given to user when upload is not available because no device/port is selected"},successfulCreation:{id:"create-file-success",defaultMessage:"File successfully created",description:"Advisory given to user when file is created"},successfulSketchRename:{id:"rename-sketch-success",defaultMessage:"Sketch successfully renamed",description:"Advisory given to user when file is renamed"},sketchNameAlreadyExists:{id:"rename-sketch-conflict",defaultMessage:"Sketch name already exists",description:"Advisory given when to user when selected sketch name already exists"},successfulRename:{id:"rename-file-success",defaultMessage:"File successfully renamed",description:"Advisory given to user when file is renamed"},successfulDeletion:{id:"delete-file-success",defaultMessage:"File successfully deleted",description:"Advisory given to user when file is deleted"},exampleModificationAdvisory:{id:"example-mod-advisory",defaultMessage:"Examples cannot be modified, you can make a copy and do your changes there.",description:"Advisory given to user when example is modified"},exampleModificationCopy:{id:"example-mod-advisory-action",defaultMessage:"COPY IN YOUR SKETCHES",description:"Action given to user when example is modified"},successfulLibraryInclude:{id:"include-library-success",defaultMessage:"Library included",description:"Advisory given to user when library is included"},libraryAlreadyIncluded:{id:"include-library-already-included",defaultMessage:"Library already included",description:"Advisory given to user when library is already included"},errorFixedInCode:{id:"error-fixed-in-code",defaultMessage:"Error fixed in code",description:"Advisory given to user when error is fixed in code"},fixAlreadyIncluded:{id:"fix-already-included",defaultMessage:"Fix already included",description:"Advisory given to user when fix is already included"},portOfflineAdvisoryTitle:{id:"port-offline-title",defaultMessage:"Port Offline",description:"Title for advisory given to user when port is offline"},portOfflineAdvisoryMessage:{id:"port-offline",defaultMessage:"Your device is not online, check it is powered on, and connected to the relevant network",description:"Advisory given to user when port is offline"},compileLimitExceededAdvisoryTitle:{id:"compile-limit-exceeded-title",defaultMessage:"Plan limits reached",description:"Title for advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisory:{id:"compile-limit-exceeded",defaultMessage:"You have used up your available {messageBold}. Upgrade your plan for unlimited compilations.",description:"Advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisoryWOUpgrade:{id:"compile-limit-exceeded",defaultMessage:"You have used up your available {messageBold}",description:"Advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisoryBold:{id:"compile-limit-exceeded-bold",defaultMessage:"25 daily compilations",description:"Bold message shown in compile limit exceeded advisory"},compileLimitExceededUpgrade:{id:"compile-limit-exceeded-action",defaultMessage:"Upgrade plan",description:"Action given to user when compile limit is exceeded"},libraryUploadSuccess:{id:"library-upload-success",defaultMessage:"Library uploaded successfully",description:"Advisory given to user when library is uploaded"},libraryMalformedError:{id:"library-malformed-error",defaultMessage:"{hasErrorMessage, select, true {Selected file is not a valid library: {errorMessage}} other {Selected file is not a valid library}}",description:"Advisory given to user when library is malformed"},libraryDownloadStart:{id:"library-download-start",defaultMessage:'Preparing "{name}.zip" library, download will start shortly...',description:"Advisory given to user when library download starts"},readOnlyOpenInEditor:{id:"read-only-open-in-editor",defaultMessage:"Open in editor",description:"Action given to user when file is read-only"},readOnlyAddToSketches:{id:"read-only-add-to-sketches",defaultMessage:"Add to sketches",description:"Action given to user when file is read-only"},readOnlyDownloadAction:{id:"read-only-download",defaultMessage:"Download",description:"Action given to user when file is read-only"},sketchDataNotCompliantAdvisoryTitle:{id:"sketch-data-not-compliant-title",defaultMessage:"Sketch Data Incomplete",description:"Title for advisory given to user when sketch data is not compliant"},sketchDataNotCompliantAdvisoryMessage:{id:"sketch-data-not-compliant",defaultMessage:"Data in this sketch is either loading, or not compliant with our Cloud CLI, if this message persists please see our:",description:"Advisory given to user when sketch data is not compliant"},sketchDataNotCompliantReferenceLink:{id:"sketch-data-not-compliant-reference-link",defaultMessage:"Arduino Sketch Specification",description:"Link to the Arduino Sketch Specification"},iotWebSerialWrongDevice:{id:"iot-web-serial-wrong-device",defaultMessage:"Selected board doesn't match the device associated with this Thing",description:"Advisory given to user when user selects a different board from the associated Thing one using the Chrome web serial selector"},otaBlockedAdvisoryTitle:{id:"ota-blocked-title",defaultMessage:"Upgrade for OTA upload",description:"Title for advisory given to user when OTA is blocked"},otaBlockedAdvisoryMessage:{id:"ota-blocked",defaultMessage:"OTA upload is not available with your current plan",description:"Advisory given to user when OTA is blocked"},otaBlockedAdvisoryMessageWOPlan:{id:"ota-blocked",defaultMessage:"OTA upload is not available",description:"Advisory given to user when OTA is blocked"},otaIncompatibleTitle:{id:"ota-incompatible-title",defaultMessage:"OTA upload not supported",description:"Title for advisory given to user when OTA is not supported for current device"},otaIncompatibleMessage:{id:"ota-incompatible",defaultMessage:"Upload Over-The-Air is not supported by this device. Please connect the device via USB.",description:"Advisory given to user when OTA is not supported for current device"},portBusyAdvisoryTitle:{id:"port-busy-title",defaultMessage:"Port Busy",description:"Title for advisory given to user when port is busy"},portBusyAdvisoryMessage:{id:"port-busy",defaultMessage:"The selected port is busy, please wait a few moments",description:"Advisory given to user when port is busy"},shareSketchWarning:{id:"share-sketch-warning",defaultMessage:"The Sketch is now public. People outside your space with the link can view it.",description:"Warning shown when user tries to share a sketch"},shareSketchUndo:{id:"share-sketch-undo",defaultMessage:"Undo",description:"Action given to user when sketch is shared"},shareToClassroomTitle:{id:"share-to-classroom-title",defaultMessage:"Arduino Sketch - {title}",description:"Title shown in the title of sketch shared to classroom"},shareToClassroomContent:{id:"share-to-classroom-content",defaultMessage:"Hi! This is the sketch that Ive made for you. Copy it in your sketchbook or download it.",description:"Text shown in the content of sketch shared to classroom"},couldNotCheckOtaTitle:{id:"could-not-check-ota-title",defaultMessage:"OTA Status unknown",description:"Title shown when OTA compatibility check fails"},couldNotCheckOta:{id:"could-not-check-ota",defaultMessage:"An Over-The-Air upload may be in progress",description:"Advisory given to user when OTA compatibility check fails"},noDeviceAssociatedTitle:{id:"no-device-associated-title",defaultMessage:"No device associated",description:"Title shown when no device is associated"},noDeviceAssociated:{id:"no-device-associated",defaultMessage:"We could not find a device associated with this sketch, you can associate a device from the setup tab",description:"Advisory given to user when no device is associated"},notificationPreVerifyInterrupt:{id:"pre-verify-interrupt",defaultMessage:"Verification requirements not meet, please retry",description:"Warning given to the user when pre-verification is interrupted"}}),UE=un({[nn.exceedsLimit]:{id:"fileNameExceedsLimit",defaultMessage:"Character limit reached.",description:"Character limit reached."},[nn.hasInvalidCharacters]:{id:"fileNameContainsInvalidCharacters",defaultMessage:"Spaces, punctuations and special characters are not allowed.",description:"Spaces, punctuations and special characters are not allowed."},[nn.alreadyExists]:{id:"fileNameAlreadyExists",defaultMessage:"Name already in use, please choose another one.",description:"Name already in use, please choose another one."},[nn.emptyName]:{id:"fileNameEmpty",defaultMessage:"Name cannot be empty.",description:"Name cannot be empty."}}),$E=[3,10,25];function OC(e){return e==null?void 0:e.find(t=>t.name===as)}function zE(e){const{href:t}=e;if(!t)return!1;const r=t.split("/");return r.pop()===`${r.pop()}.ino`}function NC(e){return e==null?void 0:e.find(zE)}function df(e){return{data:e.data,name:e.fullName}}function PC({fqbn:e,sketchData:t,mainInoData:r,isVerboseOutput:n,filesData:o,isIot:s=!1}){let f=!1;const i=Sr(r.path).value.value,v=Er(Sr(r.path).value.value,r.mimetype),l=o?o.filter(g=>typeof g.data<"u").map(Gd).map(df):[];t.secrets&&(l.push(ph(t.secrets)),f=!0);const a=df({...r,data:v}),y={included_libs:t.libraries||[]},u={fqbn:e,sketch:{name:t.name,files:l,...y,ino:f?mh(a,i,r.mimetype):a},hasSecretsIncludeInjected:f,verbose:n};return s&&(u.ota=!0),u}function GE(e,t){const r=Er(Sr(e.path).value.value,e.mimetype),n=t?t.map(Gd):[];return{exampleIno:{...e,data:r},exampleFiles:n}}function Gd(e){const t=e.path,r=Sr(t).value.value,n=Er(r,e.mimetype);return{...e,data:n,content:r}}function Ua(e,t=!1,r=!1,n=[]){return{fileId:e.path,fileFullName:e.fullName,fileName:e.name,fileExtension:e.extension,Icon:qd(e.extension),tags:n,isFixed:r,isMetadataReadOnly:t}}function qd(e){switch(e){case"ino":case"cpp":case"c":case"pde":return tn.FileTypeIno;case"h":return tn.FileTypeHeader;case"txt":case"adoc":case"md":case"asciidoc":case"asc":return tn.FileTypeText;case"png":case"jpg":case"svg":return tn.FileTypeImage;case"secrets":return tn.FileTypeSecrets;default:return}}function LC(e){return{exceedsLimit:lh(e),hasInvalidCharacters:fh(e)}}const qE=e=>e.name.toLowerCase().includes("readme"),VE=e=>(t=>"fullName"in t)(e)?e.fullName==="library.properties":e.name==="library.properties";function HE(e){const t=e==null?void 0:e.find(qE);if(t)return t;if(!t)return e==null?void 0:e.find(VE)}function BC(e){return`${at.CLOUD_HOME_URL}/things/${e}/setup`}function DC(e,t){var n;return!!(t&&((n=e.path)!=null&&n.includes(`${t[og]}/libraries_v2`)))}function FC(e,t){return e===Br.FREE||e===Br.MAKER&&$E.includes(t)}const jC=e=>{const t=/T(\d{2}:\d{2}:\d{2})(?:\.\d+)?Z/,r=e==null?void 0:e.match(t);return r?`[${r[1]}]`:""},WE=e=>{const t=new Date(e),r=new Date;return Math.abs(t.getTime()-r.getTime())};var KE=(e=>(e.GET_SKETCH_BY_ID_QUERY_KEY="get-sketch-by-id",e.CREATE_DEFAULT_KEY_QUERY_KEY="create-default-sketch",e.GET_SKETCHES_QUERY_KEY="get-sketches",e))(KE||{});const MC={"get-sketch-by-id":(e,t)=>({...e,...t}),"create-default-sketch":(e,t)=>({...e,...t}),"get-sketches":(e,t,r)=>e.map(n=>n.id===(t==null?void 0:t.id)?{...t,...r}:n)},UC=function(e,t){const{data:r,isLoading:n,isError:o}=er(["get-sketch-by-id",t],()=>t?Pb(t):Promise.reject("Tried to obtain a sketch by ID without providing a specific sketch ID"),{refetchOnWindowFocus:!1,enabled:e});return{data:r,isLoading:n,isError:o}},YE=function(e,t,r,n){const{data:o,isLoading:s,refetch:f}=er(["get-sketches",t],()=>Bb(n),{refetchOnWindowFocus:!1,enabled:e,cacheTime:r});return{refetch:f,sketchesData:o,getSketchesIsLoading:s}},$C=function(){const{data:e,isLoading:t,mutate:r}=rr({mutationFn:Wc});return{create:r,isLoading:t,createdSketch:e}},zC=function(){const{isLoading:e,mutateAsync:t}=rr({mutationFn:Lb});return{isLoading:e,deleteSketchMutate:t}},GC=function(){const{isLoading:e,mutateAsync:t}=rr({mutationFn:r=>jh(r.from,r.to)});return{renameSketchMutate:t,isLoading:e}},ZE=function(e){const t=Of(),r=Oe.useRef(0),n=Oe.useCallback(i=>{const v=`${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}/${i}`;i&&t({to:v,search:{[Nd]:void 0,[mu]:void 0,[gc]:void 0,[mc]:void 0,[Ld]:void 0},replace:!0})},[t]),{data:o,isLoading:s,mutate:f}=rr({mutationFn:i=>i?Wc(i.sketchName,i.sketchContent,void 0,i.files??[]):Promise.reject("Content undefined"),onSuccess:async i=>{e==null||e(i),n(i.id)},onError:(i,v)=>{if(r.current=r.current+1,r.current>1){t({search:{[gc]:void 0,[mc]:void 0}});return}f({...v,sketchName:`${(v==null?void 0:v.sketchName)||"Existing_Sketch_Copy"}_${new Date().valueOf()}`})}});return{create:f,isLoading:s,createdSketch:o}},qC=function(e){const[t,r]=Oe.useState(as),n=Oe.useRef(0),{data:o}=er(["create-default-sketch",t],()=>Wc(t),{onError:()=>{n.current===0&&r(`${as}_${new Date().valueOf()}`),n.current=n.current+1},refetchOnWindowFocus:!1,enabled:e});return{createdSketch:o}};function VC(){return lr.invalidateQueries(["get-sketch-by-id"],{})}function HC(e){e.forEach(t=>{lr.invalidateQueries(["get-file-content",t]),lr.invalidateQueries(["get-batch-file-content",t])})}const WC=function(e,t,r,n,o,s){const{data:f}=er(["get-file-content",n,s,String(t)],()=>n&&o?Kc(n,o,t,s):Promise.reject(new Error("Tried to get file without path or sketch name")),{onSuccess:i=>{Fh(i),Dh(i.path,!1)},onError:i=>{if(Ic&&i&&i.cause.status===401){const v=r==null?void 0:r(i);if(v!=null&&v.errorIsManaged)return;Ug(!0)}},refetchOnWindowFocus:!1,enabled:e});return{fileData:f}};async function ds(e,t,r,n,o){if(e.type==="file")return[{...e,contents:await Kc(e.path,e.name,t,n===e.path?r:void 0,o)}];if(e.type==="folder"||e.type==="sketch"){const s=await Yc(e.path,t),f=await Promise.all(s.filter(i=>!Lh(i)).map(i=>ds(i,t)));return[e,...f.flat()]}else return[]}const Wo="get-batch-file-content",KC=function(e,t,r,n,o,s,f,i=!1,v,l,a=!1){const[y,u]=Oe.useState({items:[],fetchCount:0,fetchComplete:!1});Oe.useEffect(()=>{u({items:[],fetchCount:0,fetchComplete:!1})},[o,r]),Oe.useEffect(()=>{const G=s||[];u(ae=>{const pe=ae.items.filter(H=>{const ee=G.map(_=>_.path).includes(H.path);return!ee&&[...oi().keys()].includes(H.path)&&Is(H.path),ee});return{...ae,...pe}})},[s]);const[g,I]=Oe.useState(!1),{renameSketchFileMutate:d,isLoading:A}=JE(r),{createSketchFileMutate:w}=QE(e,r),{deleteSketchFileQuery:C,isDeleting:O}=XE(r),N=Tf({queries:(s??[]).map(G=>({queryKey:l===G.path?[Wo,G.path,v,String(t)]:[Wo,G.path,String(t)],queryFn:()=>ds(G,t,v,l,a),onSuccess:ae=>{var H,ee;const pe=new Map;for(const _ of ae)if(_.contents&&_.type==="file"){let S;if(i){const L=(H=_.contents)==null?void 0:H.path.replace((f??"")+"/","");S={..._.contents,name:(ee=_.contents)!=null&&ee.extension?L.replace(`.${_.contents.extension}`,""):L,fullName:L}}else S=_.contents;pe.set(_.path,S),Fh(S)}u(_=>({items:_.items.filter(L=>!pe.has(L.path)).concat(Array.from(pe.values())),fetchCount:_.fetchComplete?_.fetchCount:_.fetchCount+1,fetchComplete:_.fetchComplete?_.fetchComplete:_.fetchCount+1===(s==null?void 0:s.length)}))},onError:n,refetchOnWindowFocus:!1,enabled:e}))}),D=G=>{const ae=G?G.map(pe=>[Wo,pe]):[Wo];lr.invalidateQueries(ae)},W=Oe.useCallback(async(G,ae)=>{function pe(H,ee){u(_=>{const S=_.items.map(L=>{if(ee!==void 0&&L.path===H){L.path=ee;const P=ee.split("/").pop()??"";L.fullName=P,L.name=P.split(".")[0]}return L});return{..._,items:S}})}pe(G,ae),I(G===o);try{await d({from:G,to:ae})}catch(H){throw pe(ae,G),H}},[o,d]),M=Oe.useCallback(async(G,ae,pe,H)=>{const ee={fullName:`${ae}.${pe}`,name:ae,data:"",path:G,href:"",content:"",extension:pe??"",mimetype:""};u(_=>({..._,items:_.items.concat(ee)}));try{return await w({filePath:{path:G},extension:pe,code:H})}catch(_){throw u(S=>({...S,items:S.items.filter(L=>L.path!==G)})),_}},[w]),V=Oe.useCallback(async G=>{const ae=y.items.findIndex(H=>H.path===G),pe=y.items[ae];u(H=>({...H,items:H.items.filter(ee=>ee.path!==G)}));try{return await C(G)}catch(H){throw H.cause!==404&&u(_=>{const S=[..._.items.slice(0,ae),pe,..._.items.slice(ae)];return{..._,items:S}}),H}},[C,y]);return{filesContents:y.items.length>0?y.items:void 0,refreshFileContents:D,deleteSketchFile:V,fileIsDeleting:O,renameSketchFile:W,addSketchFile:M,mainInoIsRenaming:A&&g,isLoading:y.items.length>0?N.some(G=>G.isLoading):!0,allContentsRetrieved:y.fetchComplete}},YC=function(e,t,r,n,o,s=!1){const f=Rf(),{data:i,isLoading:v,isError:l,refetch:a}=er(e,()=>o?Yc(o,r,s):Promise.reject(new Error("Tried to obtain sketch files without providing a valid sketch path")),{onError:n,refetchOnWindowFocus:!1,enabled:t}),y=Oe.useCallback(()=>{f.invalidateQueries(e)},[e,f]);return{filesList:i,getFilesIsLoading:v,getFilesIsError:l,refetch:a,invalidateFilesList:y}},ZC=function(e){const{mutateAsync:t}=rr({mutationFn:r=>e&&typeof r<"u"&&typeof r.code<"u"&&typeof r.fileId<"u"?Db({path:r.fileId},r.code,r.hash):Promise.reject(new Error("Tried to save sketch without auth, path, sketch name, hash,  or content"))});return{saveSketchFileQuery:t}},XE=function(e){const{mutateAsync:t,isLoading:r}=rr({mutationFn:n=>typeof n<"u"?Mb({path:n}):Promise.reject(new Error("Tried to delete sketch without path")),onSuccess:(n,o)=>{o&&Is(o),lr.invalidateQueries({queryKey:e,exact:!0})}});return{deleteSketchFileQuery:t,isDeleting:r}},QE=function(e,t){const{data:r,isLoading:n,mutateAsync:o}=rr({mutationFn:s=>e?Fb(s.filePath,s.extension,s.code):Promise.reject(),onSuccess:()=>{lr.invalidateQueries({queryKey:t,exact:!0})}});return{createdSketchFile:r,isLoading:n,createSketchFileMutate:o}},JE=function(e){const{mutateAsync:t,isLoading:r}=rr({mutationFn:n=>typeof n<"u"&&typeof n.from<"u"&&typeof n.to<"u"?jh(n.from,n.to):Promise.reject(new Error("Tried to rename sketch without path or sketch name")),onSuccess:(n,o)=>{o.from&&Is(o.from),lr.invalidateQueries({queryKey:e,exact:!0})}});return{renameSketchFileMutate:t,isLoading:r}},XC=function(){const{mutateAsync:e,isLoading:t,isError:r}=rr({mutationFn:Rb});return{mutateSketchWithSecrets:e,isError:r,isLoading:t}},QC=function(){const{mutateAsync:e,isLoading:t}=rr({mutationFn:Tb});return{mutateSketchWithDevice:e,isLoading:t}},JC=function(){const{mutateAsync:e,isLoading:t}=rr({mutationFn:Ob});return{mutateSketchVisibility:e,isLoading:t}},ek=function(){const{mutateAsync:e,isLoading:t}=rr({mutationFn:Nb});return{mutateSketchWithLibraries:e,isLoading:t}};function pf(e){if(!e)throw new Error("Tried to get custom library code without path");return["get-custom-library-code",e]}const tk=function(e,t=!1){const[r,n]=Oe.useState(),{data:o,isLoading:s}=er(["get-custom-libraries"],Mh,{refetchOnWindowFocus:!1,enabled:e,staleTime:1/0,onSuccess(f){for(const i of f)lr.invalidateQueries(pf(i.path))}});return Tf({queries:(r??[]).map(f=>({queryKey:pf(f.path),queryFn:()=>Ub({id:f.id}),enabled:t,staleTime:1/0,onSuccess:({code:i})=>{n(v=>v==null?void 0:v.map(l=>l.id===f.id?{...l,code:i}:l))},refetchOnWindowFocus:!1}))}),Oe.useEffect(()=>{n(o)},[o]),{customLibraries:r,customLibrariesAreLoading:s}};function Vd(e){return e?!("version"in e)&&!("downloadUrl"in e):!1}function Hd(){lr.invalidateQueries(["get-custom-libraries"])}const rk=function(e,t){const r=Of(),{mutateAsync:n}=rr({mutationFn(o){return t?e?$b(e,o):Promise.reject("Tried to save library without library name"):Promise.resolve(null)},onSuccess:o=>{Vd(o)&&(r({search:{[Pd]:o.id,[mu]:void 0,[cE]:sg.Libraries},replace:!0}),Hd())}});return{saveLibraryQuery:n}},nk=function(){const{isLoading:e,mutateAsync:t}=rr({mutationFn:zb});return{isLoading:e,deleteCustomLibraryMutate:t}},ik=()=>{const{mutateAsync:e,isLoading:t}=rr({mutationFn:Gb,onSuccess:r=>{Vd(r)&&Hd()}});return{importLibraryQuery:e,isLoading:t}};async function ok(e){const t=(await Mh()).find(o=>o.id===e);if(!t)throw new Error("Library not found");let r;try{r=await ds({path:t.path,name:t.name,type:"folder"},!1)}catch(o){vb(o)&&(r=await ds({path:t.path,name:t.name,type:"folder"},!0))}if(!r)throw new Error("Failed to retrieve library files");const n=r.map(o=>({...o,path:o.path.replace(t.path,"")}));Oh(t.name,n.map(o=>{var s;return{nameWithExt:o.path.replace(/\//,""),base64Content:(s=o.contents)==null?void 0:s.data,isDirectory:o.type==="folder"||o.type==="sketch"}}),t.name)}const mf=12e4,sk=function(e,t,r,n,o,s){const[f,i]=Oe.useState(!1),v=Oe.useRef(0),l=Oe.useRef(void 0),a=()=>{l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{i(!1)},mf)};return er(["retrieve-files-hash-poll",n,s,o],()=>n?Yc(n,!1):Promise.reject("No sketch path while polling the file hash."),{refetchOnWindowFocus:!1,enabled:e,refetchInterval:3e3,refetchIntervalInBackground:!0,onSuccess(y){var A,w,C,O,N;const u=y==null?void 0:y.filter(D=>!Lh(D)),g=oi();if(g.size===0)return;let I=!1;for(const D of u.keys()){const W=u[D],M=(A=g.get(W.path))==null?void 0:A.getValue();if(!M)continue;const V=!!M.meta.hash&&!!((w=W.revision)!=null&&w.hash)&&M.meta.hash!==((C=W.revision)==null?void 0:C.hash);if(V&&(lr.invalidateQueries(["get-file-content",W.path],{exact:!1}),lr.invalidateQueries(["get-batch-file-content",W.path],{exact:!1})),I=V||!!((O=W.revision)!=null&&O.username)&&s!==((N=W.revision)==null?void 0:N.username)&&!!W.modifiedAt&&WE(W.modifiedAt)<mf,I)break}(u.filter(D=>!g.has(D.path)).length||g.size!==u.length)&&(I=!0,t()),I&&(i(!0),r(),a()),v.current=0},onError(y){if(!n)throw new Error("Missing sketchPath");y.cause.path===n&&y.cause.status===404&&v.current===0&&(v.current=v.current+1,i(!0),a(),lr.invalidateQueries(["get-sketch-by-id"],{exact:!1}),Ib(n))}}),Oe.useEffect(()=>{let y;return l.current&&(y=l.current),()=>{clearTimeout(y)}},[]),{isConcurrent:f}};function ak(e){const t=[];return e.forEach(r=>{const n=t;if(r.type==="folder"&&n.push({name:r.name,path:r.path,examplesNumber:r.children??0}),r.type==="sketch"&&n.push({name:r.name,path:r.path,folder:r.name,ino:{path:`${r.path}/${r.name}.ino`,name:`${r.name}.ino`},types:[]}),r.type==="file"&&r.name.split(".").pop()==="ino"){const o=e==null?void 0:e.filter(f=>f.type==="file"&&f.name!==r.name),s=r.path.slice(0,r.path.lastIndexOf("/"));n.push({name:r.name,path:s,folder:s.split("/").pop()??"",ino:{path:r.path,name:r.name},types:[],files:o.length>0?o:void 0})}}),t}const eS=function(e){const t=e?`${e.name}_copy-`:void 0,{refetch:r}=YE(!1,"get-sketches-for-created-sketch-name",0,t);return{getProposedSketchName:Oe.useCallback(async()=>{if(!t)return;const{data:o}=await r();if(!o)return;const s=o.filter(l=>l.name.startsWith(t)),f=s.length+1;let i=`${t}${s.length+1}`;const v=l=>s.some(a=>a.name===l);if(v(i))for(let l=f;l<100&&(i=`${t}${l}`,!!v(i));l++)l===99&&(i=`${t}${new Date().valueOf()}`);return i},[t,r])}};let Wd=!1;const $a="compilationId";function tS(){Wd=!1}const ck=function(){const e=sessionStorage.getItem($a),t=Oe.useCallback((f,i,v="verify")=>{Wd=!0,sessionStorage.setItem($a,`${f}|${v}|${i}`)},[]),r=Oe.useCallback(()=>{sessionStorage.removeItem($a)},[]),[n,o,s]=Oe.useMemo(()=>{if(!e)return[null,null,null];const[f,i,v]=e.split("|");return[f,i,v]},[e]);return{deleteCompilationData:r,setCompilationData:t,id:n,type:o,fqbn:s}},uk="arduino",lk=["arduino:mbed_nano:nanorp2040connect"],fk=["esp32:esp32:nano_nora"],rS=function(e){const t=Oe.useRef(!1),{create:r}=ZE(),{formatMessage:n}=Rn(),{getProposedSketchName:o}=eS(e);return{send:Oe.useCallback((f,i)=>{if(!t.current){t.current=!0;const v=Mr.uniqueId();xx({message:n(hf.exampleModificationAdvisory),mode:Ed.Toast,modeOptions:{toastId:v,toastType:ag.Persistent,onUnmount:()=>{t.current=!1},toastActions:[{id:Mr.uniqueId(),label:n(hf.exampleModificationCopy),handler:async()=>{const{exampleIno:l,exampleFiles:a}=GE(f,i),y=await o();r({sketchName:y,sketchContent:l.data,files:a}),Cx(v)}}]}})}},[r,n,o])}},za="arduino:editor:open-files";var nS=(e=>(e.SKETCH_UPDATE="sketch-update",e.SKETCH_DELETE="sketch-delete",e))(nS||{});const $s=function(){var C;const e=Hp()||{},{params:{[Bd]:t}={}}=e,{value:r,sketchId:n}=iS(),o=!!t&&t!=="/"||!!n,f=(C=Qi().pathname)==null?void 0:C.split("/"),i=f==null?void 0:f.indexOf(at.ROUTING_BASE_URL),v=i!==void 0?f==null?void 0:f[i+1]:void 0,l=v&&CE.includes(v)?void 0:v,a=new URLSearchParams(window.location.search),y=a.get(fE),u=y&&gE(y)?y:void 0,g=u&&u!=="preview"?a.get(hE):void 0,I=Oe.useMemo(()=>g&&vE(g)?yE(g):void 0,[g]),d=u&&u!=="preview"?a.get(dE):void 0,A=Oe.useMemo(()=>d&&bE(d)?wE(d).filter(O=>!I||O>=I.start&&O<=I.end):void 0,[d,I]),w=a.get(pE);return{isSketchQueried:o,sketchID:o?r&&n?n:t:void 0,sketchIDIsLoading:r&&n?!n:!!(l&&l!==t),libraryID:a.get(Pd)||void 0,sourceLibraryID:a.get(mu)||void 0,customLibraryID:a.get(Ld)||void 0,exampleID:a.get(Nd)||void 0,createExampleParam:!!a.get(mc),createSketchParam:!!a.get(gc),bypassOptIn:!!a.get(uE),bypassIotRedirect:!!a.get(lE),viewMode:u,scope:I,highlight:A&&A.length>0?A:void 0,hideNumbers:typeof w=="string"&&w!=="false"}},qn="sketch.secrets",hk=function({inoFile:e,files:t,filesAreLoading:r=!0,filesContentLoaded:n=!1,isLibraryRoute:o=!1,showSketchSecretsFile:s=!1,storeEntityId:f=void 0}){const[i,v]=Oe.useState(void 0),[l,a]=Oe.useState([]),[y]=Oe.useState(!0),u=Rf(),{data:g}=er(["get-stored-open-files",f],async()=>{var L;if(!f)return null;const S=await xg(za);return((L=S==null?void 0:S[f])==null?void 0:L.items)??null},{enabled:y}),I=Wp(As());Kp("beforeunload",S=>{(I??new Set).size!==0&&S.preventDefault()});const d=Oe.useMemo(()=>e&&Ua(e,!0,!0,["Main"]),[e]),A=Oe.useMemo(()=>{if(o&&!r&&t){const S=HE(t);if(S)return Ua(S,!0,!0,["Main"])}},[t,o,r]),w=Oe.useMemo(()=>{if(n&&(s||l.includes(qn)||g!=null&&g.includes(qn)))return{fileId:qn,fileName:"Sketch Secrets",fileFullName:"Sketch Secrets",fileExtension:"secrets",Icon:qd("secrets"),tags:[],isMetadataReadOnly:!0}},[n,l,s,g]),C=Oe.useMemo(()=>t!==void 0?t.map(S=>Ua(S)).filter(S=>o?S.fileId!==(A==null?void 0:A.fileId):!0):[],[t,o,A==null?void 0:A.fileId]),O=Oe.useMemo(()=>[o?A:d,...Mr.sortBy(C,S=>S.fileName.toLowerCase()),w].filter(S=>!!S),[o,d,A,C,w]),{editorFileIdsMap:N,editorFileNamesMap:D}=Oe.useMemo(()=>O.reduce((S,L)=>({editorFileIdsMap:{...S.editorFileIdsMap,[L.fileId]:L},editorFileNamesMap:{...S.editorFileNamesMap,[L.fileFullName]:L}}),{editorFileIdsMap:{},editorFileNamesMap:{}}),[O]),{openFiles:W,selectedFile:M}=Oe.useMemo(()=>l.reduce((S,L)=>{const P=N[L];return P?{openFiles:[...S.openFiles,P],selectedFile:i===L?P:S.selectedFile}:S},{openFiles:[],selectedFile:void 0}),[N,l,i]),V=Oe.useRef(!1);Oe.useEffect(()=>{if(g===void 0||V.current)return;n&&(V.current=!0),(()=>{let P;if(g){P=g.reduce((Y,q)=>{const Z=q===qn?w:D[q];return Z?[...Y,Z.fileId]:Y},[]);const F=(d==null?void 0:d.fileId)||(A==null?void 0:A.fileId);F&&N[F]&&!P.includes(F)&&(P=[F,...P])}else P=O.map(F=>F.fileId);a(P);const $=(d==null?void 0:d.fileId)||(A==null?void 0:A.fileId);!i&&$&&$!==i&&P.includes($)&&v($)})()},[N,D,O,n,d,A==null?void 0:A.fileId,i,w,g]),Oe.useEffect(()=>{V.current&&!n&&(V.current=!1,v(void 0),a([]))},[n]);const G=Oe.useCallback(async S=>{if(!f||!y)return;const P=Array.from(new Set(S)).reduce(($,F)=>{if(F===qn)return[...$,qn];const Y=N[F];return Y?[...$,Y.fileFullName]:$},[]);await fl(za,$=>({...$,[f]:{items:P}})),u.invalidateQueries(["get-stored-open-files",f])},[f,y,u,N]);Oe.useEffect(()=>{V.current&&G(l)},[V,l,G]);const ae=Oe.useCallback((S,L)=>{n&&v(P=>{if(P===S)return P;if(S)return a($=>{if(S&&$.includes(S))return $;let F;return typeof L=="number"&&Number.isInteger(L)&&L>=0&&L<$.length?F=[...$.slice(0,L),S,...$.slice(L)]:F=[...$,S],F}),S})},[n]),pe=Oe.useCallback(S=>{n&&a(L=>!L.includes(S)||S===((d==null?void 0:d.fileId)||(A==null?void 0:A.fileId))?L:(v($=>{if(S===$){const F=L.indexOf(S);return F===0?L[1]:L[F-1]}return $}),L.filter($=>$!==S)))},[n,d==null?void 0:d.fileId,A==null?void 0:A.fileId]),H=Oe.useCallback((S,L)=>{v(P=>S===P?L:P),a(P=>{let $=P;return $=P.map(F=>S===F?L:F),$})},[]),ee=Oe.useCallback(S=>{a(L=>S.length!==L.length||!S.every(P=>L.includes(P)&&N[P])?L:S)},[N]),_=Oe.useCallback(async S=>{if(!f||!d||!(g!=null&&g.length))return;const L=`${S}.ino`;await fl(za,P=>{const $=(P==null?void 0:P[f])||{items:[d.fileFullName]};return $.items=$.items.map(F=>d.fileFullName===F?L:F),{...P,[f]:$}}),u.invalidateQueries(["get-stored-open-files",f])},[d,u,f,g==null?void 0:g.length]);return{mainInoFile:d,editorFiles:O,openFiles:W,unsavedFileIds:I,selectedFile:M,storedOpenFileNames:g,selectFile:ae,closeFile:pe,updateOpenFile:H,updateOpenFilesOrder:ee,onSketchRename:_}},dk=function(e){Oe.useEffect(()=>{if(!e)return;const t=new URL(e,fi);if(!window.open(t))throw new Error("New sketch could not be opened in new window")},[e])},pk=function(e,t,r,n,o,s,f,i,v,l,a,y){var M;const{formatMessage:u}=Rn(),{sendErrorNotification:g}=Oe.useContext(v_),I=(M=e==null?void 0:e.fileId)==null?void 0:M.replace((e==null?void 0:e.fileFullName)||"",""),d=oS(),{send:A}=rS(a),w=Oe.useCallback(V=>d&&a?(A(a,y),{bypassDefault:!0}):{bypassDefault:d},[y,a,d,A]),C=Oe.useCallback((V,G,ae)=>{const pe=[],H=(_,S)=>{const L=u(UE[_]);pe.push({id:_,message:L,type:S})},ee=t.some(_=>_.fileFullName!==`${V}.${ae}`&&_.fileName===G&&_.fileExtension===ae);return G===""&&H(nn.emptyName,"error"),ee&&H(nn.alreadyExists,"error"),lh(G)&&H(nn.exceedsLimit,"warning"),fh(G)&&H(nn.hasInvalidCharacters,"warning"),pe},[t,u]),O=Oe.useCallback((V,G)=>{const ae=G!=="",pe=V.slice(0,uh);function H(ee=-1){const _=ee===-1?pe:`${pe}-${ee}`;return t.findIndex(L=>ae?L.fileFullName.toLocaleLowerCase()===`${_}.${G}`.toLocaleLowerCase():L.fileName.toLocaleLowerCase()===_.toLocaleLowerCase())!==-1?H(ee+1):_}return H()},[t]),N=Oe.useCallback(async(V,G)=>{const ae=t.find(H=>H.fileId===V),pe=`${I}${G}.${ae==null?void 0:ae.fileExtension}`;try{f(V,pe),await v(V,pe)}catch{f(pe,V),g()}},[t,v,g,I,f]),D=Oe.useCallback(async(V,G,ae,pe)=>{const H=n==null?void 0:n.fileId;o(V);try{await i(V,G,ae,pe)}catch{H&&o(H),g()}},[i,o,n==null?void 0:n.fileId,g]),W=Oe.useCallback(async V=>{const G=r.findIndex(ae=>ae.fileId===V);try{s(V),await l(V)}catch{o(V,G)}},[s,l,r,o]);return{addFileHandler:D,renameFileHandler:N,deleteFileHandler:W,onBeforeFileAction:w,validateFileName:C,makeUniqueFileName:O}},iS=()=>{var n,o,s;const e=Qi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}/`,r=((n=e.href)==null?void 0:n.replace(t,"").split("/").length)===2;return{value:r,username:r&&((o=e.href)==null?void 0:o.replace(t,"").split("/")[0])||"",sketchId:r&&((s=e.href)==null?void 0:s.replace(t,"").split("/")[1])||""}},oS=()=>{var r;const e=Qi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${gu}`;return!!((r=e.href)!=null&&r.startsWith(t))},mk=()=>{var r;const e=Qi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${vu}`;return!!((r=e.href)!=null&&r.startsWith(t))},gk=()=>{var r,n,o;const e=Qi(),t=s=>`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${IE[s]}`;return!!((r=e.href)!=null&&r.startsWith(t("Sketch")))||!!((n=e.href)!=null&&n.startsWith(t("Example")))||!!((o=e.href)!=null&&o.startsWith(t("Library")))},sS="_container_dbaw5_1",aS="_content_dbaw5_12",Ga={container:sS,"container-with-header":"_container-with-header_dbaw5_7",content:aS},gf=un({offlineTitle:{id:"error.offlineTitle",defaultMessage:"You're offline",description:"Title for offline page"},offlineMessage:{id:"error.offlineMessage",defaultMessage:"Check your connection and try again",description:"Message for offline page"}}),cS="_container_1t0wg_1",uS="_content_1t0wg_8",lS="_title_1t0wg_17",fS="_message_1t0wg_22",Ko={container:cS,content:uS,title:lS,message:fS},hS=()=>{const{formatMessage:e}=Rn();return X.jsx("div",{className:Ko.container,children:X.jsxs("div",{className:Ko.content,children:[X.jsx(Sc,{bold:!0,className:Ko.title,children:e(gf.offlineTitle)}),X.jsx(Cc,{className:Ko.message,children:e(gf.offlineMessage)})]})})},dS=Oe.memo(hS),pS=()=>{const e=()=>{const{user:o}=Oe.useContext(Jn),{viewMode:s}=$s(),f=Wt.None;return{isReadOnly:!!s,readOnlyAvatarLink:ii()?"":at.ID_URL,user:o,headerItemId:f}},t=Oe.useCallback(e,[]);let r=!1;const n=Oe.useContext(io);return n&&(r=!!n.headerless),X.jsxs("div",{className:vs(Ga.container,{[Ga["container-with-header"]]:!r}),children:[r?null:X.jsx(uu,{}),r?null:X.jsx(js,{headerLogic:t}),X.jsx("div",{className:Ga.content,children:X.jsx(dS,{})})]})},mS=({profile:e,profileIsLoading:t,children:r})=>X.jsx(hu,{children:X.jsx(du,{children:X.jsx(lu,{profile:e,profileIsLoading:t,children:X.jsx(fu,{children:X.jsx(pu,{children:X.jsx(yc,{children:r})})})})})}),gS=e=>{const{profile:t,profileIsLoading:r}=e;return X.jsx(mS,{profile:t,profileIsLoading:r,children:X.jsx(pS,{})})},vS=()=>X.jsx(gS,{}),Kd={selectedPort:void 0,prevSelectedPort:void 0};let ps=null,ms=null;function yS(){ps=null,ms=null}function bS(){return ps=new In(Kd),ps}function oo(){let e=ps;return e||(e=bS()),e}function vk(){return oo().getValue().selectedPort}function yk(){return oo().getValue().prevSelectedPort}function bk(e){const t=oo();t.next({prevSelectedPort:t.getValue().selectedPort,selectedPort:e})}function wk(){oo().next(Kd)}function wS(){return ms=oo().pipe(Ji(t=>t.selectedPort),cg(),ei(1)),ms}function xk(){let e=ms;return e||(e=wS()),e}function xS(){ux(),qb(),Gx(),$x(),e_(),o1(),tS(),jg(),yS(),kx(),vx(),wb()}const _S=({location:e,routes:t,renderOutletContextProvider:r})=>(Oe.useEffect(()=>()=>xS(),[]),X.jsx(ME,{location:e,routes:t,renderOutletContextProvider:r})),ES=()=>X.jsx(_S,{});window.Buffer=kc.Buffer;window.process=Yf;at.MODE!=="production"&&Pi(()=>import("./index-YAZ3_vuD.js").then(e=>e.i),__vite__mapDeps([9,1,2])).then(e=>{e.default(Nf,Pf,1e3)});Pf.createRoot(document.getElementById("root")).render(X.jsx(Nf.StrictMode,{children:window.navigator.onLine?X.jsx(ES,{}):X.jsx(vS,{})}));export{MS as $,it as A,mk as B,lr as C,aC as D,Zf as E,xg as F,cE as G,xx as H,Ed as I,Xi as J,Xt as K,GS as L,WS as M,_d as N,HS as O,Fh as P,ZS as Q,XS as R,Oh as S,Rd as T,Ht as U,ck as V,St as W,FS as X,Wd as Y,US as Z,$S as _,Ts as a,nk as a$,BS as a0,Jn as a1,KS as a2,YS as a3,qS as a4,DS as a5,jS as a6,VS as a7,tx as a8,jC as a9,Sr as aA,kb as aB,Nh as aC,Dh as aD,io as aE,IE as aF,fE as aG,RS as aH,TS as aI,dE as aJ,Tg as aK,fi as aL,gk as aM,tk as aN,mu as aO,Pd as aP,rk as aQ,vb as aR,YC as aS,HE as aT,KC as aU,Vd as aV,ok as aW,vu as aX,ql as aY,ik as aZ,DC as a_,PC as aa,VC as ab,HC as ac,ii as ad,Cx as ae,hf as af,ff as ag,QC as ah,bk as ai,vk as aj,NS as ak,Uc as al,xk as am,yk as an,wk as ao,uk as ap,lk as aq,fk as ar,yS as as,Hc as at,rS as au,As as av,Hd as aw,JS as ax,Ua as ay,QS as az,LS as b,CC as b$,zC as b0,nS as b1,ZE as b2,ak as b3,eS as b4,gu as b5,mc as b6,Ld as b7,Nd as b8,TC as b9,LC as bA,JC as bB,BC as bC,qd as bD,qn as bE,XC as bF,sk as bG,ek as bH,hE as bI,pE as bJ,gc as bK,uu as bL,yC as bM,zS as bN,vC as bO,EC as bP,_C as bQ,hu as bR,du as bS,lu as bT,fu as bU,pu as bV,bC as bW,AC as bX,kC as bY,pC as bZ,mC as b_,xE as ba,a_ as bb,tC as bc,c_ as bd,u_ as be,Wt as bf,UC as bg,YE as bh,OC as bi,qC as bj,KE as bk,MC as bl,NC as bm,WC as bn,Lh as bo,Ib as bp,as as bq,iS as br,hk as bs,ZC as bt,pk as bu,$C as bv,dk as bw,GC as bx,jb as by,PS as bz,eC as c,dC as c0,SC as c1,i_ as c2,cC as c3,xn as c4,uC as c5,sC as c6,Rs as c7,oC as c8,iC as c9,lC as ca,hC as cb,Hb as cc,Vb as cd,Qx as ce,px as cf,kE as cg,xC as ch,nC as ci,FC as cj,RC as ck,IC as cl,Et as d,gC as e,Og as f,yt as g,OS as h,fC as i,Qy as j,ir as k,rC as l,Vy as m,bt as n,cu as o,Fs as p,wC as q,Xf as r,Rt as s,Sx as t,Td as u,v_ as v,$t as w,Hg as x,$s as y,oS as z};
